<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Nov 19 22:11:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-32/COLLECTIONS-32.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-32] [collections] DualTreeBidiMap does not  sort with custom Comparator</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-32</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When you supply a Comparator to the constructor of DualTreeBidiMap, the custom&lt;br/&gt;
sorting order is NOT maintained. &lt;/p&gt;

&lt;p&gt;The problem lies in the order where &lt;br/&gt;
    protected Map createMap()&lt;br/&gt;
is called: The constructors in AbstractDualBidiMap call this metod, but the&lt;br/&gt;
comparator is set &lt;b&gt;after&lt;/b&gt; calling super() in DualTreeBidiMap:&lt;/p&gt;

&lt;p&gt;//--- Class AbstractDualBidiMap---// &lt;br/&gt;
    protected AbstractDualBidiMap() &lt;/p&gt;
{
        super();
        maps[0] = createMap();
        maps[1] = createMap();
    }
&lt;p&gt;//--- Class DualTreeBidiMap ---// &lt;br/&gt;
    public DualTreeBidiMap(Comparator comparator) &lt;/p&gt;
{
        super();
        this.comparator = comparator; // &amp;lt;-- Too late, createMap already called!
    }
&lt;p&gt;    protected Map createMap() &lt;/p&gt;
{
        return new TreeMap(comparator); // &amp;lt;-- Comparator always null
    }


&lt;p&gt;Hence, DualTreeBidiMap.compatator() always returns null.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12341505">COLLECTIONS-32</key>
            <summary>[collections] DualTreeBidiMap does not  sort with custom Comparator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jonas.vanpoucke@actonomy.com">Jonas Van Poucke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jun 2004 15:47:05 +0000</created>
                <updated>Sat, 15 Mar 2008 21:35:58 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:35:58 +0000</resolved>
                                    <version>3.0</version>
                                    <fixVersion>3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12406819" author="scolebourne@joda.org" created="Sat, 12 Jun 2004 06:32:09 +0000"  >&lt;p&gt;protected Map createMap() is a lousy design &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;(&lt;/p&gt;

&lt;p&gt;I have changed CVS with updated AbstractDualBidiMap, DualHashBidiMap and &lt;br/&gt;
DualTreeBidiMap. If you have a chance to get these from CSV and test them I &lt;br/&gt;
would be grateful.&lt;/p&gt;</comment>
                            <comment id="12406820" author="jonas.vanpoucke@actonomy.com" created="Mon, 14 Jun 2004 15:01:25 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
I did a quick test for DualTreeBidiMap and everything seems to work as expected.&lt;br/&gt;
Thanks! &lt;/p&gt;

&lt;p&gt;I also included some code for the JUnit test (add the following to&lt;br/&gt;
TestDualTreeBidiMap2):&lt;/p&gt;

&lt;p&gt;//--- Additional JUnit method start ---//&lt;br/&gt;
  public void testSortOrder() throws Exception {&lt;br/&gt;
    SortedBidiMap sm = (SortedBidiMap) makeFullMap();&lt;/p&gt;

&lt;p&gt;    // Sort by the comparator used in the makeEmptyBidiMap() method&lt;br/&gt;
    List newSortedKeys = Arrays.asList(getSampleKeys());&lt;br/&gt;
    Collections.sort(newSortedKeys,&lt;br/&gt;
                     new ReverseComparator(ComparableComparator.getInstance()));&lt;br/&gt;
    newSortedKeys = Collections.unmodifiableList(newSortedKeys);&lt;/p&gt;

&lt;p&gt;    Iterator mapIter = sm.keySet().iterator();&lt;br/&gt;
    Iterator expectedIter = newSortedKeys.iterator();&lt;br/&gt;
    while (expectedIter.hasNext()) &lt;/p&gt;
{
      Object expectedKey = expectedIter.next();
      Object mapKey = mapIter.next();
      assertNotNull(&quot;key in sorted list may not be null&quot;, expectedKey);
      assertNotNull(&quot;key in map may not be null&quot;, mapKey);
      assertEquals(&quot;key from sorted list and map must be equal&quot;, expectedKey,
                   mapKey);
    }
&lt;p&gt;  }&lt;br/&gt;
//--- Additional JUnit method end---//&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 12 Jun 2004 06:32:09 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18966</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sjqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>