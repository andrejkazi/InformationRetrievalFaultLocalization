<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Nov 19 20:53:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-103/COLLECTIONS-103.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-103] SoftRefHashMap is all kinds of wonky</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-103</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Many methods in SoftRefHashMap do not conform the the java.util.Map &lt;br/&gt;
specification.  After you populate a SoftRefHashMap using its put or putAll &lt;br/&gt;
method, it transforms the values into SoftReferences.  The get() method &lt;br/&gt;
correctly re-translates the SoftReferences back into the actual object values, &lt;br/&gt;
unless they&apos;ve been garbage collected.&lt;/p&gt;

&lt;p&gt;However, the entrySet() collection view does NOT perform this reverse &lt;br/&gt;
translation; iterating over an entry set gives you Map.Entry with SoftReference &lt;br/&gt;
values.  Since the equals() and hashCode() methods rely on iterating over the &lt;br/&gt;
entry set, equals() and hashCode() are broken in SoftRefHashMap.&lt;/p&gt;

&lt;p&gt;Also, it&apos;s odd that after I put(key,value), containsValue(value) will return &lt;br/&gt;
true, yet I won&apos;t be able to find the value in the entry set.&lt;/p&gt;

&lt;p&gt;Also, invoking setValue() on a Map.Entry in the entrySet will correctly update &lt;br/&gt;
the map with a new value; however, the old value is not returned as per the Map &lt;br/&gt;
specification.&lt;/p&gt;

&lt;p&gt;Also, the values() and entrySet() collection views are not backed by the map; &lt;br/&gt;
alterations to the map are not reflected in any existing values() or entrySet() &lt;br/&gt;
collection views.&lt;/p&gt;

&lt;p&gt;Also, containsKey(Object) is wierd.  If I put(key,value), and the value is &lt;br/&gt;
subsequently garbage collected, containsValue(value) will return false, yet &lt;br/&gt;
containsKey(key) will still return true.&lt;/p&gt;

&lt;p&gt;Creating a values() collection view creates hard references to the map&apos;s &lt;br/&gt;
values, essentially ruining the point of the class (so long as the values() &lt;br/&gt;
collection view exists, the map does not function as a memory-aware cache).&lt;/p&gt;

&lt;p&gt;Finally, iterating over keySet() and entrySet() is wonky.  Mappings might have &lt;br/&gt;
been removed by the garbage collector, but the iterators will still return an &lt;br/&gt;
object for the mapping.  So keySet()&apos;s iterator will return keys for values &lt;br/&gt;
that aren&apos;t there anymore, and entrySet()&apos;s iterator will return Map.Entries &lt;br/&gt;
with keys that map to null instead of values.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12340235">COLLECTIONS-103</key>
            <summary>SoftRefHashMap is all kinds of wonky</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pjack@sfaf.org">Paul Jack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Jun 2002 13:12:09 +0000</created>
                <updated>Fri, 14 Jul 2006 05:45:38 +0000</updated>
                            <resolved>Fri, 14 Jul 2006 05:33:30 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12402657" author="pjack@sfaf.org" created="Sat, 8 Jun 2002 06:49:33 +0000"  >&lt;p&gt;Actually the values() method doesn&apos;t work at all.  It always raises a &lt;br/&gt;
ClassCastException, because the underlying map&apos;s values() collection is &lt;br/&gt;
incorrectly cast to a Set.&lt;/p&gt;</comment>
                            <comment id="12402658" author="pjack@sfaf.org" created="Tue, 13 Aug 2002 01:26:26 +0000"  >&lt;p&gt;Deprecated SoftRefHashMap in favor of new ReferenceMap.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sjb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>