<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Nov 19 22:32:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-220/COLLECTIONS-220.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-220] Serialization/Deserialization doesn&apos;t work well with empty buffers.</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-220</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;When I serialize the queue to disk an it has elements, all works ok, but when I serialize an empty queue I have some problems when I create a new object using the serialized file.&lt;/p&gt;

&lt;p&gt;When I deserialize the queue it has a &apos;buffer&apos; with size 1 (with null content), &apos;tail&apos; and &apos;head&apos; fields are 0 (they are declared transient). So, when I try to add a new object to the queue, the sentence:&lt;/p&gt;

&lt;p&gt; Object[] tmp = new Object&lt;span class=&quot;error&quot;&gt;&amp;#91;((buffer.length - 1) * 2) + 1&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;Is executed in the add() method to increase the buffer length, but the buffer remains with the same size! (buffer.length = 1 --&amp;gt; (1 - 1) * 2 + 1 = 1). So, the object is added and when the tail is going to be incremented, it is reset to 0!! &lt;/p&gt;

&lt;p&gt;    private int increment(int index) {&lt;br/&gt;
        index++;&lt;br/&gt;
        if (index &amp;gt;= buffer.length) &lt;/p&gt;
{
            index = 0;
        }
&lt;p&gt;        return index;&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;So it is impossible to add new elements after an empty queue has been serialized / deserialized.&lt;/p&gt;

&lt;p&gt;I attach a simple TestCase where this is proved. The example works when you use XMLEncoder to serialize the buffer but doesn&apos;t work if you use ObjectOutputStream or XStream.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12347430">COLLECTIONS-220</key>
            <summary>Serialization/Deserialization doesn&apos;t work well with empty buffers.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jlhuertas">Jose Luis Huertas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Aug 2006 13:53:14 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:15 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 20:08:17 +0000</resolved>
                                    <version>3.2</version>
                                                    <component>Buffer</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12461280" author="davemeikle" created="Fri, 29 Dec 2006 00:27:02 +0000"  >&lt;p&gt;Proposed Patch to fix Object Serialization Problem&lt;/p&gt;</comment>
                            <comment id="12493484" author="bayard" created="Thu, 3 May 2007 19:43:59 +0000"  >&lt;p&gt;Nice simple patch. +1. &lt;/p&gt;</comment>
                            <comment id="12579104" author="bayard" created="Sun, 16 Mar 2008 00:24:31 +0000"  >&lt;p&gt;Attaching a unit test for this, along with Dave&apos;s previously attached fix.&lt;/p&gt;</comment>
                            <comment id="12579105" author="bayard" created="Sun, 16 Mar 2008 00:25:45 +0000"  >&lt;p&gt;svn ci -m &quot;Applying a unit test for &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-220&quot; title=&quot;Serialization/Deserialization doesn&amp;#39;t work well with empty buffers.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-220&quot;&gt;&lt;del&gt;COLLECTIONS-220&lt;/del&gt;&lt;/a&gt;. AbstractTestObject is refactored to provide a utility method that serializes and then deserializes. Dave Meikle&apos;s fix for said unit test is also applied. &quot; src&lt;/p&gt;

&lt;p&gt;Sending        src/java/org/apache/commons/collections/buffer/UnboundedFifoBuffer.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/AbstractTestObject.java&lt;br/&gt;
Sending        src/test/org/apache/commons/collections/buffer/TestUnboundedFifoBuffer.java&lt;br/&gt;
Transmitting file data ...&lt;br/&gt;
Committed revision 637495.&lt;/p&gt;</comment>
                            <comment id="13638330" author="tn" created="Mon, 22 Apr 2013 19:07:49 +0000"  >&lt;p&gt;The Buffer interface/implementations have been removed, thus this fix is obsolete.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12605031">COLLECTIONS-432</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12338277" name="ASF.LICENSE.NOT.GRANTED--SerializationTest.java" size="4034" author="jlhuertas" created="Mon, 7 Aug 2006 13:53:14 +0000"/>
                            <attachment id="12348027" name="COLLECTIONS-200.patch" size="1140" author="davemeikle" created="Fri, 29 Dec 2006 00:27:02 +0000"/>
                            <attachment id="12377983" name="COLLECTIONS-220.patch" size="3531" author="bayard" created="Sun, 16 Mar 2008 00:24:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Dec 2006 00:27:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0simn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>