<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Nov 19 23:34:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-529/COLLECTIONS-529.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-529] Add removeAll(Collection&lt;E&gt; collection, Collection&lt;E&gt; remove, Comparator&lt;E&gt; comparator) and contains(Collection&lt;E&gt; collection, E object, Comparator&lt;E&gt; comparator) methods</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-529</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;this request originates from one of our project where we have implemented something similar.&lt;/p&gt;

&lt;p&gt;The Java-Interface java.util.Collection&amp;lt;E&amp;gt; specifies the two methods contains(Object o) and boolean removeAll(Collection&amp;lt;?&amp;gt; c). Both methods rely on the equals() method of the given Objects.&lt;/p&gt;

&lt;p&gt;In some cases, it&apos;s not possible to change those methods and therefore removeAll and contains cannot be used directly. &lt;/p&gt;

&lt;p&gt;E.g. if you have an class myClass with property A and B and the equals method uses both properties, but you are only interested in property B.&lt;/p&gt;

&lt;p&gt;To solve this problem, I&apos;d like to propose the following extensions of CollectionsUtils:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * Removes all elements of remove from the collection using the comparator instead of .equals()
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;E&amp;gt; Collection&amp;lt;E&amp;gt; removeAll(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;E&amp;gt; collection, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;E&amp;gt; remove, Comparator&amp;lt;E&amp;gt; comparator);
/**
 * Checks &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the given collection contains the object using the comparator instead of .equals()
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;E&amp;gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; contains(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;E&amp;gt; collection, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; E object, Comparator&amp;lt;E&amp;gt; comparator);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Both methods do basically the same as their native equivalient but use a comparator instead of equals(). &lt;/p&gt;

&lt;p&gt;This allows the injection of any required compare value:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;myClass&amp;gt; result = CollectionUtils.removeAll(base, sub, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Comparator&amp;lt;myClass&amp;gt;() {

      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(myClass o1, myClass o2) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; o1.getB() == o2.getB();
      }
    });
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;p&gt;If you think those methods are a good idea (as proposed or changed according to any rules), please give me a short feedback and I&apos;ll offer an implementation as diff patch for review.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;</description>
                <environment></environment>
        <key id="12714567">COLLECTIONS-529</key>
            <summary>Add removeAll(Collection&lt;E&gt; collection, Collection&lt;E&gt; remove, Comparator&lt;E&gt; comparator) and contains(Collection&lt;E&gt; collection, E object, Comparator&lt;E&gt; comparator) methods</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="amuthmann">Alexander Muthmann</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 May 2014 18:28:16 +0000</created>
                <updated>Fri, 27 Nov 2015 21:11:12 +0000</updated>
                            <resolved>Fri, 30 May 2014 15:45:31 +0000</resolved>
                                                    <fixVersion>4.1</fixVersion>
                                    <component>Collection</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="13999686" author="dipanjan21" created="Fri, 16 May 2014 08:20:56 +0000"  >&lt;p&gt;A &lt;tt&gt;Comparator&lt;/tt&gt; should not be used to determine the equality of two objects, its meant for ordering of elements. However, we can use an &lt;tt&gt;Equator&lt;/tt&gt; for this purpose, See &lt;a href=&quot;http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/Equator.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/Equator.html&lt;/a&gt;. This will provide the same functionality in a cleaner way.&lt;/p&gt;

&lt;p&gt;Imho, modifying your function a bit, something like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &amp;lt;E&amp;gt; Collection&amp;lt;E&amp;gt; removeAll(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; E&amp;gt; collection, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Collection&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; E&amp;gt; remove, Equator&amp;lt;? &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt; E&amp;gt; equator);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;would be quite useful.&lt;/p&gt;</comment>
                            <comment id="14001092" author="amuthmann" created="Sun, 18 May 2014 15:17:38 +0000"  >&lt;p&gt;Please find an implementation for Collections 4 attached. &lt;/p&gt;

&lt;p&gt;I hope it&apos;s no problem to have minor formatting issues, I don&apos;t have the current checkstyles for apache in mind/netbeans. &lt;/p&gt;

&lt;p&gt;Cheers&lt;/p&gt;</comment>
                            <comment id="14009528" author="dipanjan21" created="Tue, 27 May 2014 09:23:05 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I have made some improvements over &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-529&quot; title=&quot;Add removeAll(Collection&amp;lt;E&amp;gt; collection, Collection&amp;lt;E&amp;gt; remove, Comparator&amp;lt;E&amp;gt; comparator) and contains(Collection&amp;lt;E&amp;gt; collection, E object, Comparator&amp;lt;E&amp;gt; comparator) methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-529&quot;&gt;&lt;del&gt;COLLECTIONS-529&lt;/del&gt;&lt;/a&gt;.patch and attached a patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-529&quot; title=&quot;Add removeAll(Collection&amp;lt;E&amp;gt; collection, Collection&amp;lt;E&amp;gt; remove, Comparator&amp;lt;E&amp;gt; comparator) and contains(Collection&amp;lt;E&amp;gt; collection, E object, Comparator&amp;lt;E&amp;gt; comparator) methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-529&quot;&gt;&lt;del&gt;COLLECTIONS-529&lt;/del&gt;&lt;/a&gt;.patch) The changes are as follows&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The implementation of removeAll with an equator was of O(n^2), I have wrapped the remove collection in a set so as to achieve near O( n) complexity&lt;/li&gt;
	&lt;li&gt;Added a similar retainAll method&lt;/li&gt;
	&lt;li&gt;Improved formatting and some Java docs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tn&quot; class=&quot;user-hover&quot; rel=&quot;tn&quot;&gt;Thomas Neidhart&lt;/a&gt; can you also take a look at the patch. I also have one small question, the existing CollectionUtils#removeAll delegates to ListUtils#removeAll, however, the new methods have been added to CollctionUtils alone. Should they be added to ListUtils instead? However, imho they belong to CollectionUtils as input &amp;amp; output both are Collections. &lt;/p&gt;</comment>
                            <comment id="14013826" author="tn" created="Fri, 30 May 2014 15:45:31 +0000"  >&lt;p&gt;Applied latest patch with minor modifications in r1598646:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;use Iterable instead of Collection&lt;/li&gt;
	&lt;li&gt;apply final where applicable&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks for the report and patches.&lt;/p&gt;

&lt;p&gt;Regarding the addition to ListUtils: I do not think this is really necessary for now unless there is a user request for it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12714565">COLLECTIONS-528</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12645463" name="COLLECTIONS-529.patch" size="8032" author="amuthmann" created="Sun, 18 May 2014 15:17:38 +0000"/>
                            <attachment id="12646874" name="COLLECTIONS-529_1.patch" size="13435" author="dipanjan21" created="Tue, 27 May 2014 09:38:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 16 May 2014 08:20:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vnlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>393051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>