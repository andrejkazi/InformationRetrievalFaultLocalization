<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun Nov 20 00:16:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-72/COLLECTIONS-72.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-72] [collections] java.lang.ArrayIndexOutOfBoundsException</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-72</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;In BoundedFifoBuffer (line 340):&lt;/p&gt;

&lt;p&gt;                // Other elements require us to shift the subsequent elements&lt;/p&gt;

&lt;p&gt;                int i = lastReturnedIndex + 1;&lt;/p&gt;

&lt;p&gt;                while (i != end) {&lt;/p&gt;

&lt;p&gt;                    if (i &amp;gt;= maxElements) &lt;/p&gt;
{

                        elements[i - 1] = elements[0];

                        i = 0;

                    }
&lt;p&gt; else &lt;/p&gt;
{

                        elements[i - 1] = elements[i];

                        i++;

                    }

&lt;p&gt;                }&lt;br/&gt;
An AIOOBException is thrown at line 347 when trying to remove an element and i = 0.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12342893">COLLECTIONS-72</key>
            <summary>[collections] java.lang.ArrayIndexOutOfBoundsException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stijn.christiaens@vub.ac.be">Stijn Christiaens</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Feb 2006 20:03:44 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:00 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:00 +0000</resolved>
                                    <version>3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12411375" author="gudnabrsam@yahoo.com" created="Wed, 8 Feb 2006 23:21:43 +0000"  >&lt;p&gt;Looking at the code I don&apos;t immediately see how this is possible.  Can you&lt;br/&gt;
attach a testcase (simple main() harness or whatever) that reproduces the problem?&lt;/p&gt;</comment>
                            <comment id="12411376" author="stijn.christiaens@vub.ac.be" created="Wed, 8 Feb 2006 23:31:04 +0000"  >&lt;p&gt;This is the code that caused the bug. The variable breadCrumbs is a&lt;br/&gt;
BoundedFifoBuffer, but we use the Collection interface.&lt;br/&gt;
The target is to run over the buffer. If we encounter an element equal to the&lt;br/&gt;
one we have, all next elements in the buffer must be removed.&lt;br/&gt;
The Exception happens when the first element in the collection is the element we&lt;br/&gt;
have, so all the remaining ones must be removed, and only the first can stay.&lt;br/&gt;
The exception happens at the call of iter.remove()&lt;/p&gt;

&lt;p&gt;		// see if this crumb is already present, because if it is&lt;br/&gt;
		// we must remove all later ones for a natural feel&lt;br/&gt;
		// breadCrumbs is a BoundedFifoBuffer, but we use the interface Collection&lt;br/&gt;
		boolean remove = false;&lt;br/&gt;
		Iterator&amp;lt;BreadCrumb&amp;gt; iter = breadCrumbs.iterator();&lt;br/&gt;
		while (iter.hasNext()) {&lt;br/&gt;
			BreadCrumb tempCrumb = iter.next();&lt;br/&gt;
			if (remove) &lt;/p&gt;
{
				iter.remove();
			}
&lt;p&gt;			if (crumb.equals(tempCrumb)) &lt;/p&gt;
{
				remove = true;
			}
&lt;p&gt;		}&lt;/p&gt;</comment>
                            <comment id="12411377" author="gudnabrsam@yahoo.com" created="Wed, 8 Feb 2006 23:54:52 +0000"  >&lt;p&gt;Silly question: are you using org.apache.commons.collections.BoundedFifoBuffer&lt;br/&gt;
or org.apache.commons.collections.buffer.BoundedFifoBuffer?  Based on the code&lt;br/&gt;
you provided in the beginning, the former?  Maybe you should try the latter.&lt;/p&gt;</comment>
                            <comment id="12411378" author="stijn.christiaens@vub.ac.be" created="Thu, 9 Feb 2006 00:11:21 +0000"  >&lt;p&gt;Actually I am using a CircularFifoBuffer in my class, which extends the&lt;br/&gt;
...collections.buffer.BoundedFifoBuffer.&lt;/p&gt;</comment>
                            <comment id="12411379" author="stijn.christiaens@vub.ac.be" created="Thu, 9 Feb 2006 00:41:30 +0000"  >&lt;p&gt;This little class recreates the bug. It must have something to do with the&lt;br/&gt;
automatic remove (which increases the member attribute start), because if there&lt;br/&gt;
is no overflow (and thus automatic remove) the problem does not occur. I hope&lt;br/&gt;
this helps.&lt;/p&gt;

&lt;p&gt;import java.util.Collection;&lt;br/&gt;
import java.util.Iterator;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.collections.buffer.CircularFifoBuffer;&lt;/p&gt;

&lt;p&gt;public class Test {&lt;/p&gt;

&lt;p&gt;	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param args&lt;br/&gt;
	 */&lt;br/&gt;
	public static void main(String[] args) {&lt;br/&gt;
		Collection&amp;lt;String&amp;gt; breadCrumbs = new CircularFifoBuffer(4);&lt;br/&gt;
		breadCrumbs.add(&quot;1&quot;);&lt;br/&gt;
		breadCrumbs.add(&quot;2&quot;);&lt;br/&gt;
		breadCrumbs.add(&quot;3&quot;);&lt;br/&gt;
		breadCrumbs.add(&quot;4&quot;);&lt;br/&gt;
		breadCrumbs.add(&quot;5&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;		String current = &quot;2&quot;;&lt;/p&gt;

&lt;p&gt;		Iterator&amp;lt;String&amp;gt; iter = breadCrumbs.iterator();&lt;br/&gt;
		boolean remove = false;&lt;br/&gt;
		while (iter.hasNext()) {&lt;br/&gt;
			String temp = iter.next();&lt;br/&gt;
			if (remove) &lt;/p&gt;
{
				iter.remove();
			}
&lt;p&gt;			if (current.equals(temp)) &lt;/p&gt;
{
				remove = true;
			}
&lt;p&gt;		}&lt;br/&gt;
		if (!remove) &lt;/p&gt;
{
			breadCrumbs.add(current);
		}

&lt;p&gt;		iter = breadCrumbs.iterator();&lt;br/&gt;
		while (iter.hasNext()) &lt;/p&gt;
{
			String temp = iter.next();
			System.out.println(temp);
		}
&lt;p&gt;		&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;</comment>
                            <comment id="12411380" author="gudnabrsam@yahoo.com" created="Thu, 9 Feb 2006 01:03:18 +0000"  >&lt;p&gt;I can recreate w/ 3.1 but not with SVN HEAD; therefore the bug has already been&lt;br/&gt;
fixed.&lt;/p&gt;</comment>
                            <comment id="12411381" author="gudnabrsam@yahoo.com" created="Thu, 9 Feb 2006 01:05:36 +0000"  >&lt;p&gt;Looks like a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/COLLECTIONS-104&quot; title=&quot;[collections] Only last element is removeable when CircularFifoBuffer is full&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COLLECTIONS-104&quot;&gt;&lt;del&gt;COM-1844&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;This bug has been marked as a duplicate of 33071 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12411382" author="stijn.christiaens@vub.ac.be" created="Thu, 9 Feb 2006 01:08:26 +0000"  >&lt;p&gt;Ok. Thanks for the swift assistance!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 8 Feb 2006 23:21:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sjhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164636</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>