<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sun Nov 20 01:56:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-82/COLLECTIONS-82.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-82] [collections] Map.debugPrint improvements</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-82</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;debugPrint and verbosePrint in MapUtils makes a cast of the key to a string &lt;br/&gt;
(instead of calling toString() on it) which makes it impossible to use for debug &lt;br/&gt;
printin maps with keys other than strings.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12340786">COLLECTIONS-82</key>
            <summary>[collections] Map.debugPrint improvements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="max@eos.dk">Max Rydahl Andersen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Jun 2003 18:07:48 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:00 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:00 +0000</resolved>
                                    <version>2.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12404459" author="amamment" created="Sat, 14 Jun 2003 00:35:53 +0000"  >
&lt;p&gt;I&apos;m attaching three patches....&lt;/p&gt;

&lt;p&gt;1) TestMapUtilsPatch - test case to capture the error condition -&lt;br/&gt;
   ClassCastException if the map key is anything but a string.  &lt;/p&gt;

&lt;p&gt;2) MapUtilsFixPatch - makes the following changes to MapUtils:&lt;br/&gt;
   A) Refactor common code from debupPrint and verbosePrint&lt;br/&gt;
   B) Remove the cast to String&lt;br/&gt;
   C) Rename &quot;key&quot; argument to debugPrint and verbosePrint as &quot;label&quot;.  &lt;br/&gt;
      Paramter comment is updated appropriately.  &lt;/p&gt;

&lt;p&gt;3) MapUtilsBehaviourPatch - changes behaviour of debug print&lt;br/&gt;
   A) Previously, debug print showed class names for any object values in the &lt;br/&gt;
      map argument.  Any nested maps, however, although printed, were not &lt;br/&gt;
      similarly treated.  Now the &quot;debug&quot; nature of the call propagates to &lt;br/&gt;
      all nested maps - class names for values are always printed.  &lt;br/&gt;
   B) Debug print now also prints the class name of any nested map after the &lt;br/&gt;
      map itself has been expanded - again, this is in line with the behaviour&lt;br/&gt;
      of debug print with any other type of value within the outer map.   &lt;/p&gt;</comment>
                            <comment id="12404460" author="amamment" created="Sat, 14 Jun 2003 00:36:46 +0000"  >&lt;p&gt;Created an attachment (id=6796)&lt;br/&gt;
TestMapUtilsPatch - captures ClassCastException reported&lt;/p&gt;</comment>
                            <comment id="12404461" author="amamment" created="Sat, 14 Jun 2003 00:37:30 +0000"  >&lt;p&gt;Created an attachment (id=6797)&lt;br/&gt;
MapUtilsFixPatch - Fixes problem reported + refactoring internally&lt;/p&gt;</comment>
                            <comment id="12404462" author="amamment" created="Sat, 14 Jun 2003 00:38:46 +0000"  >&lt;p&gt;Created an attachment (id=6798)&lt;br/&gt;
MapUtilsBehaviourPatch - Changes behaviour of debugPrint to be propagate debug satus&lt;/p&gt;</comment>
                            <comment id="12404463" author="amamment" created="Sat, 14 Jun 2003 00:40:08 +0000"  >&lt;p&gt;Please note that only one of MapUtilsFixPatch or MapUtilsBehaviourPatch should &lt;br/&gt;
be applied.  The latter incorporates the former plus the additional changes to &lt;br/&gt;
the behaviour of debugPrint.  (Forgot to mention this in my earlier &lt;br/&gt;
comment.    &lt;/p&gt;</comment>
                            <comment id="12404464" author="scolebourne@joda.org" created="Thu, 21 Aug 2003 04:08:11 +0000"  >&lt;p&gt;I have applied the first two patches, but not the third. The third makes sense &lt;br/&gt;
(I think...) but as there is no test case I can&apos;t judge for sure. So, if you &lt;br/&gt;
want it committed, can you resubmit the last patch together with a testcase &lt;br/&gt;
against the latest CVS. Thanks&lt;/p&gt;</comment>
                            <comment id="12404465" author="amamment" created="Sat, 23 Aug 2003 04:57:35 +0000"  >&lt;p&gt;The following attachment provides a patch of MapUtils which updates the &lt;br/&gt;
behaviour of debugPrint as before, but, this time, includes test cases to test &lt;br/&gt;
the expected output.  &lt;/p&gt;

&lt;p&gt;A short summary of changes:&lt;/p&gt;

&lt;p&gt;1) debugPrintIndent method was renamed printIndent - it is used both for debug &lt;br/&gt;
printing and verbose printing.  Likewise, debugIndent field was renamed &lt;br/&gt;
indentDepth.  Further, a field INDENT_STRING was added (to capture the actual &lt;br/&gt;
WS string used for indenting) - these are refactoring/clarification changes &lt;br/&gt;
which do not affect output at all. &lt;/p&gt;

&lt;p&gt;2) The &quot;debug&quot; nature of a print is now propagated to internal maps.  &lt;br/&gt;
Previously, only the contents of the outermost map was printed in debug mode.  &lt;br/&gt;
Any contained maps were printed in verbose mode.  &lt;/p&gt;

&lt;p&gt;3) The &quot;debug&quot; behaviour of a print was extended to maps - the classnames of &lt;br/&gt;
maps are now printed as part of the output (just like the classnames of map &lt;br/&gt;
contents are printed).&lt;/p&gt;</comment>
                            <comment id="12404466" author="amamment" created="Sat, 23 Aug 2003 04:58:10 +0000"  >&lt;p&gt;Created an attachment (id=7922)&lt;br/&gt;
New Patch including test case for debug mode printing&lt;/p&gt;</comment>
                            <comment id="12404467" author="amamment" created="Sat, 23 Aug 2003 04:59:18 +0000"  >&lt;p&gt;Please note that the previous patch has been created as from the src &lt;br/&gt;
directory.  Application of the patch from that level will change both main and &lt;br/&gt;
test code to include the changes I propose.  &lt;/p&gt;</comment>
                            <comment id="12404468" author="scolebourne@joda.org" created="Sun, 24 Aug 2003 16:50:48 +0000"  >&lt;p&gt;Patch applied with some changes and additional tests. You may want to check &lt;br/&gt;
that my changes are OK for you. Thanks.&lt;/p&gt;</comment>
                            <comment id="12404469" author="amamment" created="Tue, 26 Aug 2003 01:35:11 +0000"  >&lt;p&gt;I disagree with two things in the changes made to my patch, though a bunch of &lt;br/&gt;
the others are great!   I also have a question about one of your comments.... &lt;/p&gt;

&lt;p&gt;1) Some maps are allowed to have null keys.  Since the label field, during &lt;br/&gt;
recursion, contains the key, the guard within verbosePrintInternal as &lt;br/&gt;
currently stated will not print out any entry associated with a null key.  &lt;/p&gt;

&lt;p&gt;2) I think that even when a nested map is present, the type of the map should &lt;br/&gt;
be printed out in debug mode.  &lt;/p&gt;

&lt;p&gt;3) You note that, in dealing with nested maps, it would make sense to have a &lt;br/&gt;
stack.  I can see that - otherwise, there&apos;s the possibility of infinite &lt;br/&gt;
recursion.  Is it acceptable to add an internal stack, and then add &lt;br/&gt;
synchorization to the stack within utilities of this sort?  &lt;/p&gt;</comment>
                            <comment id="12404470" author="amamment" created="Tue, 26 Aug 2003 01:37:28 +0000"  >&lt;p&gt;I will create and attach a patch for items 1 &amp;amp;  2 above, and would value input &lt;br/&gt;
on item 3.  &lt;/p&gt;</comment>
                            <comment id="12404471" author="amamment" created="Tue, 26 Aug 2003 02:16:23 +0000"  >&lt;p&gt;Created an attachment (id=7940)&lt;br/&gt;
Update to Allow printing of &quot;null&quot; label, and to output map type of nested self&lt;/p&gt;</comment>
                            <comment id="12404472" author="amamment" created="Tue, 26 Aug 2003 02:18:41 +0000"  >&lt;p&gt;The patch attached does the following:&lt;br/&gt;
1) If the label supplied to debugPrint or verbosePrint is &quot;null&quot;, then uses &lt;br/&gt;
the string &quot;null&quot; as the label.  &lt;br/&gt;
2) If the value associated with a key is a reference to the containing map, &lt;br/&gt;
then &quot;this MAP&quot; is printed when using verbosePrint, or &quot;this MAP &quot; and the &lt;br/&gt;
type of the map is printed when using debugPrint.&lt;br/&gt;
3) Tests to show the above.  &lt;/p&gt;</comment>
                            <comment id="12404473" author="amamment" created="Tue, 26 Aug 2003 02:19:48 +0000"  >&lt;p&gt;Note: &lt;/p&gt;

&lt;p&gt;For item 1 above - I essentially undid the changes that you had made to my &lt;br/&gt;
original patch as this was my intention to begin with.  Please let me know why &lt;br/&gt;
you felt it might be a problem to print &quot;null&quot; as the label if the label was &lt;br/&gt;
null?  I think I may be missing something?&lt;/p&gt;
</comment>
                            <comment id="12404474" author="amamment" created="Tue, 26 Aug 2003 02:23:37 +0000"  >&lt;p&gt;I also just checked backwards in the revision history - printing of the label &lt;br/&gt;
(key) as &quot;null&quot; was the behaviour prior to my initial change proposals for &lt;br/&gt;
debugPrint and verbosePrint.  &lt;/p&gt;</comment>
                            <comment id="12404475" author="scolebourne@joda.org" created="Tue, 26 Aug 2003 03:42:47 +0000"  >&lt;p&gt;The reason I made the label change was that it doesn&apos;t make sense to me that a &lt;br/&gt;
null label should print &apos;null =&apos; at the top level. null is generally used to &lt;br/&gt;
mean &apos;ignore this argument&apos;, hence I made null just not output the label.&lt;/p&gt;

&lt;p&gt;You are correct however that it should print the label null when nested. So I &lt;br/&gt;
have fixed this.&lt;/p&gt;

&lt;p&gt;I have also updated the &apos;this Map&apos; message to be the same as AbstractMap uses.&lt;/p&gt;

&lt;p&gt;See what you think.&lt;/p&gt;</comment>
                            <comment id="12404476" author="amamment" created="Wed, 27 Aug 2003 01:47:10 +0000"  >&lt;p&gt;Great.  &lt;/p&gt;

&lt;p&gt;I like the &quot;standardization&quot; with the output of AbstractMap.  I also like how &lt;br/&gt;
you&apos;ve handled the label.  But I&apos;m still concerned at the handling of null &lt;br/&gt;
maps.  If both label and map are null, then the call to this function &lt;br/&gt;
essentially vanishes....  Whether or not the label is printed out on the first &lt;br/&gt;
call, should the fact that the map is null at least be recorded with &lt;br/&gt;
a &quot;null&quot;?  &lt;/p&gt;

&lt;p&gt;I can provide a patch - one line change - if appropriate.  &lt;/p&gt;</comment>
                            <comment id="12404477" author="scolebourne@joda.org" created="Wed, 27 Aug 2003 07:43:17 +0000"  >&lt;p&gt;Add a patch for what you believe is sensible, it always helps.&lt;/p&gt;</comment>
                            <comment id="12404478" author="scolebourne@joda.org" created="Mon, 1 Sep 2003 00:55:44 +0000"  >&lt;p&gt;Change made to output null if map is null and null label&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12332347" name="ASF.LICENSE.NOT.GRANTED--MapUtils patch1" size="5870" author="amamment" created="Sat, 14 Jun 2003 00:37:30 +0000"/>
                            <attachment id="12332348" name="ASF.LICENSE.NOT.GRANTED--MapUtils patch2" size="6035" author="amamment" created="Sat, 14 Jun 2003 00:38:46 +0000"/>
                            <attachment id="12332346" name="ASF.LICENSE.NOT.GRANTED--TestMapUtils patch1" size="1411" author="amamment" created="Sat, 14 Jun 2003 00:36:46 +0000"/>
                            <attachment id="12332350" name="ASF.LICENSE.NOT.GRANTED--patch.txt" size="8821" author="amamment" created="Tue, 26 Aug 2003 02:16:23 +0000"/>
                            <attachment id="12332349" name="ASF.LICENSE.NOT.GRANTED--patch.txt" size="7702" author="amamment" created="Sat, 23 Aug 2003 04:58:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20740</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 14 Jun 2003 00:35:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18916</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sjfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164626</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>