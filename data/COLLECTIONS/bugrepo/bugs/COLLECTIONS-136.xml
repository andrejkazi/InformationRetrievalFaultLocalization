<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Nov 19 22:29:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/COLLECTIONS-136/COLLECTIONS-136.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[COLLECTIONS-136] [collections][PATCH] CollectionUtils.getFreq optimization</title>
                <link>https://issues.apache.org/jira/browse/COLLECTIONS-136</link>
                <project id="12310465" key="COLLECTIONS">Commons Collections</project>
                    <description>&lt;p&gt;The attached patch improves the performance of CollectionUtils.getFreq(Object,&lt;br/&gt;
Map) by using a test in place of a thrown exception.&lt;/p&gt;

&lt;p&gt;The effect of the change was measured with the class below. These are the times&lt;br/&gt;
for the Sun JDK 1.4.1_03 on Red Hat Linux 8.0&lt;/p&gt;

&lt;p&gt;pre-optimization:   122534&lt;br/&gt;
post-optimization:  104637&lt;/p&gt;

&lt;p&gt;The patch reduced the time to run the test to 85% of the original.&lt;/p&gt;

&lt;p&gt;The also patch removes a catch of NoSuchElementException which, as far as I can&lt;br/&gt;
tell, was unnecessary in the original code.&lt;/p&gt;

&lt;p&gt;This is the test class:&lt;/p&gt;

&lt;p&gt;import org.apache.commons.collections.CollectionUtils ;&lt;/p&gt;

&lt;p&gt;import java.util.*;&lt;/p&gt;

&lt;p&gt;public class CollectionUtilsTest {&lt;/p&gt;


&lt;p&gt;    Set a ;&lt;br/&gt;
    Set b ;&lt;br/&gt;
    Set c ;&lt;/p&gt;

&lt;p&gt;    Collection cols []  ;&lt;/p&gt;

&lt;p&gt;    long startMillis ;&lt;br/&gt;
    void init () {&lt;/p&gt;

&lt;p&gt;	a = new HashSet () ;&lt;br/&gt;
	for ( int i = 1 ; i &amp;lt;= 10000 ; i++ ) &lt;/p&gt;
{
	    a.add ( new Integer ( i ) ) ;
	}

&lt;p&gt;	b = new HashSet () ;&lt;br/&gt;
	for ( int i = 5001 ; i &amp;lt;= 15000 ; i++ ) &lt;/p&gt;
{
	    b.add ( new Integer ( i ) ) ;
	}

&lt;p&gt;	c = new HashSet () ;&lt;br/&gt;
	for ( int i = 10001 ; i &amp;lt;= 20000 ; i++ ) &lt;/p&gt;
{
	    c.add ( new Integer ( i ) ) ;
	}

&lt;p&gt;	cols = new Collection [] &lt;/p&gt;
{ a, b, c }
&lt;p&gt; ;&lt;/p&gt;

&lt;p&gt;	startMillis = System.currentTimeMillis () ;&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;    void run () {&lt;/p&gt;

&lt;p&gt;	for ( int i = 0 ; i &amp;lt; 3 ; i++ ) {&lt;br/&gt;
	    for ( int j = 0 ; j &amp;lt; 3 ; j++ ) &lt;/p&gt;
{
		CollectionUtils.union ( cols [ i ], cols [ j ] ) ;
		CollectionUtils.intersection ( cols [ i ], cols [ j ] ) ;
		CollectionUtils.disjunction ( cols [ i ], cols [ j ] ) ;
		CollectionUtils.subtract ( cols [ i ], cols [ j ] ) ;
	    }
&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;    }&lt;/p&gt;


&lt;p&gt;    void report () &lt;/p&gt;
{

	System.out.println ( &quot;Elapsed millis: &quot; + ( System.currentTimeMillis () -
startMillis ) ) ;
    }



&lt;p&gt;    public static void main ( String  [] arg ) &lt;/p&gt;
{

	CollectionUtilsTest t = new CollectionUtilsTest () ;

	t.init () ;
	t.run () ;
	t.report () ;

    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12340950">COLLECTIONS-136</key>
            <summary>[collections][PATCH] CollectionUtils.getFreq optimization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="janekdb@yahoo.co.uk">Janek Bogucki</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Sep 2003 03:59:07 +0000</created>
                <updated>Sat, 15 Mar 2008 21:36:02 +0000</updated>
                            <resolved>Sat, 15 Mar 2008 21:36:02 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12405016" author="janekdb@yahoo.co.uk" created="Tue, 9 Sep 2003 04:00:55 +0000"  >&lt;p&gt;Created an attachment (id=8106)&lt;br/&gt;
Patch to improve the performance of CollectionUtils.getFreq&lt;/p&gt;</comment>
                            <comment id="12405017" author="scolebourne@joda.org" created="Wed, 10 Sep 2003 04:56:13 +0000"  >&lt;p&gt;patch applied, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12332511" name="ASF.LICENSE.NOT.GRANTED--CollectionUtils-replace-try-catch-with-test.path" size="860" author="janekdb@yahoo.co.uk" created="Tue, 9 Sep 2003 04:00:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23004</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 10 Sep 2003 04:56:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18862</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sj3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>