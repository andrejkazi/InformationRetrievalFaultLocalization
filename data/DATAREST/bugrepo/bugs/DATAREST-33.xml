<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 17:20:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAREST-33/DATAREST-33.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAREST-33] Could not write JSON: Infinite recursion (StackOverflowError) when trying to do a PUT</title>
                <link>https://jira.spring.io/browse/DATAREST-33</link>
                <project id="10901" key="DATAREST">Spring Data REST</project>
                    <description>&lt;p&gt;When I do a put operation on any entity I always get a Could not write JSON: Infinite recursion (StackOverflowError) Exception. A sample entity I submit looks like this:&lt;/p&gt;

&lt;p&gt;{&lt;br/&gt;
&quot;enabled&quot;: &quot;true&quot;,&lt;br/&gt;
&quot;price&quot;: &quot;14&quot;,&lt;br/&gt;
&quot;description&quot;: &quot;None till yet, running fine, without any issues.&quot;,&lt;br/&gt;
&quot;name&quot;: &quot;gold-fast&quot;,&lt;br/&gt;
&quot;_links&quot;: [&lt;br/&gt;
{&lt;br/&gt;
&quot;rel&quot;: &quot;sla.Sla.platform&quot;,&lt;br/&gt;
&quot;href&quot;: &quot;http://192.168.125.196:8080/evoila-rest/sla/27f923f5-32fe-4b96-8c39-63e3c9c4ea94/platform&quot;&lt;br/&gt;
},&lt;br/&gt;
{&lt;br/&gt;
&quot;rel&quot;: &quot;sla.Sla.slaLevel&quot;,&lt;br/&gt;
&quot;href&quot;: &quot;http://192.168.125.196:8080/evoila-rest/sla/27f923f5-32fe-4b96-8c39-63e3c9c4ea94/slaLevel&quot;&lt;br/&gt;
},&lt;br/&gt;
]&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;And the stacktrace is appended in the attachement. &lt;/p&gt;</description>
                <environment>Java build 1.7.0_01-b08 with with Data REST 1.0.0.RC2</environment>
        <key id="44763">DATAREST-33</key>
            <summary>Could not write JSON: Infinite recursion (StackOverflowError) when trying to do a PUT</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://jira.spring.io/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="jbrisbin">Jon Brisbin</assignee>
                                    <reporter username="jhiemer">Johannes Hiemer</reporter>
                        <labels>
                            <label>PUT</label>
                            <label>StackOverflowError</label>
                    </labels>
                <created>Wed, 1 Aug 2012 23:25:28 +0000</created>
                <updated>Thu, 13 Sep 2012 12:15:26 +0000</updated>
                            <resolved>Thu, 13 Sep 2012 12:15:26 +0000</resolved>
                                    <version>1.0.0.RC2</version>
                                    <fixVersion>1.0.0.RC3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="82172" author="jhiemer" created="Thu, 2 Aug 2012 01:00:27 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
I digged into the code and found the problem. Line 860 and following: &lt;/p&gt;

&lt;p&gt;publishEvent(new BeforeSaveEvent(entity));&lt;br/&gt;
Object savedEntity = repo.save(entity);&lt;br/&gt;
publishEvent(new AfterSaveEvent(savedEntity));&lt;/p&gt;

&lt;p&gt;return negotiateResponse(request, HttpStatus.NO_CONTENT, new HttpHeaders(), (returnBody ? savedEntity : null));&lt;/p&gt;

&lt;p&gt;According to the get method it should be parsed before like this:&lt;/p&gt;

&lt;p&gt;publishEvent(new BeforeSaveEvent(entity));&lt;br/&gt;
Object savedEntity = repo.save(entity);&lt;br/&gt;
publishEvent(new AfterSaveEvent(savedEntity));&lt;/p&gt;

&lt;p&gt;Map&amp;lt;String, Object&amp;gt; entityDto = extractPropertiesLinkAware(repoMeta.rel(),&lt;br/&gt;
                                                               savedEntity,&lt;br/&gt;
                                                               repoMeta.entityMetadata(),&lt;br/&gt;
                                                               buildUri(baseUri, repository, id));&lt;/p&gt;

&lt;p&gt;return negotiateResponse(request, HttpStatus.NO_CONTENT, new HttpHeaders(), (returnBody ? entityDTO : null));&lt;/p&gt;</comment>
                            <comment id="82177" author="jbrisbin" created="Thu, 2 Aug 2012 06:17:56 +0000"  >&lt;p&gt;Good catch! &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; This is indeed a bug in not calling &lt;tt&gt;extractPropertiesLinkAware()&lt;/tt&gt; on the savedEntity. I&apos;m halfway through a change that I&apos;ll hope to be finished with today so I&apos;m hoping I can get this fix in today.&lt;/p&gt;</comment>
                            <comment id="82178" author="jhiemer" created="Thu, 2 Aug 2012 06:40:31 +0000"  >&lt;p&gt;Great Jon, thanks a lot! &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="82424" author="jhiemer" created="Fri, 10 Aug 2012 02:42:32 +0000"  >&lt;p&gt;Jon,&lt;br/&gt;
any update on this?&lt;/p&gt;</comment>
                            <comment id="82431" author="jbrisbin" created="Fri, 10 Aug 2012 06:17:31 +0000"  >&lt;p&gt;I pushed some new snapshots the other day that are the result of some discussions we&apos;ve had internally about how to represent links and results, etc... Suffice it to say that this should work now but you might have to make some changes to accommodate key name changes. To make it more consistent we decided to change &quot;_links&quot; to &quot;links&quot; and &quot;results&quot; to &quot;content&quot;. We also shuffled the paging stuff around a little bit. Other than that, things should be the same and entities should show links where they&apos;re supposed to.&lt;/p&gt;</comment>
                            <comment id="82578" author="jhiemer" created="Wed, 15 Aug 2012 08:31:20 +0000"  >&lt;p&gt;Yep, works now.&lt;/p&gt;</comment>
                            <comment id="83546" author="jbrisbin" created="Thu, 13 Sep 2012 12:15:26 +0000"  >&lt;p&gt;Should be fixed in the latest RC.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="20137" name="untitled.txt" size="116922" author="jhiemer" created="Wed, 1 Aug 2012 23:25:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 2 Aug 2012 06:17:56 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05rfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>