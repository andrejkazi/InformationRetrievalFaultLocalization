<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 17:06:52 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAREST-388/DATAREST-388.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAREST-388] Can&apos;t use controller advices if annotation based event handling is used</title>
                <link>https://jira.spring.io/browse/DATAREST-388</link>
                <project id="10901" key="DATAREST">Spring Data REST</project>
                    <description>&lt;p&gt;Spring Data REST is capturing any exceptions thrown by event handler methods and re-throwing them as &lt;tt&gt;IllegalStateException&lt;/tt&gt;. By doing this, Spring Data REST makes it very hard to adopt any exception handling mechanism offered by Spring MVC (controller advices, for example) because we cannot pinpoint which exception we would like to handle in each exception handler of the controller advice (the only exception that we can handle is &lt;tt&gt;IllegalStateException&lt;/tt&gt;).&lt;/p&gt;

&lt;p&gt;The patch in the &lt;a href=&quot;https://github.com/spring-projects/spring-data-rest/pull/151&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;pull request&lt;/a&gt; corrects this behavior. If a event handler throws a unchecked exception, than it makes sure that this very exception is thrown. Otherwise (if it is a checked exception), it resorts to the old behavior, encapsulating the checked exception in a &lt;tt&gt;IllegalStateException&lt;/tt&gt;. Without this patch, the controller advice shown below does not work.&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@ControllerAdvice&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; ExceptionHandlingControllerAdvice {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@ExceptionHandler&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;(UnauthorizedException.&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; ResponseEntity handleUnauthorizedException(UnauthorizedException exception) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    String stackTrace = ExceptionUtils.getStackTrace(exception);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;new&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; ResponseEntity(stackTrace, HttpStatus.FORBIDDEN); &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;By applying this patch, I believe Spring Data REST better fits the Spring MVC world.&lt;/p&gt;</description>
                <environment></environment>
        <key id="59903">DATAREST-388</key>
            <summary>Can&apos;t use controller advices if annotation based event handling is used</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="saulo2">Saulo Medeiros de Araujo</reporter>
                        <labels>
                            <label>pull-request-submitted</label>
                    </labels>
                <created>Fri, 26 Sep 2014 06:05:58 +0000</created>
                <updated>Tue, 27 Jan 2015 10:29:28 +0000</updated>
                            <resolved>Thu, 4 Dec 2014 10:21:32 +0000</resolved>
                                    <version>2.2 GA (Evans)</version>
                                    <fixVersion>2.1.5 (Dijkstra SR5)</fixVersion>
                    <fixVersion>2.2.2 (Evans SR2)</fixVersion>
                    <fixVersion>2.3 RC1 (Fowler)</fixVersion>
                                    <component>Repositories</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>4</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="109340" author="saulo2" created="Tue, 4 Nov 2014 06:18:13 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Any news about this pull request? Will it be accepted?&lt;/p&gt;</comment>
                            <comment id="110176" author="runarb" created="Sat, 29 Nov 2014 08:24:44 +0000"  >&lt;p&gt;I&apos;m having the same problem. Worked around it by adding an @ExceptionHandler on IllegalStateException which usually wraps an InvocationTargetException which again wraps the original exception thrown from the repository event handler. Quite ugly, but the only workaround I could think of.&lt;/p&gt;

&lt;p&gt;I would really appreciate this bug to be solved as well.&lt;/p&gt;</comment>
                            <comment id="110178" author="saulo2" created="Sat, 29 Nov 2014 08:51:48 +0000"  >&lt;p&gt;Hi Runar,&lt;/p&gt;

&lt;p&gt;I am quite disappointed with the Spring Data REST maintainers. More than a month ago I opened two or three bugs with pull requests that fixes them but the maintainers neither gave me feedback nor accepted the pull requests. Not a good way to evolve a community...&lt;/p&gt;</comment>
                            <comment id="110179" author="olivergierke" created="Sat, 29 Nov 2014 09:01:58 +0000"  >&lt;p&gt;I&apos;m sorry for that experience Saulo. We&apos;re a small team only and autumn&apos;s pretty packed with conference travel, too. We&apos;re just about to wrap up the first milestone for 2.3 but I&apos;ll definitely look more closely into the PRs you&apos;ve submitted. They usually require a bit of rework so that we&apos;re quite defensive in asking people to change stuff, especially if it&apos;s the first time they submit stuff. But still I understand that letting them stay untouched for such a long time is not a good alternative either.&lt;/p&gt;

&lt;p&gt;So thanks for your contributions. I&apos;ll promise we&apos;ll get both tickets fixed in for 2.3 RC1 and the both look like good candidates for back-ports into Evans SR2.&lt;/p&gt;</comment>
                            <comment id="110180" author="saulo2" created="Sat, 29 Nov 2014 09:06:01 +0000"  >&lt;p&gt;Nice to hear that Oliver!&lt;/p&gt;

&lt;p&gt;Please let me know if there is anything else that I can do in order for the pull requests to be accepted.&lt;/p&gt;</comment>
                            <comment id="110341" author="kakawait" created="Thu, 4 Dec 2014 03:32:27 +0000"  >&lt;p&gt;+1 eagerly awaited feature. I must used patch until fix will be ported to the official release&lt;/p&gt;</comment>
                            <comment id="110348" author="kakawait" created="Thu, 4 Dec 2014 06:34:01 +0000"  >&lt;p&gt;I will add other point:&lt;/p&gt;

&lt;p&gt;Inside the &lt;tt&gt;org.springframework.data.rest.webmvc.AbstractRepositoryRestController&lt;/tt&gt; there is some generic &lt;tt&gt;@ExceptionHandler&lt;/tt&gt;, however the default Spring &lt;tt&gt;HandlerExceptionResolver&lt;/tt&gt; will check &lt;tt&gt;@ExceptionHandler&lt;/tt&gt; then &lt;tt&gt;@ControllerAdvice&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;So if I want to override the behavior for one of these &lt;tt&gt;@ExceptionHandler&lt;/tt&gt; I should implement my own &lt;tt&gt;ExceptionResolver&lt;/tt&gt;. I think (must be tested) if you replace &lt;tt&gt;@ExceptionHandler&lt;/tt&gt; with &lt;tt&gt;@ControllerAdvice&lt;/tt&gt; it should be possible to override the Spring DATA REST &lt;tt&gt;@ControllerAdvice&lt;/tt&gt; using &lt;tt&gt;@Order&lt;/tt&gt; annotation.&lt;/p&gt;</comment>
                            <comment id="110361" author="olivergierke" created="Thu, 4 Dec 2014 10:21:32 +0000"  >&lt;p&gt;This fixed in master and the bugfix branches. For master I took the chance to clean up that rather dark area of the codebase by quite a bit which caused a few type renames and moves. Also I reduced the rather convoluted way to express interest in events for a certain type by rather expecting the first parameter of the annotated handler method. So no need to duplicate the type definition anymore for 2.3. The actual fix for the wrapped exception was solved by using Spring Framework&apos;s &lt;tt&gt;ReflectionUtils&lt;/tt&gt; which already takes care of the necessary bits and pieces.&lt;/p&gt;

&lt;p&gt;I&apos;ve back-ported the fix manually by leaving away the more advanced changes and reduce it to the plain exception related bug fix. Feel free to give the snapshots a spin.&lt;/p&gt;</comment>
                            <comment id="110382" author="runarb" created="Fri, 5 Dec 2014 01:06:07 +0000"  >&lt;p&gt;Just tried 2.2.2-BUILD-SNAPSHOT, and it works as expected. Thanks a lot!&lt;/p&gt;

&lt;p&gt;My next take was actually exact what Thibaud Lepretre brought up. Was your last reply aimed at that issue as well, Oliver, or is this a separate (yet unregistered) issue?&lt;/p&gt;</comment>
                            <comment id="110388" author="kakawait" created="Fri, 5 Dec 2014 01:37:35 +0000"  >&lt;p&gt;@Runar Botter I just created an issue &lt;a href=&quot;https://jira.spring.io/browse/DATAREST-421&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.spring.io/browse/DATAREST-421&lt;/a&gt; &amp;amp; pull request &lt;a href=&quot;https://github.com/spring-projects/spring-data-rest/pull/155&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-data-rest/pull/155&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="110399" author="runarb" created="Fri, 5 Dec 2014 04:55:11 +0000"  >&lt;p&gt;Ok, thanks, Thibaud!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 29 Nov 2014 08:24:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46056</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>olivergierke</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10684" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Pull Request URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/spring-projects/spring-data-rest/pull/151]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07vhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>45758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>