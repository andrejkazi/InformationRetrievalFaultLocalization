<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 17:12:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAREST-874/DATAREST-874.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAREST-874] spring-data-rest JPA repository, transaction issue</title>
                <link>https://jira.spring.io/browse/DATAREST-874</link>
                <project id="10901" key="DATAREST">Spring Data REST</project>
                    <description>&lt;p&gt;I have a &lt;tt&gt;@RestRepositoryResource&lt;/tt&gt; annotated Spring Data JPA repository that is handling a &lt;tt&gt;PATCH&lt;/tt&gt; to an existing object. While this &quot;transaction&quot; is running, I have additional code that that needs to lookup/find the existing, non-modified record from the database. I am trying to just use the repository instance (the same one fielding the PATH request) to do this lookup. I can&apos;t get the real underlying database record, but keep getting back the same object instance in memory that is already mutated by the &lt;tt&gt;PATCH&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Now I know this has to do w/ the underlying hibernate &lt;tt&gt;Session&lt;/tt&gt; being managed in that &lt;tt&gt;EntityManager&lt;/tt&gt; in the Spring Data JPA repository but my question is, how can I do this simple thing that I want to do?  I feel like I&apos;ve spent hours trying to figure this out just so I can code 3 minutes of business logic I need to get done. How can I use this repository to lookup the current state of the record as it exists in the DB (and not get back the already mutated instance)? &lt;/p&gt;

&lt;p&gt;So far the options are not jumping out or seem all that intuitive. Have tried &lt;tt&gt;@Transactional&lt;/tt&gt; on another wrapper method around the repo find method etc, to no avail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="69528">DATAREST-874</key>
            <summary>spring-data-rest JPA repository, transaction issue</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="bitsofinfo">bitsofinfo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2016 20:57:27 +0000</created>
                <updated>Thu, 3 Nov 2016 09:10:11 +0000</updated>
                            <resolved>Thu, 3 Nov 2016 09:10:11 +0000</resolved>
                                    <version>2.5.2 (Hopper SR2)</version>
                                                    <component>Repositories</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="133172" author="olivergierke" created="Thu, 3 Nov 2016 09:06:02 +0000"  >&lt;p&gt;The short &#8212; and probably unsatisfying &#8212; answer is: you can&apos;t. There&apos;s just no way in JPA to get &quot;the old entity state&quot; from the database once an instance has been modified. The only workaround is preventing the &lt;tt&gt;EntityManager&lt;/tt&gt; from flushing and the triggering a query that rather returns a custom DTO through a constructor expression.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="59261">DATAREST-373</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="69542">DATAREST-876</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 3 Nov 2016 09:06:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>olivergierke</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09dlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>