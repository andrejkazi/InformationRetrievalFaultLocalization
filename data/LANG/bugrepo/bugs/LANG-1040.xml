<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Wed Nov 30 23:37:07 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LANG-1040/LANG-1040.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[LANG-1040] Javadoc for NumberUtils.isNumber() are not clear enough</title>
                <link>https://issues.apache.org/jira/browse/LANG-1040</link>
                <project id="12310481" key="LANG">Commons Lang</project>
                    <description>&lt;p&gt;The Javadocs for &lt;tt&gt;NumberUtils.isNumber()&lt;/tt&gt; do not clearly define what a valid number is. The current trunk documentation states:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Checks whether the String a valid Java number.&lt;/p&gt;

&lt;p&gt;Valid numbers include hexadecimal marked with the 0x or 0X qualifier, octal numbers, scientific notation and numbers marked with a type qualifier (e.g. 123L).&lt;/p&gt;

&lt;p&gt;Non-hexadecimal strings beginning with a leading zero are treated as octal values. Thus the string 09 will return false, since 9 is not a valid octal value. However, numbers beginning with 0. are treated as decimal.&lt;/p&gt;

&lt;p&gt;Null and empty String will return false.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In other Jira issues, I&apos;ve seen people suggest that a number if valid if it can be used when assigning to a suitable Java type. E.g. &lt;tt&gt;&quot;FOO&quot;&lt;/tt&gt; is a valid number if &lt;tt&gt;long x = FOO&lt;/tt&gt; is valid (where &lt;tt&gt;long&lt;/tt&gt; might be another numeric type). If this is the case, we should state it.&lt;/p&gt;

&lt;p&gt;Alternatively, the definition could be in terms of what is accepted by &lt;tt&gt;createNumber()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Or we define exactly what we accept by specifying a grammar in the Javadocs.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12743786">LANG-1040</key>
            <summary>Javadoc for NumberUtils.isNumber() are not clear enough</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chtompki">Rob Tompkins</assignee>
                                    <reporter username="dmjones500">Duncan Jones</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Sep 2014 14:01:23 +0000</created>
                <updated>Wed, 19 Oct 2016 07:00:50 +0000</updated>
                            <resolved>Sun, 11 Sep 2016 20:38:13 +0000</resolved>
                                    <version>3.3.2</version>
                                    <fixVersion>3.5</fixVersion>
                                    <component>lang.math.*</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14245002" author="sebb@apache.org" created="Fri, 12 Dec 2014 23:48:06 +0000"  >&lt;p&gt;I think &quot;Java number&quot; probably means a number that is valid as a Java numeric literal.&lt;/p&gt;

&lt;p&gt;If this is the case, then it is trivial to determine whether a particular sequence of characters should pass the isNumber() test.&lt;br/&gt;
i.e. see if the Java compiler accepts it as a long/double/etc. initialiser.&lt;/p&gt;</comment>
                            <comment id="14249598" author="dmjones500" created="Wed, 17 Dec 2014 07:54:56 +0000"  >&lt;p&gt;If that&apos;s the expected behaviour, can you suggest a use for the method?&lt;/p&gt;
</comment>
                            <comment id="14522991" author="kinow" created="Fri, 1 May 2015 09:39:12 +0000"  >&lt;p&gt;&amp;gt; Or we define exactly what we accept by specifying a grammar in the Javadocs.&lt;/p&gt;

&lt;p&gt;I think that&apos;s probably the best scenario for users.&lt;/p&gt;

&lt;p&gt;I tried using the following code found in &lt;a href=&quot;http://stackoverflow.com/questions/1102891/how-to-check-if-a-string-is-a-numeric-type-in-java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this StackOverflow answer&lt;/a&gt; to replace isNumber, and then executed the NumberUtilsTest#testIsNumber test method:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        try {
            Double.parseDouble(str);
        } catch (NumberFormatException e) {
            return false;
        }
        return true;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the test failed with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: Expecting true for isNumber/createNumber using &quot;-0xABC123&quot; but got false and true
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using the Regex version:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        return str.matches(&quot;-?\\d+(\\.\\d+)?&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Results in:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: Expecting true for isNumber/createNumber using &quot;.12345&quot; but got false and true
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the final example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;        NumberFormat formatter = NumberFormat.getInstance();
        ParsePosition pos = new ParsePosition(0);
        formatter.parse(str, pos);
        return str.length() == pos.getIndex();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Gives:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: Expecting true for isNumber/createNumber using &quot;1234E+5&quot; but got false and true
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe we can fix this issue by enhancing the docs with a grammar and some examples of what the method can and cannot handle?&lt;/p&gt;</comment>
                            <comment id="15397398" author="chtompki" created="Thu, 28 Jul 2016 11:05:45 +0000"  >&lt;p&gt;There seems to be clear inconsistency between &lt;tt&gt;NumberUtils.createNumber(final String val)&lt;/tt&gt; and &lt;tt&gt;NumberUtils.isNumber(final String str)&lt;/tt&gt;. I agree here that the javadoc should be clarified as to what &lt;tt&gt;isNumber&lt;/tt&gt; should return, but either way it feels like there should be consistency.  Sebb, do you have any thoughts here? &lt;/p&gt;

&lt;p&gt;Specifically I was looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/LANG-1038&quot; title=&quot;NumberUtils#isNumber() returns false for &amp;quot;+2&amp;quot; and true for &amp;quot;-2&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;LANG-1038&quot;&gt;&lt;del&gt;LANG-1038&lt;/del&gt;&lt;/a&gt; which seems to point out such inconsistencies, specifically if you add&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
compareIsNumberWithCreateNumber(&lt;span class=&quot;code-quote&quot;&gt;&quot;+2&quot;&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in &lt;tt&gt;NumberUtilsTest.testIsNumber()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Regardless, I would like to try to fix this up, so I&apos;ll try to clarify while adhering as closely as possible to the java standards here.&lt;/p&gt;</comment>
                            <comment id="15397410" author="chtompki" created="Thu, 28 Jul 2016 11:20:52 +0000"  >&lt;p&gt;Knowing that there are inconsistencies between &lt;tt&gt;isNumber&lt;/tt&gt; and &lt;tt&gt;createNumber&lt;/tt&gt;, in which direction should we remediate those inconsistencies: making &lt;tt&gt;createNumber&lt;/tt&gt; more restrictive as to be inline with java standards or making &lt;tt&gt;isNumber&lt;/tt&gt; less restrictive?&lt;/p&gt;</comment>
                            <comment id="15482366" author="chtompki" created="Sun, 11 Sep 2016 20:38:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-lang/pull/186&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-lang/pull/186&lt;/a&gt; fixes this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12742030">LANG-1038</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12993216">LANG-1252</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12703833">LANG-992</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12993216">LANG-1252</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Dec 2014 23:48:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20ft3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>