<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:23:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-8683/SPR-8683.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-8683] AntPathMatcher.AntPatternComparator algorithm wrong for hierarchical matches</title>
                <link>https://jira.spring.io/browse/SPR-8683</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;AntPathMatcher.AntPatternComparator algorithm wrong for hierarchical matches,  Consider an incoming request&lt;/p&gt;

&lt;p&gt;GET /hotels/foo/rooms&lt;/p&gt;

&lt;p&gt;and two patterns that match&lt;/p&gt;

&lt;p&gt;1: /hotels/&lt;/p&gt;
{hotel}
&lt;p&gt;/**&lt;br/&gt;
2: /**&lt;/p&gt;

&lt;p&gt;Intuitively 1 is more specific than 2, so the comparator should return negative with compare(1,2) (i.e. 1&amp;lt;2).  Unfortunately this is not the case because the comparator thinks that 2 is more specific because it has fewer matching points (wildcards + brackets).&lt;/p&gt;</description>
            <key id="39721">SPR-8683</key>
            <summary>AntPathMatcher.AntPatternComparator algorithm wrong for hierarchical matches</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="bclozel">Brian Clozel</assignee>
                                    <reporter username="david_syer">Dave Syer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Sep 2011 12:06:06 +0000</created>
                <updated>Wed, 7 May 2014 11:47:34 +0000</updated>
                            <resolved>Wed, 7 May 2014 11:47:19 +0000</resolved>
                                    <version>3.0.6</version>
                                    <fixVersion>4.0 GA</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>10</watches>
                                                                <comments>
                            <comment id="70381" author="cbeams" created="Mon, 12 Sep 2011 14:06:06 +0000"  >&lt;p&gt;Juergen, note that Dave also submitted a reproduction project via &lt;a href=&quot;https://github.com/SpringSource/spring-framework-issues/pull/6&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/SpringSource/spring-framework-issues/pull/6&lt;/a&gt; and I&apos;ve since accepted it after reproducing the issue locally.&lt;/p&gt;</comment>
                            <comment id="70410" author="rstoya05-aop" created="Tue, 13 Sep 2011 07:45:55 +0000"  >&lt;p&gt;An almost identical example in &lt;a href=&quot;https://jira.spring.io/browse/SPR-8355&quot; title=&quot;AntPatternComparator prefers a less specific match when brackets occur&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-8355&quot;&gt;&lt;del&gt;SPR-8355&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="70411" author="rstoya05-aop" created="Tue, 13 Sep 2011 07:52:24 +0000"  >&lt;p&gt;The comparison favors fewer wild cards or variables as an independent priority. Or if the number of patterns is the same, the rest of the pattern (the literal parts) is taken into consideration where a greater length is preferred.  &lt;/p&gt;

&lt;p&gt;One option would be to identify patterns with nothing but wild cards and variables and consider them less specific than any pattern with a literal part.&lt;/p&gt;</comment>
                            <comment id="70492" author="erimag" created="Fri, 16 Sep 2011 04:58:01 +0000"  >&lt;p&gt;I think we are also encountering the same issue in the following example.&lt;/p&gt;

&lt;p&gt;Works as expected:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;[2011-09-16 13:52:32,387] DEBUG: org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name &apos;Spring MVC Dispatcher Servlet&apos; processing GET request for [/app/modul/order/5535/kop]&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;[2011-09-16 13:52:32,389] DEBUG: org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Matching patterns for request [/modul/order/5535/kop] are [/modul/order/{orderbookId}/{orderType}, /**/, /**]&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Works not quite as expected:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;[2011-09-16 13:56:22,923] DEBUG: org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name &apos;Spring MVC Dispatcher Servlet&apos; processing GET request for [/app/modul/order/sas/5535/kop]&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;[2011-09-16 13:56:22,924] DEBUG: org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Matching patterns for request [/modul/order/sas/5535/kop] are [/**/, /**, /modul/order/{instrumentName}/{orderbookId}/{orderType}]&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</comment>
                            <comment id="70493" author="erimag" created="Fri, 16 Sep 2011 05:19:17 +0000"  >&lt;p&gt;I think the suggestion to consider any pattern with a literal part more specific than patterns with no literal part would be a good idea (in principal at least, can&apos;t comment hypothetical edge cases...).&lt;/p&gt;</comment>
                            <comment id="70494" author="david_syer" created="Fri, 16 Sep 2011 06:14:18 +0000"  >&lt;p&gt;There&apos;s a workaround in the issues project, by the way, which worked in my case.  I think a variant of it will work for most cases, but it will be different for different use cases, depending on the competing patterns.  My workaround was to add additional &lt;tt&gt;/**&lt;/tt&gt; elements to the end of the path, so this works for the example in the description:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;1: /hotels/{hotel}/**&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;2: /**/**/**&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;It pads out &apos;2&apos; with extra countable wildcards, so the comparator algorithm thinks it is less specific based on plain counting.&lt;/p&gt;</comment>
                            <comment id="70739" author="aantono" created="Fri, 23 Sep 2011 15:03:38 +0000"  >&lt;p&gt;It would help to add a section to also take into account the number of URL path segments, to see how each of the paths compares in that regard to the actual Path.  The one with the closest segment count match should take precedence over the generic (wildcard + brackets) count.&lt;/p&gt;</comment>
                            <comment id="70741" author="wederbrand" created="Fri, 23 Sep 2011 23:54:27 +0000"  >&lt;p&gt;I think the algorithm should compare each path segment in turn. &lt;/p&gt;

&lt;p&gt;1. Check if one is null.&lt;br/&gt;
2. For each segment&lt;br/&gt;
  1. if they are equal go to next segment&lt;br/&gt;
  2. if one is a string literal and the other is a bracket the literal is better, regardless of if the other is much longer&lt;br/&gt;
  3. if they are the same until one run out of path segments the longest is choose&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="48521">SPR-10550</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="38045">SPR-8355</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="29768">SPR-6741</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="33494">SPR-7589</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        5 years, 13 weeks, 5 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 12 Sep 2011 14:06:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>bclozel</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00h7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2832</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>