<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:13:18 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-345/SPR-345.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-345] spring:message tag produces incorrect results when passwd variables contain comma</title>
                <link>https://jira.spring.io/browse/SPR-345</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;The &amp;lt;spring:message&amp;gt; tag produces incorrect results when argument&apos;s variables contain commas. How to reproduce:&lt;br/&gt;
1. Add this line to messages.properties (you may use petclinic example):&lt;br/&gt;
oops_msg = He said: &apos;&apos;&lt;/p&gt;
{0}
&lt;p&gt;&apos;&apos;&lt;/p&gt;

&lt;p&gt;2. Add this code to jsp (welcome.jsp in petclinic):&lt;br/&gt;
&amp;lt;% request.setAttribute(&quot;msg&quot;,&quot;Ooops, It does not work!&quot;); %&amp;gt;&lt;br/&gt;
&amp;lt;spring:message code=&quot;oops_msg&quot; arguments=&quot;$&lt;/p&gt;
{msg}
&lt;p&gt;&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;3. Invoke that page: &lt;br/&gt;
&lt;a href=&quot;http://localhost:8080/petclinic/welcome.htm&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8080/petclinic/welcome.htm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It produces:&lt;br/&gt;
He said: &apos;Ooops&apos;&lt;/p&gt;

&lt;p&gt;whis is incorrect. Desired message is:&lt;br/&gt;
He said: &apos;Ooops, It does not work!&apos;&lt;/p&gt;

&lt;p&gt;The problem is caused probably by incorrect order of arguments processing in MessageTag.java. Currently it looks like:&lt;br/&gt;
			String resolvedArguments =&lt;br/&gt;
				    ExpressionEvaluationUtils.evaluateString(&quot;arguments&quot;, this.arguments, pageContext);&lt;br/&gt;
				String[] argumentsArray = StringUtils.commaDelimitedListToStringArray(resolvedArguments);&lt;/p&gt;

&lt;p&gt;These lines should be rather swapped, e.g.&lt;br/&gt;
call commaDelimitedListToStringArray() and than call evaluateString() for each delimited argument. But if some expression shall contain comma (is it possible?) this approach will introduce new bug...&lt;/p&gt;
</description>
            <key id="10578">SPR-345</key>
            <summary>spring:message tag produces incorrect results when passwd variables contain comma</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="hpaluch">Henryk Paluch</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Sep 2004 19:05:57 +0000</created>
                <updated>Tue, 8 Nov 2005 07:28:40 +0000</updated>
                            <resolved>Fri, 24 Sep 2004 02:36:04 +0000</resolved>
                                    <version>1.1 final</version>
                                    <fixVersion>1.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="11080" author="hpaluch" created="Thu, 23 Sep 2004 19:10:01 +0000"  >&lt;p&gt;Addational notes:&lt;br/&gt;
1. The &apos;passwd&apos; word in title should be &apos;passed&apos;.&lt;br/&gt;
2. The &apos;&apos;&lt;/p&gt;
{0}
&lt;p&gt;&apos;&apos; are 2 single quotes (they may look like double quotes in some browsers).&lt;/p&gt;</comment>
                            <comment id="11083" author="juergen.hoeller" created="Fri, 24 Sep 2004 02:36:04 +0000"  >&lt;p&gt;Thanks for spotting this - just fixed, through splitting the String first and then evaluating each String as EL expression.&lt;/p&gt;

&lt;p&gt;Specifying multiple arguments as single EL value String with comma separation is considered as not officially supported anyway. I agree that it&apos;s more important to allow for commas as part of EL values.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="15329" author="kwalton" created="Tue, 8 Nov 2005 07:28:40 +0000"  >&lt;p&gt;I have recently run into this issue. In one of our labels it is necessary to include commas in two separate arguments:&lt;/p&gt;

&lt;p&gt;foo.label = You have &lt;/p&gt;
{0}
&lt;p&gt; foos and &lt;/p&gt;
{1}
&lt;p&gt; bars.&lt;/p&gt;

&lt;p&gt;The arguments are number formatted values like &quot;1,332,122&quot;. The only way I found to do this was to do something like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;c:set var=&quot;arg1&quot; value=&quot;1,323,123&quot; scope=&quot;request&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;c:set var=&quot;arg2&quot; value=&quot;3,123&quot; scope=&quot;request&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;spring:message code=&quot;foo.label&quot; arguments=&quot;&amp;lt;%= new Object[] &lt;/p&gt;
{request.getAttribute(&quot;arg1&quot;), request.getAttribute(&quot;arg2&quot;)}
&lt;p&gt; %&amp;gt;&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;One suggestion that would fix this would be to create a &amp;lt;spring:messageArgument/&amp;gt; tag:&lt;/p&gt;

&lt;p&gt;&amp;lt;spring:message code=&quot;foo.label&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;spring:messageArgument value=&quot;$&lt;/p&gt;
{arg1}
&lt;p&gt;&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;spring:messageArgument value=&quot;$&lt;/p&gt;
{arg2}
&lt;p&gt;&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/spring:message&amp;gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 8 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 24 Sep 2004 02:36:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04w6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28587</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>