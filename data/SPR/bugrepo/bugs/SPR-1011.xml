<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:31:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1011/SPR-1011.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1011] Static factory-method instantiated beans can break type-safety.</title>
                <link>https://jira.spring.io/browse/SPR-1011</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;1) Problem with static factory methods which create an object not of the same type (or subtype) as the factory.&lt;/p&gt;

&lt;p&gt;e.g. given a bean definition:&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;N&quot; factory-method=&quot;M&quot; class=&quot;T&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;If factory-method M returns an object whose type is NOT a subtype of class T, then Spring does not guess the type of N (based on return type of M) instead it just uses T. &lt;/p&gt;

&lt;p&gt;So when you do:&lt;/p&gt;

&lt;p&gt;applicationContext.getBeansOfType(T.class) &lt;/p&gt;

&lt;p&gt;you retrieve a Map which is NOT of runtime-type Map&amp;lt;String, ? extends T&amp;gt; but actually of type Map&amp;lt;String, ?&amp;gt; &amp;#8211; which is very surprising.&lt;/p&gt;

&lt;p&gt;I believe Spring should either:&lt;/p&gt;

&lt;p&gt;1) throw an exception when you try to create a bean using static factory-method which is EVIDENTLY not of same type/subtype as factory   class (could even check for this).&lt;/p&gt;

&lt;p&gt;or &lt;/p&gt;

&lt;p&gt;2) infer the type correctly from the return arguments&lt;/p&gt;

&lt;p&gt;or &lt;/p&gt;

&lt;p&gt;3) infer a type of &quot;Object&quot; if it (for some reason) can&apos;t infer the type.&lt;/p&gt;

&lt;p&gt;Otherwise, type safety is really broken (in  fact I only discovered this because of a ClassCastException where there should have been none!).&lt;/p&gt;






&lt;p&gt; &amp;#8211; missing exception on startup? / failure to detect type of bean N based on return type of M.&lt;br/&gt;
&lt;a href=&quot;http://forum.springframework.org/viewtopic.php?t=5997&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/viewtopic.php?t=5997&lt;/a&gt; &lt;/p&gt;</description>
            <key id="11671">SPR-1011</key>
            <summary>Static factory-method instantiated beans can break type-safety.</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="tdiggins">Tim Diggins</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Jun 2005 02:10:48 +0000</created>
                <updated>Sun, 26 Jun 2005 19:06:32 +0000</updated>
                            <resolved>Sun, 26 Jun 2005 16:28:24 +0000</resolved>
                                                    <fixVersion>1.2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13453" author="tdiggins" created="Sat, 4 Jun 2005 02:11:25 +0000"  >&lt;p&gt;oops, should have stated 1.2, 1.2.1 and (I think) 1.1.5 on this one.&lt;/p&gt;</comment>
                            <comment id="13463" author="tdiggins" created="Sat, 4 Jun 2005 10:25:33 +0000"  >&lt;p&gt;TestCase and necessary java /xml files attached&lt;/p&gt;</comment>
                            <comment id="13680" author="juergen.hoeller" created="Sun, 26 Jun 2005 16:28:23 +0000"  >&lt;p&gt;Thanks for the report! &quot;getType&quot; actually behaves correctly, but &quot;getBeanNamesOfType&quot; and &quot;getBeansOfType&quot; don&apos;t... I&apos;ve fixed this through redirecting everything through &quot;getType&quot; now, which returns null for any bean with a factory method (whether static or non-static), excluding it from matching. (We might make this more sophisticated in a future release, determining the exact return type upfront.)&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="13683" author="tdiggins" created="Sun, 26 Jun 2005 19:06:31 +0000"  >&lt;p&gt;If this &quot;future release&quot; is unspecified, then&lt;/p&gt;

&lt;p&gt;(a) it would be good to have a feature request within JIRA for it (shall I create it if you haven&apos;t?&lt;/p&gt;

&lt;p&gt;(b) it is really important to update javadocs to indicate thate getBeanNamesOfType &amp;amp; getBeansOfType, that they DON&apos;T return factory beans.&lt;/p&gt;

&lt;p&gt;Does it also mean that autowiring-by-type is NOT working for any factory-bean (cf recent question on springframework-developer list)&lt;/p&gt;


&lt;p&gt;thanks&lt;/p&gt;

&lt;p&gt;tim&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="10764" name="testStaticFactoryMethods.zip" size="1775" author="tdiggins" created="Sat, 4 Jun 2005 10:25:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 27 weeks, 4 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 26 Jun 2005 16:28:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04wrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>