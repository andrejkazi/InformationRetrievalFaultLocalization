<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:04:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1267/SPR-1267.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1267] RedirectView has broken URL encoding for query parameters</title>
                <link>https://jira.spring.io/browse/SPR-1267</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;CVS version 1.2 of RedirectView introduced the correct way of url-encoding parameters in the right character set. Unfortunately, it used the method URLEncoder.encode(String s, String enc) which exists since jdk1.4.&lt;/p&gt;

&lt;p&gt;Presumably to remain compatible with jdk1.3, cvs version 1.3 of the file removed this call, but introduced broken code that performs no function:&lt;/p&gt;

&lt;p&gt;String encodedKey = URLEncoder.encode(entry.getKey().toString());&lt;br/&gt;
// ...&lt;br/&gt;
url.append(new String(encodedKey.getBytes(this.encodingScheme), this.encodingScheme));&lt;/p&gt;

&lt;p&gt;The last line takes a lot of time but has no effect other than to throw an exception if a character is not supported by the encodingScheme, which won&apos;t happen.&lt;br/&gt;
Because: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it takes a string (which is already url-encoded, so it it only contains ASCII characters),&lt;/li&gt;
	&lt;li&gt;translates it to a byte array in the encodingScheme encoding&lt;/li&gt;
	&lt;li&gt;it then turns the byte array back into the original string, by decoding it usinjg the same encodingScheme&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This only takes CPU time, otherwise it&apos;s a no-op.&lt;/p&gt;

&lt;p&gt;IMO there are two options to fix this bug:&lt;/p&gt;

&lt;p&gt;1) Somehow (using reflection or two subclasses) implement the URLEncoder.encode function call differently for jdk1.3 and jdk1.4, where in jdk1.3 it doesn&apos;t take the encodingScheme into account.&lt;br/&gt;
Since the current implementation doesn&apos;t take the encodingScheme into account, and nobody has complained, this isn&apos;t a biggy.&lt;/p&gt;

&lt;p&gt;2) Roll your own implementation of URLEncoder.encode that takes the encoding into account&lt;/p&gt;

&lt;p&gt;I think 2) is the best option. Option 1) is kludgy; using reflection it is too slow, and using two subclasses makes the source not compile with 1.3.&lt;/p&gt;

&lt;p&gt;If a committer will promise to commit the code, I&apos;ll write an implementation of 2) including unit tests.&lt;/p&gt;

</description>
            <key id="12309">SPR-1267</key>
            <summary>RedirectView has broken URL encoding for query parameters</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="erwinb">Erwin Bolwidt</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2005 23:14:34 +0000</created>
                <updated>Tue, 19 Jun 2012 03:54:36 +0000</updated>
                            <resolved>Sat, 10 Sep 2005 07:03:49 +0000</resolved>
                                    <version>1.2.4</version>
                                    <fixVersion>1.2.5</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="14646" author="juergen.hoeller" created="Sat, 10 Sep 2005 07:03:49 +0000"  >&lt;p&gt;Thanks for pointing this out, Erwin!&lt;/p&gt;

&lt;p&gt;I&apos;ve reworked the code to use URLEncoder.encode(String, String) on JDK 1.4+, falling back to URLEncoder.encode(String) on JDK 1.3. The check does not use reflection but rather Spring&apos;s JdkVersion helper which holds a cached JDK version number as detected. Using JDK 1.4 API is actually not a problem, as Spring gets compiled with JDK 1.4+ anyway; it just needs to remain compatible with JDK 1.3 at runtime.&lt;/p&gt;

&lt;p&gt;It seems to me that it&apos;s not worth writing our own URL encoding just for supporting custom encodings on JDK 1.3...&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 16 weeks, 5 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 10 Sep 2005 07:03:49 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01a6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>