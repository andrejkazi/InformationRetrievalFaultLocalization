<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:17:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-8884/SPR-8884.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-8884] Error when parsing PMS stored procedure script.</title>
                <link>https://jira.spring.io/browse/SPR-8884</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;For testing purpose, I use EmbeddedDatabase. &lt;/p&gt;

&lt;p&gt;My database schema contains HSQLDB PMS stored procedures.&lt;/p&gt;

&lt;p&gt;like this one:&lt;/p&gt;

&lt;p&gt;-----------   content of procedure.sql (a valid HSQLDB PMS stored procedure) ---------------------&lt;br/&gt;
CREATE PROCEDURE get_customer(IN id INT, OUT firstname VARCHAR(50), OUT lastname VARCHAR(50)) &lt;br/&gt;
  READS SQL DATA&lt;br/&gt;
  BEGIN ATOMIC&lt;br/&gt;
  	SELECT first_name, last_name INTO firstname, lastname FROM customers WHERE cust_id = id;&lt;br/&gt;
  END&lt;/p&gt;


&lt;p&gt;When I create database instance:&lt;/p&gt;

&lt;p&gt;EmbeddedDatabaseBuilder builder = new EmbeddedDatabaseBuilder();&lt;br/&gt;
database = builder.setType(EmbeddedDatabaseType.HSQL).addScript(&quot;classpath:/META-INF/sql/schema.sql&quot;)&lt;br/&gt;
                .addScript(&quot;classpath:/META-INF/sql/procedure.sql&quot;)&lt;br/&gt;
                .build();&lt;/p&gt;


&lt;p&gt;I get this exception:&lt;br/&gt;
&quot;an error occurs during parsing of procedure.sql &lt;br/&gt;
           org.hsqldb.HsqlException: unexpected end of statement:  required: ; &quot;&lt;/p&gt;

&lt;p&gt;The problem is not in HSQLDB part but is located in :&lt;br/&gt;
org.springframework.jdbc.datasource.init.ResourceDatabasePopulator#splitSqlScript(String script, char delim, List&amp;lt;String&amp;gt; statements)&lt;br/&gt;
it uses &apos;;&apos; character as a delimiter for statements and therefore creates 2 statements, one for &lt;span class=&quot;error&quot;&gt;&amp;#91;CREATE PROCEDURE .... cust_id = id&amp;#93;&lt;/span&gt; and the second for &lt;span class=&quot;error&quot;&gt;&amp;#91;END&amp;#93;&lt;/span&gt;.&lt;br/&gt;
The first statement is rejected by HSQLDB because of a missing &apos;;&apos; character in BEGIN block.&lt;/p&gt;
</description>
            <key id="41096">SPR-8884</key>
            <summary>Error when parsing PMS stored procedure script.</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vmonier">Vincent MONIER</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2011 07:46:06 +0000</created>
                <updated>Thu, 8 Oct 2015 18:09:48 +0000</updated>
                            <resolved>Wed, 30 Nov 2011 21:30:29 +0000</resolved>
                                    <version>3.0.6</version>
                                                    <component>Data:JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="40695">SPR-8817</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        5 years, 4 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>sbrannen</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02mrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15399</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>