<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:07:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-12556/SPR-12556.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-12556] Inconsistent hashCode/equals implementation in AbstractPointcutAdvisor results in CGLIB-related memory leak</title>
                <link>https://jira.spring.io/browse/SPR-12556</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I suspect this is the reason for a CGLIB-related memory leak I see (resembling very close &lt;a href=&quot;https://jira.spring.io/browse/SPR-8008&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.spring.io/browse/SPR-8008&lt;/a&gt;), but the issue is so complicated I&apos;m not sure.&lt;br/&gt;
We are creating and destroying a Spring context having a JPA entity. What we see in the dump is an instance of &lt;tt&gt;AdvisedSupport&lt;/tt&gt; per context ever created, referenced by &lt;tt&gt;CglibAopProxy$ProxyCallbackFilter&lt;/tt&gt; referenced by CGLIB &lt;tt&gt;EnhancerKey&lt;/tt&gt; (having the matching number of instances). The EnhancerKeys are all different because the Filters are different and these are different because they have a &lt;tt&gt;PersistenceExceptionTranslationAdvisor&lt;/tt&gt; whose instances are compared by advice and pointcut. The advice is &lt;tt&gt;PersistenceExceptionTranslationInterceptor&lt;/tt&gt; which doesn&apos;t override equals so all instances are different. &lt;br/&gt;
Now judging by the hashmap structure, the hashkey of them all seem to be the same which further strengthens my hypothesis.&lt;br/&gt;
I couldn&apos;t tell whether the approach of &lt;tt&gt;hashCode&lt;/tt&gt; or the approach of &lt;tt&gt;equals&lt;/tt&gt; is correct but they are not consistent. If we take the approach of hashCode, all instances of AbstractPointcutAdvisor would be the same. However if &lt;tt&gt;equals&lt;/tt&gt; implementation is the correct one, the result is a memory leak because of the advisors being referenced by &lt;tt&gt;CglibAopProxy$ProxyCallbackFilter&lt;/tt&gt; instances which are strongly referenced by the CGLIB cache.&lt;/p&gt;</description>
            <key id="61275">SPR-12556</key>
            <summary>Inconsistent hashCode/equals implementation in AbstractPointcutAdvisor results in CGLIB-related memory leak</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="victorbr">Victor Bronstein</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Dec 2014 08:35:13 +0000</created>
                <updated>Sun, 21 Dec 2014 02:58:07 +0000</updated>
                            <resolved>Sun, 21 Dec 2014 02:50:20 +0000</resolved>
                                    <version>3.2.12</version>
                    <version>4.1.3</version>
                                                    <component>Core:AOP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="110856" author="victorbr" created="Sun, 21 Dec 2014 00:24:42 +0000"  >&lt;p&gt;Please close this one, a more thorough investigation proved it to be the same issue as &lt;a href=&quot;https://jira.spring.io/browse/SPR-11275&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.spring.io/browse/SPR-11275&lt;/a&gt;.&lt;br/&gt;
Sorry about the fuss!&lt;/p&gt;</comment>
                            <comment id="110857" author="sdeleuze" created="Sun, 21 Dec 2014 02:58:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=victorbr&quot; class=&quot;user-hover&quot; rel=&quot;victorbr&quot;&gt;Victor Bronstein&lt;/a&gt;, could you confirm that 3.2.12 and 4.1.3 are not affected by this issue (since &lt;a href=&quot;https://jira.spring.io/browse/SPR-11275&quot; title=&quot;@Async with cglib based proxy causes memory leak in heap&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-11275&quot;&gt;&lt;del&gt;SPR-11275&lt;/del&gt;&lt;/a&gt; has been fixed in 3.2.7 and 4.0.1) ?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="52538">SPR-11275</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="36572">SPR-8008</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        2 years, 4 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 21 Dec 2014 02:58:07 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>sdeleuze</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i082if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47111</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>