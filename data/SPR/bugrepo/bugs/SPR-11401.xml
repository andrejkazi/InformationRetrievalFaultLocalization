<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:18:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-11401/SPR-11401.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-11401] spring:url tag does not correctly encode forward slash / in path variable. Should be calling encodePathSegment</title>
                <link>https://jira.spring.io/browse/SPR-11401</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;The UrlTag advises that it will URL encode template URI variables &lt;/p&gt;

&lt;p&gt;I have a path URL in my controller&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;(value = &lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;/circuit/{id}/view&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;, method = RequestMethod.GET)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;
&lt;p&gt;And the following in my jsp to call it:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;spring&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;:url &lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;var&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;viewUrl&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;/circuit/{circuitId}/view&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;spring&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;:param &lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;name&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;circuitId&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;my/Id&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &amp;lt;/&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;spring&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;:url&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;If for example id=my/Id then the tag writes out /circuit/my/Id/view&lt;/p&gt;

&lt;p&gt;This obviously does not work as it fails to match the request mapping.&lt;/p&gt;

&lt;p&gt;It should be URL encoding the path variable to write out /circuit/my%2FId/view&lt;/p&gt;



&lt;p&gt;The problem is that / has a special meaning in paths, and thus needs to be escaped in path variables, but UrlTag.replaceUriTemplateParams calls UriUtils.encodePath(...) and ultimately at line 480 of HierarchicalUriComponents it decides that &apos;/&apos; does not need encoding&lt;/p&gt;

&lt;p&gt;	PATH {&lt;br/&gt;
			@Override&lt;br/&gt;
			public boolean isAllowed(int c) &lt;/p&gt;
{
				return isPchar(c) || &apos;/&apos; == c;
			}
&lt;p&gt;		},&lt;/p&gt;


&lt;p&gt;Looks like UrlTag should be calling UriUtils.encodePathSegment(...) instead.&lt;/p&gt;</description>
            <key id="55533">SPR-11401</key>
            <summary>spring:url tag does not correctly encode forward slash / in path variable. Should be calling encodePathSegment</summary>
                <type id="4" iconUrl="https://jira.spring.io/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="rstoya05-aop">Rossen Stoyanchev</assignee>
                                    <reporter username="dantheperson">daniel carter</reporter>
                        <labels>
                            <label>URL-Decoding</label>
                            <label>mvc</label>
                    </labels>
                <created>Thu, 6 Feb 2014 15:30:35 +0000</created>
                <updated>Tue, 24 Feb 2015 09:17:23 +0000</updated>
                            <resolved>Tue, 6 May 2014 16:47:47 +0000</resolved>
                                    <version>3.2.5</version>
                                    <fixVersion>4.1 RC1</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="98587" author="rstoya05-aop" created="Thu, 6 Feb 2014 17:40:28 +0000"  >&lt;p&gt;The challenge is that there is no way of indicating whether you want to expand the URI variable as a path or as a path segment. Obviously in your case you want it expanded as a path segment but it is also legitimate in other cases to want to expand it as a path (i.e. with the &quot;/&quot; preserved). The answer may be in using allowing some more advanced URI template syntax (see &lt;a href=&quot;https://jira.spring.io/browse/SPR-10505&quot; title=&quot;Support advanced URI Template Syntax&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-10505&quot;&gt;&lt;del&gt;SPR-10505&lt;/del&gt;&lt;/a&gt;). In the mean time we can&apos;t really change this behavior without causing regressions.&lt;/p&gt;</comment>
                            <comment id="98593" author="dantheperson" created="Thu, 6 Feb 2014 20:07:58 +0000"  >&lt;p&gt;How about a parameter to spring:url, or the individual spring:param to control the encoding that is applied during substitution?&lt;/p&gt;

&lt;p&gt;I&apos;m surprised people would want to expand the variable as a path hierarchy (preserving the /), rather than as PathVariable (and thus encoding the /).  Is that really going to be common compared to using it as a PathVariable?&lt;/p&gt;

&lt;p&gt;In the meantime i will have to encode the variable myself before passing to spring:url.  Nasty and makes traditional URL parameters much more attractive than PathVariables.  I.e. /circuit/view?id=my%2FAId &lt;/p&gt;</comment>
                            <comment id="98676" author="dantheperson" created="Sun, 9 Feb 2014 16:25:30 +0000"  >&lt;p&gt;Suggest the naming of any-such parameter be closely related to any parameter used in the solutions to &lt;a href=&quot;https://jira.spring.io/browse/SPR-11101&quot; title=&quot;URLs containing %2F (forward slash) are not mapped correctly to @RequestMapping methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-11101&quot;&gt;&lt;del&gt;SPR-11101&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="98867" author="dantheperson" created="Wed, 12 Feb 2014 14:04:23 +0000"  >&lt;p&gt;The more i think about this, the more i think that not escaping the / by default is broken.&lt;/p&gt;

&lt;p&gt;Now i&apos;m fairly new to this path variable style of URI, so i could be way off the ball, but...&lt;/p&gt;

&lt;p&gt;It seems to me that the concept of a path variable is to take one segment of a path and treat it as a variable, where path segments are the parts of the URL after the hostname delimiated by /.&lt;/p&gt;

&lt;p&gt;As / is the delimiter for path segments, it follows that path variables cannot contain the / without first escaping it.  Much like in a csv file, a row entry cannot contain a comma without first escaping it.  If a csv library wrote out a row entry without escaping commas it would be considered a bug, as it will cause parsing of the file to fail.  Likewise when the spring:url tag writes out a path variable it needs to escape any /, otherwise it would be writing out two path segments rather than one, and the server processing a request to any such URL will fail to parse it.&lt;/p&gt;

&lt;p&gt;What are the valid use-cases for a single path variable mapping to two path segments? How would parsing this ever work on the server side?  Wouldn&apos;t you rather need to have /path/to/&lt;/p&gt;
{month}/{day} rather than /path/to/{monthday} where monthday=month+&quot;/&quot;+day, in order for the server to make any sense of it? &lt;br/&gt;
&lt;br/&gt;
i.e. if you did allow when writing out the URL for a variable {monthday} to contain 10/02 and wrote that out literally without escaping it, on the server side it wouldn&apos;t match the same url pattern /path/to/{monthday}.  You would need on the server side to use /path/to/{month}
&lt;p&gt;/&lt;/p&gt;
{day}</comment>
                            <comment id="99033" author="dantheperson" created="Tue, 18 Feb 2014 19:18:33 +0000"  >&lt;p&gt;Seem RFC 6570 in &lt;a href=&quot;https://jira.spring.io/browse/SPR-10505&quot; title=&quot;Support advanced URI Template Syntax&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-10505&quot;&gt;&lt;del&gt;SPR-10505&lt;/del&gt;&lt;/a&gt; is thinking along the same lines.&lt;/p&gt;


&lt;p&gt;3.2.6.  Path Segment Expansion: &lt;/p&gt;
{/var}

&lt;p&gt;   Path segment expansion, as indicated by the slash (&quot;/&quot;) operator in&lt;br/&gt;
   Level 3 and above templates, is useful for describing URI path&lt;br/&gt;
   hierarchies.&lt;/p&gt;

&lt;p&gt;   For each defined variable in the variable-list, append &quot;/&quot; to the&lt;br/&gt;
   result string and then perform variable expansion, as defined in&lt;br/&gt;
   Section 3.2.1, with the allowed characters being those in the&lt;br/&gt;
   unreserved set.&lt;/p&gt;

&lt;p&gt;   Note that the expansion process for path segment expansion is&lt;br/&gt;
   identical to that of label expansion aside from the substitution of&lt;br/&gt;
   &quot;/&quot; instead of &quot;.&quot;.  However, unlike &quot;.&quot;, &lt;b&gt;a &quot;/&quot; is a reserved&lt;/b&gt;&lt;br/&gt;
   &lt;b&gt;character and will be pct-encoded if found in a value.&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="100259" author="dantheperson" created="Wed, 12 Mar 2014 13:16:01 +0000"  >&lt;p&gt;This is quite analogous to old style query parameters&lt;/p&gt;

&lt;p&gt;If instead of /circuit/&lt;/p&gt;
{id} i had /circuits?id={id}
&lt;p&gt;  and my id contained a &amp;amp;, the url tag (and the rest of the spring stuff) would just encode it no problems as it&apos;s a reserved character.  Nobody asks, but what if you intended for the value of the id parameter to expand out into a raw query string.&lt;br/&gt;
e.g. you set&lt;br/&gt;
id=&quot;abc&amp;amp;view=minimal&amp;amp;c=5&quot;&lt;br/&gt;
to create the URL&lt;br/&gt;
/circuits?id=abc&amp;amp;view=minimal&amp;amp;c=5&lt;br/&gt;
would just be crazy.  The expected behaviour for id=&quot;abc&amp;amp;def&quot; is&lt;br/&gt;
/circuits?id=abc%26def&lt;/p&gt;

</comment>
                            <comment id="103042" author="rstoya05-aop" created="Tue, 6 May 2014 16:47:47 +0000"  >&lt;p&gt;I&apos;ve added support for this. See the description for &lt;a href=&quot;https://github.com/spring-projects/spring-framework/commit/426b77b83405b1b4778a96e5dc7075f553d79211&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this commit&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="47444">SPR-10303</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="48391">SPR-10505</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="47447">SPR-10306</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        2 years, 33 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 6 Feb 2014 17:40:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rstoya05-aop</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07afj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42562</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>