<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:53:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2377/SPR-2377.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2377] MBeanExporter.autodetect can detect only one of several equal beans (beans whose equals method returns true at the time of autodetection)</title>
                <link>https://jira.spring.io/browse/SPR-2377</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;MBeanExporter.autodetect method uses Map.containsValue to check whether the bean has already been registered for JMX exposure. If there are several beans whose internal state happens to be the same (and their equals method returns true) at the time of autodetection then only one of them gets registered.&lt;/p&gt;

&lt;p&gt;Why this happens: Map.containsValue uses equals method to check whether the value is already in the map. Many classes (e.g. collections) implement equals method so that it does not compare the objects&apos; identity, but state. Therefore two different objects&apos; can be sometimes &apos;equal&apos; and sometimes not. MBeanExporter.autodetect may therefore erroneously think that the object is already in the beans map when there is some another object that happens to be equal.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Bean b1 is a Map that currently maps String &quot;foo&quot; to String &quot;bar&quot;.&lt;/li&gt;
	&lt;li&gt;Bean b2 is another Map that currently also maps String &quot;foo&quot; to String &quot;bar&quot;.&lt;/li&gt;
	&lt;li&gt;Both b1 and b2 are beans in my BeanFactory.&lt;/li&gt;
	&lt;li&gt;MBeanExporter.autodetect registers only one of the beans in JMX server.&lt;/li&gt;
	&lt;li&gt;They should both be registered because they are different objects and their internal mapping vary independently of each others.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Suggestion for fixing this:&lt;br/&gt;
Replace this.beans.containsValue(beanInstance) with a loop that goes through all the values in beans map and compares the values with ==. This shouldn&apos;t be much slower that current implementation as the implementation for Map.containsValue probably also uses a loop.&lt;/p&gt;</description>
            <key id="14670">SPR-2377</key>
            <summary>MBeanExporter.autodetect can detect only one of several equal beans (beans whose equals method returns true at the time of autodetection)</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="jylikrek">Juho Yli-Krekola</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Aug 2006 22:48:18 +0000</created>
                <updated>Tue, 19 Jun 2012 03:50:11 +0000</updated>
                            <resolved>Mon, 2 Oct 2006 23:09:07 +0000</resolved>
                                    <version>1.2.8</version>
                    <version>2.0 RC4</version>
                                    <fixVersion>2.0 final</fixVersion>
                    <fixVersion>1.2.9</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="20031" author="juergen.hoeller" created="Mon, 2 Oct 2006 23:07:21 +0000"  >&lt;p&gt;Thanks for pointing this out! Fixed for 2.0 final; will be backported to 1.2.9 as well.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 13 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Oct 2006 23:07:21 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01yxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11535</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>