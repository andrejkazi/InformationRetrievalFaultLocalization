<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:37:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1683/SPR-1683.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1683] AOP 2.0 afterReturning advice doesn&apos;t get invoked</title>
                <link>https://jira.spring.io/browse/SPR-1683</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;After returning advice in AOP 2.0 just doesn&apos;t work in M2. This is my configuration:&lt;/p&gt;

&lt;p&gt;    &amp;lt;aop:config&amp;gt;&lt;br/&gt;
        &amp;lt;aop:pointcut id=&quot;authenticationMethodwithString&quot; expression=&quot;execution(boolean *..SecurityManager.authenticate(..)) and args(username,java.lang.String)&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;aop:pointcut id=&quot;authenticationMethodwithInt&quot; expression=&quot;execution(boolean *..SecurityManager.authenticate(..)) and args(userId,java.lang.String)&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;aop:aspect ref=&quot;authenticationLogger&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;aop:advice pointcut-ref=&quot;authenticationMethodwithString&quot; method=&quot;logAuthenticationAttempt(java.lang.String)&quot; kind=&quot;before&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;aop:advice pointcut-ref=&quot;authenticationMethodwithInt&quot; method=&quot;logAuthenticationAttempt(int)&quot; kind=&quot;before&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;aop:advice pointcut=&quot;execution(boolean *..SecurityManager.authenticate(..))&quot; method=&quot;handleAuthenticationOutcome(boolean)&quot; kind=&quot;afterReturning&quot; returning=&quot;result&quot; arg-names=&quot;result&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/aop:aspect&amp;gt;&lt;br/&gt;
    &amp;lt;/aop:config&amp;gt;&lt;/p&gt;

&lt;p&gt;This is the target:&lt;/p&gt;

&lt;p&gt;public class SecurityManager {&lt;br/&gt;
    public boolean authenticate(String username, String password) &lt;/p&gt;
{
//        return RandomUtils.nextBoolean();
        return false;
    }

&lt;p&gt;    public boolean authenticate(int userId, String password) &lt;/p&gt;
{
        return RandomUtils.nextBoolean();
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;This is the POJO advice:&lt;/p&gt;

&lt;p&gt;public class AuthenticationLogger {&lt;br/&gt;
    private static Log log = LogFactory.getLog(AuthenticationLogger.class);&lt;/p&gt;

&lt;p&gt;    public void logAuthenticationAttempt(int userId) &lt;/p&gt;
{
        log.info(&quot;User ID [&quot; + userId + &quot;] attempts to authenticate.&quot;);
    }

&lt;p&gt;    public void logAuthenticationAttempt(String username) &lt;/p&gt;
{
        log.info(&quot;User [&quot; + username + &quot;] attempts to authenticate.&quot;);
    }

&lt;p&gt;    public void handleAuthenticationOutcome(boolean result) &lt;/p&gt;
{
        handleAuthenticationOutcome(result, &quot;someUser&quot;);
    }

&lt;p&gt;    public void handleAuthenticationOutcome(boolean result, String username) {&lt;br/&gt;
        if (!result) &lt;/p&gt;
{
            log.info(&quot;User [&quot; + username + &quot;] failed to log in.&quot;);
        }
&lt;p&gt;    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;I don&apos;t get any exception, toggling the debug option of the compiler doesn&apos;t make it better or worse. The before advice is called while the afterReturning advice just isn&apos;t called. I don&apos;t know what wrong. Incidentally the AfterReturningAdviceBindingTests doesn&apos;t work in the M2 release because of a problem with the XML file.&lt;/p&gt;</description>
            <key id="13309">SPR-1683</key>
            <summary>AOP 2.0 afterReturning advice doesn&apos;t get invoked</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="adrian.colyer">Adrian Colyer</assignee>
                                    <reporter username="devijvers">Steven Devijver</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Feb 2006 07:09:07 +0000</created>
                <updated>Tue, 19 Jun 2012 03:54:29 +0000</updated>
                            <resolved>Wed, 8 Feb 2006 01:42:19 +0000</resolved>
                                    <version>2.0 M2</version>
                                    <fixVersion>2.0 M3</fixVersion>
                                    <component>Core:AOP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16356" author="adrian.colyer" created="Tue, 7 Feb 2006 20:45:42 +0000"  >&lt;p&gt;This is failing because the returning value is a primitive type (the Class.isAssignable test that we use is inappropriate in this case). &lt;/p&gt;

&lt;p&gt;I&apos;ve fixed the issue in AspectJAfterReturningAdvice and added a test case to cover this scenario.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what trouble you see with the XML file - it has not been changed since it was first committed (until now) and has been working successfully as part of the test suite since then. Perhaps you&apos;re referring to validation errors? The schema was updated in the repository, but has not yet been updated on the web yet.&lt;/p&gt;

&lt;p&gt;Rob: we should really re-publish that now that M2 has gone out...&lt;/p&gt;</comment>
                            <comment id="16364" author="adrian.colyer" created="Wed, 8 Feb 2006 01:42:19 +0000"  >&lt;p&gt;fix committed in tree. Will be included in 2.0 M3 release, and available in HEAD as of now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 47 weeks, 1 day ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Feb 2006 20:45:42 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04vrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28519</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>