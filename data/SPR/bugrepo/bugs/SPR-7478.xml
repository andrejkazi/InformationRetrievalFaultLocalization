<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:30:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-7478/SPR-7478.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-7478] Setup of JMS message listener invoker failed for destination when upgrading from 3.0.2 to 3.0.4</title>
                <link>https://jira.spring.io/browse/SPR-7478</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Hi. I just upgraded from 3.0.2 to 3.0.4 and my log is flooded with WARN messages. The app still seems to work, but jms communication seems to take some extra time...&lt;/p&gt;

&lt;p&gt;Looking at the code in the debugger, and the error message, a session seems to be null where expected not to. Is there a workaround, or something that I have missed in my config that is exposed now in 3.0.4, or is this a bug?&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;transactionalMessageListenerContainer&quot; class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot; abstract=&quot;true&quot;&amp;gt;&lt;br/&gt;
    	&amp;lt;property name=&quot;cacheLevelName&quot; value=&quot;CACHE_NONE&quot;/&amp;gt;&lt;br/&gt;
    	&amp;lt;property name=&quot;concurrentConsumers&quot; value=&quot;1&quot;/&amp;gt;&lt;br/&gt;
    	&amp;lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;/&amp;gt;&lt;br/&gt;
    	&amp;lt;property name=&quot;sessionTransacted&quot; value=&quot;true&quot;/&amp;gt;&lt;br/&gt;
    	&amp;lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;autoStartup&quot; value=&quot;false&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;addressDefectTrackerContainer&quot; parent=&quot;transactionalMessageListenerContainer&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;concurrentConsumers&quot; value=&quot;#&lt;/p&gt;
{settings.addressDefectTracker.messageListener.concurrentConsumers}
&lt;p&gt;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;maxConcurrentConsumers&quot; value=&quot;#&lt;/p&gt;
{settings.addressDefectTracker.messageListener.maxConcurrentConsumers}
&lt;p&gt;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;idleTaskExecutionLimit&quot; value=&quot;#&lt;/p&gt;
{settings.addressDefectTracker.messageListener.idleTaskExecutionLimit}
&lt;p&gt;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;maxMessagesPerTask&quot; value=&quot;#&lt;/p&gt;
{settings.addressDefectTracker.messageListener.maxMessagesPerTask}
&lt;p&gt;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;destination&quot; ref=&quot;jmsAddressDefectTrackerChannel&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;si-jms:message-driven-channel-adapter &lt;br/&gt;
		channel=&quot;defectTrackerChannel&quot; container=&quot;addressDefectTrackerContainer&quot; acknowledge=&quot;transacted&quot; connection-factory=&quot;connectionFactory&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;2010-08-20 12:00:44,312 &lt;span class=&quot;error&quot;&gt;&amp;#91;addressDefectTrackerContainer-2&amp;#93;&lt;/span&gt; DEBUG Initiating transaction rollback on listener exception at org.springframework.jms.listener.DefaultMessageListenerContainer.rollbackOnException(AbstractPollingMessageListenerContainer.java:388)&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.springframework.jms.listener.AbstractMessageListenerContainer.commitIfNecessary(AbstractMessageListenerContainer.java:571)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:354)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:241)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1056)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1048)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:947)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
2010-08-20 12:00:49,349 &lt;span class=&quot;error&quot;&gt;&amp;#91;addressDefectTrackerContainer-2&amp;#93;&lt;/span&gt; WARN Setup of JMS message listener invoker failed for destination &apos;Queue&lt;span class=&quot;error&quot;&gt;&amp;#91;LM.UTV_maghei.ORIGO.GEODATA.ADDRESS.DEFECTTRACKER&amp;#93;&lt;/span&gt;&apos; - trying to recover. Cause: null at org.springframework.jms.listener.DefaultMessageListenerContainer.handleListenerSetupFailure(DefaultMessageListenerContainer.java:818)&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.springframework.jms.listener.AbstractMessageListenerContainer.commitIfNecessary(AbstractMessageListenerContainer.java:571)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:354)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:241)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1056)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1048)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:947)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
2010-08-20 12:00:49,350 &lt;span class=&quot;error&quot;&gt;&amp;#91;addressDefectTrackerContainer-2&amp;#93;&lt;/span&gt; INFO  Successfully refreshed JMS Connection at org.springframework.jms.listener.DefaultMessageListenerContainer.refreshConnectionUntilSuccessful(DefaultMessageListenerContainer.java:862)&lt;/p&gt;
</description>
            <key id="32837">SPR-7478</key>
            <summary>Setup of JMS message listener invoker failed for destination when upgrading from 3.0.2 to 3.0.4</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="magnus">Magnus Heino</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Aug 2010 03:23:50 +0000</created>
                <updated>Tue, 19 Jun 2012 03:44:19 +0000</updated>
                            <resolved>Wed, 1 Sep 2010 05:09:20 +0000</resolved>
                                    <version>3.0.4</version>
                                    <fixVersion>3.0.5</fixVersion>
                                    <component>JMS</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>9</watches>
                                                                <comments>
                            <comment id="56984" author="svollmer" created="Mon, 23 Aug 2010 08:27:18 +0000"  >&lt;p&gt;Same problem here after the upgrade from Spring 3.0.3 to 3.0.4. I get the same exception that Magnus has described.&lt;/p&gt;

&lt;p&gt;Environment:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Sun JDK 1.6.0_21&lt;/li&gt;
	&lt;li&gt;GlassFish 3.0.1&lt;/li&gt;
	&lt;li&gt;Open MQ 4.4u2&lt;/li&gt;
	&lt;li&gt;Red Hat Enterprise Linux&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I tried the &lt;tt&gt;&amp;lt;jms:listener-container&amp;gt;&lt;/tt&gt; element and also the &quot;manual&quot; configuration with &lt;tt&gt;DefaultMessageListenerContainer&lt;/tt&gt; and &lt;tt&gt;MessageListenerAdapter&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="57118" author="gdarmont" created="Wed, 25 Aug 2010 06:28:08 +0000"  >&lt;p&gt;I&apos;m experiencing the same problem.&lt;br/&gt;
My only move is upgrading Spring from 3.0.3 to 3.0.4&lt;/p&gt;

&lt;p&gt;I managed to get it working by replacing &lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;thead&gt;
			&lt;tr id=&quot;syntaxplugin_title&quot;&gt;
			&lt;td bgcolor=&quot;#f5f5f5&quot; style=&quot;font-family: Arial,sans-serif; color: #333; border-bottom: 1px solid #bbb; background-color: #f5f5f5 !important; font-weight: bold; line-height: 1em;&quot; &gt;
				&lt;p style=&quot;margin: 5px 10px; padding: 0;&quot;&gt;AbstractPollingMessageListenerContainer.java&lt;/p&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/thead&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;commitIfNecessary(session, message); // line 354&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;with&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;thead&gt;
			&lt;tr id=&quot;syntaxplugin_title&quot;&gt;
			&lt;td bgcolor=&quot;#f5f5f5&quot; style=&quot;font-family: Arial,sans-serif; color: #333; border-bottom: 1px solid #bbb; background-color: #f5f5f5 !important; font-weight: bold; line-height: 1em;&quot; &gt;
				&lt;p style=&quot;margin: 5px 10px; padding: 0;&quot;&gt;AbstractPollingMessageListenerContainer.java&lt;/p&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/thead&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;commitIfNecessary(sessionToUse, message); &lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;</comment>
                            <comment id="57412" author="juergen.hoeller" created="Wed, 1 Sep 2010 05:09:20 +0000"  >&lt;p&gt;Indeed, we need to pass in sessionToUse there, in order to work with non-cached Sessions as well. Fixed for 3.0.5.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="58760" author="snicoll" created="Mon, 4 Oct 2010 07:56:13 +0000"  >&lt;p&gt;We&apos;re also affected by the issue and the issue went away with 3.0.5 snapshot. Thanks.&lt;/p&gt;</comment>
                            <comment id="58829" author="youngm" created="Tue, 5 Oct 2010 15:52:32 +0000"  >&lt;p&gt;This issue appears to have come back with the 3.0.5 SNAPSHOT dated October 5th.  According to the source &quot;sessionToUse&quot; has switched back to &quot;session&quot;.&lt;/p&gt;

&lt;p&gt;Mike&lt;/p&gt;</comment>
                            <comment id="58830" author="youngm" created="Tue, 5 Oct 2010 15:52:59 +0000"  >&lt;p&gt;It was working great prior to todays build.&lt;/p&gt;</comment>
                            <comment id="58831" author="juergen.hoeller" created="Tue, 5 Oct 2010 16:11:53 +0000"  >&lt;p&gt;Hmm, are you referring to the shouldCommitAfterNoMessageReceived stuff? We are passing &quot;sessionToUse&quot; through there, with just the local variable in the shouldCommitAfterNoMessageReceived implementation named &quot;session&quot;...&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="58841" author="youngm" created="Tue, 5 Oct 2010 21:25:32 +0000"  >&lt;p&gt;Hmm....weird.  SVN looks fine in Fisheye so I&apos;ll just assume it was some build glitch.  &lt;/p&gt;

&lt;p&gt;If you download: &lt;a href=&quot;http://maven.springframework.org/snapshot/org/springframework/spring-jms/3.0.5.BUILD-SNAPSHOT/spring-jms-3.0.5.BUILD-20101005.111210-60-sources.jar&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.springframework.org/snapshot/org/springframework/spring-jms/3.0.5.BUILD-SNAPSHOT/spring-jms-3.0.5.BUILD-20101005.111210-60-sources.jar&lt;/a&gt; dated today and look at AbstractPollingMessageListenerContainer:354 you&apos;ll see the old code: commitIfNecessary(session, message);&lt;/p&gt;


&lt;p&gt;Oh well, I&apos;ll try the build tomorrow and see if it is still there or not.&lt;/p&gt;

&lt;p&gt;Mike&lt;/p&gt;</comment>
                            <comment id="58926" author="youngm" created="Thu, 7 Oct 2010 10:21:54 +0000"  >&lt;p&gt;Yesterdays build looked fine so I&apos;ll just assume this was some sort of build glitch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="33773">SPR-7650</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="33573">SPR-7603</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10020">
                    <name>Related</name>
                                            <outwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="32195">SPR-7366</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        6 years, 12 weeks ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 23 Aug 2010 08:27:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03prj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>