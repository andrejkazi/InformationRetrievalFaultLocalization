<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:21:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1792/SPR-1792.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1792] CollectionUtil.hasUniqueObject returns an invalid result for collections with a null as first element</title>
                <link>https://jira.spring.io/browse/SPR-1792</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Consider the following collections&lt;/p&gt;


&lt;p&gt;Collection pass = &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;hello&amp;quot;, null&amp;#93;&lt;/span&gt;&lt;br/&gt;
Collection fail = &lt;span class=&quot;error&quot;&gt;&amp;#91;null, &amp;quot;hello&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;If CollectionUtil.hasUniqueCollection(pass) is run, it will return true&lt;br/&gt;
If CollectionUtil.hasUniqueCollection(fail) is run, it will return false&lt;/p&gt;

&lt;p&gt;We routinely use queryForString/int in JdbcDaoSupport to return a single row, and take different action if an incorrectResultSizeException is thrown.  &lt;/p&gt;

&lt;p&gt;This could possibly be fixed by first checking to see if elem == candidate before checking if candidate is null&lt;/p&gt;






&lt;p&gt;&amp;lt;pre&amp;gt;&lt;br/&gt;
import java.util.ArrayList;&lt;br/&gt;
import java.util.Collection;&lt;br/&gt;
import java.util.Iterator;&lt;/p&gt;

&lt;p&gt;import org.springframework.util.CollectionUtils;&lt;/p&gt;

&lt;p&gt;import junit.framework.TestCase;&lt;/p&gt;

&lt;p&gt;public class CollectionTest extends TestCase&lt;br/&gt;
{&lt;/p&gt;

&lt;p&gt;	public void testSpring()&lt;/p&gt;
	{
		ArrayList pass = new ArrayList();
		ArrayList fail = new ArrayList();

		pass.add(&quot;hello&quot;);
		pass.add(null);

		fail.add(null);
		fail.add(&quot;hello&quot;);

		assertFalse(CollectionUtils.hasUniqueObject(pass));
		assertFalse(CollectionUtils.hasUniqueObject(fail));

	}

&lt;p&gt;	public void testLocal()&lt;/p&gt;
	{
		ArrayList pass = new ArrayList();
		ArrayList fail = new ArrayList();

		pass.add(&quot;hello&quot;);
		pass.add(null);

		fail.add(null);
		fail.add(&quot;hello&quot;);

		assertFalse(hasUniqueObject(pass));
		assertFalse(hasUniqueObject(fail));

	}

&lt;p&gt;	private static boolean hasUniqueObject(Collection coll)&lt;br/&gt;
	{&lt;br/&gt;
		if (coll.isEmpty())&lt;/p&gt;
		{
			return false;
		}
&lt;p&gt;		Object candidate = null;&lt;br/&gt;
		for (Iterator it = coll.iterator(); it.hasNext()&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
		{&lt;br/&gt;
			Object elem = it.next();&lt;/p&gt;

&lt;p&gt;			if (candidate ==null &amp;amp;&amp;amp; elem == null)&lt;/p&gt;
			{
				return false;
			}&lt;br/&gt;
			if (candidate == null)&lt;br/&gt;
			{
				candidate = elem;
			}&lt;br/&gt;
			else if (candidate != elem)&lt;br/&gt;
			{				return false;			}
&lt;p&gt;		}&lt;br/&gt;
		return true;&lt;br/&gt;
	}&lt;br/&gt;
}&lt;/p&gt;


&lt;p&gt;&amp;lt;/pre&amp;gt;&lt;/p&gt;</description>
            <key id="13543">SPR-1792</key>
            <summary>CollectionUtil.hasUniqueObject returns an invalid result for collections with a null as first element</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="jshomphe">Joe Shomphe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Mar 2006 09:24:12 +0000</created>
                <updated>Tue, 19 Jun 2012 03:54:30 +0000</updated>
                            <resolved>Mon, 20 Mar 2006 19:31:48 +0000</resolved>
                                    <version>2.0 M3</version>
                                    <fixVersion>1.2.8</fixVersion>
                    <fixVersion>2.0 M4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16833" author="jshomphe" created="Wed, 15 Mar 2006 09:24:59 +0000"  >&lt;p&gt;Thanks to Mike Do @ ibaset for discovering!&lt;/p&gt;</comment>
                            <comment id="16877" author="juergen.hoeller" created="Mon, 20 Mar 2006 18:39:50 +0000"  >&lt;p&gt;Thanks for pointing this out! We&apos;ll fix this for both 2.0 M4 and 1.2.8.&lt;/p&gt;

&lt;p&gt;I&apos;ve lowered the priority to &quot;Major&quot;, though, since it is not a blocker for the overall framework. For the time being, it is easy enough to work around this issue: through using the generic JdbcTemplate methods instead of the specific queryForString/int ones.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 41 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 20 Mar 2006 18:39:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04viv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>