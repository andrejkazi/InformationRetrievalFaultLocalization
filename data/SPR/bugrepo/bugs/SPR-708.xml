<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:12:41 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-708/SPR-708.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-708] ClassCastException with MethodMapTransactionAttributeSource</title>
                <link>https://jira.spring.io/browse/SPR-708</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Here is my bean (adapted from an example in Spring in Action):&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;transactionAttributeSource&quot; class=&quot;org.springframework.transaction.interceptor.MethodMapTransactionAttributeSource&quot;&amp;gt;&lt;br/&gt;
&amp;lt;property name=&quot;methodMap&quot;&amp;gt;&lt;br/&gt;
&amp;lt;map&amp;gt;&lt;br/&gt;
&amp;lt;entry key=&quot;mypackage.MyService.*&quot;&amp;gt;&amp;lt;value&amp;gt;PROPAGATION_REQUIRED&amp;lt;/value&amp;gt;&amp;lt;/entry&amp;gt;&lt;br/&gt;
&amp;lt;/map&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;I am always getting the exception:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.springframework.beans.TypeMismatchException: Failed to convert property value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.util.LinkedHashMap&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;java.util.Map&amp;#93;&lt;/span&gt; for property &apos;methodMap&apos;; nested exception is java.lang.ClassCastException: java.lang.String&lt;br/&gt;
java.lang.ClassCastException: java.lang.String&lt;br/&gt;
        at org.springframework.transaction.interceptor.MethodMapTransactionAttributeSource.setMethodMap(MethodMapTransactionAttributeSource.java:58)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Line 58 of MethodMapTransactionAttributeSource.java says:&lt;/p&gt;

&lt;p&gt;TransactionAttribute attr = (TransactionAttribute) methodMap.get(name);&lt;/p&gt;

&lt;p&gt;No wonder the Exception happens, but why is there an instance of TransactionAttribute expected? Since there is no official documentation of MethodMapTransactionAttributeSource available and it is not used in the Spring samples, I consider this class somewhat untested and this particular problem a bug.&lt;/p&gt;</description>
            <key id="11140">SPR-708</key>
            <summary>ClassCastException with MethodMapTransactionAttributeSource</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="goonie">Andreas Schildbach</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Feb 2005 04:31:42 +0000</created>
                <updated>Sun, 13 Feb 2005 18:03:40 +0000</updated>
                            <resolved>Sun, 13 Feb 2005 08:42:12 +0000</resolved>
                                    <version>1.1.4</version>
                                    <fixVersion>1.1.5</fixVersion>
                                    <component>Transaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12295" author="juergen.hoeller" created="Sun, 13 Feb 2005 08:42:12 +0000"  >&lt;p&gt;MethodMapTransactionAttributeSource&apos;s javadoc for the &quot;setMethodMap&quot; method clearly states that the map values are supposed to be TransactionAttribute instances.&lt;/p&gt;

&lt;p&gt;Nevertheless, I&apos;ve added support for String values that will automatically get converted to corresponding TransactionAttribute instances (through TransactionAttributeEditor).&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="12296" author="goonie" created="Sun, 13 Feb 2005 09:38:24 +0000"  >&lt;p&gt;This (String values) is exactly what I was trying. How does this mechanism work?&lt;/p&gt;</comment>
                            <comment id="12297" author="juergen.hoeller" created="Sun, 13 Feb 2005 18:03:40 +0000"  >&lt;p&gt;Well, it&apos;s a JavaBeans PropertyEditor called TransactionAttributeEditor, residing in the same package. This will automatically kick in for a strongly-typed bean property.&lt;/p&gt;

&lt;p&gt;In MethodMapTransactionAttributeSource and also NameMatchTransactionAttributeSource, the setter accepts a weakly typed Map, therefore the editor does not kick automatically.&lt;/p&gt;

&lt;p&gt;I&apos;ve simply added an explicit check that converts Strings to TransactionAttribute instances, through programmatically using a TransactionAttributeEditor.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 46 weeks, 4 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 13 Feb 2005 08:42:12 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04xk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>