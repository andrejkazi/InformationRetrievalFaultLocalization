<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:30:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2163/SPR-2163.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2163] Proxy for SimpleURLHandlerMapping does not handle mappings properly</title>
                <link>https://jira.spring.io/browse/SPR-2163</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I am trying to use DebugInterceptor for the whole of my web application.  To achieve that I have created proxies using DefaultAdvisorAutoProxyCreator and am applying a DefaultPointcutAdvisor with pointcut as TruePointcut and advice as DebugInterceptor.  Here is how my Spring configuration file looks like:&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&amp;gt;&lt;br/&gt;
&amp;lt;beans&amp;gt;&lt;br/&gt;
	&amp;lt;bean class=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;proxyTargetClass&quot; value=&quot;true&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;defaultAdvisor&quot; class=&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;constructor-arg type=&quot;org.springframework.aop.Pointcut&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;!-- True pointcut as pointcut --&amp;gt;&lt;br/&gt;
			&amp;lt;ref local=&quot;truePointcut&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/constructor-arg&amp;gt;&lt;br/&gt;
		&amp;lt;constructor-arg type=&quot;org.aopalliance.aop.Advice&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;!-- Define the advisor as the DebugInterceptor --&amp;gt;&lt;br/&gt;
			&amp;lt;ref local=&quot;debugInterceptor&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/constructor-arg&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;truePointcut&quot; class=&quot;org.springframework.aop.TruePointcut&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;debugInterceptor&quot; class=&quot;org.springframework.aop.interceptor.DebugInterceptor&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/beans&amp;gt;&lt;br/&gt;
===&lt;/p&gt;

&lt;p&gt;The application deploys with no errors and application works well without the proxy creator and advisor in place.  It is when I introduce the above configuration, the handler cannot find mapping for /login.htm (the start page for my application) or for that matter any mapping.  Following is an excerpt of the log I see:&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,445&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt;Testing handler map &lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping@19ad677&amp;#93;&lt;/span&gt; in DispatcherServlet with name &apos;edison&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,445&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping$$EnhancerByCGLIB$$8e8902d3&amp;#93;&lt;/span&gt;Looking up handler for &lt;span class=&quot;error&quot;&gt;&amp;#91;/login.htm&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,445&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt;No handler found in getLastModified&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,445&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt;DispatcherServlet with name &apos;edison&apos; received request for &lt;span class=&quot;error&quot;&gt;&amp;#91;/login.htm&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,445&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.aop.interceptor.DebugInterceptor&amp;#93;&lt;/span&gt;Entering invocation: method &apos;toString&apos;, arguments []; target is of class [org.spring&lt;br/&gt;
framework.web.servlet.handler.SimpleUrlHandlerMapping]; count=73&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,455&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.aop.interceptor.DebugInterceptor&amp;#93;&lt;/span&gt;Exiting invocation: method &apos;toString&apos;, arguments []; target is of class [org.springf&lt;br/&gt;
ramework.web.servlet.handler.SimpleUrlHandlerMapping]; count=73&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,455&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt;Testing handler map [org.springframework.web.servlet.handler.SimpleUrlHandlerMapping@19&lt;br/&gt;
ad677] in DispatcherServlet with name &apos;edison&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,455&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping$$EnhancerByCGLIB$$8e8902d3&amp;#93;&lt;/span&gt;Looking up handler for &lt;span class=&quot;error&quot;&gt;&amp;#91;/login.htm&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,455&amp;#93;&lt;/span&gt; WARN:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.PageNotFound&amp;#93;&lt;/span&gt;No mapping for &lt;span class=&quot;error&quot;&gt;&amp;#91;/login.htm&amp;#93;&lt;/span&gt; in DispatcherServlet with name &apos;edison&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-06-20 10:03:47,455&amp;#93;&lt;/span&gt; DEBUG:&lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt;Successfully completed request&lt;br/&gt;
...&lt;br/&gt;
===&lt;br/&gt;
FYI: &apos;edison&apos; is the servlet name for Spring&apos;s dispatcher servlet.&lt;/p&gt;

&lt;p&gt;I have tried replacing DefaultAdvisorAutoProxyCreator with BeanNameAutoProxyCreator and the same issue arises when I introduce the &quot;&lt;b&gt;Controller&quot; beans in the list of possible beanNames.  In one of the postings at another forum, a suggestion was made to include org.springframework.web.&lt;/b&gt; in the list of classes to be advised when including the controller because the target is in Spring framework&apos;s web package, so I used RegexpMethodPointcutAdvisor to define the application package names and include Spring&apos;s web package.  The configuration then included:&lt;br/&gt;
&amp;lt;bean id=&quot;debugAdvisor&quot; class=&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;advice&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;ref local=&quot;debugInterceptor&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;patterns&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;list&amp;gt;&lt;br/&gt;
		       &amp;lt;value&amp;gt;com.hmco.*&amp;lt;/value&amp;gt;&lt;br/&gt;
		       &amp;lt;value&amp;gt;org.springframework.web.*&amp;lt;/value&amp;gt;&lt;br/&gt;
		&amp;lt;/list&amp;gt;&lt;br/&gt;
	&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;but that did not resolve the issue either.&lt;/p&gt;

&lt;p&gt;I have also tried upgrading the spring.jar from version 1.2.6 to version 1.2.8 and had the same result.&lt;/p&gt;

&lt;p&gt;Either I am not following the some of the recommended steps or there seems to be a bug in the SimpleUrlHandlerMapping proxy creation.&lt;/p&gt;

&lt;p&gt;Please advise.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Vinay&lt;br/&gt;
FYI:  I have posted this issue on Spring AOP forum and no has responded to it (&lt;a href=&quot;http://forum.springframework.org/showthread.php?t=25789&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.springframework.org/showthread.php?t=25789&lt;/a&gt;)&lt;/p&gt;</description>
            <key id="14258">SPR-2163</key>
            <summary>Proxy for SimpleURLHandlerMapping does not handle mappings properly</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robh">Rob Harrop</assignee>
                                    <reporter username="vinay">Vinay A. Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jun 2006 02:58:08 +0000</created>
                <updated>Tue, 19 Jun 2012 03:52:32 +0000</updated>
                            <resolved>Tue, 27 Jun 2006 23:35:59 +0000</resolved>
                                    <version>1.2.6</version>
                                    <fixVersion>2.0 RC2</fixVersion>
                                    <component>Core:AOP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="18256" author="robh" created="Tue, 27 Jun 2006 23:08:28 +0000"  >&lt;p&gt;Vinay,&lt;/p&gt;

&lt;p&gt;The reason this occurs is because you are forcing the use of a class proxy and the class in question has the getHandler() method declared as final - which means it cannot be proxied and will be silently handled by the special instance of the proxy subclass and not passed directly to the object being proxied. You should actually see a warning in your log file to this effect, telling you which methods cannot be proxied.&lt;/p&gt;

&lt;p&gt;There are two ways around this:&lt;/p&gt;

&lt;p&gt;1. Use interface proxies&lt;br/&gt;
2. Use AspectJ&lt;/p&gt;

&lt;p&gt;You might find that AspectJ is actually easier for your use case if you can set up the weaving correctly, otherwise interface proxies are easy to configure.&lt;/p&gt;

&lt;p&gt;To make this clearer I have no made it an explicitly forbidden case to try and class proxy classes with final methods.&lt;/p&gt;

&lt;p&gt;Rob&lt;/p&gt;</comment>
                            <comment id="18261" author="vinay" created="Wed, 28 Jun 2006 01:23:28 +0000"  >&lt;p&gt;Thanks for looking into it Rob.  From your response it seems like you might find this kind of issue a lot.  &lt;/p&gt;

&lt;p&gt;Couple of questions:&lt;br/&gt;
1. For the two options you mentioned, could you point me to some reference materials on how to set/use them.&lt;br/&gt;
2. Per your last statement, when you say that you have now made it explicitly forbidden to proxy classes with final methods, is that referring to Spring framework version 2.0 and above?&lt;/p&gt;

&lt;p&gt;&amp;#8211; Vinay&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 27 weeks, 1 day ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 27 Jun 2006 23:08:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03o7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>