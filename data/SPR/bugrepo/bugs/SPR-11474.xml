<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:05:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-11474/SPR-11474.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-11474] PathVariable encoding fails if request charset is not set</title>
                <link>https://jira.spring.io/browse/SPR-11474</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Code below&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;// this works, tagId is properly decoded&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@RequestMapping(value = &quot;/tag/{tagId}&quot;, method = RequestMethod.PUT)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public @ResponseBody SourceTag updateTag(@RequestBody SourceTag newTag, @PathVariable(&quot;tagId&quot;) String tagId) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    return sourceService.updateTag(new SourceTag(tagId), newTag);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;// but here it fails!&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@RequestMapping(value = &quot;/tag/{tagId}&quot;, method = RequestMethod.DELETE)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public @ResponseBody SourceTag updateTag(@PathVariable(&quot;tagId&quot;) String tagId) {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    // something&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;When trying to access&lt;br/&gt;
/tag/mmm%C3%A6%C3%A6%C3%B8%C3%A5 as PUT with an object, the&lt;br/&gt;
pathvariable tagId contains the value &quot;mmm&#230;&#230;&#248;&#229;&quot;&lt;/p&gt;

&lt;p&gt;But when accessing&lt;br/&gt;
/tag/mmm%C3%A6%C3%A6%C3%B8%C3%A5 as DELETE&lt;br/&gt;
the pathvariable tagId contains the value &quot;mmm&#195;&#166;&#195;&#166;&#195;&#184;&#195;&#165;&quot;&lt;/p&gt;

&lt;p&gt;After testing, the problem seems not to be using DELETE instead of PUT, but having a @RequestBody and not having one.&lt;/p&gt;</description>
            <key id="55855">SPR-11474</key>
            <summary>PathVariable encoding fails if request charset is not set</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="snicoll">St&#233;phane Nicoll</assignee>
                                    <reporter username="matsemann">Mats Svensson</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 Feb 2014 07:44:09 +0000</created>
                <updated>Tue, 1 Jul 2014 08:35:21 +0000</updated>
                            <resolved>Tue, 1 Jul 2014 08:35:21 +0000</resolved>
                                    <version>3.2.8</version>
                    <version>4.0.2</version>
                                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="99227" author="snicoll" created="Mon, 24 Feb 2014 01:03:48 +0000"  >&lt;p&gt;I have tried both use cases and they work for me. Looking at the code, there is no difference I can see if there is a &lt;tt&gt;@RequestBody&lt;/tt&gt; or not.&lt;/p&gt;

&lt;p&gt;What triggers a proper resolution of the path variable is the encoding of the request. If that is not set, Spring fallbacks on the default encoding &lt;tt&gt;ISO-8859-1&lt;/tt&gt;. The result that you get in your second test is a IS0-8859-1 decoded string so I suspect that your first test sets the &lt;tt&gt;UTF-8&lt;/tt&gt; encoding while the second does not.&lt;/p&gt;

&lt;p&gt;Also, your servlet container should be able to properly decode the URI with UTF-8. If you&apos;re using Tomcat, this is not enabled by default. e.g.&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    connectionTimeout=&quot;20000&quot;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    redirectPort=&quot;8443&quot;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    URIEncoding=&quot;UTF-8&quot; /&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Which servlet container are you using?&lt;/p&gt;

&lt;p&gt;Please let me know what I&apos;ve missed.&lt;/p&gt;</comment>
                            <comment id="99251" author="matsemann" created="Mon, 24 Feb 2014 07:17:54 +0000"  >&lt;p&gt;I&apos;m using Jetty for development.&lt;/p&gt;

&lt;p&gt;You are right. Looking at the requests, sending a request with a body will add the header:&lt;br/&gt;
Content-Type	application/json;charset=utf-8&lt;/p&gt;

&lt;p&gt;And that&apos;s probably the difference.&lt;/p&gt;

&lt;p&gt;However, it was my understanding that that header only should affect the body:&lt;br/&gt;
&amp;gt;&amp;gt; The purpose of the Content-Type field is to describe the data contained in the body (&lt;a href=&quot;http://www.w3.org/Protocols/rfc1341/4_Content-Type.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.w3.org/Protocols/rfc1341/4_Content-Type.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;and as such, different frameworks (for instance $http in AngularJS) I have tried actually ignore and remove Content-Type headers if there is no body in the request.&lt;/p&gt;</comment>
                            <comment id="99260" author="snicoll" created="Mon, 24 Feb 2014 10:02:32 +0000"  >&lt;p&gt;You are right regarding the &lt;tt&gt;Content-type&lt;/tt&gt; but that&apos;s not what it is about. &lt;/p&gt;

&lt;p&gt;I&apos;ve created &lt;a href=&quot;https://github.com/spring-projects/spring-framework-issues/tree/master/SPR-11474&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;a project for you to try&lt;/a&gt; with your environment. Could you please get the code and validate it matches your problem? &lt;/p&gt;

&lt;p&gt;I have tried this with Jetty8 and Jetty9 and both are working for me with the following command:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;curl -X DELETE http://localhost:8080/tag/mmm%C3%A6%C3%A6%C3%B8%C3%A5&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;I get the following json:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;{&quot;tagId&quot;:&quot;mmm&#230;&#230;&#248;&#229;&quot;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;The reason why this is working for me is because the URI is properly decoded by the servlet container. More specifically, &lt;tt&gt;HttpServletRequest#getServletPath&lt;/tt&gt; is able to decode your URI as &quot;mmm&#230;&#230;&#248;&#229;&quot; and not as &quot;mmm&#195;&#166;&#195;&#166;&#195;&#184;&#195;&#165;&quot; (which would be the result with latin decoding).&lt;/p&gt;

&lt;p&gt;If you take tomcat for instance, URI decoding is latin by default. I&apos;ve fixed my local config to add &lt;tt&gt;URIEncoding=&quot;UTF-8&quot;&lt;/tt&gt; to the connector and I get the same behaviour as jetty.&lt;/p&gt;

&lt;p&gt;&lt;del&gt;Setting a &lt;tt&gt;Content-type&lt;/tt&gt; header does not change anything. The &lt;tt&gt;@PathVariable&lt;/tt&gt; arguments are resolved against the URI. It seems that in your case, the servlet container fails to decode the URI.&lt;/del&gt; &lt;/p&gt;

&lt;p&gt;&lt;del&gt;Can you try this on your end and give the exact jetty version you are using?&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="99266" author="snicoll" created="Mon, 24 Feb 2014 12:24:09 +0000"  >&lt;p&gt;Actually, &lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=rstoya05-aop&quot; class=&quot;user-hover&quot; rel=&quot;rstoya05-aop&quot;&gt;Rossen Stoyanchev&lt;/a&gt; and I investigated this further and we believe this has indeed a link with the charset. The updated project now reproduces the issue you&apos;re having.&lt;/p&gt;

&lt;p&gt;To confirm this, could you please tell us how your servlet is mapped? Besides, does your Spring MVC configuration overrides &lt;tt&gt;RequestMappingHandlerMapping&lt;/tt&gt; and more specifically the &lt;tt&gt;alwaysUseFullPath&lt;/tt&gt; or &lt;tt&gt;urlDecode&lt;/tt&gt; properties?&lt;/p&gt;

&lt;p&gt;In the meantime, you can force the charset regardless of the request using the &lt;a href=&quot;http://docs.spring.io/spring/docs/4.0.2.RELEASE/javadoc-api/org/springframework/web/filter/CharacterEncodingFilter.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CharacterEncodingFilter&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="99270" author="matsemann" created="Mon, 24 Feb 2014 14:08:10 +0000"  >&lt;p&gt;Thanks for taking the time looking into this. &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;On my original project, this gives the right result, mmm&#230;&#230;&#248;&#229;:&lt;br/&gt;
curl -X DELETE -H &quot;Content-Type:application/json; charset=UTF8&quot; &lt;a href=&quot;http://localhost:8080/api/source/tag/mmm%C3%A6%C3%A6%C3%B8%C3%A5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8080/api/source/tag/mmm%C3%A6%C3%A6%C3%B8%C3%A5&lt;/a&gt;&lt;br/&gt;
while this one does not:&lt;br/&gt;
curl -X DELETE &lt;a href=&quot;http://localhost:8080/api/source/tag/mmm%C3%A6%C3%A6%C3%B8%C3%A5&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8080/api/source/tag/mmm%C3%A6%C3%A6%C3%B8%C3%A5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is the servlet mapping I believe:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;servlet&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;servlet-name&amp;gt;momusapi&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;servlet-class&amp;gt;org.springframework.web.servlet.DispatcherServlet&amp;lt;/servlet-class&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;load-on-startup&amp;gt;1&amp;lt;/load-on-startup&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;/servlet&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;!-- Which urls to be handled by the servlet --&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;servlet-mapping&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;servlet-name&amp;gt;momusapi&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;        &amp;lt;url-pattern&amp;gt;/api/*&amp;lt;/url-pattern&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;    &amp;lt;/servlet-mapping&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;
&lt;p&gt;It&apos;s the only one, all other requests are going to static files.&lt;br/&gt;
(full file here: &lt;a href=&quot;https://github.com/Studentmediene/Momus/blob/develop/src/main/webapp/WEB-INF/web.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/Studentmediene/Momus/blob/develop/src/main/webapp/WEB-INF/web.xml&lt;/a&gt; )&lt;/p&gt;

&lt;p&gt;I don&apos;t think we&apos;re doing any changes to RequestMappingHandlerMapping, we&apos;re just using &amp;lt;mvc:annotation-driven&amp;gt; to setup everything, only adding a custom message-converter.&lt;/p&gt;

&lt;p&gt;The jetty version is 8.1.9.v20130131 run through jetty-maven-plugin.&lt;/p&gt;

&lt;p&gt;Thanks for the encoding filter. Currently I have a workaround just sending it as an object through put instead of delete. Not as pretty as it could have been, but ok. It&apos;s probably the only time there will be issued delete&apos;s to stuff other than numbers in the system anyway.&lt;/p&gt;</comment>
                            <comment id="99706" author="snicoll" created="Tue, 4 Mar 2014 03:06:43 +0000"  >&lt;p&gt;I haven&apos;t found anything in the spec that would indicates the contrary but &lt;tt&gt;ServletRequest#getCharacterEncoding&lt;/tt&gt; only impacts the &lt;b&gt;body&lt;/b&gt; of the request and not the URI itself so it seems that &lt;tt&gt;UrlPathHelper&lt;/tt&gt; does not respect the spec.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Returns the name of the character encoding used in the body of this request. This method returns null if the request&lt;br/&gt;
does not specify a character encoding&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What &lt;tt&gt;UrlPathHelper&lt;/tt&gt; has is the notion of &lt;b&gt;default&lt;/b&gt; encoding to use for URL decoding and this default is always overridden by the character encoding of the request if it&apos;s set. It shouldn&apos;t. Or it&apos;s probably a way to figure out the proper encoding of the whole request. In your case, not giving anything fallbacks to latin and that&apos;s what the body should use indeed (per spec).&lt;/p&gt;

&lt;p&gt;I have pushed an implementation proposal in &lt;a href=&quot;https://github.com/snicoll/spring-framework/commit/456d8574a278584edf7125c9a5cfcb016f93568a&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;456d857&lt;/a&gt; but this can&apos;t go in 4.0.3 as the impact is too high. Another solution is to keep the code that we have now and add an additional option that is more strict and does not look for &lt;tt&gt;ServletRequest#getCharacterEncoding&lt;/tt&gt; but as &lt;tt&gt;determineEncoding&lt;/tt&gt; can be overridden, it can be hard to track what is actually going on.&lt;/p&gt;

&lt;p&gt;Changing the default in 4.0.3 seems a bad idea. In the mean time, &lt;tt&gt;CharacterEncodingFilter&lt;/tt&gt; is the way to go.&lt;/p&gt;</comment>
                            <comment id="105160" author="snicoll" created="Tue, 1 Jul 2014 08:35:21 +0000"  >&lt;p&gt;Well, this is much harder than we thought. We got our facts and those tell us that changing such behaviour would lead to a lot of nasty side effects as users are actually relying on the body encoding to decode the URI with a different encoding.&lt;/p&gt;

&lt;p&gt;This issue helped us realized it was a larger problem and we&apos;ve created &lt;a href=&quot;https://jira.spring.io/browse/SPR-11925&quot; title=&quot;Better handling of URI encoding configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-11925&quot;&gt;SPR-11925&lt;/a&gt; to track it. Thanks for the report.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="58518">SPR-11925</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="57711">SPR-11779</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        2 years, 25 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 24 Feb 2014 01:03:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>snicoll</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07btz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42789</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>