<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:56:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-843/SPR-843.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-843] quartz scheduler factory cannot produce multiple schedulers</title>
                <link>https://jira.spring.io/browse/SPR-843</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;In SchedulerFactoryBean class, the following method is intended to create a scheduler using the schedulerName param:&lt;/p&gt;

&lt;p&gt;	protected Scheduler createScheduler(SchedulerFactory schedulerFactory, String schedulerName)&lt;br/&gt;
			throws SchedulerException {&lt;br/&gt;
		if (schedulerName != null) &lt;/p&gt;
{
			return schedulerFactory.getScheduler(schedulerName);
		}
&lt;p&gt;		else &lt;/p&gt;
{
			return schedulerFactory.getScheduler();
		}
&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;This, however, doesn&apos;t work because the &quot;schedulerFactory.getScheduler(schedulerName)&quot; in quartz is used to retrieve an exisiting instance instead of creating anything new. The result is you always got a NullPointerException if you set the schedulerName in bean config xml.&lt;/p&gt;

&lt;p&gt;The quick fix is to change it to be as following:&lt;/p&gt;

&lt;p&gt;	protected Scheduler createScheduler(SchedulerFactory schedulerFactory, String schedulerName)&lt;br/&gt;
			throws SchedulerException &lt;/p&gt;
{
		return schedulerFactory.getScheduler();
	}

&lt;p&gt;And specify the schedulerName and quartz instance name in the quartz properties, e.g.&lt;/p&gt;

&lt;p&gt;		&amp;lt;property name=&quot;schedulerName&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;value&amp;gt;cronSched&amp;lt;/value&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;br/&gt;
		&amp;lt;property name=&quot;quartzProperties&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;props&amp;gt;&lt;br/&gt;
				&amp;lt;prop key=&quot;org.quartz.scheduler.instanceName&quot;&amp;gt;cronSched&amp;lt;/prop&amp;gt;&lt;br/&gt;
			&amp;lt;/props&amp;gt;&lt;br/&gt;
		&amp;lt;/property&amp;gt;&lt;/p&gt;


&lt;p&gt;There must be more elegant solution for this &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</description>
            <key id="11361">SPR-843</key>
            <summary>quartz scheduler factory cannot produce multiple schedulers</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="victorwon">Victor</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2005 04:20:46 +0000</created>
                <updated>Tue, 19 Jun 2012 03:25:14 +0000</updated>
                            <resolved>Tue, 19 Jun 2012 03:22:28 +0000</resolved>
                                    <version>1.1.5</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12810" author="juergen.hoeller" created="Fri, 1 Apr 2005 19:07:24 +0000"  >&lt;p&gt;Thanks for reporting this, Victor. Fortunately, this has already been fixed in 1.2 RC1 - give it a try!&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="45734" author="is_maximum" created="Sun, 26 Jul 2009 16:55:44 +0000"  >&lt;p&gt;I&apos;m using Quartz version 1.6 but this problem still exists however you said in version 1.2 will be fixed.&lt;br/&gt;
We are deploying multiple application inside one EAR file (each app considered as an module) and each module has its own quartz scheduler so we need to create different instances of scheduler.&lt;br/&gt;
There are two init() methods, one create the scheduler by given name and the other uses the default name (name concatenated with an incremental counter)&lt;/p&gt;

&lt;p&gt;Here is the snippet code I used:&lt;/p&gt;

&lt;p&gt;-----------&lt;br/&gt;
	public void init()throws Exception &lt;/p&gt;
{
		init(&quot;QSCHEDULER&quot;+counter.incrementAndGet());
	}

&lt;p&gt;	public void init(String schedulerName)throws Exception {&lt;br/&gt;
		if(scheduler != null &amp;amp;&amp;amp; !scheduler.isShutdown()) &lt;/p&gt;
{
			throw new IllegalStateException(&quot;Scheduler already initialized&quot;);
		}
&lt;p&gt;		if(scheduler != null) &lt;/p&gt;
{
			scheduler = null;
		}
&lt;p&gt;		SchedulerFactory schedulerFactory = new StdSchedulerFactory();&lt;br/&gt;
		scheduler = schedulerFactory.getScheduler(schedulerName);//RETURNS NULL&lt;br/&gt;
		triggers = new ArrayList&amp;lt;Trigger&amp;gt;();&lt;br/&gt;
		jobFactory = new JobFactoryImpl();&lt;br/&gt;
		scheduler.setJobFactory(jobFactory);&lt;/p&gt;

&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;-----------&lt;/p&gt;

&lt;p&gt;Have I missed somethig here?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="11240">SPR-772</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        7 years, 22 weeks, 4 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 1 Apr 2005 19:07:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i046rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24471</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>