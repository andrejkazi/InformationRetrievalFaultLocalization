<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:51:04 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2736/SPR-2736.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2736] spring:message tag should support resolving of a single EL expression passed into the arguments attribute</title>
                <link>https://jira.spring.io/browse/SPR-2736</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;The current behavior of evaluation of the &quot;arguments&quot; attribute of the spring:message tag (in both 2.0.x and 1.2.x) is to assume that if the user passes in a string, it is a comma-separated list of values and/or ELs. This will result in, for example, if the user passes:&lt;/p&gt;

&lt;p&gt;&amp;lt;spring:message ... arguments=&quot;foo,bar&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;... to the equivalent of:&lt;/p&gt;

&lt;p&gt;arguments = new Object[]&lt;/p&gt;
{&quot;foo&quot;,&quot;bar&quot;}&lt;br/&gt;
&lt;br/&gt;
The problem arises when the user intends to pass in a single EL expression that should resolve to an array of objects. For example, if I do something like this:&lt;br/&gt;
&lt;br/&gt;
(in the Controller)&lt;br/&gt;
&lt;br/&gt;
model.put(&quot;myArgumentsArray&quot;, new String[]{&quot;foo&quot;,&quot;bar&quot;}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;(in the page)&lt;br/&gt;
&amp;lt;spring:message ... arguments=&quot;$&lt;/p&gt;
{myArgumentsArray}
&lt;p&gt;&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;... the code in MessageTag.resolveMessage will set arguments to the equivalent of:&lt;/p&gt;

&lt;p&gt;arguments = new Object[]{new String[]{&quot;foo&quot;,&quot;bar&quot;}};&lt;/p&gt;

&lt;p&gt;This is because the behavior of resolution of the arguments attribute if the attribute is an instanceof String is to iterate through the String by the argument separator, and evaluate each argument separately. IMHO, the behavior if the user passes in a single string that is not separated, it should simply be evaluated inline (assuming it is an EL expression).&lt;/p&gt;

&lt;p&gt;So the code modifications to MessageTag would look something like this:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;code&amp;#93;&lt;/span&gt;&lt;br/&gt;
			if (this.arguments instanceof String) {&lt;br/&gt;
				String[] stringArray =&lt;br/&gt;
						StringUtils.delimitedListToStringArray((String) this.arguments, this.argumentSeparator);&lt;br/&gt;
// change&lt;br/&gt;
if(stringArray.length == 1) {&lt;br/&gt;
 argumentsArray = ExpressionEvaluationUtils.evaluate(&quot;arguments&quot;,stringArray&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;,pageContext);&lt;br/&gt;
}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;code&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I believe this is more correct if the user hasn&apos;t explicitly supplied multiple values using some kind of separator character.&lt;/p&gt;

&lt;p&gt;I filed as a bug as opposed to an enhancement request, because I expected it to work this way, and was surprised when it did not. I&apos;m open to suggestions if you don&apos;t think this is a bug, including supplementing/changing the documentation to make this behavior clearer.&lt;/p&gt;</description>
            <key id="15268">SPR-2736</key>
            <summary>spring:message tag should support resolving of a single EL expression passed into the arguments attribute</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="pmularien">Peter Mularien</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Oct 2006 02:28:08 +0000</created>
                <updated>Tue, 19 Jun 2012 03:50:35 +0000</updated>
                            <resolved>Fri, 27 Oct 2006 05:29:41 +0000</resolved>
                                    <version>1.2.8</version>
                    <version>2.0 final</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>1.2.9</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="20494" author="juergen.hoeller" created="Fri, 27 Oct 2006 05:29:41 +0000"  >&lt;p&gt;Thanks for pointing this out! Indeed, a single argument that resolves to an array should be treated as argument array rather than as single argument. I&apos;ve implemented this through a special array check for a resolved single String argument. If a single expression does not resolve to an array, it is still treated as single argument.&lt;/p&gt;

&lt;p&gt;This is already committed to CVS HEAD and should be available in the next nightly snapshot (&lt;a href=&quot;http://www.springframework.org/snapshots&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.springframework.org/snapshots&lt;/a&gt;). Please give it a try...&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 9 weeks, 6 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 27 Oct 2006 05:29:41 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00vhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5148</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>