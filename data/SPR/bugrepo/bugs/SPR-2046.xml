<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:52:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2046/SPR-2046.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2046] JdbcTemplate conflicts with Oracle10g statement caching (ORA-17041)</title>
                <link>https://jira.spring.io/browse/SPR-2046</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Enabling statement caching with Oracle 10g JDBC drivers may result in difficult to track exceptions (ORA-17041).&lt;/p&gt;

&lt;p&gt;I was not able to investigate the problem fully, but after a full sunday afternoon of debugging, I am able to attach a JUnit repeatable test case.&lt;/p&gt;

&lt;p&gt;The test case is artificially simple, I experienced the bug in a much more complex situation in a production web application.&lt;/p&gt;

&lt;p&gt;I used Oracle JDBC thin driver version 10.2 (10.2.0.4 I think).&lt;/p&gt;

&lt;p&gt;Ciao, FG.&lt;/p&gt;</description>
            <key id="14021">SPR-2046</key>
            <summary>JdbcTemplate conflicts with Oracle10g statement caching (ORA-17041)</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomas.risberg">Thomas Risberg</assignee>
                                    <reporter username="fabio">Fabio Grassi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 May 2006 06:20:12 +0000</created>
                <updated>Tue, 19 Jun 2012 03:52:23 +0000</updated>
                            <resolved>Sun, 2 Jul 2006 11:06:30 +0000</resolved>
                                    <version>1.2.8</version>
                                    <fixVersion>2.0 RC2</fixVersion>
                                    <component>Data</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="17682" author="fabio" created="Sun, 21 May 2006 06:21:30 +0000"  >&lt;p&gt;Here is the test case. Ciao, FG&lt;/p&gt;</comment>
                            <comment id="17732" author="thomas.risberg" created="Fri, 26 May 2006 00:12:11 +0000"  >&lt;p&gt;Thanks for the testcase, it helped me track this down.  Great find, although a bit obscure &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  &lt;/p&gt;

&lt;p&gt;The issue is that we differentiate between OUT parameters and INOUT parameters by looking at the value suppplied for each call.  So even if the stored procedure is defined with an INOUT parameter, if there is no value supplied we don&apos;t call setNull on that parameter.  This has never caused a problem with any JDBC driver until now.  &lt;/p&gt;

&lt;p&gt;I assume that once caching is turned on, inconsistent call sequences caused this exception.  In the testcase parameter 2 is called with a sequence of registerOutParameter and setObject followed by a call where only registerOutParameter is used - this causes the exception.  We need a way to tell Spring that this is really an INOUT parameter and force a setNull call when no value is supplied.  I&apos;ll add a fix for this in the next couple of days.&lt;/p&gt;</comment>
                            <comment id="17734" author="fabio" created="Fri, 26 May 2006 02:16:15 +0000"  >&lt;p&gt;On top of my head I would suggest to investigate whether to call clearParameters() first on the prepared statement would help. See also &lt;a href=&quot;https://jira.spring.io/browse/SPR-1946&quot; title=&quot;StoredProcedure.execute requires that the size of the params matches the number of input parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-1946&quot;&gt;&lt;del&gt;SPR-1946&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;While you&apos;re working on this, you might have a look at &lt;a href=&quot;https://jira.spring.io/browse/SPR-2047&quot; title=&quot;Too many &amp;#39;instanceof&amp;#39; tests in Spring JDBC bloat code and prevent subclassing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-2047&quot;&gt;&lt;del&gt;SPR-2047&lt;/del&gt;&lt;/a&gt;, whose focus is on the same classes.&lt;/p&gt;

&lt;p&gt;Ciao, FG.&lt;/p&gt;</comment>
                            <comment id="18356" author="thomas.risberg" created="Sun, 2 Jul 2006 11:06:30 +0000"  >&lt;p&gt;Added support for distingushing between INOUT and OUT parameters even if input value is NULL.  Added SqlInOutParameter to take care of this.  The SqlInOutParameter shuold be used to indicate that cs.setNull() should be called when the input value is null.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="23841">SPR-5136</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="11645" name="StatementCacheTest.java" size="2481" author="fabio" created="Sun, 21 May 2006 06:21:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 26 weeks, 4 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 26 May 2006 00:12:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01eqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8266</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>