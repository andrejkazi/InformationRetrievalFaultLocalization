<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:03:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-14999/SPR-14999.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-14999] Bad Content-Type for static resources in Spring Web Reactive</title>
                <link>https://jira.spring.io/browse/SPR-14999</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;&lt;b&gt;Scenario&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;A web application using Spring &lt;tt&gt;5.0.0.BUILD-SNAPSHOT&lt;/tt&gt;, Spring Boot &lt;tt&gt;2.0.0.BUILD-SNAPSHOT&lt;/tt&gt; and Spring Web Reactive does server-side rendering and needs to serve static resources, such as images and CSS style sheet files.&lt;/p&gt;

&lt;p&gt;Server is Tomcat (though it seems to affect all servers, or at least several).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Observed Results&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;All static resources: images, CSSs, etc, are being served with &lt;tt&gt;Content-Type: application/octet-stream&lt;/tt&gt;. This causes e.g. CSS style sheets not to be rendered by browsers:&lt;/p&gt;

&lt;p&gt;See the returned headers, using &lt;tt&gt;httpie&lt;/tt&gt;:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;$ http http://localhost:8080/css/stsm.css&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;HTTP/1.1 200&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Accept-Ranges: bytes&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Cache-Control: max-age=0&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Content-Length: 2518&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Content-Type: application/octet-stream&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Date: Thu, 08 Dec 2016 23:42:12 GMT&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Last-Modified: Thu, 08 Dec 2016 23:24:46 GMT&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;(content follows)...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;&lt;b&gt;Example Repository&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m creating a Spring Web Reactive-enabled version of Thymeleaf&apos;s STSM example application at the thymeleaf/thymeleafexamples-stsm-reactive repository on GitHub: &lt;a href=&quot;https://github.com/thymeleaf/thymeleafexamples-stsm-reactive/tree/SPR-14999&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/thymeleaf/thymeleafexamples-stsm-reactive/tree/SPR-14999&lt;/a&gt; (tag: &lt;tt&gt;&lt;a href=&quot;https://jira.spring.io/browse/SPR-14999&quot; title=&quot;Bad Content-Type for static resources in Spring Web Reactive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-14999&quot;&gt;&lt;del&gt;SPR-14999&lt;/del&gt;&lt;/a&gt;&lt;/tt&gt;)&lt;/p&gt;

&lt;p&gt;It can be executed with &lt;tt&gt;mvn -U clean compile spring-boot:run&lt;/tt&gt;. The URL shown above (&lt;tt&gt;&lt;a href=&quot;http://localhost:8080/css/stsm.css&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://localhost:8080/css/stsm.css&lt;/a&gt;&lt;/tt&gt;) can be used for testing this issue.&lt;/p&gt;</description>
            <key id="70772">SPR-14999</key>
            <summary>Bad Content-Type for static resources in Spring Web Reactive</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="rstoya05-aop">Rossen Stoyanchev</assignee>
                                    <reporter username="dfernandez">Daniel Fern&#225;ndez</reporter>
                        <labels>
                            <label>spring-web-reactive</label>
                    </labels>
                <created>Thu, 8 Dec 2016 23:49:09 +0000</created>
                <updated>Fri, 9 Dec 2016 14:29:15 +0000</updated>
                            <resolved>Fri, 9 Dec 2016 14:08:47 +0000</resolved>
                                    <version>5.0 M3</version>
                                                    <component>Reactive</component>
                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="134003" author="rstoya05-aop" created="Fri, 9 Dec 2016 01:52:35 +0000"  >&lt;p&gt;Without an explicit registration this can only come from a JAF lookup, e.g. with &lt;tt&gt;org/springframework/mail/javamail/mime.types&lt;/tt&gt; which is in &lt;tt&gt;spring-context-support&lt;/tt&gt;. I can confirm that with &lt;tt&gt;spring-context-support&lt;/tt&gt; it works. I haven&apos;t yet confirmed if a Spring Boot 1.4 web starter application has &lt;tt&gt;spring-context-support&lt;/tt&gt; but I&apos;m guessing not. In the Servlet API we can also perform a media type lookup through the ServletContext and that&apos;s probably the reason for the difference.&lt;/p&gt;

&lt;p&gt;The question now is what the best way to address this is /cc &lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=bclozel&quot; class=&quot;user-hover&quot; rel=&quot;bclozel&quot;&gt;Brian Clozel&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="134013" author="bclozel" created="Fri, 9 Dec 2016 08:19:39 +0000"  >&lt;p&gt;I can manage the &lt;tt&gt;spring-context-support&lt;/tt&gt; dependency on the starter itself.&lt;br/&gt;
Note that we have incoming changes for this (recently rescheduled to RC1) with &lt;a href=&quot;https://jira.spring.io/browse/SPR-14908&quot; title=&quot;Revisit MediaTypeFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-14908&quot;&gt;SPR-14908&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Can we close this issue in favor of &lt;a href=&quot;https://jira.spring.io/browse/SPR-14908&quot; title=&quot;Revisit MediaTypeFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-14908&quot;&gt;SPR-14908&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="134028" author="rstoya05-aop" created="Fri, 9 Dec 2016 14:07:31 +0000"  >&lt;p&gt;Yes &lt;a href=&quot;https://jira.spring.io/browse/SPR-14908&quot; title=&quot;Revisit MediaTypeFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-14908&quot;&gt;SPR-14908&lt;/a&gt; looks like a good solution and it wouldn&apos;t be necessary to have spring-context-support in the starter, or is there another reason for that?&lt;/p&gt;</comment>
                            <comment id="134029" author="rstoya05-aop" created="Fri, 9 Dec 2016 14:08:47 +0000"  >&lt;p&gt;Resolving in favor of &lt;a href=&quot;https://jira.spring.io/browse/SPR-14908&quot; title=&quot;Revisit MediaTypeFactory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-14908&quot;&gt;SPR-14908&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10130">
                    <name>Supersede</name>
                                                                <inwardlinks description="is superseded by">
                                        <issuelink>
            <issuekey id="70474">SPR-14908</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        1 week, 6 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 9 Dec 2016 01:52:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rstoya05-aop</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09l9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/thymeleaf/thymeleafexamples-stsm-reactive/tree/SPR-14999]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>