<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:05:28 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-7638/SPR-7638.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-7638] spring:eval causes SpelEvaluationException when page is opened in second user-session</title>
                <link>https://jira.spring.io/browse/SPR-7638</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I want to display a java.util.Date value from the model using the spring:eval-tag like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;spring:eval expression=&quot;dateOfBirth&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;Now I start Tomcat and open the page let&apos;s say in Firefox. It works fine, the page displays as expected. Now I start another web-browser, let&apos;s say Safari, to simulate another user-session. When I try to open the page with Safari, I get the following Exception:&lt;/p&gt;

&lt;p&gt;org.apache.jasper.JasperException: &lt;br/&gt;
org.springframework.expression.spel.SpelEvaluationException: &lt;br/&gt;
EL1021E:(pos 0): A problem occurred whilst attempting to access the &lt;br/&gt;
property &apos;dateOfBirth&apos;: &apos;Unexpected exception occurred accessing &lt;br/&gt;
&apos;dateOfBirth&apos; as an implicit variable&apos;&lt;/p&gt;

&lt;p&gt;When I refresh the page in Safari the exception continues to show up.&lt;br/&gt;
When I refresh the page in Firefox, it works without any problem.&lt;/p&gt;

&lt;p&gt;It seems to me, that spring:eval only works in the first user-session in this case but not in any further user-sessions.&lt;br/&gt;
This problem exists since version 3.0.4.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
-------------------&lt;br/&gt;
1. With STS create a new Spring Template Project of type MVC.&lt;br/&gt;
2. Open pom.xml and change the spring-version to 3.0.4.&lt;br/&gt;
3. Change the welcome()-method in WelcomeController.java to:&lt;/p&gt;

&lt;p&gt;public void welcome(Model model) {&lt;br/&gt;
   model.addAttribute(&quot;dateOfBirth&quot;, new Date());&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;4. Open the welcome.jsp file and add this spring:eval-tag below the h1-tag:&lt;/p&gt;

&lt;p&gt;&amp;lt;spring:eval expression=&quot;dateOfBirth&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;5. Start Tomcat and try to open the site with to different web-browsers. In the second browser the exception is shown.&lt;/p&gt;

&lt;p&gt;I have attached the sample-project to reproduce the problem.&lt;/p&gt;

&lt;p&gt;The complete exception shown:&lt;br/&gt;
----------------------------&lt;br/&gt;
org.apache.jasper.JasperException: org.springframework.expression.spel.SpelEvaluationException: EL1021E:(pos 0): A problem occurred whilst attempting to access the property &apos;dateOfBirth&apos;: &apos;Unexpected exception occurred accessing &apos;dateOfBirth&apos; as an implicit variable&apos;&lt;br/&gt;
	org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:527)&lt;br/&gt;
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)&lt;br/&gt;
	org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1031)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:815)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:617)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:195)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:159)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:141)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:90)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:417)&lt;br/&gt;
root cause&lt;/p&gt;

&lt;p&gt;org.springframework.expression.spel.SpelEvaluationException: EL1021E:(pos 0): A problem occurred whilst attempting to access the property &apos;dateOfBirth&apos;: &apos;Unexpected exception occurred accessing &apos;dateOfBirth&apos; as an implicit variable&apos;&lt;br/&gt;
	org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:199)&lt;br/&gt;
	org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:71)&lt;br/&gt;
	org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)&lt;br/&gt;
	org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)&lt;br/&gt;
	org.springframework.web.servlet.tags.EvalTag.doEndTag(EvalTag.java:113)&lt;br/&gt;
	org.apache.jsp.WEB_002dINF.views.welcome_jsp._jspx_meth_spring_005feval_005f0(welcome_jsp.java:99)&lt;br/&gt;
	org.apache.jsp.WEB_002dINF.views.welcome_jsp._jspService(welcome_jsp.java:69)&lt;br/&gt;
	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)&lt;br/&gt;
	org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1031)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:815)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:617)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:195)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:159)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:141)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:90)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:417)&lt;br/&gt;
root cause&lt;/p&gt;

&lt;p&gt;org.springframework.expression.AccessException: Unexpected exception occurred accessing &apos;dateOfBirth&apos; as an implicit variable&lt;br/&gt;
	org.springframework.web.servlet.tags.EvalTag$JspPropertyAccessor.resolveImplicitVariable(EvalTag.java:186)&lt;br/&gt;
	org.springframework.web.servlet.tags.EvalTag$JspPropertyAccessor.canRead(EvalTag.java:159)&lt;br/&gt;
	org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:189)&lt;br/&gt;
	org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:71)&lt;br/&gt;
	org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)&lt;br/&gt;
	org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)&lt;br/&gt;
	org.springframework.web.servlet.tags.EvalTag.doEndTag(EvalTag.java:113)&lt;br/&gt;
	org.apache.jsp.WEB_002dINF.views.welcome_jsp._jspx_meth_spring_005feval_005f0(welcome_jsp.java:99)&lt;br/&gt;
	org.apache.jsp.WEB_002dINF.views.welcome_jsp._jspService(welcome_jsp.java:69)&lt;br/&gt;
	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)&lt;br/&gt;
	org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1031)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:815)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:617)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:195)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:159)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:141)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:90)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:417)&lt;br/&gt;
root cause&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	org.apache.jasper.runtime.PageContextImpl.doFindAttribute(PageContextImpl.java:467)&lt;br/&gt;
	org.apache.jasper.runtime.PageContextImpl.findAttribute(PageContextImpl.java:457)&lt;br/&gt;
	javax.servlet.jsp.el.ScopedAttributeELResolver.getValue(ScopedAttributeELResolver.java:53)&lt;br/&gt;
	javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)&lt;br/&gt;
	org.apache.jasper.el.VariableResolverImpl.resolveVariable(VariableResolverImpl.java:32)&lt;br/&gt;
	org.springframework.web.servlet.tags.EvalTag$JspPropertyAccessor.resolveImplicitVariable(EvalTag.java:183)&lt;br/&gt;
	org.springframework.web.servlet.tags.EvalTag$JspPropertyAccessor.canRead(EvalTag.java:159)&lt;br/&gt;
	org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:189)&lt;br/&gt;
	org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:71)&lt;br/&gt;
	org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)&lt;br/&gt;
	org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)&lt;br/&gt;
	org.springframework.web.servlet.tags.EvalTag.doEndTag(EvalTag.java:113)&lt;br/&gt;
	org.apache.jsp.WEB_002dINF.views.welcome_jsp._jspx_meth_spring_005feval_005f0(welcome_jsp.java:99)&lt;br/&gt;
	org.apache.jsp.WEB_002dINF.views.welcome_jsp._jspService(welcome_jsp.java:69)&lt;br/&gt;
	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)&lt;br/&gt;
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)&lt;br/&gt;
	org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1031)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:815)&lt;br/&gt;
	org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:717)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)&lt;br/&gt;
	org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:617)&lt;br/&gt;
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.NormalRewrittenUrl.doRewrite(NormalRewrittenUrl.java:195)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.handleRewrite(RuleChain.java:159)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.RuleChain.doRules(RuleChain.java:141)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriter.processRequest(UrlRewriter.java:90)&lt;br/&gt;
	org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:417)&lt;br/&gt;
note The full stack trace of the root cause is available in the Apache Tomcat/6.0.26 logs.&lt;/p&gt;</description>
            <key id="33735">SPR-7638</key>
            <summary>spring:eval causes SpelEvaluationException when page is opened in second user-session</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="ffankhauser">Florian Fankhauser</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Oct 2010 14:40:01 +0000</created>
                <updated>Tue, 19 Jun 2012 02:28:16 +0000</updated>
                            <resolved>Sun, 10 Oct 2010 15:05:12 +0000</resolved>
                                    <version>3.0.4</version>
                                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="59021" author="juergen.hoeller" created="Sun, 10 Oct 2010 15:05:13 +0000"  >&lt;p&gt;This should be fixed through &lt;a href=&quot;https://jira.spring.io/browse/SPR-7482&quot; title=&quot;Exception (SpelEvaluationException: EL1021E) when using spring:eval with Jetty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-7482&quot;&gt;&lt;del&gt;SPR-7482&lt;/del&gt;&lt;/a&gt; already. Please give a recent 3.0.5 snapshot a try and let us know whether it works for you...&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="59063" author="ffankhauser" created="Mon, 11 Oct 2010 11:29:41 +0000"  >&lt;p&gt;Works fine with current 3.0.5 snapshot. Sorry, I should have tested this with the current snapshot in the first place.&lt;br/&gt;
Thanks.&lt;/p&gt;

&lt;p&gt;Florian&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="32848">SPR-7482</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="17182" name="evaltagtest.zip" size="13860" author="ffankhauser" created="Sun, 10 Oct 2010 14:40:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        6 years, 11 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 10 Oct 2010 15:05:13 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i015b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>