<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:40:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2920/SPR-2920.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2920] Cannot export regular lazy-init MBeans when using AnnotationJmxAttributeSource</title>
                <link>https://jira.spring.io/browse/SPR-2920</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;When an exporter configured with AnnotationJmxAttributeSource encounters a lazy-init bean which extends an MBean interface it fails to export the mbean. The failure occurs in the call stack:&lt;/p&gt;

&lt;p&gt;registerLazyInit&lt;br/&gt;
    createAndConfigureMBean&lt;br/&gt;
        getMBeanInfo &lt;/p&gt;
{... this. assembler.getMBeanInfo(managedBean, beanKey); ...}

&lt;p&gt;Since the bean is an actual MBean and not a @ManagedResource the assembler fails.&lt;/p&gt;


&lt;p&gt;Here&apos;s the mbean exporter config:&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;jmx.attributeSource&quot;&lt;br/&gt;
        class=&quot;org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;jmx.assemblerExporter&quot; class=&quot;org.springframework.jmx.export.MBeanExporter&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;assembler&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;bean id=&quot;jmx.metadataAssembler&quot;&lt;br/&gt;
                class=&quot;org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;property name=&quot;attributeSource&quot; ref=&quot;jmx.attributeSource&quot; /&amp;gt;&lt;br/&gt;
            &amp;lt;/bean&amp;gt;&lt;br/&gt;
        &amp;lt;/property&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;autodetectModeName&quot; value=&quot;AUTODETECT_ALL&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;
</description>
            <key id="15651">SPR-2920</key>
            <summary>Cannot export regular lazy-init MBeans when using AnnotationJmxAttributeSource</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="memelet">Barry Kaplan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Dec 2006 06:49:39 +0000</created>
                <updated>Tue, 19 Jun 2012 03:51:21 +0000</updated>
                            <resolved>Sat, 20 Jan 2007 00:35:26 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.0.3</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="21569" author="costin" created="Tue, 2 Jan 2007 19:55:50 +0000"  >&lt;p&gt;Can you turn on logging and lookup for message: &quot;Autodetecting user-defined JMX MBeans&quot;. The detection of normal MBeans is done by the MBeanExporter not the assembler (the assembler looks only for annotations in this case).&lt;br/&gt;
If you have an mbean it should be exported by the MBean before the annotation processor kicks in.&lt;br/&gt;
I&apos;ve tried a small test locally and it passes - can you please retry on your machine with AUTODETECT_MBEAN and then AUTODETECT_ALL and see if you notice any change behavior.&lt;/p&gt;</comment>
                            <comment id="21828" author="juergen.hoeller" created="Sat, 20 Jan 2007 00:35:26 +0000"  >&lt;p&gt;I&apos;ve reworked MBeanExporter accordinlgy: It supports lazy-init standard MBeans analogously to lazy-init Spring beans with ModelMBean wrapping now. Essentially, what we needed there was an explicit &quot;is already an MBean&quot; check with special lazy-init proxy generation for that case, completely bypassing the MBeanInfoAssembler for such beans.&lt;/p&gt;

&lt;p&gt;Note that true lazy initialization only really works for standard MBeans with a matching *MBean interface. DynamicMBeans will typically be initialized early when the MBeanServer asks for the MBeanInfo (through &quot;DynamicMBean.getMBeanInfo&quot;).&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="21829" author="juergen.hoeller" created="Sat, 20 Jan 2007 00:36:26 +0000"  >&lt;p&gt;This should be available in the next 2.0.3 snapshot (&lt;a href=&quot;http://www.springframework.org/snapshots&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.springframework.org/snapshots&lt;/a&gt;). Feel free to give it a try...&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        9 years, 49 weeks, 5 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 2 Jan 2007 19:55:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00v53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5090</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>