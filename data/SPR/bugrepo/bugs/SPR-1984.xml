<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 17:51:54 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1984/SPR-1984.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1984] SimpleMappingExceptionResolver.findMatchingViewName() uses the instance exceptionMappings instead of the local exceptionMappings</title>
                <link>https://jira.spring.io/browse/SPR-1984</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I have been extending SimpleMappingExceptionResolver and had it throwing an unexpected null pointer in the inherited findMatchingViewName(). I was passing my own mapping object into the method yet it was never using it as it is the inherited instance Properties object that gets used in the method as there is a &apos;this&apos; in front of all the references. I would expect the local one to be used.&lt;/p&gt;

&lt;p&gt;protected String findMatchingViewName(Properties exceptionMappings, Exception ex) {&lt;br/&gt;
		int deepest = Integer.MAX_VALUE;&lt;br/&gt;
		for (Enumeration names = this.exceptionMappings.propertyNames(); names.hasMoreElements()&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; {&lt;br/&gt;
			String exceptionMapping = (String) names.nextElement();&lt;br/&gt;
			int depth = getDepth(exceptionMapping, ex);&lt;br/&gt;
			if (depth &amp;gt;= 0 &amp;amp;&amp;amp; depth &amp;lt; deepest) &lt;/p&gt;
{
				deepest = depth;
				return this.exceptionMappings.getProperty(exceptionMapping);
			}
&lt;p&gt;		}&lt;br/&gt;
		return null;&lt;br/&gt;
	}&lt;/p&gt;</description>
            <key id="13904">SPR-1984</key>
            <summary>SimpleMappingExceptionResolver.findMatchingViewName() uses the instance exceptionMappings instead of the local exceptionMappings</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="gpoore">Gary Poore</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 May 2006 08:56:22 +0000</created>
                <updated>Tue, 19 Jun 2012 03:52:47 +0000</updated>
                            <resolved>Sat, 6 May 2006 09:17:11 +0000</resolved>
                                    <version>1.2.7</version>
                    <version>2.0 M3</version>
                                    <fixVersion>1.2.8</fixVersion>
                    <fixVersion>2.0 M5</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="17501" author="gpoore" created="Fri, 5 May 2006 01:20:58 +0000"  >&lt;p&gt;I&apos;ve just noticed something else aswell. This method can&apos;t work as intended as it will only ever go through the loop once.&lt;/p&gt;

&lt;p&gt;Assuming that the exceptionMappings has atleast one entry then the depth calcualtion will always yeild a result of less that Integer.MAX_VALUE which means the return statement will always get hit on the first iteration of the loop.&lt;/p&gt;

&lt;p&gt;What shouldbe happening is that a local variable gets updated when an entry is identified as being the shallowest and then the loop allowed to reiterate through the remainder of the elements to find potentially shallower entires. The return should not be till after the loop has completed a full run of the list.&lt;/p&gt;

&lt;p&gt;e.g.&lt;/p&gt;

&lt;p&gt;protected String findMatchingErrorKey(Properties exceptionMappings,Exception ex) {&lt;br/&gt;
		int deepest = Integer.MAX_VALUE;&lt;br/&gt;
		String deepestMapping = null;&lt;br/&gt;
		for (Enumeration names = exceptionMappings.propertyNames();&lt;br/&gt;
			names.hasMoreElements(); ) {&lt;br/&gt;
			String exceptionMapping = (String) names.nextElement();&lt;br/&gt;
			int depth = getDepth(exceptionMapping, ex);&lt;br/&gt;
			if (depth &amp;gt;= 0 &amp;amp;&amp;amp; depth &amp;lt; deepest) &lt;/p&gt;
{
				deepest = depth;
				deepestMapping = exceptionMapping;
			}
&lt;p&gt;		}&lt;/p&gt;

&lt;p&gt;		if (deepestMapping != null) &lt;/p&gt;
{
			return exceptionMappings.getProperty(deepestMapping);
		}

&lt;p&gt;		return null;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;or to make it more efficient the == 0 check should be seperate and allow an early return to save iterating over a list you know will not yield anything shallower.&lt;/p&gt;</comment>
                            <comment id="17513" author="juergen.hoeller" created="Sat, 6 May 2006 09:17:11 +0000"  >&lt;p&gt;Thanks for pointing this out! I&apos;ve fixed the code to use the local &quot;exceptionMappings&quot; variable.&lt;/p&gt;

&lt;p&gt;Regarding the other issue: This accidentally sneaked into 1.2.7 and has been fixed for the upcoming 1.2.8 release already.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 34 weeks, 5 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 6 May 2006 09:17:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i019gn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>