<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:23:57 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-6/SPR-6.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-6] special characters in url</title>
                <link>https://jira.spring.io/browse/SPR-6</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I&apos;m using special characters in my path. An error occurs while getting the handler for this path as soon as the uri contains special charaters. After a lot of tracing it seemed to result from the WebUtils.getLookupPathForRequest.&lt;/p&gt;

&lt;p&gt;The method HttpServletRequest.getServletPath returns a decoded path, while all other returned paths are NOT decoded (according to J2EE spec). After I&apos;ve added the decoding of the context path and request uri, it worked. This seems to be a bug in the framework. No tests broke because of the change.&lt;/p&gt;

&lt;p&gt;The FIX:&lt;br/&gt;
In org.springframework.web.utils.WebUtils:&lt;br/&gt;
replace line 176 with:&lt;br/&gt;
&amp;gt; try &lt;/p&gt;
{
&amp;gt;     uri = URLDecoder.decode(request.getRequestURI(), &quot;UTF-8&quot;);
&amp;gt; }
&lt;p&gt; catch(UnsupportedEncodingException e) &lt;/p&gt;
{
&amp;gt;     log.error(&quot;unable to decode the request uri&quot;, e);
&amp;gt; }

&lt;p&gt;and line 191 with:&lt;br/&gt;
&amp;gt; try &lt;/p&gt;
{
&amp;gt;     contextPath = URLDecoder.decode(request.getContextPath(), &quot;UTF-8&quot;);
&amp;gt; }
&lt;p&gt; catch(UnsupportedEncodingException e) &lt;/p&gt;
{
&amp;gt;     log.error(&quot;unable to decode the context path&quot;, e);
&amp;gt; }

&lt;p&gt;It might be neccessary to make even more changes, but this seems to work at least for me. I would suggest adding some tests to the org.springframework.web.servlet.handler.PathMatchingUrlHandlerMappingTestSuite to include some paths like: &lt;br/&gt;
&amp;gt; /test%26test/pathmatching.html&lt;br/&gt;
&amp;gt; /test%26test/path%26matching.html&lt;br/&gt;
&amp;gt; /test%26t%20est/path%20%26matching.html&lt;/p&gt;</description>
            <key id="10020">SPR-6</key>
            <summary>special characters in url</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="1" iconUrl="https://jira.spring.io/images/icons/priorities/blocker.png">Blocker</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="bram">Bram Smeets</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Dec 2003 06:15:26 +0000</created>
                <updated>Sat, 10 Jan 2004 08:47:25 +0000</updated>
                            <resolved>Sat, 10 Jan 2004 08:47:25 +0000</resolved>
                                    <version>1.0 M4</version>
                                    <fixVersion>1.0 RC1</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="10026" author="bram" created="Thu, 11 Dec 2003 08:15:29 +0000"  >&lt;p&gt;Hi, back again...&lt;br/&gt;
The proposed sollution appears to be incorrect..&lt;/p&gt;

&lt;p&gt;The decoding using UTF-8 encoding is incorrect. It does not support international characters (like &#233;, etc.).&lt;br/&gt;
Therefore I&apos;ve tested with US-ASCII, and it works better!&lt;/p&gt;

&lt;p&gt;Using the UTF-8 encoding I get an unexpected error while using special characters (stacktrace below). &lt;/p&gt;

&lt;p&gt;Hope you can incorporate this asap.&lt;/p&gt;

&lt;p&gt;2003-12-11 22:51:08,156 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.context.support.XmlWebApplicationContext&amp;#93;&lt;/span&gt; Publishing event in context &lt;span class=&quot;error&quot;&gt;&amp;#91;XmlWebApplicationContext for namespace &amp;#39;main-servlet&amp;#39;&amp;#93;&lt;/span&gt;: RequestHandledEvent: url=&lt;span class=&quot;error&quot;&gt;&amp;#91;/11-12-03/E&#233;n test!/gallery.view&amp;#93;&lt;/span&gt; time=0ms client=127.0.0.1 method=&apos;GET&apos; servlet=&apos;main&apos;OK status=RequestHandledEvent: url=&lt;span class=&quot;error&quot;&gt;&amp;#91;/11-12-03/E&#233;n test!/gallery.view&amp;#93;&lt;/span&gt; time=0ms client=127.0.0.1 method=&apos;GET&apos; servlet=&apos;main&apos;OK&lt;br/&gt;
2003-12-11 22:51:08,515 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt; Testing handler map &lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping@11adeef&amp;#93;&lt;/span&gt; in DispatcherServlet with name &apos;main&apos;&lt;br/&gt;
2003-12-11 22:51:08,515 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt; Exception thrown in getLastModified&lt;br/&gt;
java.lang.StringIndexOutOfBoundsException: String index out of range: -1&lt;br/&gt;
	at java.lang.String.substring(String.java:1480)&lt;br/&gt;
	at java.lang.String.substring(String.java:1447)&lt;br/&gt;
	at org.springframework.web.util.WebUtils.getPathWithinServletMapping(WebUtils.java:225)&lt;br/&gt;
	at org.springframework.web.util.WebUtils.getLookupPathForRequest(WebUtils.java:245)&lt;br/&gt;
	at org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.getHandlerInternal(AbstractUrlHandlerMapping.java:50)&lt;br/&gt;
	at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:77)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:465)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.getLastModified(DispatcherServlet.java:436)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:736)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:360)&lt;br/&gt;
	at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:294)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:558)&lt;br/&gt;
	at org.mortbay.http.HttpContext.handle(HttpContext.java:1714)&lt;br/&gt;
	at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:507)&lt;br/&gt;
	at org.mortbay.http.HttpContext.handle(HttpContext.java:1664)&lt;br/&gt;
	at org.mortbay.http.HttpServer.service(HttpServer.java:863)&lt;br/&gt;
	at org.jboss.jetty.Jetty.service(Jetty.java:460)&lt;br/&gt;
	at org.mortbay.http.HttpConnection.service(HttpConnection.java:775)&lt;br/&gt;
	at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:939)&lt;br/&gt;
	at org.mortbay.http.HttpConnection.handle(HttpConnection.java:792)&lt;br/&gt;
	at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:201)&lt;br/&gt;
	at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:289)&lt;br/&gt;
	at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:455)&lt;br/&gt;
2003-12-11 22:51:08,515 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.web.servlet.DispatcherServlet&amp;#93;&lt;/span&gt; DispatcherServlet with name &apos;main&apos; received request for &lt;span class=&quot;error&quot;&gt;&amp;#91;/11-12-03/E&#233;n test!/gallery.view&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="10041" author="dmitriy" created="Sun, 21 Dec 2003 09:06:10 +0000"  >&lt;p&gt;Juergen, can you please take a look &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="10060" author="juergen.hoeller" created="Mon, 5 Jan 2004 05:27:37 +0000"  >&lt;p&gt;I have already started looking on this, but have decided to release M4 before. This is not trivial to solve: I have not been able to find any handling of such encoding issues in Struts either. Nevertheless,a RC1 issue.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="10061" author="dmitriy" created="Mon, 5 Jan 2004 05:38:03 +0000"  >&lt;p&gt;Added &quot;Fix Version&quot; - 1.0RC1&lt;/p&gt;</comment>
                            <comment id="10070" author="juergen.hoeller" created="Sat, 10 Jan 2004 08:47:25 +0000"  >&lt;p&gt;now decoding request URI and context path, taking the encoding from request.getCharacterEncoding, falling back to ISO-8859-1 in case of null (in accordance to the Servlet spec)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        12 years, 51 weeks, 5 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 21 Dec 2003 09:06:10 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01bh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>