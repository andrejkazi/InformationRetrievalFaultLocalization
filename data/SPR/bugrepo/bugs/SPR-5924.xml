<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:44:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-5924/SPR-5924.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-5924] REOPENED -PathVariable mappings are greedy over hard coded mappings</title>
                <link>https://jira.spring.io/browse/SPR-5924</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Hard coded request mapping values should take precedence over path variables.  Wild card patterns in a path are currently inferior to explicit values.  Path variables should be applied after explicit paths and before wild cards.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;@RequestMapping(value = &quot;/resources/new/&quot;, method = RequestMethod.GET)&lt;br/&gt;
is currently trumped by&lt;br/&gt;
@RequestMapping(value = &quot;/resources/&lt;/p&gt;
{resourceName}/&quot;, method = RequestMethod.GET)&lt;br/&gt;
&lt;br/&gt;
@RequestMapping(value = &quot;/resources/new/&quot;, method = RequestMethod.GET)&lt;br/&gt;
currently trumps&lt;br/&gt;
@RequestMapping(value = &quot;/resources/*/&quot;, method = RequestMethod.GET)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
@RequestMapping(value = &quot;/resources/new/&quot;, method = RequestMethod.GET)&lt;br/&gt;
should trump&lt;br/&gt;
@RequestMapping(value = &quot;/resources/{resourceName}
&lt;p&gt;/&quot;, method = RequestMethod.GET)&lt;br/&gt;
should trump&lt;br/&gt;
@RequestMapping(value = &quot;/resources/*/&quot;, method = RequestMethod.GET)&lt;/p&gt;</description>
            <key id="27298">SPR-5924</key>
            <summary>REOPENED -PathVariable mappings are greedy over hard coded mappings</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arjen.poutsma">Arjen Poutsma</assignee>
                                    <reporter username="eric.bottard">Eric Bottard</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jul 2009 00:15:59 +0000</created>
                <updated>Tue, 19 Jun 2012 03:44:07 +0000</updated>
                            <resolved>Mon, 13 Jul 2009 18:08:50 +0000</resolved>
                                    <version>3.0 M1</version>
                                    <fixVersion>3.0 M4</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="45448" author="eric.bottard" created="Mon, 13 Jul 2009 00:20:53 +0000"  >&lt;p&gt;This is issue &lt;a href=&quot;https://jira.spring.io/browse/SPR-5367&quot; title=&quot;PathVariable mappings are greedy over hard coded mappings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-5367&quot;&gt;&lt;del&gt;SPR-5367&lt;/del&gt;&lt;/a&gt;, which I could not reopen properly, sorry if this is not the worrect way to do this.&lt;/p&gt;

&lt;p&gt;Anyway, it seems that the correction you commited (&lt;a href=&quot;https://fisheye.springsource.org/changelog/spring-framework/?cs=563&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://fisheye.springsource.org/changelog/spring-framework/?cs=563&lt;/a&gt;) for this does not cover all cases, and indeed the ROO created controllers I get in my project don&apos;t work.&lt;/p&gt;

&lt;p&gt;When there is &quot;/some/form&quot; and &quot;/some/&lt;/p&gt;
{id}
&lt;p&gt;&quot;, nowhere in the RequestMappingInfoComparator do you favor the &quot;/form&quot; path over the one with @PathVariables. The behaviour is thus undefined.&lt;/p&gt;

&lt;p&gt;Please review and correct me if I&apos;m wrong.&lt;/p&gt;

&lt;p&gt;Also, the fact that the comparator may eventually return 0 is a code smell in my opinion, because the developper has no idea of the fact that there is some ambiguity.&lt;/p&gt;</comment>
                            <comment id="45451" author="arjen.poutsma" created="Mon, 13 Jul 2009 02:01:50 +0000"  >&lt;p&gt;You cannot reopen that issue, because you are not the reporter of it. So creating a new issue like you did is the correct this to do &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;The trick is that the RequestMappingInfoComparator delegates to the PathComparator (created via AntPathMatcher.getPatternComparator()) to do the pattern comparison. And that pattern comparator &lt;b&gt;does&lt;/b&gt; put patterns without uri templates before those without (see the tests). Only when the patterns are considered equal, then the RMIC kicks in (checking params, headers, HTTP methods, etc).&lt;/p&gt;

&lt;p&gt;Can you give me a test case or code snippet which shows the problems you are having?&lt;/p&gt;</comment>
                            <comment id="45452" author="eric.bottard" created="Mon, 13 Jul 2009 02:24:13 +0000"  >&lt;p&gt;Hmmm, since you made a typo in your previous comment, I&apos;m not sure what you meant (2x &apos;without&apos;) :&lt;br/&gt;
  And that pattern comparator does put patterns without uri templates before those without&lt;br/&gt;
I assume you meant without / with, which is what is implied by this copied bug description.&lt;/p&gt;

&lt;p&gt;Anyway, I think I found the source of the problem. Seems like the ugly copy/paste beast stroke twice in AntPathMatcher :&lt;/p&gt;

&lt;p&gt;int bracketCount1 = StringUtils.countOccurrencesOf(pattern1, &quot;{&quot;);&lt;br/&gt;
int bracketCount2 = StringUtils.countOccurrencesOf(pattern1, &quot;{&quot;);     &amp;lt;----- here, should be pattern1&lt;br/&gt;
			if (bracketCount1 &amp;lt; bracketCount2) &lt;/p&gt;
{
				return -1;
			}
&lt;p&gt;			else if (bracketCount1 &amp;lt; bracketCount2) &lt;/p&gt;
{          &amp;lt;----- here, should be &quot;&amp;gt;&quot;
				return 1;
			}

&lt;p&gt;I&apos;m using Spring 3.0.0M3&lt;/p&gt;

&lt;p&gt;A testcase is easy to reproduce : just create some automatic Roo controller (my command is of class &quot;Question&quot; if that may have any impact on method ordering)&lt;/p&gt;</comment>
                            <comment id="45453" author="eric.bottard" created="Mon, 13 Jul 2009 02:25:19 +0000"  >&lt;p&gt;Damn, I got fooled myself.&lt;br/&gt;
Please read &quot;here, should be pattern2&quot;&lt;/p&gt;</comment>
                            <comment id="45455" author="arjen.poutsma" created="Mon, 13 Jul 2009 02:35:51 +0000"  >&lt;p&gt;Ohhh, cr*p. Fixing that typo right now.&lt;/p&gt;

&lt;p&gt;Thanks for spotting this! Four eyes see more than two &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;Can you try a recent snapshot (as of tonight) and try again?&lt;/p&gt;</comment>
                            <comment id="45456" author="arjen.poutsma" created="Mon, 13 Jul 2009 02:41:41 +0000"  >&lt;p&gt;One more thing: not sure about that second part of your fix, the &lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;else if (bracketCount1 &amp;lt; bracketCount2) { &amp;lt;----- here, should be &quot;&amp;gt;&quot; return 1; }&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;part.&lt;/p&gt;

&lt;p&gt;The idea is that patterns with two brackets (uri templates) end up before those with one, because they are more specific.&lt;/p&gt;</comment>
                            <comment id="45457" author="eric.bottard" created="Mon, 13 Jul 2009 02:42:59 +0000"  >&lt;p&gt;Copy/Paste is the root of all evil I tell you.&lt;/p&gt;

&lt;p&gt;Trying a recent snapshot is cumbersome for me, but I copy/pasted the class and made the change myself, making sure my version of the matcher got picked. And sure enough, the problem goes away...&lt;/p&gt;

&lt;p&gt;Glad you fixed the issue so quicky, thank you.&lt;/p&gt;</comment>
                            <comment id="45458" author="eric.bottard" created="Mon, 13 Jul 2009 02:46:57 +0000"  >&lt;blockquote&gt;

&lt;p&gt;One more thing: not sure about that second part of your fix, the&lt;/p&gt;

&lt;p&gt;else if (bracketCount1 &amp;lt; bracketCount2) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: { &amp;lt;----- here, should be &amp;quot;&amp;gt;&amp;quot; return 1; }&lt;/span&gt; &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;part.&lt;/p&gt;

&lt;p&gt;The idea is that patterns with two brackets (uri templates) end up before those with one, because they are more specific.&lt;/p&gt;

&lt;p&gt;Sure enough, but here again, there seems to be a copy/paste issue : the test is exactly the same as 2 lines before (ie you forgot to switch bC1 and bC2)&lt;/p&gt;

</comment>
                            <comment id="45482" author="arjen.poutsma" created="Mon, 13 Jul 2009 18:08:50 +0000"  >&lt;p&gt;Jeez. Good thing I&apos;m going on a holiday tomorrow! &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Fixed that too. Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="25118">SPR-5362</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10020">
                    <name>Related</name>
                                            <outwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="25130">SPR-5367</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="26515">SPR-5731</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        7 years, 24 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 13 Jul 2009 02:01:50 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00qsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4387</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>