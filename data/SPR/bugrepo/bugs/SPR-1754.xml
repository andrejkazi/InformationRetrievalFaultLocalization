<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:18:36 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1754/SPR-1754.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1754] javaScriptEscape in Spring tags doesn&apos;t escape &lt;/script&gt;</title>
                <link>https://jira.spring.io/browse/SPR-1754</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Browsers parse the &amp;lt;/script&amp;gt; tag even if it appears inside a string literal in javascript. In other words, the following HTML:&lt;br/&gt;
&amp;lt;html&amp;gt;&lt;br/&gt;
  &amp;lt;body&amp;gt;&lt;br/&gt;
    &amp;lt;script&amp;gt;&lt;br/&gt;
      document.write(&quot;&amp;lt;/script&amp;gt;&quot;);&lt;br/&gt;
    &amp;lt;/script&amp;gt;&lt;br/&gt;
   &amp;lt;/body&amp;gt;&lt;br/&gt;
&amp;lt;/html&amp;gt;&lt;br/&gt;
is invalid because the &amp;lt;/script&amp;gt; inside the document.write() will be interpreted as the end of the javascript.&lt;/p&gt;

&lt;p&gt;Spring&apos;s javaScriptEscape should handle escaping the &amp;lt;/script&amp;gt; tag to prevent a web page from breaking when someone sends &amp;lt;/script&amp;gt; as input. Here&apos;s a jsp that demonstrates the problem:&lt;br/&gt;
&amp;lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&amp;gt;&lt;br/&gt;
&amp;lt;%@ taglib uri=&quot;http://www.springframework.org/tags&quot; prefix=&quot;spring&quot;%&amp;gt;&lt;br/&gt;
&amp;lt;html&amp;gt;&lt;br/&gt;
  &amp;lt;body id=&quot;body&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;/body&amp;gt;&lt;br/&gt;
  &amp;lt;script type=&quot;text/javascript&quot;&amp;gt;&lt;br/&gt;
	  function drawTextInput(value) &lt;/p&gt;
{
		  var input = document.createElement(&quot;input&quot;);
		  input.type = &quot;text&quot;;
		  input.value = value;
		  document.getElementById(&quot;body&quot;).appendChild(input);
	  }
&lt;p&gt;	  drawTextInput(&apos;&amp;lt;c:out value=&quot;$&lt;/p&gt;
{param.input}&quot;/&amp;gt;&apos;);&lt;br/&gt;
	  drawTextInput(&apos;&amp;lt;spring:message text=&quot;${param.input}
&lt;p&gt;&quot; javaScriptEscape=&quot;true&quot;/&amp;gt;&apos;);&lt;br/&gt;
  &amp;lt;/script&amp;gt;&lt;br/&gt;
&amp;lt;/html&amp;gt;&lt;/p&gt;

&lt;p&gt;If you deploy and browse to this JSP, you can control the text field values with a request parameter named input, like /jstest.jsp?input=foo&lt;br/&gt;
I put in the &amp;lt;c:out&amp;gt; and &amp;lt;spring:message&amp;gt; versions to show the different behaviors between these two tags. I want the text input value to match the user input, but &amp;lt;c:out&amp;gt; escapes it, so I need to use something like the spring tag with javaScriptEscaping. But you&apos;ll notice that if you set input=&amp;lt;/script&amp;gt;, it breaks the page. In case you&apos;re wondering why I would do this in a real application, I have some dynamic forms with a lot of interactive functionality, and most of the form HTML is conditionally rendered by javascript based on user interactions. &lt;/p&gt;

&lt;p&gt;I took a look at the source code, and the fix is very easy. I just added the following condition in JavaScriptUtils.javaScriptEscape()&lt;br/&gt;
    else if (c == &apos;/&apos;) &lt;/p&gt;
{
        filtered.append(&quot;\\/&quot;);
    }

&lt;p&gt;This will replace &apos;/&apos; with &apos;\/&apos;, which is for the most part equivalent to &apos;/&apos; but has the nice side effect that &amp;lt;\/script&amp;gt; will not be interpreted as the end script tag in string literals. You can verify the fix with the JSP above, but here&apos;s another one you can use to verify that also demonstrates the new replacement operation does not change the interpreted value of the string literals:&lt;br/&gt;
&amp;lt;%@ taglib uri=&quot;http://www.springframework.org/tags&quot; prefix=&quot;spring&quot;%&amp;gt;&lt;br/&gt;
&amp;lt;% String endScript = &quot;&amp;lt;/script&amp;gt;&quot;; %&amp;gt;&lt;br/&gt;
&amp;lt;html&amp;gt;&lt;br/&gt;
  &amp;lt;body&amp;gt;&lt;br/&gt;
    &amp;lt;script type=&quot;text/javascript&quot;&amp;gt;&lt;br/&gt;
	  alert(&quot;&amp;lt;spring:escapeBody javaScriptEscape=&quot;true&quot;&amp;gt;&amp;lt;%= endScript %&amp;gt;&amp;lt;/spring:escapeBody&amp;gt;&quot;);&lt;br/&gt;
	  alert(&quot;/&quot; == &quot;\/&quot;);&lt;br/&gt;
	  alert(&quot;&amp;lt;/&quot;+&quot;script&amp;gt;&quot; == &quot;&amp;lt;spring:escapeBody javaScriptEscape=&quot;true&quot;&amp;gt;&amp;lt;%= endScript %&amp;gt;&amp;lt;/spring:escapeBody&amp;gt;&quot;);&lt;br/&gt;
    &amp;lt;/script&amp;gt;&lt;br/&gt;
  &amp;lt;/body&amp;gt;&lt;br/&gt;
&amp;lt;/html&amp;gt;&lt;/p&gt;</description>
            <key id="13444">SPR-1754</key>
            <summary>javaScriptEscape in Spring tags doesn&apos;t escape &lt;/script&gt;</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robh">Rob Harrop</assignee>
                                    <reporter username="adamj">Adam Murray</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Mar 2006 12:59:55 +0000</created>
                <updated>Tue, 19 Jun 2012 03:54:26 +0000</updated>
                            <resolved>Tue, 11 Apr 2006 01:33:13 +0000</resolved>
                                                    <fixVersion>1.2.8</fixVersion>
                    <fixVersion>2.0 M4</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="16704" author="bayard" created="Tue, 7 Mar 2006 09:08:00 +0000"  >&lt;p&gt;Hi Adam,&lt;/p&gt;

&lt;p&gt;I had a play with this with a work colleague and after digging into it a bit we realised that there is a simple (and old &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ) work-around.&lt;/p&gt;

&lt;p&gt;Your problem is that the HTML parser doesn&apos;t want to understand the syntax of the scripting implementation, so if you comment out the javascript it won&apos;t fall over on the closing script tag.&lt;/p&gt;

&lt;p&gt;ie:    (hoping that Jira escapes this nicely)&lt;/p&gt;

&lt;p&gt;&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;&lt;br/&gt;
&amp;lt;!--&lt;br/&gt;
drawTextInput(&apos;&amp;lt;spring:message text=&quot;$&lt;/p&gt;
{param.input}
&lt;p&gt;&quot; javaScriptEscape=&quot;true&quot;/&amp;gt;&apos;); &lt;br/&gt;
--&amp;gt;&lt;br/&gt;
&amp;lt;/script&amp;gt;&lt;/p&gt;

&lt;p&gt;This is an old work-around from the JScript/JavaScript days of IE3 and NN4 (or versions around that time).&lt;/p&gt;</comment>
                            <comment id="16707" author="adamj" created="Tue, 7 Mar 2006 09:57:46 +0000"  >&lt;p&gt;Thanks for the info, Henri.&lt;br/&gt;
That&apos;s a nice workaround, but it could creates some other problems. If for some reason you need to include the characters --&amp;gt; anywhere in the javascript, even in a string literal, it will end the comment. This script breaks in firefox:&lt;/p&gt;

&lt;p&gt;&amp;lt;script&amp;gt;&lt;br/&gt;
&amp;lt;!--&lt;br/&gt;
document.write(&quot;--&amp;gt;&quot;);&lt;br/&gt;
document.write(&quot;&amp;lt;/script&amp;gt;&quot;);&lt;br/&gt;
--&amp;gt;&lt;br/&gt;
&amp;lt;/script&amp;gt;&lt;/p&gt;

&lt;p&gt;I know that&apos;s contrived and unlikely to happen, but the point remains that there are still situations where this fix will not work.&lt;/p&gt;

&lt;p&gt;But there&apos;s a bigger problem. In xhtml documents, some browsers will respect the comment and ignore all the javascript. See &lt;a href=&quot;http://developer.mozilla.org/en/docs/Properly_Using_CSS_and_JavaScript_in_XHTML_Documents#Use_of_Comments_Inside_Inline_style_and_script&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://developer.mozilla.org/en/docs/Properly_Using_CSS_and_JavaScript_in_XHTML_Documents#Use_of_Comments_Inside_Inline_style_and_script&lt;/a&gt; for details.&lt;/p&gt;

&lt;p&gt;So your suggestion is an acceptable temporary workaround for straight HTML, but I think the long term fix should be to address this issue in Spring.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 43 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 7 Mar 2006 09:08:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i019hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>