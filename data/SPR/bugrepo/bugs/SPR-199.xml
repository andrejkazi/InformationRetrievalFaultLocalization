<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:35:59 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-199/SPR-199.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-199] Trying to add a  Cutom Editor to a particular attribute of type array</title>
                <link>https://jira.spring.io/browse/SPR-199</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Not sure if this is abug or I am doing something wrong:&lt;/p&gt;

&lt;p&gt;public class TestForm  {&lt;/p&gt;

&lt;p&gt;    private Boolean testBoolean;   &lt;br/&gt;
    private String[] arrayOne;&lt;br/&gt;
    private String[] arrayTwo;&lt;/p&gt;

&lt;p&gt;    public TestForm() {}&lt;/p&gt;

&lt;p&gt;    public String[] getArrayOne() &lt;/p&gt;
{
        return this.arrayOne;
    }

&lt;p&gt;    public void setArrayOne(String[] arrayOne) &lt;/p&gt;
{
        this.arrayOne = arrayOne;
    }

&lt;p&gt;    public String[] getArrayTwo() &lt;/p&gt;
{
        return this.arrayTwo;
    }

&lt;p&gt;    public void setArrayTwo(String[] arrayTwo) &lt;/p&gt;
{
        this.arrayTwo = arrayTwo;
    }

&lt;p&gt;    public Boolean getTestBoolean() &lt;/p&gt;
{
        return this.testBoolean;
    }

&lt;p&gt;    public void setTestBoolean(Boolean testBoolean) &lt;/p&gt;
{
        this.testBoolean = testBoolean;
    }
&lt;p&gt;}&lt;br/&gt;
---------------------------------------------&lt;/p&gt;

&lt;p&gt;And my test case is :&lt;/p&gt;

&lt;p&gt;---------------------------------------------&lt;/p&gt;

&lt;p&gt;public void testBindWithInitializer() throws ServletException {&lt;/p&gt;

&lt;p&gt;        ServletContext sc = new MockServletContext();&lt;br/&gt;
        MockHttpServletRequest request = new MockHttpServletRequest(sc);&lt;/p&gt;

&lt;p&gt;        request.addParameter(&quot;testBoolean&quot;, &quot;true&quot;);&lt;br/&gt;
        request.addParameter(&quot;arrayTwo&quot;, &quot;arraytwo_1,arraytwo_2&quot;);&lt;/p&gt;

&lt;p&gt;        TestForm form = new TestForm();&lt;br/&gt;
        Errors errors = BindUtils.bind(request,form, &quot;form&quot;, new BindInitializer() {&lt;br/&gt;
            public void initBinder(ServletRequest request, ServletRequestDataBinder binder) &lt;/p&gt;
{
                binder.registerCustomEditor(String[].class,&quot;arrayTwo&quot;,new StringArrayPropertyEditor());
            }
&lt;p&gt;        });&lt;/p&gt;

&lt;p&gt;        assertTrue(&quot;arraytwo length&quot;, form.getArrayTwo().length == 2);&lt;/p&gt;

&lt;p&gt;    }&lt;/p&gt;


&lt;p&gt;I get the following error :&lt;/p&gt;


&lt;p&gt;Testcase: testBindWithInitializer took 0.12 sec&lt;br/&gt;
	Caused an ERROR&lt;br/&gt;
Invalid property &apos;arrayTwo&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&apos; of bean class &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.TestForm&amp;#93;&lt;/span&gt;: Cannot access indexed value of property referenced in indexed property path &apos;arrayTwo&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&apos;: returned null&lt;br/&gt;
org.springframework.beans.NullValueInNestedPathException: Invalid property &apos;arrayTwo&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&apos; of bean class &lt;span class=&quot;error&quot;&gt;&amp;#91;com.test.TestForm&amp;#93;&lt;/span&gt;: Cannot access indexed value of property referenced in indexed property path &apos;arrayTwo&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&apos;: returned null&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:499)&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:484)&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.getPropertyType(BeanWrapperImpl.java:917)&lt;br/&gt;
	at org.springframework.validation.BindException.resolveMessageCodes(BindException.java:162)&lt;br/&gt;
	at org.springframework.validation.DataBinder.bind(DataBinder.java:229)&lt;br/&gt;
	at org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:92)&lt;br/&gt;
	at org.springframework.web.bind.BindUtils.bind(BindUtils.java:65)&lt;br/&gt;
	at com.test.TestMail.testBindWithInitializer(TestMail.java:82)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.run(InternalAntRunner.java:377)&lt;br/&gt;
	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.main(InternalAntRunner.java:135)&lt;/p&gt;</description>
            <key id="10380">SPR-199</key>
            <summary>Trying to add a  Cutom Editor to a particular attribute of type array</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="shishirksingh">Shishir K Singh</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Jul 2004 05:49:20 +0000</created>
                <updated>Fri, 2 Jul 2004 05:30:58 +0000</updated>
                            <resolved>Fri, 2 Jul 2004 05:30:58 +0000</resolved>
                                    <version>1.0.2</version>
                                    <fixVersion>1.1 RC1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="10563" author="shishirksingh" created="Thu, 1 Jul 2004 05:55:25 +0000"  >&lt;p&gt;Using Spring version : 1.0.3 build dated 27.6.2004 from cvs. &lt;/p&gt;
</comment>
                            <comment id="10565" author="juergen.hoeller" created="Thu, 1 Jul 2004 06:46:06 +0000"  >&lt;p&gt;Your test code works nicely on my machine. However, the stacktrace that you posted tells me that you have specified required fields, possibly an indexed field like &quot;arrayTwo&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&quot;. Adapting the test code accordingly indeed causes it to fail with a stacktrace similar to yours, because it can&apos;t resolve the type of the erroneous field.&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed BeanWrapperImpl accordingly; you might give a current CVS snapshot a try. If you&apos;ve never specified required fields for your test runs, then there must be some other cause - which still might be fixed through my BeanWrapperImpl change. I guess you simply posted the wrong test code, though (i.e. not the one that specified required fields).&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="10566" author="shishirksingh" created="Thu, 1 Jul 2004 07:05:40 +0000"  >&lt;p&gt;Juegen, &lt;/p&gt;

&lt;p&gt;Thanks for the quick turnaround. I copied all that I posted here and ran the test code and I get the same results. &lt;/p&gt;

&lt;p&gt;I am not sure about what you meant by&lt;/p&gt;

&lt;p&gt; &quot;the stacktrace that you posted tells me that you have specified required fields, possibly an indexed field like &quot;arrayTwo&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&quot; &quot;. &lt;/p&gt;

&lt;p&gt;Where would I be specifying the required fields?  Can you pls show the adapted test case that you ran to get the same error. I am going to try the latest BeanWrapperImpl and will let you know. &lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Shishir&lt;/p&gt;</comment>
                            <comment id="10567" author="juergen.hoeller" created="Thu, 1 Jul 2004 07:25:36 +0000"  >&lt;p&gt;Check out the new test case &quot;testBindWithRequiredArrayField&quot; in BindUtilsTestSuite which tests exactly the case I discovered. If you still manage to cause BeanWrapperImpl misbehavior, let me know &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="10568" author="juergen.hoeller" created="Thu, 1 Jul 2004 07:26:59 +0000"  >&lt;p&gt;Note that it might take a while until the latest changes are visible at SourceForge anonymous CVS.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="10569" author="shishirksingh" created="Thu, 1 Jul 2004 20:46:20 +0000"  >&lt;p&gt;Juergen, &lt;/p&gt;

&lt;p&gt;With the same form as mentioned above, I modified the test case as &lt;br/&gt;
----------------------------------------------------------&lt;br/&gt;
ServletContext sc = new MockServletContext();&lt;br/&gt;
MockHttpServletRequest request = new MockHttpServletRequest(sc);&lt;/p&gt;

&lt;p&gt;request.addParameter(&quot;arrayTwo&quot;, &quot;&quot;);&lt;br/&gt;
TestForm form = new TestForm();&lt;/p&gt;

&lt;p&gt;Errors errors = BindUtils.bind(request,form, &quot;form&quot;, new BindInitializer() {&lt;br/&gt;
            public void initBinder(ServletRequest request, ServletRequestDataBinder binder) &lt;/p&gt;
{
                binder.registerCustomEditor(String[].class,&quot;arrayTwo&quot;,new CustomTestArrayEditor());
            }
&lt;p&gt;});&lt;/p&gt;

&lt;p&gt;assertTrue(&quot;arraytwo should be null&quot;, form.getArrayTwo() == null);&lt;br/&gt;
------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;public class CustomTestArrayEditor extends PropertyEditorSupport {&lt;/p&gt;

&lt;p&gt;    public void setAsText(String text) throws IllegalArgumentException &lt;/p&gt;
{
       setValue(null); 
    }

&lt;p&gt;    public String getAsText() &lt;/p&gt;
{
        return null;
    }
&lt;p&gt;}&lt;/p&gt;



&lt;p&gt;I am getting the following error :&lt;/p&gt;


&lt;p&gt;Testcase: testBindWithInitializer took 0.141 sec&lt;br/&gt;
	Caused an ERROR&lt;br/&gt;
null&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.doTypeConversionIfNecessary(BeanWrapperImpl.java:911)&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:706)&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:624)&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:755)&lt;br/&gt;
	at org.springframework.beans.BeanWrapperImpl.setPropertyValues(BeanWrapperImpl.java:782)&lt;br/&gt;
	at org.springframework.validation.DataBinder.bind(DataBinder.java:241)&lt;br/&gt;
	at org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:173)&lt;br/&gt;
	at org.springframework.web.bind.BindUtils.bind(BindUtils.java:65)&lt;br/&gt;
	at com.test.TestEditor.testBindWithInitializer(TestEditor.java:78)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)&lt;br/&gt;
	at junit.extensions.TestSetup$1.protect(TestSetup.java:19)&lt;br/&gt;
	at junit.extensions.TestSetup.run(TestSetup.java:23)&lt;br/&gt;
	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.run(InternalAntRunner.java:377)&lt;br/&gt;
	at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.main(InternalAntRunner.java:135)&lt;/p&gt;



&lt;p&gt;Is is wrong ?&lt;/p&gt;

&lt;p&gt;Shishir&lt;/p&gt;</comment>
                            <comment id="10570" author="juergen.hoeller" created="Thu, 1 Jul 2004 20:51:37 +0000"  >&lt;p&gt;That was a bug in BeanWrapperImpl&apos;s array check for a converted value, occuring when you a PropertyEditor returns a null value for an array type. I&apos;ve just fixed it, already in CVS.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="10571" author="shishirksingh" created="Thu, 1 Jul 2004 20:54:48 +0000"  >&lt;p&gt;Darn!1 You are one step ahead of me &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks&lt;/p&gt;</comment>
                            <comment id="10572" author="shishirksingh" created="Thu, 1 Jul 2004 20:58:16 +0000"  >&lt;p&gt;BTW, is there anyway I can access the latest code without having  to wait for another 5 hrs before I see it in the cvs (as anonymous)&lt;/p&gt;

&lt;p&gt;Shishir&lt;/p&gt;</comment>
                            <comment id="10573" author="juergen.hoeller" created="Thu, 1 Jul 2004 21:02:32 +0000"  >&lt;p&gt;I&apos;ve heard that SourceForge has multiple servers for anonymous CVS, some of them being more current, but I&apos;ve never actually checked those out.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="10575" author="shishirksingh" created="Fri, 2 Jul 2004 04:09:18 +0000"  >&lt;p&gt;Thanks for the fixes Juergen. All my test cases passed.&lt;/p&gt;</comment>
                            <comment id="10576" author="juergen.hoeller" created="Fri, 2 Jul 2004 05:30:58 +0000"  >&lt;p&gt;Closed until someone finds further special cases &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        12 years, 26 weeks, 6 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Jul 2004 06:46:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04yg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28955</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>