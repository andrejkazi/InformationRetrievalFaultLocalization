<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:33:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-10551/SPR-10551.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-10551] Jaxb2Marshaller + packagesToScan + SpringMVC fails to find supported class</title>
                <link>https://jira.spring.io/browse/SPR-10551</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;There seems to be an issue when you use the Jaxb2Marshaller + packagesToScan in conjunction with Spring MVC.&lt;/p&gt;

&lt;p&gt;The issue I am specifically running into is that the method returns false even though the JAXBContext knows about the class:&lt;br/&gt;
public boolean supports(Class&amp;lt;?&amp;gt; clazz)&lt;/p&gt;
{...}

&lt;p&gt;The issue is with the following method:&lt;/p&gt;

&lt;p&gt;	private boolean supportsInternal(Class&amp;lt;?&amp;gt; clazz, boolean checkForXmlRootElement) {&lt;br/&gt;
		if (checkForXmlRootElement &amp;amp;&amp;amp; AnnotationUtils.findAnnotation(clazz, XmlRootElement.class) == null) &lt;/p&gt;
{
			return false;
		}
&lt;p&gt;		if (StringUtils.hasLength(getContextPath())) {&lt;br/&gt;
			String packageName = ClassUtils.getPackageName(clazz);&lt;br/&gt;
			String[] contextPaths = StringUtils.tokenizeToStringArray(getContextPath(), &quot;:&quot;);&lt;br/&gt;
			for (String contextPath : contextPaths) {&lt;br/&gt;
				if (contextPath.equals(packageName)) &lt;/p&gt;
{
					return true;
				}
&lt;p&gt;			}&lt;br/&gt;
			return false;&lt;br/&gt;
		}&lt;br/&gt;
		else if (!ObjectUtils.isEmpty(getClassesToBeBound())) &lt;/p&gt;
{
			return Arrays.asList(getClassesToBeBound()).contains(clazz);
		}
&lt;p&gt;		return false;&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;The problem is that even if the &quot;packagesToScan&quot; works...which it does the supportInternal method needs to check the current JAXBContext to see if that class is actually loaded.  I checked and you cannot do this with JAXBContext so a better solution might be to add the class names to &quot;classesToBeBound&quot; as they are scanned in from the package scanner.  After that then in the &quot;supportsInternal&quot; method an additional check can be made to see if the packages.&lt;/p&gt;

&lt;p&gt;If you need me to attach code for the fix I would be more than happy to.  Please just let me know as I am here to help.  Also I didn&apos;t check the latest spring-oxm so I am not sure if this is no longer an issue but I couldn&apos;t find information on this in jira.&lt;/p&gt;</description>
            <key id="48523">SPR-10551</key>
            <summary>Jaxb2Marshaller + packagesToScan + SpringMVC fails to find supported class</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="mbazos">Michael Bazos</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 May 2013 12:46:53 +0000</created>
                <updated>Thu, 16 May 2013 07:08:08 +0000</updated>
                            <resolved>Thu, 16 May 2013 07:08:08 +0000</resolved>
                                    <version>3.1.1</version>
                                    <fixVersion>3.1.3</fixVersion>
                    <fixVersion>3.2 GA</fixVersion>
                                    <component>OXM</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="42341">SPR-9152</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        3 years, 32 weeks, 6 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>juergen.hoeller</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06ayf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>