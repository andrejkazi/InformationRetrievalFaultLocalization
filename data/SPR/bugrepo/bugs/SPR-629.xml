<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:08:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-629/SPR-629.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-629] Email attachments don&apos;t appear in Lotus Notes</title>
                <link>https://jira.spring.io/browse/SPR-629</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Email attachments not working in Lotus Notes.&lt;/p&gt;

&lt;p&gt;Using the org.springframework.mail.javamail.MimeMessageHelper to create an email with a text part and a file attachment results in the file attachment not being visible when viewing the email in Lotus Notes. The attachments seem correctly viewable in other mail client programs, e.g. browser mail clients.&lt;/p&gt;

&lt;p&gt;The problem seems &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; to be related to how the text part of the email is added to the mail message.&lt;/p&gt;

&lt;p&gt;If you use the code below, the attachment (added later) does not appear when the email is viewed.&lt;/p&gt;

&lt;p&gt;// where msg is a MimeMessageHelper&lt;br/&gt;
msg.setText(someText, true);&lt;/p&gt;


&lt;p&gt;If you do the following workaround, the email message received does &lt;b&gt;not&lt;/b&gt; have the paperclip symbol but &lt;b&gt;does&lt;/b&gt; have an attachment icon within the email message when you open the email.&lt;/p&gt;

&lt;p&gt;// where msg is a MimeMessageHelper&lt;br/&gt;
MimeBodyPart mbp = new MimeBodyPart();&lt;br/&gt;
mbp.setText(someText);&lt;br/&gt;
msg.getMimeMultipart().addBodyPart(mbp);&lt;/p&gt;


&lt;p&gt;We&apos;re using the following MimeMessageHelper method to add the attachment.&lt;/p&gt;

&lt;p&gt;msg.addAttachment(someFileName, dataSource);&lt;/p&gt;


&lt;p&gt;I found the following which may be some help with this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://chris-linfoot.net/d6plinks/CWLT-5VZD4Y&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://chris-linfoot.net/d6plinks/CWLT-5VZD4Y&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am also happy to try out any possible fixes if you don&apos;t have access to Lotus Notes (lucky you).&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Greg&lt;/p&gt;</description>
            <key id="10993">SPR-629</key>
            <summary>Email attachments don&apos;t appear in Lotus Notes</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="gmatthews">Greg Matthews</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jan 2005 08:47:15 +0000</created>
                <updated>Fri, 19 Aug 2005 07:00:19 +0000</updated>
                            <resolved>Mon, 23 May 2005 01:11:48 +0000</resolved>
                                    <version>1.1.3</version>
                                    <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="13331" author="carey" created="Sun, 22 May 2005 10:21:06 +0000"  >&lt;p&gt;The basic cause of the problem is that Spring is using multipart/related for the message.  In accordance with RFC 2387, Lotus Notes ignores the Content-Disposition of related parts, and only displays parts according to the cid: links in the root of the multipart/related object.&lt;/p&gt;

&lt;p&gt;The correct arrangement of MIME parts for a complex multipart message appears to be:&lt;/p&gt;

&lt;p&gt;multipart/mixed&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;multipart/related&lt;/li&gt;
	&lt;li&gt;multipart/alternative&lt;/li&gt;
	&lt;li&gt;text/html  &amp;lt;img src=cid:xxx&amp;gt;, etc.&lt;/li&gt;
	&lt;li&gt;text/plain&lt;/li&gt;
	&lt;li&gt;image/gif  Content-ID: xxx&lt;/li&gt;
	&lt;li&gt;image/png  Content-ID: yyy&lt;/li&gt;
	&lt;li&gt;image/gif  Content-Disposition: attachment; filename=...&lt;/li&gt;
	&lt;li&gt;application/pdf  Content-Disposition: attachment; filename=...&lt;/li&gt;
	&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The mixed, related and alternative multiparts could be removed if no attachments are added, no inline parts are added, or if only one HTML or plain text alternative is set, respectively.&lt;/p&gt;</comment>
                            <comment id="13337" author="juergen.hoeller" created="Mon, 23 May 2005 01:11:48 +0000"  >&lt;p&gt;Thanks for the report, Greg, and thanks for the hint, Carey! I&apos;ve reworked MimeMessageHelper to use a &quot;multipart/mixed&quot; root part with a nested &quot;multipart/related&quot; part. Inline elements get added to the &quot;related&quot; part, while attachments get added to the &quot;mixed&quot; part.&lt;/p&gt;

&lt;p&gt;This should be available in public CVS tonight, and also in the next nightly build. MimeMessageHelper.java is the only file affected. Please give it a try if you have the chance, and let me know whether it works for you in Lotus Notes now - and still in other mail clients as well &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="14394" author="judym_2000" created="Fri, 19 Aug 2005 06:54:54 +0000"  >&lt;p&gt;This fix now seems to be always sending at least a blank attachment titled Untitled Attachment.  In version 1.2 I was able to create a MimeBodyPart just set it&apos;s content and then add the BodyPart to the helper using getMimeMultipart() after upgrading to 1.2.3 this now results in a blank message with an attachment containing the text I set at the MimeBodyPart&apos;s content.  So I changed to using helper.getRootMimeMultipart() and then adding the BodyPart to that.  This now sets the text correctly, but also send the afore mentioned blank attachment.  Is this a bug with the fix or am I using it improperly?&lt;/p&gt;</comment>
                            <comment id="14395" author="judym_2000" created="Fri, 19 Aug 2005 07:00:19 +0000"  >&lt;p&gt;Excuse my earlier post on this issue I should have gone to the forum first.  Sorry.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 19 weeks, 6 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 22 May 2005 10:21:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04wdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28621</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>