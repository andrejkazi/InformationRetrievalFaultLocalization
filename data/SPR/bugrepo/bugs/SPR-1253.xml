<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:00:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1253/SPR-1253.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1253] Scripts No Longer Reloadable Due to InstantiationAwareBeanPostProcessor Not Applying to factory-method beans</title>
                <link>https://jira.spring.io/browse/SPR-1253</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Wasn&apos;t sure what component to put this under, as the real issue is for sandbox code.&lt;/p&gt;

&lt;p&gt;The scripting support (which is very nice, btw) no longer supports dynamically reloadable scripts.  In fact, the objects created are no longer instances of DynamicObject.  To verify, the unit test for GroovyScriptFactoryTests fails for these checks.&lt;/p&gt;

&lt;p&gt;The reasons this functionality is no longer working is the default suggested way to create a script object in the app context is to use the following bean definition:&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;thing&quot; singleton=&quot;true&quot;&lt;br/&gt;
		factory-bean=&quot;groovyScriptFactory&quot;&lt;br/&gt;
		factory-method=&quot;create&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;constructor-arg index=&quot;0&quot;&amp;gt;&amp;lt;value&amp;gt;testing/Foo.groovy&amp;lt;/value&amp;gt;&amp;lt;/constructor-arg&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;The use of factory-method, however, is not compatible with the InstantiationAwareBeanPostProcessor interface.  This interface ignores these types of beans.  The AbstractScriptFactory extends AbstractAutoProxyCreator, which is in fact a InstantiationAwareBeanPostProcessor.&lt;/p&gt;

&lt;p&gt;Therefore, script objects that use this factory-method creation mechanism, are no longer able to be postProcessBeforeInstantiation.  This is where the dynamic reloadable TargetSource for the script was created.&lt;/p&gt;

&lt;p&gt;There are a bunch of different ways of solving this issue.  However, because the chain of events is quite big, I&apos;d thought I would let you and Rod (who originally wrote this) know about this.  I&apos;d love to see this functionality back.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Seth&lt;/p&gt;</description>
            <key id="12282">SPR-1253</key>
            <summary>Scripts No Longer Reloadable Due to InstantiationAwareBeanPostProcessor Not Applying to factory-method beans</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robh">Rob Harrop</assignee>
                                    <reporter username="sethladd">Seth Ladd</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Aug 2005 19:57:02 +0000</created>
                <updated>Tue, 19 Jun 2012 03:54:05 +0000</updated>
                            <resolved>Tue, 28 Feb 2006 23:12:48 +0000</resolved>
                                    <version>1.2.3</version>
                                    <fixVersion>2.0 M5</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="14505" author="sethladd" created="Thu, 25 Aug 2005 19:59:55 +0000"  >&lt;p&gt;I should note that scripts still, in general, work.  I am able to create groovy scripts and call methods on them as if they were beans.  It&apos;s specifically the dynamic reloading which is not failed.&lt;/p&gt;</comment>
                            <comment id="14519" author="sethladd" created="Sat, 27 Aug 2005 10:32:12 +0000"  >&lt;p&gt;After more investigation, it appears that createRefreshableTargetSource() of AbstractScriptFactory expects lookupScript() to resolve the script.  However, this method is called /before/ any scripts are created via create(), which actually populates the Map used by lookupScript.  So lookup() will never resolve anything, because no scripts have actually been created (by the time createRefreshableTargetSource() is called)&lt;/p&gt;

&lt;p&gt;So, after I added a class=&quot;groovy.lang.GroovyObject&quot; attribute to my script bean definition, it still is having issues because of the above order-of-operations bug.&lt;/p&gt;

&lt;p&gt;It appears to fix this reloading issue, some deeper understandings of the original motivations for the original design are required.  Therefore, I will leave it in your capable hands. &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14544" author="keriksson" created="Tue, 30 Aug 2005 07:30:43 +0000"  >&lt;p&gt;Id like to &quot;vote&quot; for this functionality to be reimplemented, when possible. I have tried to look into the code but as above stated, the complexity is pretty high so I hope this can be handled by the initiators. The dynamic reload functionality itself is the reason to integrate a scripting language, if you ask me.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Kristofer&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 18 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 30 Aug 2005 07:30:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i046kv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>