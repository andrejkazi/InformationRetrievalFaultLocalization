<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:06:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2151/SPR-2151.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2151] XML response via VelocityView can&apos;t be recognized</title>
                <link>https://jira.spring.io/browse/SPR-2151</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Hi, &lt;/p&gt;

&lt;p&gt;I was trying to develope some ajax application, the response is rendered by Velocity in Spring Framework. But may have two kinds of content-type in one application: xml or html.&lt;/p&gt;

&lt;p&gt;Since VelocityView always resets response header content-type even you already set it in your action implementation. The xml response will be recognized as HTML in browser.&lt;/p&gt;

&lt;p&gt;I suggest we add a check in renderMergedTemplateModel , see below.&lt;/p&gt;

&lt;p&gt;	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Process the model map by merging it with the Velocity template.&lt;/li&gt;
	&lt;li&gt;Output is directed to the servlet response.&lt;/li&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;This method can be overridden if custom behavior is needed.&lt;br/&gt;
	 */&lt;br/&gt;
	protected void renderMergedTemplateModel(&lt;br/&gt;
			Map model, HttpServletRequest request, HttpServletResponse response) throws Exception 
{

               if(response.getContentType()==null)                       //added 
		     response.setContentType(getContentType()); //default content-type
               }
&lt;p&gt;                                                                                        //added &lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;		exposeHelpers(model, request);&lt;/p&gt;

&lt;p&gt;		// create Velocity Context from model&lt;br/&gt;
		Context velocityContext = createVelocityContext(model, request, response);&lt;/p&gt;

&lt;p&gt;		exposeHelpers(velocityContext, request, response);&lt;br/&gt;
		exposeToolAttributes(velocityContext, request);&lt;/p&gt;

&lt;p&gt;		doRender(velocityContext, response);&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;Thanks! SpringFramework is great!&lt;/p&gt;</description>
            <key id="14239">SPR-2151</key>
            <summary>XML response via VelocityView can&apos;t be recognized</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="rainmanzhu">Hugo Zhu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Jun 2006 18:45:33 +0000</created>
                <updated>Tue, 19 Jun 2012 03:52:41 +0000</updated>
                            <resolved>Sun, 18 Jun 2006 05:51:28 +0000</resolved>
                                    <version>1.2.8</version>
                    <version>2.0 M5</version>
                                    <fixVersion>2.0 RC1</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="18043" author="juergen.hoeller" created="Sun, 18 Jun 2006 05:51:28 +0000"  >&lt;p&gt;Thanks for the suggestion - I&apos;ve added such a check to both VelocityView and FreeMarkerView.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="18047" author="rainmanzhu" created="Sun, 18 Jun 2006 08:27:59 +0000"  >&lt;p&gt;Thanks Juergen. &lt;br/&gt;
It&apos;s great I don&apos;t need extend VelocityView in my application after I upgrade to SpringFramework 2.0!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 28 weeks, 4 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 18 Jun 2006 05:51:28 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0198v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>