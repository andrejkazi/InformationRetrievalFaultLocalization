<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:37:14 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-909/SPR-909.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-909] formSingleSelect and formMultiSelect don&apos;t work for ref data Maps with numeric keys</title>
                <link>https://jira.spring.io/browse/SPR-909</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;The FreeMarker macros in spring.ftl for drop downs and selection lists do not handle processing Maps from the model that contain numeric keys. Specifically, the line:&lt;/p&gt;

&lt;p&gt;		&amp;lt;#if stringStatusValue == value&amp;gt;selected=&quot;selected&quot;&amp;lt;/#if&amp;gt;&amp;gt;$&lt;/p&gt;
{options[value]}&amp;lt;/option&amp;gt;&lt;br/&gt;
&lt;br/&gt;
blows up if stringStatusValue happens to be a number. (ie: the current control is bound to a numeric property). The following patch solves this issue for me locally (although I haven&apos;t tested it terribly much):&lt;br/&gt;
&lt;br/&gt;
&amp;#8212; src.old/org/springframework/web/servlet/view/freemarker/spring.ftl  2005-04-27 17:32:59.471162128 -0400&lt;br/&gt;
+++ src/org/springframework/web/servlet/view/freemarker/spring.ftl      2005-04-27 17:38:27.247332576 -0400&lt;br/&gt;
@@ -175,12 +175,12 @@&lt;br/&gt;
        &amp;lt;@bind path/&amp;gt;&lt;br/&gt;
        &amp;lt;select name=&quot;${status.expression}&quot; ${attributes}&amp;gt;&lt;br/&gt;
                &amp;lt;#list options?keys as value&amp;gt;&lt;br/&gt;
-               &amp;lt;option value=&quot;${value}&quot;&lt;br/&gt;
-               &amp;lt;#if stringStatusValue == value&amp;gt;selected=&quot;selected&quot;&amp;lt;/#if&amp;gt;&amp;gt;${options[value]}
&lt;p&gt;&amp;lt;/option&amp;gt;&lt;br/&gt;
+               &amp;lt;option value=&quot;$&lt;/p&gt;
{value}&quot;&amp;lt;@checkSelected value/&amp;gt;&amp;gt;${options[value]}&amp;lt;/option&amp;gt;&lt;br/&gt;
                &amp;lt;/#list&amp;gt;&lt;br/&gt;
        &amp;lt;/select&amp;gt;&lt;br/&gt;
 &amp;lt;/#macro&amp;gt;&lt;br/&gt;
 &lt;br/&gt;
+&lt;br/&gt;
 &amp;lt;#--&lt;br/&gt;
  * formMultiSelect&lt;br/&gt;
  *&lt;br/&gt;
@@ -197,7 +197,7 @@&lt;br/&gt;
        &amp;lt;select multiple=&quot;multiple&quot; name=&quot;${status.expression}&quot; ${attributes}&amp;gt;&lt;br/&gt;
                &amp;lt;#list options?keys as value&amp;gt;&lt;br/&gt;
                &amp;lt;#assign isSelected = contains(status.value?default(&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;&amp;quot;&amp;#93;&lt;/span&gt;), value)&amp;gt;&lt;br/&gt;
-               &amp;lt;option value=&quot;${value}
&lt;p&gt;&quot; &amp;lt;#if isSelected&amp;gt;selected=&quot;selected&quot;&amp;lt;/#if&amp;gt;&amp;gt;$&lt;/p&gt;
{options[value]}&amp;lt;/option&amp;gt;&lt;br/&gt;
+               &amp;lt;option value=&quot;${value}&quot; &amp;lt;@checkSelected value/&amp;gt;&amp;gt;${options[value]}
&lt;p&gt;&amp;lt;/option&amp;gt;&lt;br/&gt;
                &amp;lt;/#list&amp;gt;&lt;br/&gt;
        &amp;lt;/select&amp;gt;&lt;br/&gt;
 &amp;lt;/#macro&amp;gt;&lt;br/&gt;
@@ -299,3 +299,20 @@&lt;br/&gt;
 &amp;lt;#macro closeTag&amp;gt;&lt;br/&gt;
        &amp;lt;#if xhtmlCompliant?exists &amp;amp;&amp;amp; xhtmlCompliant&amp;gt;/&amp;gt;&amp;lt;#else&amp;gt;&amp;gt;&amp;lt;/#if&amp;gt;&lt;br/&gt;
 &amp;lt;/#macro&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+&amp;lt;#--&lt;br/&gt;
+ * checkSelected&lt;br/&gt;
+ *&lt;br/&gt;
+ * Check a value in a list to see if it is the currently selected&lt;br/&gt;
+ * value. If so, add the &apos;selected=&quot;selected&quot;&apos; text to the output.&lt;br/&gt;
+ * Handle values of numeric and string types.&lt;br/&gt;
+ *&lt;br/&gt;
+ * @param path the name of the field to bind to&lt;br/&gt;
+ * @param options a map (value=label) of all the available options&lt;br/&gt;
+ * @param attributes any additional attributes for the element (such as class&lt;br/&gt;
+ *        or CSS styles or size&lt;br/&gt;
+--&amp;gt;&lt;br/&gt;
+&amp;lt;#macro checkSelected value&amp;gt;&lt;br/&gt;
+       &amp;lt;#if stringStatusValue?is_number &amp;amp;&amp;amp; stringStatusValue == value?number&amp;gt;selected=&quot;selected&quot;&amp;lt;/#if&amp;gt;&lt;br/&gt;
+       &amp;lt;#if stringStatusValue?is_string &amp;amp;&amp;amp; stringStatusValue == value&amp;gt;selected=&quot;selected&quot;&amp;lt;/#if&amp;gt;&lt;br/&gt;
+&amp;lt;/#macro&amp;gt;&lt;/p&gt;</description>
            <key id="11488">SPR-909</key>
            <summary>formSingleSelect and formMultiSelect don&apos;t work for ref data Maps with numeric keys</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="darren.davison">Darren Davison</assignee>
                                    <reporter username="bubbapuryear">Bubba Puryear</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Apr 2005 09:49:44 +0000</created>
                <updated>Fri, 27 May 2005 02:12:00 +0000</updated>
                            <resolved>Thu, 26 May 2005 08:12:48 +0000</resolved>
                                    <version>1.2 RC2</version>
                                    <fixVersion>1.2.2</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="13127" author="juergen.hoeller" created="Wed, 27 Apr 2005 19:00:06 +0000"  >&lt;p&gt;Darren, could you please have a look at this?&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="13128" author="bubbapuryear" created="Wed, 27 Apr 2005 23:57:18 +0000"  >&lt;p&gt;I just notice that I screwed up on the javadoc params for checkSelected. There should just be one for: &lt;/p&gt;

&lt;p&gt;@param value the current value in a list iteration&lt;/p&gt;

&lt;p&gt;or somesuch. FYI, and thanks for having a look!&lt;/p&gt;</comment>
                            <comment id="13294" author="juergen.hoeller" created="Thu, 19 May 2005 06:07:04 +0000"  >&lt;p&gt;Darren, do you have a chance to look at this in the course of next week? I intend to release Spring 1.2.1 next Friday; if we can&apos;t make that deadline, let&apos;s move this issue to 1.2.2. &lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="13335" author="juergen.hoeller" created="Sun, 22 May 2005 23:28:24 +0000"  >&lt;p&gt;I&apos;ve incorporated the change for &quot;formSingleSelect&quot;.&lt;/p&gt;

&lt;p&gt;However, I&apos;m not sure whether the change in &quot;formMacroSelect&quot; is justified: we calculate the &quot;isSelected&quot; flag there and react accordingly, which would get ignored if we change this to use &quot;@checkSelected&quot; as well.&lt;/p&gt;

&lt;p&gt;Does this issue affect &quot;formMacroSelect&quot; with its &quot;contains&quot; check at all? Bubba, did you just change &quot;formMacroSelect&quot; as well for completeness, or did you have a specific intention there?&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="13344" author="bubbapuryear" created="Tue, 24 May 2005 00:51:10 +0000"  >&lt;p&gt;I only changed formMultiSelect for completeness &amp;#8211; I haven&apos;t had a chance to use it yet. I do use formSingleSelect. The only time I could have used formMultiSelect I decided to use checkboxes instead.&lt;/p&gt;

&lt;p&gt;FYI,&lt;br/&gt;
Bubba&lt;/p&gt;</comment>
                            <comment id="13380" author="juergen.hoeller" created="Thu, 26 May 2005 08:12:48 +0000"  >&lt;p&gt;OK, I consider this as fixed for the time being then.&lt;/p&gt;

&lt;p&gt;Bubba, it would be great if you could a recent nightly snapshot a try, as a sanity check that the change actually works for you. The 1.2.2 release is scheduled for tomorrow evening; it would be great if you had a chance to test this before the release!&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="13388" author="bubbapuryear" created="Fri, 27 May 2005 02:12:00 +0000"  >&lt;p&gt;I grabbed 20050527 and dropped in the spring.jar... worked like a champ!&lt;/p&gt;

&lt;p&gt;Thanks Juergen!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 31 weeks, 6 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 27 Apr 2005 19:00:06 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01aif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7580</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>