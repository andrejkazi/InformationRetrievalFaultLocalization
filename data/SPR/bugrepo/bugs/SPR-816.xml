<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 17:53:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-816/SPR-816.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-816] ReloadableResourceBundleMessageSource not reloadable</title>
                <link>https://jira.spring.io/browse/SPR-816</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;ReloadableResourceBundleMessageSource res = (ReloadableResourceBundleMessageSource)getApplicationContext().getBean(&quot;messageSource&quot;);&lt;br/&gt;
res.clearCache();&lt;/p&gt;

&lt;p&gt;messageSource is defined in applicationContext.xml with the cache seconds set to -1.&lt;br/&gt;
The properties file was changed correctly.&lt;br/&gt;
The code does bring back the messageSource bean correctly.&lt;br/&gt;
The clearCache method is called.&lt;br/&gt;
The jsp page uses the spring:message tag. &lt;/p&gt;

&lt;p&gt;The message values don&apos;t change.&lt;/p&gt;</description>
            <key id="11311">SPR-816</key>
            <summary>ReloadableResourceBundleMessageSource not reloadable</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="bobmanc">bob manc</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Mar 2005 23:49:17 +0000</created>
                <updated>Thu, 24 Mar 2005 09:39:51 +0000</updated>
                            <resolved>Thu, 24 Mar 2005 09:39:51 +0000</resolved>
                                    <version>1.1.5</version>
                                    <fixVersion>1.2 RC1</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12688" author="juergen.hoeller" created="Thu, 24 Mar 2005 00:09:23 +0000"  >&lt;p&gt;Well, the usual way to make ReloadableResourceBundleMessageSource reload its properties file is to specify a positive &quot;cacheSeconds&quot; value. -1 generally indicates to cache forever.&lt;/p&gt;

&lt;p&gt;So what I assume is that you deliberately set &quot;cacheSeconds&quot; to -1 but expect an &quot;clearCache&quot; call to to enforce a reload. This should work in  principle (however, if this is what you mean, the title of this issue is too general and thus rather misleading).&lt;/p&gt;

&lt;p&gt;The key issue here is where you load your message properties files from. Change detection will only work with true file system access (for example, with &quot;file:&quot; URLs or &quot;WEB-INF/...&quot; ServletContext resources). It will usually &lt;b&gt;not&lt;/b&gt; work with resources in the classpath, because class loaders tend to cache the files that they loaded. This is explicitly mentioned in ReloadableResourceBundleMessageSource&apos;s javadoc, BTW.&lt;/p&gt;

&lt;p&gt;So please try to load your message files from some non-classpath location. If it still doesn&apos;t work, please indicate the basenames that you specified on your ReloadableResourceBundleMessageSource instance.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="12691" author="bobmanc" created="Thu, 24 Mar 2005 06:37:54 +0000"  >&lt;p&gt;The file is named External.properties and is not in the classpath (I did read the docs). It is in WEB-INF\i18n\.&lt;/p&gt;

&lt;p&gt;This is in the applicationContext.xml file.&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;messageSource&quot; class=&quot;org.springframework.context.support.ReloadableResourceBundleMessageSource&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;basenames&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;list&amp;gt;&lt;br/&gt;
			&amp;lt;value&amp;gt;/WEB-INF/i18n/External&amp;lt;/value&amp;gt;&lt;br/&gt;
		&amp;lt;/list&amp;gt;&lt;br/&gt;
	&amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;property name=&quot;cacheSeconds&quot;&amp;gt;&amp;lt;value&amp;gt;-1&amp;lt;/value&amp;gt;&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12692" author="juergen.hoeller" created="Thu, 24 Mar 2005 09:39:51 +0000"  >&lt;p&gt;OK, so the file itself should be refreshable in your case, which makes ReloadableResourceBundleMessageSource responsible.&lt;/p&gt;

&lt;p&gt;I&apos;ve just checked this against a local test scenario: explicit clearCache() indeed has a bug in that it doesn&apos;t clear the cached for merged properties (a performance optimization introduced not too long ago). I&apos;ve fixed this now; the fix will be available in 1.2 RC1 (to be released tomorrow).&lt;/p&gt;

&lt;p&gt;As a side note, reloading after a cache timeout and a subsequent file timestamp check is not affected by this; only an explicit clearCache() call is.&lt;/p&gt;

&lt;p&gt;Thanks for reporting this!&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 41 weeks ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 24 Mar 2005 00:09:23 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01amn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>