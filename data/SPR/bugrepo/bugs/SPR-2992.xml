<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:46:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2992/SPR-2992.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2992] FieldRetrievingFactoryBean throws java.lang.NoSuchFieldException</title>
                <link>https://jira.spring.io/browse/SPR-2992</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;When using the FieldRetrievingFactoryBean in an XML-based configuration in the name-based &quot;convenience&quot; format to retrieve a static constant thus:&lt;/p&gt;

&lt;p&gt;&amp;lt;bean name=&quot;foo.bar.MyConstants.A&quot; class=&quot;org.springframework.beans.factory.config.Fi eldRetrievingFactoryBean&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;A second access of the same constant using a second inclusion of &apos;&amp;lt;bean name=&quot;foo.bar.MyConstants.A&quot; ... /&amp;gt;&apos; results in a org.springframework.beans.factory.BeanCreationException. The eventual cause is &quot;Caused by: java.lang.NoSuchFieldException: A#1&quot;.&lt;/p&gt;

&lt;p&gt;I have tested this with Spring 2.0.1 and 2.0, which both give the above BeanCreationException error. Back-testing this with Spring 2.0-m1 and 1.2.3 give no BeanCreationException exception.&lt;/p&gt;

&lt;p&gt;If I make the FieldRetrievingFactoryBean a &quot;prototype&quot; (i.e. singleton=&quot;false&quot;), then this removes the exception.&lt;/p&gt;

&lt;p&gt;Is this a fault introduced between 2.0-m1 and 2.0, or was this use-case never formally supported? Any help greatfully received.&lt;/p&gt;

&lt;p&gt;Sample files&lt;br/&gt;
==========&lt;/p&gt;


&lt;p&gt;These are the files I have used to re-create the problem:&lt;/p&gt;

&lt;p&gt;MBean.java&lt;br/&gt;
=========&lt;/p&gt;

&lt;p&gt;package foo.bar;&lt;/p&gt;

&lt;p&gt;public class MyBean {&lt;/p&gt;

&lt;p&gt;private int propA;&lt;/p&gt;

&lt;p&gt;private int propB;&lt;/p&gt;

&lt;p&gt;public int getPropA() {&lt;br/&gt;
return propA;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;public void setPropA(int propA) {&lt;br/&gt;
this.propA = propA;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;public int getPropB() {&lt;br/&gt;
return propB;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;public void setPropB(int propB) &lt;/p&gt;
{
this.propB = propB;
}

}

&lt;p&gt;MyConstants.java&lt;br/&gt;
==============&lt;/p&gt;

&lt;p&gt;package foo.bar;&lt;/p&gt;

&lt;p&gt;public interface MyConstants {&lt;br/&gt;
final static int A = 0;&lt;br/&gt;
final static int B = 1;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;Junit: TestFieldRetrievingBeanFactoryBean&lt;br/&gt;
================================&lt;/p&gt;

&lt;p&gt;package foo.bar;&lt;/p&gt;

&lt;p&gt;import org.springframework.context.ApplicationContext;&lt;br/&gt;
import org.springframework.context.support.ClassPathXmlAp plicationContext;&lt;br/&gt;
import junit.framework.TestCase;&lt;/p&gt;

&lt;p&gt;public class TestFieldRetrievingBeanFactoryBean extends TestCase {&lt;/p&gt;

&lt;p&gt;public void testIt() &lt;/p&gt;
{
ApplicationContext context = new ClassPathXmlApplicationContext(&quot;spring-config.xml&quot;);
MyBean b = (MyBean)context.getBean(&quot;myBean&quot;);
System.out.println(b.getPropA());
}

}


&lt;p&gt;spring-config.xml&lt;br/&gt;
=============&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&amp;gt;&lt;br/&gt;
&amp;lt;beans&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;myBean&quot; class=&quot;foo.bar.MyBean&quot;&amp;gt;&lt;br/&gt;
&amp;lt;property name=&quot;propA&quot;&amp;gt;&lt;br/&gt;
&amp;lt;bean name=&quot;foo.bar.MyConstants.A&quot; class=&quot;org.springframework.beans.factory.config.Fi eldRetrievingFactoryBean&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;!-- Second access of foo.bar.MyConstants.A causes BeanCreationException execption --&amp;gt;&lt;br/&gt;
&amp;lt;property name=&quot;propB&quot;&amp;gt;&lt;br/&gt;
&amp;lt;bean name=&quot;foo.bar.MyConstants.A&quot; class=&quot;org.springframework.beans.factory.config.Fi eldRetrievingFactoryBean&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;br/&gt;
&amp;lt;/beans&amp;gt;&lt;/p&gt;</description>
            <key id="15785">SPR-2992</key>
            <summary>FieldRetrievingFactoryBean throws java.lang.NoSuchFieldException</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="gioberti">Steve Gioberti</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Dec 2006 01:45:27 +0000</created>
                <updated>Tue, 19 Jun 2012 03:50:39 +0000</updated>
                            <resolved>Sun, 31 Dec 2006 22:38:57 +0000</resolved>
                                    <version>2.0 final</version>
                    <version>2.0.1</version>
                                    <fixVersion>2.0.2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="21521" author="juergen.hoeller" created="Sun, 31 Dec 2006 22:38:57 +0000"  >&lt;p&gt;Thanks for pointing this out! The root of the problem here is the automatic generation of unique bean names, even for (singleton) inner beans: FieldRetrievingFactoryBean then receives the generated name with a &quot;#1&quot; suffix as its bean name, which it doesn&apos;t expect and hence can&apos;t handle...&lt;/p&gt;

&lt;p&gt;This also affects PropertyPathFactoryBean. I&apos;ve fixed it in both through always extracting the original bean name there.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 31 Dec 2006 22:38:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00uxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5058</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>