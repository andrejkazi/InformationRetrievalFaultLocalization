<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:23:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-11193/SPR-11193.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-11193] ResponseStatusExceptionResolver should use .setStatus with @ResponseStatus(code=XXX)</title>
                <link>https://jira.spring.io/browse/SPR-11193</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;The name of the annotation of &lt;tt&gt;ReponseStatus&lt;/tt&gt; implies that a reponse status is actually sent. This is not the case, a response error is always issued. Now, the container must respond with generated HTML error page. &lt;/p&gt;

&lt;p&gt;This makes it unusable for REST operations. A client does not expect such a response and this is useless payload.&lt;/p&gt;

&lt;p&gt;This annotation must be split up into two annoations:&lt;/p&gt;

&lt;p&gt;1. &lt;tt&gt;@ResponseError&lt;/tt&gt; which truly does a &lt;tt&gt;setError&lt;/tt&gt; with an optional reason.&lt;br/&gt;
2. &lt;tt&gt;@ResponseStatus&lt;/tt&gt; with a status code only.&lt;/p&gt;

&lt;p&gt;If you are concerned about backwards compat you could deprecate &lt;tt&gt;@ResponseStatus&lt;/tt&gt; and introduce a &lt;tt&gt;@RestResponseStatus&lt;/tt&gt; or add a flag &lt;tt&gt;error&lt;/tt&gt;. Alternatively, you could examine whether this controller is annotated with &lt;tt&gt;@Controller&lt;/tt&gt; or &lt;tt&gt;@RestController&lt;/tt&gt; and proceed accordingly. Regardless of the chosen option a &lt;tt&gt;@ResponseError&lt;/tt&gt; annotation is necessary and there must be a clear separation of use cases.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://jira.spring.io/browse/SPR-8251&quot; title=&quot;Use of sendError(int,String) in AnnotationMethodHandlerExceptionResolver causes @RequestBody to be ignored&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-8251&quot;&gt;&lt;del&gt;SPR-8251&lt;/del&gt;&lt;/a&gt; is related to this.&lt;/p&gt;</description>
            <key id="52246">SPR-11193</key>
            <summary>ResponseStatusExceptionResolver should use .setStatus with @ResponseStatus(code=XXX)</summary>
                <type id="4" iconUrl="https://jira.spring.io/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="9">Works as Designed</resolution>
                                        <assignee username="rstoya05-aop">Rossen Stoyanchev</assignee>
                                    <reporter username="michael-o">Michael Osipov</reporter>
                        <labels>
                    </labels>
                <created>Sat, 7 Dec 2013 03:50:17 +0000</created>
                <updated>Tue, 22 Sep 2015 20:26:37 +0000</updated>
                            <resolved>Thu, 30 Jul 2015 07:18:37 +0000</resolved>
                                    <version>3.2.5</version>
                                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="116565" author="michael-o" created="Thu, 11 Jun 2015 14:05:03 +0000"  >&lt;p&gt;Rossen, will you take a look at it?&lt;/p&gt;</comment>
                            <comment id="116572" author="bclozel" created="Fri, 12 Jun 2015 01:48:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;Michael Osipov&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure I&apos;m getting your point here; you can use &lt;tt&gt;@ResponseStatus&lt;/tt&gt; for exceptions, but also for regular REST responses.&lt;br/&gt;
Could you check &lt;a href=&quot;https://github.com/spring-projects/spring-framework-issues/tree/master/SPR-11193&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this repro project&lt;/a&gt; and explain what&apos;s missing?&lt;/p&gt;

&lt;p&gt;In this repro project, requesting &quot;GET /&lt;a href=&quot;https://jira.spring.io/browse/SPR-11193&quot; title=&quot;ResponseStatusExceptionResolver should use .setStatus with @ResponseStatus(code=XXX)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-11193&quot;&gt;&lt;del&gt;SPR-11193&lt;/del&gt;&lt;/a&gt;/status&quot; will respond with a JSON entity and a custom HTTP status, as expected. This is not an error case, and the container does not involve HTML error pages here.&lt;br/&gt;
Also, another mapping shows how to map exceptions and use that annotation to customize responses.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;</comment>
                            <comment id="116634" author="michael-o" created="Mon, 15 Jun 2015 05:38:02 +0000"  >&lt;p&gt;Hi Brian,&lt;/p&gt;

&lt;p&gt;I have cloned from that repo. There are two issues with the project:&lt;/p&gt;

&lt;p&gt;1. With &lt;tt&gt;mvn jetty:run&lt;/tt&gt; /SPR-... ist not available, the app is mounted as &lt;tt&gt;ROOT&lt;/tt&gt;&lt;br/&gt;
2. The code does not depict the issue. I will modify and push to my fork&lt;/p&gt;</comment>
                            <comment id="116638" author="bclozel" created="Mon, 15 Jun 2015 06:02:45 +0000"  >&lt;p&gt;Sorry, I ran the application with &lt;tt&gt;mvn package cargo:run -Ptomcat8&lt;/tt&gt; - but jetty and ROOT context works fine as well.&lt;/p&gt;</comment>
                            <comment id="116643" author="michael-o" created="Mon, 15 Jun 2015 06:43:35 +0000"  >&lt;p&gt;Brian,&lt;/p&gt;

&lt;p&gt;please have a look at &lt;a href=&quot;https://github.com/michael-o/spring-framework-issues/commit/a5f52c9412194afe814127ee50f35830cca9b065&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this&lt;/a&gt; diff.&lt;/p&gt;

&lt;p&gt;Now let&apos;s execute some requests:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;$ curl --verbose http://localhost:8080/SPR-11193/exception -H &quot;Accept: application/json&quot;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;*   Trying 147.54.67.187...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;* Connected to localhost (...) port 8080 (#0)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; GET /SPR-11193/exception HTTP/1.1&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; Host: localhost:8080&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; User-Agent: curl/7.42.1&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; Accept: application/json&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; HTTP/1.1 400 Bad Request&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Server: Apache-Coyote/1.1&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Content-Type: text/html;charset=utf-8&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Content-Length: 1037&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Date: Mon, 15 Jun 2015 13:35:12 GMT&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Connection: close&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;* Closing connection 0&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;I wanted JSON but Spring called &lt;tt&gt;sendError&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Another one:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;i$ curl --verbose http://localhost:8080/SPR-11193/exception -H &quot;Accept: application/json&quot;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;*   Trying 147.54.67.187...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;* Connected to localhost (...) port 8080 (#0)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; GET /SPR-11193/exception HTTP/1.1&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; Host: localhost:8080&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; User-Agent: curl/7.42.1&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; Accept: application/json&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; HTTP/1.1 400 Bad Request&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Server: Apache-Coyote/1.1&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Content-Type: text/html;charset=utf-8&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Content-Length: 1037&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Date: Mon, 15 Jun 2015 13:36:56 GMT&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt; Connection: close&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;* Closing connection 0&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Again, Spring tricked me with &lt;tt&gt;sendError&lt;/tt&gt;. When I say &lt;tt&gt;@ResponseStatus&lt;/tt&gt;, I want status and not an error page.&lt;/p&gt;

&lt;p&gt;The problematic spots are &lt;a href=&quot;https://github.com/spring-projects/spring-framework/blob/0c3b34f7d5448f26b4484856bdabb5f225d37453/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/annotation/ResponseStatusExceptionResolver.java#L98-L109&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;https://github.com/spring-projects/spring-framework/blob/0c3b34f7d5448f26b4484856bdabb5f225d37453/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ServletInvocableHandlerMethod.java#L141-L152&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;there&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Both spots are inconsistent to each other and this does not work for REST. The client receives a content type which it has never requested. Jersey, for instance, gives &lt;a href=&quot;https://jersey.java.net/apidocs/2.18/jersey/org/glassfish/jersey/server/ServerProperties.html#RESPONSE_SET_STATUS_OVER_SEND_ERROR&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;full control&lt;/a&gt; over that.&lt;/p&gt;

&lt;p&gt;I would Spring WebMVC expect to make a difference between &lt;tt&gt;@RestController&lt;/tt&gt; and &lt;tt&gt;@Controller&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="116647" author="rstoya05-aop" created="Mon, 15 Jun 2015 07:14:07 +0000"  >&lt;p&gt;Indeed ResponseStatusExceptionResolver and ServletInvocableHandlerMethod seem to be inconsistent in the way they treat &lt;tt&gt;@ResponseStatus&lt;/tt&gt;. The annotation actually says that either .setStatus (if a code is provided) or .sendError (if reason is provided) will be called. I think we should update ResponseStatusExceptionResolver to use .setStatus as the annotation says.&lt;/p&gt;

&lt;p&gt;Beyond that I would recommend using an @ExceptionHandler method with ResponseEntity, which is what you would need to do if you want to actually send some JSON in the response body. &lt;/p&gt;</comment>
                            <comment id="116675" author="michael-o" created="Mon, 15 Jun 2015 12:23:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;Beyond that I would recommend using an @ExceptionHandler method with ResponseEntity, which is what you would need to do if you want to actually send some JSON in the response body.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is what I did ever since but this is a mere workaround.&lt;/p&gt;

&lt;p&gt;I would like to see consistency and the framework not to return content types the client has not requested. &lt;tt&gt;sendError&lt;/tt&gt; was designed for browsers/humans, not machines.&lt;/p&gt;</comment>
                            <comment id="116678" author="rstoya05-aop" created="Mon, 15 Jun 2015 13:17:22 +0000"  >&lt;p&gt;What I&apos;m proposing is to switch to setStatus consistently. The use of sendError happens only if you add a reason and that&apos;s based on what the Servlet API provides. I don&apos;t really understand what your expectation is with setting the reason.&lt;/p&gt;</comment>
                            <comment id="116684" author="michael-o" created="Mon, 15 Jun 2015 13:48:32 +0000"  >&lt;p&gt;I agree on the first point, about the second: what is the point in having &lt;tt&gt;sendError&lt;/tt&gt;? You are proposing that a &lt;tt&gt;@RestController&lt;/tt&gt; should not use the &lt;tt&gt;reason&lt;/tt&gt; property at all?&lt;/p&gt;

&lt;p&gt;The downside would be with a regular &lt;tt&gt;@Controller&lt;/tt&gt; couldn&apos;t simply use &lt;tt&gt;@ResponseStatus&lt;/tt&gt; with having the client/human to see a server generated error page.&lt;/p&gt;</comment>
                            <comment id="116686" author="rstoya05-aop" created="Mon, 15 Jun 2015 14:06:57 +0000"  >&lt;p&gt;I simply don&apos;t see what we can do with a reason in a @RestController. What do you have in mind? &lt;/p&gt;</comment>
                            <comment id="116698" author="michael-o" created="Tue, 16 Jun 2015 00:37:48 +0000"  >&lt;p&gt;Rossen, my idea is quite simple. The &lt;tt&gt;reason&lt;/tt&gt; for a REST client is pointless because it cannot read that reason anyway (or will you extract it from the container-specific output?). More than that, the REST client does &lt;tt&gt;Accept: application/json&lt;/tt&gt; but the server responds with &lt;tt&gt;Content-Type: text/html&lt;/tt&gt;. That isn&apos;t something the client has requested. I hope you see the point, clear separation between REST clients and browser-based clients.&lt;/p&gt;</comment>
                            <comment id="116701" author="bclozel" created="Tue, 16 Jun 2015 01:22:44 +0000"  >&lt;p&gt;Let me try to summarize this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;@ResponseStatus(reason=&quot;something&quot;)&lt;/tt&gt; is a Servlet specific attribute that enforces an HTML error page as per spec; maybe we can make that more clear &lt;a href=&quot;http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ResponseStatus.html#reason--&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;in our Javadoc&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;returning a &lt;tt&gt;ResponseEntity&amp;lt;String&amp;gt;&lt;/tt&gt; or &lt;tt&gt;ResponseEntity&amp;lt;ErrorStatus&amp;gt;&lt;/tt&gt; is not a mere workaround, but the recommended way to have REST error responses with content negotiation, etc&lt;/li&gt;
	&lt;li&gt;IMO, using &lt;tt&gt;@ResponseStatus(reason=&quot;something&quot;)&lt;/tt&gt; is the equivalent of writing to the response directly with a forced &lt;tt&gt;&quot;text/html&quot;&lt;/tt&gt; content-type, thus bypassing the content negotiation process&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Rossen&apos;s proposal is about fixing a bug on our side, which is to not use &lt;tt&gt;sendError&lt;/tt&gt; when only the status is involved.&lt;br/&gt;
But since using &lt;tt&gt;reason&lt;/tt&gt; forces the content type and writes to the response which &lt;tt&gt;will be considered complete and should not be written to any further&lt;/tt&gt; (see Javadoc), then you can&apos;t really expect proper content negotiation here.&lt;/p&gt;

&lt;p&gt;Again, it&apos;s not about REST vs. browsers (they can be all REST clients from our point of view), it&apos;s about code enforcing a content type, just like you would with &lt;tt&gt;@RequestMapping(produces=&quot;text.html&quot;)&lt;/tt&gt; - the content type may not be what the client asked, but that&apos;s what you enforced in your codebase. If you want the real deal, then &lt;tt&gt;ResponseEntity&lt;/tt&gt; is the way to go.&lt;/p&gt;</comment>
                            <comment id="116707" author="michael-o" created="Tue, 16 Jun 2015 01:59:41 +0000"  >&lt;p&gt;Brian, the summary is correct and I agree with Rossen&apos;s patch proposal. I would like the Spring documentation/Javadoc be clearer on this. People should know that &lt;tt&gt;reason&lt;/tt&gt; will break content negotiation.&lt;/p&gt;

&lt;p&gt;I have simply avoided using &lt;tt&gt;reason&lt;/tt&gt; altogether.&lt;/p&gt;</comment>
                            <comment id="116820" author="rstoya05-aop" created="Wed, 17 Jun 2015 14:25:33 +0000"  >&lt;p&gt;I&apos;ve made the change in ResponseStatusExceptionResolver and also &lt;a href=&quot;https://github.com/spring-projects/spring-framework/blob/042519043f774385b30591bf2e6476b7cbee9dfc/spring-web/src/main/java/org/springframework/web/bind/annotation/ResponseStatus.java#L61-L70&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;updated the Javadoc&lt;/a&gt; on @ResponseStatus.&lt;/p&gt;</comment>
                            <comment id="116831" author="michael-o" created="Thu, 18 Jun 2015 02:09:36 +0000"  >&lt;p&gt;This solution looks acceptable with minimal effect. Thank you!&lt;/p&gt;</comment>
                            <comment id="118146" author="bclozel" created="Thu, 30 Jul 2015 07:18:37 +0000"  >&lt;p&gt;Sorry &lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;Michael Osipov&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;We reverted this change because of &lt;a href=&quot;https://jira.spring.io/browse/SPR-13226&quot; title=&quot;Regression in ResponseStatusExceptionResolver: setStatus versus sendError&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-13226&quot;&gt;&lt;del&gt;SPR-13226&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://github.com/spring-projects/spring-boot/issues/3623&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this Spring Boot issue&lt;/a&gt;. Feel free to comment here or there.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="118234" author="michael-o" created="Mon, 3 Aug 2015 11:16:34 +0000"  >&lt;p&gt;Brian, I read the regression issue but not fully understand the problem. The previous situation was inconsistent. The fix here cleaned that up and change behavior &amp;#8211; that is obvious. Where is the problem with the issue change? Instead of complaining about an empty page, I wrote here already several times that a &lt;tt&gt;@ResponseError&lt;/tt&gt; annotation would clean up the mess instead of mix-and-match with the resolver and &lt;tt&gt;@ResponseStatus&lt;/tt&gt;. Why can&apos;t we have a clean and consistent approach instead of documenting quirks?&lt;/p&gt;</comment>
                            <comment id="118236" author="rstoya05-aop" created="Mon, 3 Aug 2015 11:38:36 +0000"  >&lt;p&gt;The rational is that for @ResponseStatus on @RequestMapping, clearly .setStatus is preferred unless a reason is also provided in which case there is just no other way through the Servlet API. On a HandlerExceptionResolver however it makes sense to use sendError (after all it is an exception handler) and that allows Boot to handle error dispatches consistently.&lt;/p&gt;

&lt;p&gt;The bottom line is for REST API error handling you should really use ResponseEntity and include details in the body of the response.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="52245">SPR-11192</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="64734">SPR-13226</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        1 year, 20 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 12 Jun 2015 01:48:53 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>bclozel</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06rb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>