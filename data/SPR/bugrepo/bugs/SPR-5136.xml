<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:03:20 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-5136/SPR-5136.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-5136] CLONE -JdbcTemplate conflicts with Oracle10g statement caching (ORA-17041)</title>
                <link>https://jira.spring.io/browse/SPR-5136</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;Enabling statement caching with Oracle 10g JDBC drivers may result in difficult to track exceptions (ORA-17041).&lt;/p&gt;

&lt;p&gt;I was not able to investigate the problem fully, but after a full sunday afternoon of debugging, I am able to attach a JUnit repeatable test case.&lt;/p&gt;

&lt;p&gt;The test case is artificially simple, I experienced the bug in a much more complex situation in a production web application.&lt;/p&gt;

&lt;p&gt;I used Oracle JDBC thin driver version 10.2 (10.2.0.4 I think).&lt;/p&gt;

&lt;p&gt;Ciao, FG.&lt;/p&gt;</description>
            <key id="23841">SPR-5136</key>
            <summary>CLONE -JdbcTemplate conflicts with Oracle10g statement caching (ORA-17041)</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="thomas.risberg">Thomas Risberg</assignee>
                                    <reporter username="celal">Celal Ziftci</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Sep 2008 07:53:31 +0000</created>
                <updated>Tue, 2 Sep 2008 19:06:14 +0000</updated>
                            <resolved>Tue, 2 Sep 2008 19:06:14 +0000</resolved>
                                    <version>1.2.8</version>
                                                    <component>Data</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="39394" author="celal" created="Tue, 2 Sep 2008 08:02:52 +0000"  >&lt;p&gt;I want to re-open this issue as it has more bugs in my opinion.&lt;br/&gt;
CallableStatementCreatorFactory.CallableStatementCreatorImpl.createCallableStatement(Connection) has the following lines:&lt;/p&gt;

&lt;p&gt;if ((declaredParameter).isInputValueProvided() || inValue != null) {&lt;br/&gt;
      StatementCreatorUtils.setParameterValue(csToUse, sqlColIndx, declaredParameter, inValue);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;As one would expect, SqlOutParameter returns false for isInputValueProvided(), whereas SqlInOutParameter returns true for it.&lt;br/&gt;
Now the problem is with the second part of the if check: ... || inValue != null)&lt;/p&gt;

&lt;p&gt;I think this is defying the whole purpose of SqlOutParameter class and its isInputValueProvided() method, because even though that method is returning false (implying that no value should be set on a strictly output parameter), we go ahead and set it.&lt;/p&gt;

&lt;p&gt;This causes issue on a next call which actually passes in NULL as a value of the parameter, at which time Spring doesn&apos;t honor the value and set it on the statement.&lt;br/&gt;
And this causes issues with the value that is passed in to the stored procedure later on since we use the same statement due to statement caching and we don&apos;t set the value to NULL.&lt;/p&gt;

&lt;p&gt;What is the purpose of that (inValue != null) check? I think ANY value should be delegated to the statement to avoid issues.&lt;br/&gt;
Was this done to keep backwards compatibility?&lt;br/&gt;
I find this quite dangerous if it&apos;s done for that purpose. Can we get this fixed?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Related</name>
                                            <outwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="14021">SPR-2046</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        8 years, 17 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>true</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01dov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>