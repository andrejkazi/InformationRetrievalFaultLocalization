<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:34:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1873/SPR-1873.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1873] Data binding fails for SimpleFormController and velocity</title>
                <link>https://jira.spring.io/browse/SPR-1873</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I created a really simple SimpleFormController and a corresponding velocity template &quot;foo.vm&quot;. The template contains the folloging form:&lt;/p&gt;

&lt;p&gt;&amp;lt;form action=&quot;&quot; method=&quot;POST&quot;&amp;gt;&lt;br/&gt;
    #springFormInput( &quot;command.message&quot; &quot;&quot; )&lt;br/&gt;
    &amp;lt;input type=&quot;submit&quot; value=&quot;submit&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/form&amp;gt;&lt;/p&gt;

&lt;p&gt;I want the form being pre filled with the message from the command object.&lt;/p&gt;

&lt;p&gt;But when accessing the form I get the following error inside the tomcat log:&lt;/p&gt;

&lt;p&gt;2006-04-09 09:46:21,828 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.velocity.app.VelocityEngine&amp;#93;&lt;/span&gt; - RHS of #set statement is null. Context will not be modified. foo.vm &lt;span class=&quot;error&quot;&gt;&amp;#91;line 4, column 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
2006-04-09 09:46:21,828 WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.velocity.app.VelocityEngine&amp;#93;&lt;/span&gt; - org.apache.velocity.runtime.exception.ReferenceException: reference : template = foo.vm &lt;span class=&quot;error&quot;&gt;&amp;#91;line 2,column 28&amp;#93;&lt;/span&gt; : $&lt;/p&gt;
{status.expression} is not a valid reference.&lt;br/&gt;
2006-04-09 09:46:21,828 WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.velocity.app.VelocityEngine&amp;#93;&lt;/span&gt; - org.apache.velocity.runtime.exception.ReferenceException: reference : template = foo.vm &lt;span class=&quot;error&quot;&gt;&amp;#91;line 2,column 56&amp;#93;&lt;/span&gt; : ${status.expression}
&lt;p&gt; is not a valid reference.&lt;/p&gt;

&lt;p&gt;In the constructor of my controller I set the following properties:&lt;br/&gt;
		setCommandClass( MyCommand.class );&lt;br/&gt;
		setCommandName( &quot;command&quot; );&lt;br/&gt;
		setSessionForm( true );&lt;br/&gt;
		setBindOnNewForm( true );&lt;/p&gt;

&lt;p&gt;In general accessing the command object works (I can output the message).&lt;/p&gt;

&lt;p&gt;I tried to overwrite the method &quot;formBackingObject&quot; but that didn&apos;t change anything.&lt;/p&gt;

&lt;p&gt;Do I have to call some binding methods by hand? Or is this a bug?&lt;/p&gt;</description>
            <key id="13706">SPR-1873</key>
            <summary>Data binding fails for SimpleFormController and velocity</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="springboy">Rick Evans</assignee>
                                    <reporter username="jpwilhelms">Jan-Peter Wilhelms</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Apr 2006 21:21:26 +0000</created>
                <updated>Tue, 19 Jun 2012 03:52:51 +0000</updated>
                            <resolved>Wed, 12 Jul 2006 22:40:11 +0000</resolved>
                                    <version>2.0 M3</version>
                                    <fixVersion>2.0 RC3</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="17113" author="juergen.hoeller" created="Mon, 10 Apr 2006 00:45:02 +0000"  >&lt;p&gt;It looks like the BindStatus instance is not exposed here, hence the &quot;status&quot; variable is not available in the template script.&lt;/p&gt;

&lt;p&gt;I suspect that you&apos;re rendering the &quot;foo.vm&quot; view with just the command object as model. That could for example happen when you override showForm and just pass the command object into a ModelAndView. Make sure that your form view is specified as &quot;formView&quot; property and rendered in the default manner; then the BindStatus should always get exposed properly.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="17247" author="jpwilhelms" created="Wed, 19 Apr 2006 07:35:28 +0000"  >&lt;p&gt;So, what is the minimum I have to implement to get the form filled? I expected the following to do the job, but I only get a StackOverflowError:&lt;/p&gt;

&lt;p&gt;========================&lt;br/&gt;
import org.springframework.web.servlet.mvc.SimpleFormController;&lt;/p&gt;

&lt;p&gt;public class SampleController extends SimpleFormController {&lt;/p&gt;

&lt;p&gt;	public SampleController() &lt;/p&gt;
{
		setCommandClass( MyModel.class );
		setCommandName( &quot;command&quot; );
		setFormView( &quot;foo.vm&quot; );
		setSuccessView( &quot;foo.vm&quot; );
		setSessionForm( true );
		setBindOnNewForm( true );
	}
&lt;p&gt;}&lt;br/&gt;
========================&lt;/p&gt;</comment>
                            <comment id="17248" author="juergen.hoeller" created="Wed, 19 Apr 2006 08:36:29 +0000"  >&lt;p&gt;That should work - where do you get a stack overflow there?&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="17250" author="jpwilhelms" created="Wed, 19 Apr 2006 09:03:05 +0000"  >&lt;p&gt;I get the following error in the tomcat log:&lt;/p&gt;

&lt;p&gt;SCHWERWIEGEND: Servlet.service() for servlet example threw exception&lt;br/&gt;
java.lang.StackOverflowError&lt;br/&gt;
	at org.apache.catalina.session.StandardSession.isValid(StandardSession.java:556)&lt;br/&gt;
	at org.apache.catalina.connector.Request.doGetSession(Request.java:2179)&lt;br/&gt;
	at org.apache.catalina.connector.Request.getSession(Request.java:2020)&lt;br/&gt;
	at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:831)&lt;br/&gt;
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:215)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:544)&lt;br/&gt;
	at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:215)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:544)&lt;br/&gt;
... and so on&lt;/p&gt;

&lt;p&gt;Jan&lt;/p&gt;</comment>
                            <comment id="17251" author="jpwilhelms" created="Wed, 19 Apr 2006 09:10:38 +0000"  >&lt;p&gt;oh, it&apos;s continued like this:&lt;/p&gt;

&lt;p&gt;        ...&lt;br/&gt;
        at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:215)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:544)&lt;br/&gt;
	at org.springframework.web.util.WebUtils.getSessionId(WebUtils.java:185)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:421)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:350)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:672)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:463)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:398)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301)&lt;br/&gt;
	at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:111)&lt;br/&gt;
	at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1051)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:727)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:396)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:350)&lt;/p&gt;</comment>
                            <comment id="17273" author="jpwilhelms" created="Thu, 20 Apr 2006 09:10:32 +0000"  >&lt;p&gt;I&apos;ve attached the project. Simply do a &quot;mvn package&quot; (maven2) and deploy the war file (tomcat 5.5) to see the errors.&lt;/p&gt;</comment>
                            <comment id="18071" author="juergen.hoeller" created="Mon, 19 Jun 2006 08:27:46 +0000"  >&lt;p&gt;Rob, can you please have a look at this?&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="18557" author="springboy" created="Wed, 12 Jul 2006 19:41:06 +0000"  >&lt;p&gt;The Velocity data-binding infrastructure works as expected.&lt;/p&gt;

&lt;p&gt;I took the sample app supplied by Jan-Peter, and was able to successfully deploy and access it &lt;b&gt;after&lt;/b&gt; I had made some very small changes to the configuration.&lt;/p&gt;

&lt;p&gt;The changes that were required are &lt;b&gt;not&lt;/b&gt; present in the reference documentation. The Velocity/FreeMarker section is not quite verbose enough, and I think this issue boils down to poor documentation. I will update the attendant Velocity documentation in the Spring reference documentation, and I will create another JIRA issue (&lt;a href=&quot;https://jira.spring.io/browse/SPR-2292&quot; title=&quot;Get better exception messages from Velocity when using Spring macros and exposeMacroHelpers is not set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-2292&quot;&gt;&lt;del&gt;SPR-2292&lt;/del&gt;&lt;/a&gt;) to remind myself to investigate the underlying cause of this issue so that I can change the code to produce a better exception.&lt;/p&gt;

&lt;p&gt;Find below the configuration that is required to get Velocity working in Spring MVC (actually I&apos;ll just attach a working Spring Web MVC Velocity project). &lt;/p&gt;
</comment>
                            <comment id="18558" author="springboy" created="Wed, 12 Jul 2006 21:53:00 +0000"  >&lt;p&gt;Working Velocity example.&lt;/p&gt;</comment>
                            <comment id="18559" author="springboy" created="Wed, 12 Jul 2006 22:40:11 +0000"  >&lt;p&gt;Hi Jan-Peter&lt;/p&gt;

&lt;p&gt;I have updated the documentation to be more explicit about what is actually required to use Velocity in conjunction with Spring (Web MVC).&lt;/p&gt;

&lt;p&gt;I have also created another issue (&lt;a href=&quot;https://jira.spring.io/browse/SPR-2292&quot; title=&quot;Get better exception messages from Velocity when using Spring macros and exposeMacroHelpers is not set&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-2292&quot;&gt;&lt;del&gt;SPR-2292&lt;/del&gt;&lt;/a&gt;) to address the odd behaviour that led to the exception you reported (the recursive getSession() calls). I will address that issue separately, and am thus closing this one.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10011">
                    <name>Depends</name>
                                                                <inwardlinks description="is depended on by">
                                        <issuelink>
            <issuekey id="14512">SPR-2292</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="11590" name="springwebapp.zip" size="3442" author="jpwilhelms" created="Thu, 20 Apr 2006 09:10:31 +0000"/>
                            <attachment id="11801" name="velo.zip" size="12757" author="springboy" created="Wed, 12 Jul 2006 21:53:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 25 weeks ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 10 Apr 2006 00:45:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0193b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>