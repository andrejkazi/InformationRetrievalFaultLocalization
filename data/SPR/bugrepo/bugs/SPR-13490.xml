<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:40:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-13490/SPR-13490.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-13490] @RequestBody required parameter is ignored allowing null payloads</title>
                <link>https://jira.spring.io/browse/SPR-13490</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;When handling a POST request in a @RestController, the payload parameter annotated with @RequestBody can be null, regardless of the value of the required attribute.&lt;/p&gt;

&lt;p&gt;Payload is JSON (content-type header is included) and deserialization is handled by Jackson.&lt;/p&gt;

&lt;p&gt;In case it matters, the project is inheriting from spring-boot-starter-parent version 1.2.5.RELEASE.&lt;/p&gt;</description>
            <key id="65967">SPR-13490</key>
            <summary>@RequestBody required parameter is ignored allowing null payloads</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://jira.spring.io/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="bclozel">Brian Clozel</assignee>
                                    <reporter username="h.emanuel">Emanuel Hategan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Sep 2015 08:41:00 +0000</created>
                <updated>Mon, 4 Jan 2016 14:26:24 +0000</updated>
                            <resolved>Mon, 4 Jan 2016 14:26:24 +0000</resolved>
                                    <version>4.1.7</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="119970" author="bclozel" created="Wed, 23 Sep 2015 15:22:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=h.emanuel&quot; class=&quot;user-hover&quot; rel=&quot;h.emanuel&quot;&gt;Emanuel Hategan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I couldn&apos;t reproduce the issue you&apos;re referring to here, using Boot or plain Spring Framework.&lt;/p&gt;

&lt;p&gt;Here is a &lt;a href=&quot;https://github.com/spring-projects/spring-framework-issues/tree/master/SPR-13490&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;repro project that demonstrates that&lt;/a&gt;:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;a empty body will be rejected by &lt;tt&gt;@RequestBody&lt;/tt&gt; since it&apos;s marked as required by default&lt;/li&gt;
	&lt;li&gt;an empty JSON object &lt;tt&gt;&quot;{}&quot;&lt;/tt&gt; will be rejected by the Validator&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Could you take a look at this repro project and your app?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;</comment>
                            <comment id="120833" author="h.emanuel" created="Thu, 22 Oct 2015 09:04:46 +0000"  >&lt;p&gt;I&apos;ve made a pull request with updated tests: &lt;a href=&quot;https://github.com/spring-projects/spring-framework-issues/pull/111&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-framework-issues/pull/111&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What I&apos;m thinking is that it should reject payloads that are &quot;null&quot; not only empty &quot;{}&quot; since the null string is deserialized as null payload.&lt;/p&gt;</comment>
                            <comment id="122718" author="bclozel" created="Mon, 28 Dec 2015 20:35:09 +0000"  >&lt;p&gt;I don&apos;t think this behavior is a bug, since:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;@RequestBody(required=true)&lt;/tt&gt; states that the body should be injected here and should not be null&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;@Valid&lt;/tt&gt; states that the method argument should be processed by validators&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Now for each case:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;&quot;{}&quot;&lt;/tt&gt; is deserialized as an empty &lt;tt&gt;Payload&lt;/tt&gt; object, which will be rejected by the validator that rejects empty messages&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;&quot;&quot;&lt;/tt&gt; is rejected by &lt;tt&gt;@RequestBody(required=true)&lt;/tt&gt; because the request body is empty&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;&quot;null&quot;&lt;/tt&gt; is deserialized by Jackson as &lt;tt&gt;null&lt;/tt&gt;, and the Validator is never called on such object&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In my opinion, there are several ways to deal with this - manually checking for null values, using &lt;tt&gt;@NotNull&lt;/tt&gt; or even using a custom &lt;tt&gt;HandlerMethodArgumentResolver&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;One more thing: your SO question was spot on (sorry if it took me a while to understand the whole context) and I understand your concerns - even if there may be &quot;no problem to solve&quot; strictly in the framework, I&apos;d like to find the best answer for this.&lt;/p&gt;

&lt;p&gt;Is this &lt;tt&gt;&quot;null&quot;&lt;/tt&gt; request payload a common use case? This looks to me as if you&apos;ve &lt;tt&gt;JSON.stringify(null)&lt;/tt&gt; on the client side...&lt;/p&gt;</comment>
                            <comment id="122800" author="h.emanuel" created="Mon, 4 Jan 2016 13:13:10 +0000"  >&lt;p&gt;Hi Brian, thank you for looking into this. &lt;/p&gt;

&lt;p&gt;You are saying &quot;null&quot; is deserialized by Jackson as null, and the Validator is never called on such object and you are right validator is not called in this case. &lt;/p&gt;

&lt;p&gt;However, I still believe &quot;null&quot; values should be rejected earlier, because of the @RequestBody(required=true) according to its documentation: &quot;leading to an exception thrown in case there is no body content. Switch this to &lt;/p&gt;
{@code false}
&lt;p&gt; if you prefer &lt;/p&gt;
{@code null} to be passed when the body content is {@code null}
&lt;p&gt;.&quot;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Interestingly enough, in version 4.2.3.RELEASE the issue is fixed:&lt;/b&gt; just replace 4.1.7.RELEASE with 4.2.3.RELEASE in the pom and all tests pass.&lt;br/&gt;
The fix seems to be in this commit: &lt;a href=&quot;https://github.com/spring-projects/spring-framework/commit/3272a3b8badc29fd6f6022476dfb0124fbfeca85&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-framework/commit/3272a3b8badc29fd6f6022476dfb0124fbfeca85&lt;/a&gt; which is related to &lt;a href=&quot;https://jira.spring.io/browse/SPR-13176&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.spring.io/browse/SPR-13176&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="122804" author="bclozel" created="Mon, 4 Jan 2016 14:26:24 +0000"  >&lt;p&gt;Indeed, this is now fixed.&lt;br/&gt;
We&apos;re now checking if the resolved arg is null after it&apos;s been deserialized, taking care of this use case.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="64533">SPR-13176</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        50 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 23 Sep 2015 15:22:43 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>bclozel</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08s4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://stackoverflow.com/questions/32222099/spring-4-reject-null-requestbody-for-all-endpoints]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>