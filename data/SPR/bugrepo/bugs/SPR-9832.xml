<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 21:14:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-9832/SPR-9832.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-9832] Erroneous &quot;0&quot; returned where empty string expected in call through the RestTemplate</title>
                <link>https://jira.spring.io/browse/SPR-9832</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;The RestTemplate erroneously infers &quot;0&quot; for an empty string values.&lt;/p&gt;

&lt;p&gt;1. Execute the attached test RestTemplateTest using the attached pom.xml file.&lt;br/&gt;
2. The test fails, the response from the RestTemplate is &lt;/p&gt;
{&quot;lhs&quot;:&quot;1 U.S. dollar&quot;,&quot;rhs&quot;:&quot;1 U.S. dollar&quot;,&quot;error&quot;:&quot;0&quot;,&quot;icc&quot;:true}

&lt;p&gt;For comparison, change the spring version to any 3.0.x version, or perform a request to &lt;a href=&quot;http://www.google.com/ig/calculator?q=1USD=?EUR&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.google.com/ig/calculator?q=1USD=?EUR&lt;/a&gt; from a browser. The response is &lt;/p&gt;
{lhs: &quot;1 U.S. dollar&quot;,rhs: &quot;0.774833411 Euros&quot;,error: &quot;&quot;,icc: true}</description>
            <key id="45554">SPR-9832</key>
            <summary>Erroneous &quot;0&quot; returned where empty string expected in call through the RestTemplate</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="rstoya05-aop">Rossen Stoyanchev</assignee>
                                    <reporter username="matsev">Mattias Severson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Sep 2012 01:41:47 +0000</created>
                <updated>Wed, 7 Nov 2012 07:37:27 +0000</updated>
                            <resolved>Mon, 22 Oct 2012 08:28:54 +0000</resolved>
                                    <version>3.1 RC1</version>
                    <version>3.1.2</version>
                                    <fixVersion>3.1.3</fixVersion>
                    <fixVersion>3.2 RC1</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                <comments>
                            <comment id="83972" author="rstoya05-aop" created="Wed, 3 Oct 2012 06:41:34 +0000"  >&lt;p&gt;Repro project: &lt;a href=&quot;https://github.com/SpringSource/spring-framework-issues/tree/master/SPR-9832&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/SpringSource/spring-framework-issues/tree/master/SPR-9832&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="83973" author="rstoya05-aop" created="Wed, 3 Oct 2012 06:49:50 +0000"  >&lt;p&gt;From an brief look the response is of content type &quot;text/html&quot; and is processed with StringHttpMessageConverter, which simply turns the response body into a String. At the moment I fail to see what could be causing this issue.&lt;/p&gt;

&lt;p&gt;Also I&apos;m not sure why the subject is about json-lib or how this is connected to JSON deserialization?&lt;/p&gt;</comment>
                            <comment id="84100" author="rstoya05-aop" created="Mon, 8 Oct 2012 10:25:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=matsev&quot; class=&quot;user-hover&quot; rel=&quot;matsev&quot;&gt;Mattias Severson&lt;/a&gt;, could you clarify the subject? I.e. how json-lib and JSON deserialization are related? The server response is of Content-Type &quot;text/html&quot; (`curl -v &lt;a href=&quot;http://www.google.com/ig/calculator?q=1USD=?EUR&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.google.com/ig/calculator?q=1USD=?EUR&lt;/a&gt;&apos;) and is processed with StringHttpMessageConverter.&lt;/p&gt;

&lt;p&gt;If you can confirm that I will update the title. Also have you found any other ways in which the issue can be reproduced or exhibits itself?&lt;/p&gt;</comment>
                            <comment id="84134" author="matsev" created="Tue, 9 Oct 2012 18:53:35 +0000"  >&lt;p&gt;Sorry about the late reply. I am currently on vacation and I don&apos;t have my laptop with me, so unfortunately I cannot do any investigation at this time. You are probably right that the title is misleading, feel free to update it.&lt;/p&gt;</comment>
                            <comment id="84251" author="matsev" created="Sun, 14 Oct 2012 08:06:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=rstoya05-aop&quot; class=&quot;user-hover&quot; rel=&quot;rstoya05-aop&quot;&gt;Rossen Stoyanchev&lt;/a&gt;, as you stated, the json-lib can be ruled out.&lt;/p&gt;

&lt;p&gt;Additionally, it seems like the error was introduced in the 3.1.0.RELEASE (I have verified that the test passes using the 3.0.0.RELEASE and 3.0.7.RELEASE, but fails using the 3.1.0.RELEASE, 3.1.1.RELEASE and 3.1.2.RELEASE).&lt;/p&gt;</comment>
                            <comment id="84252" author="rstoya05-aop" created="Sun, 14 Oct 2012 08:53:10 +0000"  >&lt;p&gt;I&apos;m a bit stumped by this issue. What&apos;s odd is the server returns &quot;text/html&quot; content and the StringHttpMessageConverter &lt;a href=&quot;https://github.com/SpringSource/spring-framework/blob/master/spring-web/src/main/java/org/springframework/http/converter/StringHttpMessageConverter.java#L103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;simply turns&lt;/a&gt; the InputStream into a String without ever parsing it or trying to interpret it.&lt;/p&gt;

&lt;p&gt;I created a project to try to replicate the behavior by creating a controller method that returns the same content as the Google API but I wasn&apos;t able to reproduce it. See &lt;a href=&quot;https://github.com/SpringSource/spring-framework-issues/blob/master/SPR-9832/src/test/java/org/springframework/issues/RestTemplateTests.java#L30&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;RestTemplateTests&lt;/a&gt; and  &lt;a href=&quot;https://github.com/SpringSource/spring-framework-issues/blob/master/SPR-9832/src/main/java/org/springframework/issues/TestController.java#L26&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;TestController&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="84369" author="rstoya05-aop" created="Mon, 22 Oct 2012 08:28:38 +0000"  >&lt;p&gt;&lt;b&gt;Root cause&lt;/b&gt;: thanks to &lt;a href=&quot;https://jira.spring.io/secure/ViewProfile.jspa?name=pwebb&quot; class=&quot;user-hover&quot; rel=&quot;pwebb&quot;&gt;Phil Webb&lt;/a&gt; for pointing out that the issue is with the way the query string is parsed. Given &quot;q=1USD=?EUR&quot;, the value of &quot;q&quot; is &quot;1USD=?EUR&quot;, which contains a reserved character &quot;=&quot;. Ideally, for such cases, where reserved characters are expected, it  is recommend to use a URI variable:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;http://www.google.com/ig/calculator?q={value}&quot;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;This ensures the URI can be parsed correctly and the value encoded so the resulting URI would be: &lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;http://www.google.com/ig/calculator?q=1USD%3D?EUR&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;&lt;b&gt;Spring 3.0 vs 3.1&lt;/b&gt;: in Spring 3.0, the UriTemplate encoded the query string as a whole without attempting to parse it, which meant that query parameters could not be fully encoded. Spring 3.1 introduced UriComponentsBuilder (also used inside UriTemplate), which does parse the query string and fully encodes query parameter names and values. However, when the query string contains reserved characters there is ambiguity in the parsing.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Fix&lt;/b&gt;: I&apos;ve updated the regular expression used to parse query params to give more intuitive behavior in some common cases and to fix the regression. Below is the comment from commit &lt;a href=&quot;https://github.com/SpringSource/spring-framework/commit/0721146&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;072114&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Improve regex for parsing query params&lt;/p&gt;

&lt;p&gt;Previously UriComponentsBuilder used a regular expression for parsing&lt;br/&gt;
query name-value pairs where both name and value were expected to not&lt;br/&gt;
contain neither &apos;&amp;amp;&apos;, not &apos;=&apos;. The idea is that the presence of reserved&lt;br/&gt;
characters makes it impossible to guess correctly how to parse the&lt;br/&gt;
query string (e.g. a=b&amp;amp;c).&lt;/p&gt;

&lt;p&gt;This change relaxes the constraint on query param values, allowing them&lt;br/&gt;
to contain &apos;=&apos;. In effect &apos;&amp;amp;&apos; is the ultimate separator of name-value&lt;br/&gt;
pairs, and any &apos;=&apos; in values is ignored. For example &quot;q=1USD=?EUR&quot; is&lt;br/&gt;
interpreted as &quot;q equals &apos;1USD=?EUR&apos;&quot;.&lt;/p&gt;&lt;/blockquote&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="46021">SPR-9969</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="45398">SPR-9791</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="43745">SPR-9474</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="20525" name="RestTemplateTest.java" size="1041" author="matsev" created="Wed, 26 Sep 2012 01:41:48 +0000"/>
                            <attachment id="20524" name="pom.xml" size="2804" author="matsev" created="Wed, 26 Sep 2012 01:41:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        4 years, 9 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 3 Oct 2012 06:41:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rstoya05-aop</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05vhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>