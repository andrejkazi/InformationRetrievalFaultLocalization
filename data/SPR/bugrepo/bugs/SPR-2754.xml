<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 20:04:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2754/SPR-2754.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2754] The MethodExclusionMBeanInfoAssembler.isNotIgnored(Method,String) method returns the wrong value if ignoredMethods is null.</title>
                <link>https://jira.spring.io/browse/SPR-2754</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I first set up my mbean exporter with the default assembler and a set of beans to explore.  That seemed to work fine, showing all the public properties and methods of the beans.  I then added a MethodExclusionMBeanInfoAssembler as the assembler, and I set a &quot;ignoredMethodMappings&quot; value that just referenced one bean name, and 2 methods of that bean.  I did NOT set the &quot;ignoredMethods&quot; property at all.&lt;/p&gt;

&lt;p&gt;When I connected again through my jmx browser, all the beans were still available, but I could not see any methods or properties on any of them.&lt;/p&gt;

&lt;p&gt;I then inspected the source code for MethodExclusionMBeanInfoAssembler in version 1.2.8.  The method &quot;isNotIgnored(Method,String)&quot;, which appears to be the method where the &quot;ignoredMethods&quot; and &quot;ignoredMethodMappings&quot; data is referenced, consists of the following:&lt;/p&gt;

&lt;p&gt;-------------------&lt;br/&gt;
	protected boolean isNotIgnored(Method method, String beanKey) {&lt;br/&gt;
		if (this.ignoredMethodsMappings != null) {&lt;br/&gt;
			Set methodNames = (Set) this.ignoredMethodsMappings.get(beanKey);&lt;br/&gt;
			if (methodNames != null) &lt;/p&gt;
{
				return ! methodNames.contains(method.getName());
			}
&lt;p&gt;		}&lt;br/&gt;
		return (this.ignoredMethods != null &amp;amp;&amp;amp; ! this.ignoredMethods.contains(method.getName())); // wrong&lt;br/&gt;
	}&lt;br/&gt;
-------------------&lt;/p&gt;

&lt;p&gt;I did not step through this code in the debugger, but I can see that if I call this with a method and bean that is not mentioned in my &quot;ignoredMethodMappings&quot; list, then the return value will be &quot;false&quot;. This is because of the last return statement. If &quot;ignoredMethods&quot; is null, the value will be false.  The following is an attempted informal patch to this problem:&lt;/p&gt;

&lt;p&gt;-------------------&lt;br/&gt;
	protected boolean isNotIgnored(Method method, String beanKey) {&lt;br/&gt;
       boolean result = true;&lt;br/&gt;
		if (this.ignoredMethodsMappings != null) {&lt;br/&gt;
			Set methodNames = (Set) this.ignoredMethodsMappings.get(beanKey);&lt;br/&gt;
			if (methodNames != null) &lt;/p&gt;
{
				result   = ! methodNames.contains(method.getName());
			}
&lt;p&gt;		}&lt;br/&gt;
		if (this.ignoredMethods != null)&lt;br/&gt;
          result  = ! this.ignoredMethods.contains(method.getName()));&lt;br/&gt;
      return (result);&lt;br/&gt;
	}&lt;br/&gt;
-------------------&lt;/p&gt;</description>
            <key id="15336">SPR-2754</key>
            <summary>The MethodExclusionMBeanInfoAssembler.isNotIgnored(Method,String) method returns the wrong value if ignoredMethods is null.</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="dkarr">David M. Karr</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Oct 2006 03:56:50 +0000</created>
                <updated>Tue, 19 Jun 2012 03:50:40 +0000</updated>
                            <resolved>Wed, 25 Oct 2006 23:23:35 +0000</resolved>
                                    <version>1.2.8</version>
                    <version>2.0 final</version>
                                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>1.2.9</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="20456" author="juergen.hoeller" created="Wed, 25 Oct 2006 23:23:35 +0000"  >&lt;p&gt;Resolved for 2.0.1. To be backported to 1.2.9.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="21432" author="juergen.hoeller" created="Fri, 22 Dec 2006 05:52:10 +0000"  >&lt;p&gt;FYI, the Spring 1.2.9 release is - finally - just around the corner, scheduled for December 30th. I&apos;ve made a sort of release candidate available in the form of the 1.2.9-20061222 snapshot, available from:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://static.springframework.org/downloads/nightly&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://static.springframework.org/downloads/nightly&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please give this a try, simply replacing the 1.2.8 jar with the 1.2.9 snapshot jar and testing whether everything still works for you. This will help us to ensure the quality of the actual 1.2.9 release next week!&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 1 week, 6 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 25 Oct 2006 23:23:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00vfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5139</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>