<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 18:18:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-2158/SPR-2158.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-2158] Undeploying OC4J EAR Causes Exceptions in Spring JMX Deregistration</title>
                <link>https://jira.spring.io/browse/SPR-2158</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;I am getting a Spring 1.2.1 exception when I undeploy my .ear in OC4J. Here&apos;s what happens:&lt;/p&gt;

&lt;p&gt;1. When I undeploy, OC4J deregisters all my MBean instances that were configured and registered at startup via Spring.&lt;/p&gt;

&lt;p&gt;2. Our ContextLoaderListener receives a contextDestroyed() event (which we do not override). Inside the default destroyed handler a series of bean destroys occur, including ones to destroy/deregister our MBeans.&lt;/p&gt;

&lt;p&gt;3. Since our MBeans have already been deregistered by OC4J, Spring can&apos;t find the MBeans when it requests them from the MBeanServer. Spring throws an InstanceNotFoundException for each MBean we originally created via Spring.&lt;/p&gt;

&lt;p&gt;Note, this only happens when using undeploy. A pure OC4J shutdown works fine (perhaps because OC4J does not itself deregister MBeans in shutdown).&lt;/p&gt;</description>
            <key id="14250">SPR-2158</key>
            <summary>Undeploying OC4J EAR Causes Exceptions in Spring JMX Deregistration</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="vvernon">Vaughn Vernon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Jun 2006 07:28:57 +0000</created>
                <updated>Tue, 19 Jun 2012 03:52:49 +0000</updated>
                            <resolved>Sun, 25 Jun 2006 20:47:42 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>2.0 RC2</fixVersion>
                    <fixVersion>1.2.9</fixVersion>
                                    <component>JMX</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="18067" author="springboy" created="Mon, 19 Jun 2006 08:12:22 +0000"  >&lt;p&gt;Hi Vaughn&lt;/p&gt;

&lt;p&gt;What behaviour would you like to see here for the resolution of this issue?&lt;/p&gt;

&lt;p&gt;The InstanceNotFoundExceptions are swallowed by Spring during the destroy/unregistration process. Your logs will be full of nasty stacktraces though... is it this that you would like to get rid of (the somewhat spurious stacktraces)?&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                            <comment id="18088" author="vvernon" created="Mon, 19 Jun 2006 09:51:57 +0000"  >&lt;p&gt;Yes, I would like to get rid of the exceptions, especially because they are not thrown back to me to handle. Basically the messages are preventing us from deploying Spring JMX support because it will cause internal admin problems for us that we really don&apos;t need &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="18152" author="springboy" created="Wed, 21 Jun 2006 16:58:26 +0000"  >&lt;p&gt;Hi Vaughn&lt;/p&gt;

&lt;p&gt;I have amended the MBeanExporter unregistration code such that MBeans that are not registered at unregistration time no longer result in an (essentially spurious) stacktrace being logged. A message is still logged (at the WARN level) but no stacktrace is present (see below for an example of what is logged).&lt;/p&gt;

&lt;p&gt;&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;WARN&amp;#93;&lt;/span&gt; Could not unregister MBean &lt;span class=&quot;error&quot;&gt;&amp;#91;spring:test=jmxMBeanAdaptor&amp;#93;&lt;/span&gt; as said MBean is not registered (perhaps already unregistered by an external process)&quot;&lt;/p&gt;

&lt;p&gt;Is this acceptable to you; i.e. would it satisfy your &apos;internal admin problems&apos; so that you can move forward with Spring JMX in your applications(s)? If so I will commit said change and resolve this issue. Let me know.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                            <comment id="18158" author="vvernon" created="Thu, 22 Jun 2006 00:06:08 +0000"  >&lt;p&gt;Thanks Rick for your quick resolution. I think your approach is good as it is easy to inform all to ignore those warnings. Now if we are to incorporate your change do we have to create a custom build or will there be an official production build that we can download, and if so, when would it be available? We would probably wait for the production build before making use of it.&lt;/p&gt;

&lt;p&gt;Kind Regards,&lt;br/&gt;
Vaughn&lt;/p&gt;</comment>
                            <comment id="18161" author="springboy" created="Thu, 22 Jun 2006 04:14:14 +0000"  >&lt;p&gt;Hi Vaughn&lt;/p&gt;

&lt;p&gt;I will commit the change tonight, and as such the fix will be available in Spring 2.0 RC2 (which is due out in a few days). The production ready Spring 2.0 version will be available in a few weeks.&lt;/p&gt;

&lt;p&gt;Of course, you are using Spring 1.2.1... I can certainly make the patch available to you, or send you a custom build of Spring 1.2.1 that includes the patch, or you can do the patching to Spring 1.2.1 yourself. I will backport this fix into the Spring 1.2.1/ 1.2.7 / 1.2.8 Spring versions too.&lt;/p&gt;

&lt;p&gt;Let me know which solution is acceptable to you, and I will endeavour to help you get this resolved as quickly as possible.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                            <comment id="18165" author="vvernon" created="Thu, 22 Jun 2006 06:23:50 +0000"  >&lt;p&gt;Hey Rick,&lt;/p&gt;

&lt;p&gt;We have created the golden build for the next release (1.2) of our app and the golden is now in QA. We will have to wait on any Spring upgrades until the release following this one (1.3, probably in the fall). We don&apos;t feel comfortable using a patch build at this point since we are probably just a week or so from production release.&lt;/p&gt;

&lt;p&gt;During our next development phase we may upgrade to Spring 2.x when it is released for production. If you can be sure to backport this change to 1.x then we should be covered for our next phase whether we decide to use Spring 2.x or stay with 1.x.&lt;/p&gt;

&lt;p&gt;Thanks for your help!&lt;/p&gt;

&lt;p&gt;Vaughn&lt;/p&gt;</comment>
                            <comment id="18194" author="springboy" created="Sun, 25 Jun 2006 20:47:42 +0000"  >&lt;p&gt;Done.&lt;/p&gt;

&lt;p&gt;The fix is in the Spring 2.0 codebase now, and will ship in Spring 2.0 RC2 and final.&lt;/p&gt;

&lt;p&gt;The fix will be backported to Spring 1.2.9 shortly.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Rick&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        10 years, 27 weeks, 3 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 19 Jun 2006 08:12:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0284n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>