<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 19:10:15 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-1055/SPR-1055.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-1055] The ContextLoader cann&apos;t close the parent context.</title>
                <link>https://jira.spring.io/browse/SPR-1055</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;My JAAS module need access the spring beans. So i define the singleton parent context by &quot;locatorFactorySelector&quot; and &quot;parentContext&quot; in web.xml.&lt;br/&gt;
But when tomcat shutdown, i found the parent context cann&apos;t be closed by ContextLoader. Some disposable bean&apos;s destroy method hasn&apos;t been invoked.&lt;/p&gt;

&lt;p&gt;There is my configurations :&lt;/p&gt;

&lt;p&gt;beanRefContext.xml :&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;beans&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;iadms-context&quot; &lt;br/&gt;
		class=&quot;org.springframework.context.support.ClassPathXmlApplicationContext&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;constructor-arg&amp;gt;&lt;br/&gt;
			&amp;lt;list&amp;gt;&lt;br/&gt;
				&amp;lt;value&amp;gt;iadd-handlerFactory.xml&amp;lt;/value&amp;gt;				&lt;br/&gt;
				&amp;lt;value&amp;gt;spring-persistence.xml&amp;lt;/value&amp;gt;&lt;br/&gt;
				&amp;lt;value&amp;gt;spring-context.xml&amp;lt;/value&amp;gt;&lt;br/&gt;
			&amp;lt;/list&amp;gt;&lt;br/&gt;
		&amp;lt;/constructor-arg&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;br/&gt;
&amp;lt;/beans&amp;gt;&lt;/p&gt;

&lt;p&gt;The spring-context.xml&apos;s fragment :&lt;br/&gt;
  &amp;lt;bean&lt;br/&gt;
      name=&quot;iadd&quot;&lt;br/&gt;
      class=&quot;com.abcom.iadms.service.iadd.Iadd&quot;&lt;br/&gt;
      init-method=&quot;start&quot;&lt;br/&gt;
      destroy-method=&quot;stop&quot;&lt;br/&gt;
  &amp;gt;&lt;/p&gt;</description>
            <key id="11774">SPR-1055</key>
            <summary>The ContextLoader cann&apos;t close the parent context.</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://jira.spring.io/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="xuliang_net">Xu Liang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Jun 2005 14:14:30 +0000</created>
                <updated>Wed, 22 Jun 2005 21:43:11 +0000</updated>
                            <resolved>Wed, 22 Jun 2005 21:43:11 +0000</resolved>
                                    <version>1.1.4</version>
                    <version>1.1.5</version>
                                    <fixVersion>1.2 RC2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13580" author="xuliang_net" created="Fri, 17 Jun 2005 14:17:03 +0000"  >&lt;p&gt;The last log :&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2005-06-18 10:48:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO &amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; (DefaultListableBeanFactory:536) - Destroying singletons in factory &lt;/p&gt;
{org.springframework.beans.factory.support.DefaultListableBeanFactory defining beans [iadms-context]; root of BeanFactory hierarchy}&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2005-06-18 10:48:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;INFO &amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; (DefaultListableBeanFactory:536) - Destroying singletons in factory {org.springframework.beans.factory.support.DefaultListableBeanFactory defining beans [iadms-context]; root of BeanFactory hierarchy}</comment>
                            <comment id="13613" author="xuliang_net" created="Tue, 21 Jun 2005 20:22:39 +0000"  >&lt;p&gt;After i review the log and spring&apos;s source, i have found the reason.&lt;br/&gt;
When i modify the beanRefContext.xml to &lt;br/&gt;
&amp;lt;beans&amp;gt;&lt;br/&gt;
	&amp;lt;bean id=&quot;iadms-context&quot; &lt;br/&gt;
		class=&quot;org.springframework.context.support.ClassPathXmlApplicationContext&quot;&lt;br/&gt;
		destroy-method=&quot;close&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;constructor-arg&amp;gt;&lt;br/&gt;
			&amp;lt;list&amp;gt;&lt;br/&gt;
				&amp;lt;value&amp;gt;iadd-handlerFactory.xml&amp;lt;/value&amp;gt;				&lt;br/&gt;
				&amp;lt;value&amp;gt;spring-persistence.xml&amp;lt;/value&amp;gt;&lt;br/&gt;
				&amp;lt;value&amp;gt;spring-context.xml&amp;lt;/value&amp;gt;&lt;br/&gt;
			&amp;lt;/list&amp;gt;&lt;br/&gt;
		&amp;lt;/constructor-arg&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;br/&gt;
&amp;lt;/beans&amp;gt;&lt;/p&gt;

&lt;p&gt;it&apos;s ok. Now the iadms-context can be closed by tomcat.&lt;/p&gt;

&lt;p&gt;I should rather you add the destroy-method=&quot;close&quot; in the javadoc of SingletonBeanFactoryLocator for someone like me.&lt;/p&gt;</comment>
                            <comment id="13623" author="juergen.hoeller" created="Wed, 22 Jun 2005 21:43:11 +0000"  >&lt;p&gt;Good point. On Spring 1.1.x, destroy-method=&quot;close&quot; should be added.&lt;/p&gt;

&lt;p&gt;FYI, since Spring 1.2 RC2, AbstractApplicationContext implements the DisposableBean interface and will thus automatically receive a close call on shutdown of the bean ref context.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        11 years, 28 weeks ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 22 Jun 2005 21:43:11 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01cdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>