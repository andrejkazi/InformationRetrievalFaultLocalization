<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 05:33:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SOCIALFB-17/SOCIALFB-17.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SOCIALFB-17] Feed deserialization fails by NPE</title>
                <link>https://jira.spring.io/browse/SOCIALFB-17</link>
                <project id="10607" key="SOCIALFB">Spring Social Facebook</project>
                    <description>&lt;p&gt;Deserialization fails by NullPointerException for &lt;a href=&quot;http://www.facebook.com/DeadOfNight?sk=wall&amp;amp;filter=1&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.facebook.com/DeadOfNight?sk=wall&amp;amp;filter=1&lt;/a&gt;. Facebook returns &apos;likes&apos; section without references - &quot;likes&quot;: &lt;/p&gt;
{ &quot;count&quot;: 19 }
&lt;p&gt;. Feed is attached in case it will disappear. Thanks in advance for looking into.&lt;/p&gt;

&lt;p&gt;&amp;lt;Error deserializing link post&amp;gt;&lt;br/&gt;
org.springframework.social.UncategorizedApiException: Error deserializing link post&lt;br/&gt;
	at org.springframework.social.facebook.api.impl.FeedTemplate.deserializePost(FeedTemplate.java:276)&lt;br/&gt;
	at org.springframework.social.facebook.api.impl.FeedTemplate.deserializeList(FeedTemplate.java:260)&lt;br/&gt;
	at org.springframework.social.facebook.api.impl.FeedTemplate.getFeed(FeedTemplate.java:71)&lt;br/&gt;
	at FacebookController.wall(FacebookController.java:110)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)&lt;br/&gt;
	at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)&lt;br/&gt;
	at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:863)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:792)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:851)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:756)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)&lt;br/&gt;
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)&lt;br/&gt;
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:680)&lt;br/&gt;
Caused by: org.codehaus.jackson.map.JsonMappingException: (was java.lang.NullPointerException) (through reference chain: org.springframework.social.facebook.api.LinkPost&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;likes&amp;quot;&amp;#93;&lt;/span&gt;)&lt;br/&gt;
	at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:218)&lt;br/&gt;
	at org.codehaus.jackson.map.JsonMappingException.wrapWithPath(JsonMappingException.java:183)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.BeanDeserializer.wrapAndThrow(BeanDeserializer.java:856)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:396)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:613)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:472)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:368)&lt;br/&gt;
	at org.codehaus.jackson.map.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:77)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeWithType(BeanDeserializer.java:423)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.StdDeserializerProvider$WrappedDeserializer.deserialize(StdDeserializerProvider.java:460)&lt;br/&gt;
	at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2372)&lt;br/&gt;
	at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1727)&lt;br/&gt;
	at org.springframework.social.facebook.api.impl.FeedTemplate.deserializePost(FeedTemplate.java:274)&lt;br/&gt;
	... 33 more&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.codehaus.jackson.node.TreeTraversingParser.&amp;lt;init&amp;gt;(TreeTraversingParser.java:72)&lt;br/&gt;
	at org.codehaus.jackson.map.ObjectMapper.treeAsTokens(ObjectMapper.java:1445)&lt;br/&gt;
	at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1743)&lt;br/&gt;
	at org.springframework.social.facebook.api.impl.json.ReferenceListDeserializer.deserialize(ReferenceListDeserializer.java:39)&lt;br/&gt;
	at org.springframework.social.facebook.api.impl.json.ReferenceListDeserializer.deserialize(ReferenceListDeserializer.java:30)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:230)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.SettableBeanProperty$FieldProperty.deserializeAndSet(SettableBeanProperty.java:477)&lt;br/&gt;
	at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:394)&lt;br/&gt;
	... 42 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="38986">SOCIALFB-17</key>
            <summary>Feed deserialization fails by NPE</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="habuma">Craig Walls</assignee>
                                    <reporter username="edudar">Eduard Dudar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jul 2011 05:16:03 +0000</created>
                <updated>Mon, 30 Jan 2012 06:47:22 +0000</updated>
                            <resolved>Fri, 29 Jul 2011 13:52:01 +0000</resolved>
                                    <version>1.0.0.RC2</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="68858" author="edudar" created="Fri, 29 Jul 2011 05:32:53 +0000"  >&lt;p&gt;This might be a Facebook problem however they don&apos;t say whether &quot;data&quot; element will always be there or not: &quot;Structure containing a data object and the number of total likes, with data containing an array of objects, each with the name and Facebook id of the user who liked the post&quot;. Anyway we may feel better shielded from such cases.&lt;/p&gt;</comment>
                            <comment id="68861" author="habuma" created="Fri, 29 Jul 2011 06:28:08 +0000"  >&lt;p&gt;That&apos;s a nice curveball thrown by Facebook. Notice all of the other posts have likes that are a a count and an array of references to those who liked it. But in that one case there is no list. Also, notice in some of the other posts there is both a count and a list, but the count doesn&apos;t match the list. Very odd of Facebook to return such data.&lt;/p&gt;

&lt;p&gt;Honestly, I can&apos;t say why FB gives that response. I have asked on the FB forums, though: &lt;a href=&quot;http://forum.developers.facebook.net/viewtopic.php?pid=364505&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://forum.developers.facebook.net/viewtopic.php?pid=364505&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the meantime, I&apos;ll look into fixing it so that at least you won&apos;t get the deserialization error. &lt;/p&gt;</comment>
                            <comment id="68863" author="habuma" created="Fri, 29 Jul 2011 06:33:57 +0000"  >&lt;p&gt;FYI, if you search in Facebook&apos;s Bug Tracker, you&apos;ll find that there are several open bugs related to incorrect like counts. A few of them sound similar to what we&apos;re seeing here. &lt;/p&gt;</comment>
                            <comment id="68867" author="edudar" created="Fri, 29 Jul 2011 07:54:18 +0000"  >&lt;p&gt;Thanks for watching into this, Craig! Really appreciate your work &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="68881" author="habuma" created="Fri, 29 Jul 2011 13:52:01 +0000"  >&lt;p&gt;On the surface, this would be a simple matter of preventing the NPE when the &quot;data&quot; object isn&apos;t present (perhaps returning an empty list of Reference). But that wouldn&apos;t be the right thing to do.&lt;/p&gt;

&lt;p&gt;After further research into the matter, I now know that: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the &quot;count&quot; value can be trusted to be correct.&lt;/li&gt;
	&lt;li&gt;the &quot;data&quot; list of references under &quot;likes&quot; cannot be trusted to be complete.&lt;/li&gt;
	&lt;li&gt;if you request the &quot;likes&quot; connection for an object, the list returned can be trusted to be complete.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I still do not know why the list of users within the &quot;likes&quot; field is not complete and am eagerly awaiting response from someone at Facebook who can shed some light on it. My guess (and it is just a guess) is that the users listed under the &quot;likes&quot; field are just those users who have recently liked the object (where &quot;recently&quot; is unclearly defined). But again, that is just a guess--it is clearly some subset of the full list of users who have liked the object.&lt;/p&gt;

&lt;p&gt;Since that list cannot be trusted to be complete, I&apos;ve removed it from the Post class and have replaced it with a likeCount property reflecting the count of users who have liked the Post. If you need to get the complete list of users who have liked the object, that is available via LikeOperations.getLikes(objectId). If we ever receive any definition of what the sublist of users is, I might consider adding it back to the Post object with a property appropriately named to indicate its meaning (e.g., recentlyLiked).&lt;/p&gt;

&lt;p&gt;In a related change, LikeOperations previous had 2 other getLikes() methods that returned List&amp;lt;UserLike&amp;gt; for a given user. To avoid a method naming conflict and because I discovered that those methods really return Page data, I renamed them to getPagesLiked() and replaced all uses of List&amp;lt;UserLike&amp;gt; with List&amp;lt;Page&amp;gt; to give more complete data.&lt;/p&gt;</comment>
                            <comment id="69287" author="edudar" created="Fri, 12 Aug 2011 15:55:42 +0000"  >&lt;p&gt;Wondring what will be a fix version for this change. Will it fit into 1.0.0 release? Thanks.&lt;/p&gt;</comment>
                            <comment id="69409" author="habuma" created="Wed, 17 Aug 2011 06:41:11 +0000"  >&lt;p&gt;This change will certainly be in the next version we release. If we decide to release a 1.0.0.RC3 release, then it will be in there. Otherwise, it will be in the 1.0.0 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="18522" name="fb_feed_deadofnight" size="27858" author="edudar" created="Fri, 29 Jul 2011 05:16:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Jul 2011 06:28:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3810</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02wj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16980</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15978</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>