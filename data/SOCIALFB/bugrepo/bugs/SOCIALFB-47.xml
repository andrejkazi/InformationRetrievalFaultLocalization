<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 05:38:27 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SOCIALFB-47/SOCIALFB-47.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SOCIALFB-47] Frequent unclassified org.springframework.web.client.HttpClientErrorException: 400 OK     </title>
                <link>https://jira.spring.io/browse/SOCIALFB-47</link>
                <project id="10607" key="SOCIALFB">Spring Social Facebook</project>
                    <description>&lt;p&gt;Not sure why these are occurring as they don&apos;t seem to be categorized, but they seem to be occurring somewhat frequently:&lt;/p&gt;

&lt;p&gt;/signin/facebook&lt;br/&gt;
org.springframework.web.client.HttpClientErrorException: 400 OK&lt;br/&gt;
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:75)&lt;br/&gt;
	at org.springframework.web.client.RestTemplate.handleResponseError(RestTemplate.java:486)&lt;br/&gt;
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:443)&lt;br/&gt;
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:401)&lt;br/&gt;
	at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:279)&lt;br/&gt;
	at org.springframework.social.facebook.connect.FacebookOAuth2Template.postForAccessGrant(FacebookOAuth2Template.java:57)&lt;br/&gt;
	at org.springframework.social.oauth2.OAuth2Template.exchangeForAccess(OAuth2Template.java:104)&lt;br/&gt;
	at org.springframework.social.connect.web.ConnectSupport.completeConnection(ConnectSupport.java:124)&lt;br/&gt;
	at org.springframework.social.connect.web.ProviderSignInController.oauth2Callback(ProviderSignInController.java:161)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:43)&lt;br/&gt;
	at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)&lt;br/&gt;
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)&lt;br/&gt;
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)&lt;br/&gt;
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:629)&lt;br/&gt;
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:590)&lt;br/&gt;
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)&lt;br/&gt;
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:874)&lt;br/&gt;
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:779)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)&lt;br/&gt;
	at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)&lt;br/&gt;
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)&lt;br/&gt;
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)&lt;br/&gt;
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at javax.servlet.FilterChain$doFilter.call(Unknown Source)&lt;br/&gt;
	at groovyx.gaelyk.routes.RoutesFilter.doFilter(RoutesFilter.groovy:155)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.codeconsole.web.spring.LastRequestSavingFilter.doFilter(LastRequestSavingFilter.java:22)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.sitemesh.webapp.contentfilter.ContentBufferingFilter.bufferAndPostProcess(ContentBufferingFilter.java:169)&lt;br/&gt;
	at org.sitemesh.webapp.contentfilter.ContentBufferingFilter.doFilter(ContentBufferingFilter.java:126)&lt;br/&gt;
	at org.sitemesh.config.ConfigurableSiteMeshFilter.doFilter(ConfigurableSiteMeshFilter.java:163)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)&lt;br/&gt;
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:312)&lt;br/&gt;
	at org.springframework.security.web.authentication.switchuser.SwitchUserFilter.doFilter(SwitchUserFilter.java:181)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)&lt;br/&gt;
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:174)&lt;br/&gt;
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)&lt;br/&gt;
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;br/&gt;
	at org.codeconsole.web.spring.PropertiesRequestExposingFilter.doFilter(PropertiesRequestExposingFilter.java:27)&lt;br/&gt;
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="41031">SOCIALFB-47</key>
            <summary>Frequent unclassified org.springframework.web.client.HttpClientErrorException: 400 OK     </summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://jira.spring.io/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="habuma">Craig Walls</assignee>
                                    <reporter username="sdmurphy">Scott Murphy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2011 13:22:05 +0000</created>
                <updated>Mon, 27 Feb 2012 09:23:46 +0000</updated>
                            <resolved>Mon, 27 Feb 2012 09:22:33 +0000</resolved>
                                    <version>1.0.0.RELEASE</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="73172" author="habuma" created="Mon, 28 Nov 2011 13:39:25 +0000"  >&lt;p&gt;Can you give more context here? I can tell from the stack trace that this happens during signin with Facebook upon handling the callback and while exchanging the code for an access token. I frequently run through this portion of the code and do not encounter the HTTP 400 you are seeing. So I&apos;m wondering what other information you can provide that might explain the cause of this?&lt;/p&gt;

&lt;p&gt;Also, you might try running the Spring Social Quickstart example and see if the same thing happens for you in that app. Spring Social Quickstart&apos;s primary function is to do a signin with Facebook, so if it this is indeed a bug in Spring Social, the quickstart sample should break as well.&lt;/p&gt;</comment>
                            <comment id="73186" author="sdmurphy" created="Mon, 28 Nov 2011 16:38:15 +0000"  >&lt;p&gt;This is for signing in.  It is an app on App Engine. It works most of the time, however I see these exceptions in the logs periodically.  I was assuming this is some sort of uncategorized exception that is occurring under certain conditions.&lt;/p&gt;</comment>
                            <comment id="73489" author="habuma" created="Tue, 6 Dec 2011 10:14:33 +0000"  >&lt;p&gt;It&apos;s unclear to me what might be going on here. I&apos;ve deployed the quickstart sample to appengine (&lt;a href=&quot;http://socialshowcase.appspot.com&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://socialshowcase.appspot.com&lt;/a&gt;) and signed in multiple times (20 or more) with no incident or error in the logs.&lt;/p&gt;

&lt;p&gt;Since it works most of the time (or all of the time in my tests), it seems to not be a bug in Spring Social (although I&apos;m not completely writing it off just yet). Perhaps it&apos;s a quirk in Facebook&apos;s endpoints. It is curious to me that the response is &quot;400 OK&quot;. I&apos;d expect &quot;200 OK&quot; or &quot;400 Bad Request&quot;, but not &quot;400 OK&quot;.&lt;/p&gt;

&lt;p&gt;Is there any other context you can give me? How often does it happen? What does your config look like? &lt;/p&gt;</comment>
                            <comment id="73741" author="habuma" created="Tue, 13 Dec 2011 06:41:41 +0000"  >&lt;p&gt;Pending further details, I&apos;m closing this issue as &quot;Cannot Reproduce&quot;. I&apos;ve attempted to reproduce it, both in a conventional deployment as well as deploying it to GAE, and it works fine in both cases.&lt;/p&gt;</comment>
                            <comment id="73747" author="sdmurphy" created="Tue, 13 Dec 2011 11:44:48 +0000"  >&lt;p&gt;Sorry, but it does happen to me at least once a day.  99% of the rest of the time it does not occur.  It is not something that you can just replicate.  I think addressing this ticket would be properly wrapping the exception rather than letting it propagate to the top and potentially providing more information in the exception message.&lt;/p&gt;</comment>
                            <comment id="73748" author="sdmurphy" created="Tue, 13 Dec 2011 11:46:45 +0000"  >&lt;p&gt;In the last DAY, this exact exception has occurred 9 times. I highly doubt there is something wrong with my config because why would it work 99% of the time?&lt;/p&gt;

&lt;p&gt;&#8249; Prev Page 1-9 Next Page &#8250; (Top: 1:05:34 ago)&lt;br/&gt;
Last record searched: 12-11 07:53PM 59.863.&lt;br/&gt;
2011-12-13 10:39:35.071 /signin/facebook?code=AQAKmm7jsUYgonzRdRb0ONTqmHXoMKDtQtNISkRv90W6aQvK3cXklBiPIogDWgDOIXrgWSJVW8Vt-rmbz39OHGURVTsX1Jz_iAzygvva50W2-yVS6wopt53uo7eZNdmo_A2Bdia0zH0_67HxywHi6KV6fEMZMkcH5jDmIpE8hiL38fs7yzdfvjMAucnTKIpZoY 500 531ms 0kb Mozilla/5.0 (Windows NT 6.1; rv:7.0) Gecko/20100101 Firefox/7.0&lt;br/&gt;
C 2011-12-13 10:39:35.069 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-13 08:27:16.405 /signin/facebook?code=AQDaSaGPc55jd9ZL9lxQb6mdrVNxhb2bMkn5dsI-yKlIUVMV486gg9-JdgcFaaAnf1ukYxFpBN-nA5Q0Q73oIoWg9HK1LiMobCOZBgiWQxMX66QJnTR293h8KJGS6ljdSF-DneVM_uB1nz94yr0v3Upq6CWBQzSQhoOi7z2WVFHXJrq3DqdJYu3KYXwyBgcDG8 500 526ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2&lt;br/&gt;
C 2011-12-13 08:27:16.403 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-13 05:59:59.095 /signin/facebook?code=AQCruo1d1YBRX7PvP_kgJ_Osnp91HIWsclAU0FqvTWKmP83rmdpqX4nPps2OhBUzX8zCYdPg37wMQewR3aNHBiP7VP1cIgLem1JEpjjCKVqzZHQIGe_6py52RLoQlvJJpfcKOoasqnvIUHvbomPiUJ3HGJ5Tost2BbV2Fmm_G3hVduXtMp3XQ7G4ZfXjXPZKto 500 425ms 0kb Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.2)&lt;br/&gt;
C 2011-12-13 05:59:59.093 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-12 21:25:29.819 /signin/facebook?code=AQC8UP0WfuvvYUp-eRhLjB6iJESFhY8uUGA-ZypwEtw1J1PyZlp3XV9jhA_psJTkD8xnOZiv7RMZHjMuPOp8dH8FDfOShYC9X1UI-ju85QgGlo6RZBimnQzCL1d9MXmaUNk7TxQXhehe0AGqZfrd1k_bMAZ0shF0n2vSmHv3_m63daoQHaLDpWyvpXTB1yPkM8c 500 617ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2&lt;br/&gt;
C 2011-12-12 21:25:29.817 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-12 16:30:00.949 /signin/facebook?code=AQDC1g1VSHUZlenjLAZb5p0rxGubV-N8lIvJSd-eFTVfFg6wP_xKQ3xQUF4MwwohVRWHM4SUX_avOGCjLpL5yGrjOu5aHHvNHvSeFLK8KJSoZzVkMmmcYyU4JOP23p6wOHjhh5SnVkPp1MZchVE1-quPhHB2gxyy_CRd4tuI9ylkY9J4nc2kyutDwIF_ClWEHI 500 402ms 0kb Mozilla/5.0 (Windows NT 6.0; rv:8.0) Gecko/20100101 Firefox/8.0&lt;br/&gt;
C 2011-12-12 16:30:00.948 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-12 16:00:16.382 /signin/facebook?code=AQDdrj5aZ9Zq9I-xMda29UZn0ogTGHPM-XGBr_27EyhgcsFpNUB-chbgs-uXvQ7r_HULi_8KxLGx_Tp6bOSipM9q1IJH_ZFb7VwNRfWqCzr1BmwMHosvA3pWGelA6Wdmg7ak1fVsEiSAfbpsoowWWYv1J8z5Moa-E5FAv8aoOpGZkHznLoulg3_xKqhaC6EBw 500 1004ms 0kb Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.1 Safari/535.1&lt;br/&gt;
C 2011-12-12 16:00:16.380 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-12 14:25:57.293 /signin/facebook?code=AQA1SqihP0G18pH2CeeL-hXT-b4iXW4koxaMpGzoXq1CbNS0_xejkDlQ0K6RN3IQ54lDlnYWR6KtOnqKwn6AirQOjVi3KszG5JPWEJtqH-BOguHFyOglE-ZqcHjvHKwl8Ffqa7SIa0HSkA0xhTD_Q1tTfpIhtsBQ3mp6WF3U0XM-iEiahjYTGg3fr4RMdugGj0c 500 783ms 0kb Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; MASN)&lt;br/&gt;
C 2011-12-12 14:25:57.291 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-12 11:21:22.287 /signin/facebook?code=AQC2nhn59wzSBFPmeKtDUdHh537gCxXIC8WcLYlPMZqbcUOcUi6MTltllyZtl8M_aIKSVQSSVMS957Guh_tr8YHWIBNyKiLfMLcvDsgNjqR2ptdKWS1aVePrJzou0ER952cmJJvIDLJHUs6AbejMCvs1DT8v9enEZtZer0TPONkZLH7eJkmh-Y-HDMSZA3K6KE 500 597ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2&lt;br/&gt;
C 2011-12-12 11:21:22.285 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
2011-12-12 11:04:48.499 /signin/facebook?code=AQDgH_Q_60IeKM7q7iX0gQxCCykwA1Y2FfDzAf3-Ke2JOdAsCgntnNQpbKIuyypwF-btbhzPJrJNpJ2KNMyLoswNhkD7bouArxB-db_x1ZrZ_2bNiirFxSM6fBMhkFda9dZv3aDNysoZJIgjsEl-_Fn1ddmCmp_6pOiAV8WtmyqD5QGgxSLUj6RwvMvOg5xPLw 500 1638ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2&lt;br/&gt;
C 2011-12-12 11:04:48.497 Uncaught exception from servlet org.springframework.web.client.HttpClientErrorException: 400 OK at org.springframework.web.client.DefaultResponseErro&lt;br/&gt;
&#8249; Prev Page 1-9 Next Page &#8250; (Bottom: 1 day, 0:40:21 ago)&lt;br/&gt;
Last record searched: 12-11 07:53PM 59.863.&lt;/p&gt;</comment>
                            <comment id="73752" author="sdmurphy" created="Tue, 13 Dec 2011 12:00:14 +0000"  >&lt;p&gt;Sorry for the delayed reply.  I had a sport injury and have been offline waiting for it to heal. I will be more responsive to this ticket in the future.&lt;/p&gt;</comment>
                            <comment id="73753" author="sdmurphy" created="Tue, 13 Dec 2011 12:01:53 +0000"  >&lt;p&gt;For this ticket to be resolved, at a minimum a proper way of handling this via the ProviderSignInController should be specified.  Perhaps the ProviderSignInController should redirect the user BACK to facebook and ask for authentication again.&lt;/p&gt;</comment>
                            <comment id="73834" author="habuma" created="Wed, 14 Dec 2011 11:36:33 +0000"  >&lt;p&gt;FWIW, I&apos;ve been able to recreate the *symptoms&quot; of this reliably with the Spring Social Showcase sample. Specifically, what I do is manually hit the callback URL with a verification code that is either (1) completely invalid/fabricated or (2) a verification code that is good, but was obtained with a different callback URL.&lt;/p&gt;

&lt;p&gt;In short, I know of two ways to make this fail: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The verification code is incorrect/incomplete&lt;/li&gt;
	&lt;li&gt;The callback URL used for authorization is different than the one used when exchanging the code for an access token&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m struggling to figure out how either of these could happen under normal conditions, but it appears that something like this is happening. &lt;/p&gt;

&lt;p&gt;Nevertheless, now that I can recreate the symptoms (not necessarily the core problem), I have something to work with and will add code to handle this case more gracefully. Note that I&apos;m hesitant to send the user directly back to FB for authorization again, though. If the user has already authorized the application, then FB will immediately redirect back to the callback URL and no authorization page would be shown--if the problem persists, then it could end up in an endless redirection loop. I&apos;m thinking of simply sending the user to the connection page where a message can be displayed asking them to try again.&lt;/p&gt;

&lt;p&gt;I&apos;m also thinking of adding some logging to capture what the body of the error is for future debugging purposes.&lt;/p&gt;</comment>
                            <comment id="73851" author="sdmurphy" created="Wed, 14 Dec 2011 15:04:23 +0000"  >&lt;p&gt;If you add some logging let me know. I can take an update, deploy live, and give you back what is going on.&lt;/p&gt;</comment>
                            <comment id="73854" author="habuma" created="Wed, 14 Dec 2011 15:39:14 +0000"  >&lt;p&gt;Will do. I&apos;ve already got some code that I&apos;m tinkering with locally that handles the errors more gracefully. For ConnectController, that means taking the user back to the provider connection status page; for ProviderSignInController, it means taking the user back to the sign-in page. In both cases, I&apos;m adding a little bit of logging, but honestly I am pretty sure that I can predict what the logging will tell me, so I&apos;m not sure if it will do much good (but then again, it may surprise me).&lt;/p&gt;

&lt;p&gt;FWIW, here&apos;s what the logs look like for me as I test this:&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;WARN : org.springframework.social.connect.web.ConnectSupport - HttpClientErrorException while completing connection: 400 Bad Request&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;WARN : org.springframework.social.connect.web.ConnectSupport -       Response body: {&quot;error&quot;:{&quot;message&quot;:&quot;Error validating verification code.&quot;,&quot;type&quot;:&quot;OAuthException&quot;}}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;I&apos;ve just pushed a new snapshot build (of spring-social-core) with this initial work. I intend to spend more time on it tonight, but please feel free to try it out and let me know what you see.&lt;/p&gt;
</comment>
                            <comment id="74023" author="habuma" created="Mon, 19 Dec 2011 10:56:04 +0000"  >&lt;p&gt;I&apos;ve created &lt;a href=&quot;https://jira.spring.io/browse/SOCIAL-280&quot; title=&quot;Handle errors in ConnectController/ProviderSignInController more gracefully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOCIAL-280&quot;&gt;&lt;del&gt;SOCIAL-280&lt;/del&gt;&lt;/a&gt; to capture the real problem of handling errors more gracefully during the connection process, rather than try to manage 4 separate issues that ultimately are describing the same core problem--a problem that exists within Spring Social&apos;s core servlets and isn&apos;t technically a Facebook or Twitter problem.&lt;/p&gt;

&lt;p&gt;Further work on this issue will be handled under &lt;a href=&quot;https://jira.spring.io/browse/SOCIAL-280&quot; title=&quot;Handle errors in ConnectController/ProviderSignInController more gracefully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOCIAL-280&quot;&gt;&lt;del&gt;SOCIAL-280&lt;/del&gt;&lt;/a&gt;, thus I&apos;m closing this issue.&lt;/p&gt;</comment>
                            <comment id="75254" author="habuma" created="Wed, 1 Feb 2012 08:08:11 +0000"  >&lt;p&gt;Reopening issue to detach from 1.1.0.M1 (since this was actually a Spring Social Core problem fixed in a separate release).&lt;/p&gt;</comment>
                            <comment id="76280" author="habuma" created="Mon, 27 Feb 2012 09:22:33 +0000"  >&lt;p&gt;Re-closing this issue (forgot to re-close it after detaching it from 1.1.0.M1). For original resolution, see comments from Dec 19, 2011.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 28 Nov 2011 13:39:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28359</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02ksn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15078</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14372</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>