<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 01:38:19 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/LDAP-271/LDAP-271.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[LDAP-271] ODM: nullable attributes are not removed from LDAP if OdmManagerImpl#update(Object) is used</title>
                <link>https://jira.spring.io/browse/LDAP-271</link>
                <project id="10071" key="LDAP">Spring LDAP</project>
                    <description>&lt;p&gt;Hi. I&apos;ve faced with a problem using ODM.&lt;/p&gt;

&lt;p&gt;Preconditions:&lt;br/&gt;
 a. There is an attributetype in ldap schema - e.g. &apos;someAttribute&apos;.&lt;br/&gt;
 b. The type is mentioned in the MAY list of an objectClass  - e.g. &apos;someClass&apos;.&lt;br/&gt;
 c. There is an ODM entry class mapped to the objectClass. &lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
 1. Create an entry and fill it in including a value for &apos;someAttribute&apos;.&lt;br/&gt;
 2. Save it - odmManager.create(entry);&lt;br/&gt;
    Result: the entry is in DIT, &apos;someAttribute&apos; exists and filled.&lt;br/&gt;
 3. Update the entry: set null as a new value for &apos;someAttribute&apos; property.&lt;br/&gt;
 4. Save it - odmManager.update(entry);&lt;/p&gt;

&lt;p&gt;Actual Result: the entry is in DIT, &apos;someAttribute&apos; exists and its value the same as in p.2.&lt;/p&gt;

&lt;p&gt;Expected Result: the entry is in DIT but without &apos;someAttribute&apos;.&lt;/p&gt;

&lt;p&gt;Note:&lt;br/&gt;
 I&apos;ve looked through OdmManagerImpl source code and found out that before actual update is executed the method OdmManagerImpl#mapToContext(Object,DirContextOperations) is invoked. The method converts Java representation of an Ldap Entry. During the conversion only non-nullable properties of an entry are considered, null field values are ignored at all:&lt;br/&gt;
                    if (!attributeInfo.isList()) {&lt;br/&gt;
                        // Single valued - get the value of the field&lt;br/&gt;
                        Object fieldValue = field.get(entry);&lt;br/&gt;
                        // Ignore null field values&lt;br/&gt;
                        if (fieldValue != null) &lt;/p&gt;
{
                            // Convert the field value to the required type and write it into the JNDI context
                            context.setAttributeValue(attributeInfo.getName().toString(), converterManager.convert(fieldValue,
                                    attributeInfo.getSyntax(), targetClass));
                        }
&lt;p&gt;                    } &lt;/p&gt;

&lt;p&gt;Many Thanks,&lt;br/&gt;
Vadzim&lt;/p&gt;</description>
                <environment>Ldap Server: OpenLDAP 2.4</environment>
        <key id="51239">LDAP-271</key>
            <summary>ODM: nullable attributes are not removed from LDAP if OdmManagerImpl#update(Object) is used</summary>
                <type id="7" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Defect</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="marthursson">Mattias Hellborg Arthursson</assignee>
                                    <reporter username="vadzim_kuzmich">Vadzim Kuzmich</reporter>
                        <labels>
                            <label>ldap</label>
                    </labels>
                <created>Tue, 8 Oct 2013 03:11:21 +0000</created>
                <updated>Fri, 5 Feb 2016 21:19:25 +0000</updated>
                            <resolved>Mon, 21 Oct 2013 23:56:33 +0000</resolved>
                                    <version>1.3.2</version>
                                    <fixVersion>2.0.0.M1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                            <timeestimate seconds="0">0d</timeestimate>
                            <timespent seconds="3660">1h 1m</timespent>
                                <comments>
                            <comment id="94283" author="marthursson" created="Tue, 8 Oct 2013 03:41:39 +0000"  >&lt;p&gt;This looks like something we should look into for the 2.0 release.&lt;/p&gt;</comment>
                            <comment id="123724" author="rwinch" created="Fri, 5 Feb 2016 21:19:25 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-ldap/issues/309&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-ldap/issues/309&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 8 Oct 2013 03:41:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37729</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06mlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>