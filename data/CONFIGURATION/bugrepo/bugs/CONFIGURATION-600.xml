<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:43:32 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-600/CONFIGURATION-600.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-600] Loading xml configuration file as a stream does not work with multi configurations</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-600</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;When using the commons configuration inside a WAR loading a XML file works fine when done like this:&lt;/p&gt;

&lt;p&gt;InputStream is = this.getClass().getClassLoader().getResourceAsStream(&quot;/conf/main.xml&quot;);&lt;br/&gt;
builder.load(is);&lt;/p&gt;

&lt;p&gt;The problem is when the main.xml reference other xml files:&lt;br/&gt;
configuration&amp;gt;&lt;br/&gt;
    &amp;lt;xml fileName=&quot;child1.xml&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;If the structure of the war is:&lt;br/&gt;
/&lt;br/&gt;
/classes&lt;br/&gt;
/conf/child1.xml&lt;br/&gt;
/conf/main.xml&lt;/p&gt;

&lt;p&gt;There seems to be no way to pick up child1.xml from main.xml when loading main.xml as a stream.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12827663">CONFIGURATION-600</key>
            <summary>Loading xml configuration file as a stream does not work with multi configurations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johhen">John Henriksson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2015 13:49:05 +0000</created>
                <updated>Thu, 24 Mar 2016 20:20:45 +0000</updated>
                            <resolved>Mon, 25 May 2015 18:05:16 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14531228" author="oliver.heger@t-online.de" created="Wed, 6 May 2015 19:18:26 +0000"  >&lt;p&gt;I assume you are using &lt;tt&gt;DefaultConfigurationBuilder&lt;/tt&gt; for loading the file, do you? This class has a method for setting a base path. The base path is taken into account when resolving child configuration files.&lt;/p&gt;

&lt;p&gt;You can set the base path to a URL (in string form) obtained via this.getClass().getClassLoader().getResource(). I am not sure whether this works with URLs pointing to elements in a jar file though, but you should give it a try.&lt;/p&gt;</comment>
                            <comment id="14542535" author="oliver.heger@t-online.de" created="Wed, 13 May 2015 19:37:56 +0000"  >&lt;p&gt;Any updates here? Were you able to solve the problem?&lt;/p&gt;</comment>
                            <comment id="14543371" author="johhen" created="Thu, 14 May 2015 08:20:46 +0000"  >&lt;p&gt;Yes, I am using the DefaultConfigurationBuilder but I could not get it to work even with setting the base path. In the end I externalised the configuration files (outside the war) and loaded the location of the configuration files from a java system property that I set starting up the application.&lt;/p&gt;</comment>
                            <comment id="14546888" author="oliver.heger@t-online.de" created="Sat, 16 May 2015 18:40:17 +0000"  >&lt;p&gt;Thanks for your feedback.&lt;/p&gt;

&lt;p&gt;I think your use case is valid and should be supported. I will have a look, but may need some time. I will add my findings to this ticket.&lt;/p&gt;</comment>
                            <comment id="14557837" author="oliver.heger@t-online.de" created="Sun, 24 May 2015 20:31:31 +0000"  >&lt;p&gt;Finally I managed to look into this. I tried to simulate your use case and created a jar with a structure similar to the one you described:&lt;br/&gt;
/conf/jar-main.xml&lt;br/&gt;
/conf/jar-test.properties&lt;br/&gt;
/conf/jar-test.properties.xml&lt;br/&gt;
/conf/jar-test.xml&lt;/p&gt;

&lt;p&gt;The first file is the combined configuration definition file with the following content:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;properties fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;jar-test.properties&quot;&lt;/span&gt; config-name=&lt;span class=&quot;code-quote&quot;&gt;&quot;props&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;properties fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;jar-test.properties.xml&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xml fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;jar-test.xml&quot;&lt;/span&gt; config-name=&lt;span class=&quot;code-quote&quot;&gt;&quot;xml&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This file - and all the referenced configuration sources - could be loaded successfully with the following code fragement (this uses Commons Configuration 2.0alpha; &lt;tt&gt;CombinedConfigurationBuilder&lt;/tt&gt; corresponds to &lt;tt&gt;DefaultConfigurationBuilder&lt;/tt&gt; in 1.x):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testReadFromJar() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; MalformedURLException, ConfigurationException {
    URL url = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(&lt;span class=&quot;code-quote&quot;&gt;&quot;jar:file:src/test/resources/config.jar!/conf/jar-main.xml&quot;&lt;/span&gt;);
    builder.configure(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parameters().fileBased().setURL(url));
    CombinedConfiguration configuration = builder.getConfiguration();
    assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Not loaded&quot;&lt;/span&gt;, configuration.getBoolean(&lt;span class=&quot;code-quote&quot;&gt;&quot;configuration.loaded&quot;&lt;/span&gt;));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So rather than loading the file from a stream, I used the URL directly. (Here it is hard-coded, but of course, it can be obtained via getClassLoader().getResource().) Then relative paths referenced from the main configuration file are automatically resolved; there is no need to set a base path. When reading the file from a stream, however, there is no absolute path which could be used for resolving files.&lt;/p&gt;

&lt;p&gt;Maybe this use case can be explicitly mentioned in the documentation. But otherwise, I do not think that this is a bug or requires a fix in the code base.&lt;/p&gt;</comment>
                            <comment id="14558422" author="oliver.heger@t-online.de" created="Mon, 25 May 2015 18:05:16 +0000"  >&lt;p&gt;An example of loading a combined configuration from a jar has been added to the user&apos;s guide.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 May 2015 19:18:26 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 27 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ed27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>