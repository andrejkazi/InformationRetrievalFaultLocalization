<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:47:01 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-216/CONFIGURATION-216.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-216] Inconsistent way to locate filename when creating configuration</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-216</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;There is a different behaviour locating the configuration file in classpath depending on the way it is set in the configuration class.&lt;br/&gt;
For example assuming &quot;conf/conf1.properties&quot; exists in classpath:&lt;/p&gt;

&lt;p&gt;PropertiesConfiguration pc = new PropertiesConfiguration(&quot;conf/conf1.properties&quot;);&lt;br/&gt;
gives org.apache.commons.configuration.ConfigurationException: Cannot locate configuration source conf1.properties&lt;/p&gt;

&lt;p&gt;while&lt;/p&gt;

&lt;p&gt;PropertiesConfiguration pc = new PropertiesConfiguration();&lt;br/&gt;
pc.setFileName(&quot;conf/conf1.properties&quot;);&lt;br/&gt;
pc.load();&lt;/p&gt;

&lt;p&gt;properly locate file in classpath and loads it.&lt;/p&gt;</description>
                <environment>&lt;p&gt;commons-configuration-1.3-dev&lt;/p&gt;</environment>
        <key id="12344478">CONFIGURATION-216</key>
            <summary>Inconsistent way to locate filename when creating configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oliver.heger@t-online.de">Oliver Heger</assignee>
                                    <reporter username="garu">Gabriele Garuglieri</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jun 2006 12:40:17 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:43 +0000</updated>
                            <resolved>Sat, 26 Aug 2006 16:41:31 +0000</resolved>
                                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12417180" author="oliver.heger@t-online.de" created="Thu, 22 Jun 2006 03:37:33 +0000"  >&lt;p&gt;Should be fixed now in subversion, revision 416102. Please double check.&lt;/p&gt;</comment>
                            <comment id="12417252" author="garu" created="Thu, 22 Jun 2006 13:30:09 +0000"  >&lt;p&gt;Hi Oliver,&lt;br/&gt;
taking it just out of the box results in:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase: testInitFromClassPath took 0 sec&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Caused an ERROR&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Cannot locate configuration source config/deep/deeptest.properties&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; org.apache.commons.configuration.ConfigurationException: Cannot locate configuration source config/deep/deeptest.properties&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.commons.configuration.AbstractFileConfiguration.load(AbstractFileConfiguration.java:208)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.commons.configuration.AbstractFileConfiguration.load(AbstractFileConfiguration.java:188)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.commons.configuration.TestFileConfiguration.testInitFromClassPath(TestFileConfiguration.java:489)&lt;br/&gt;
when running tests during build.&lt;/p&gt;

&lt;p&gt;The problem is that in build.xml you copy &quot;config/deep/deeptest.properties&quot; into a further &quot;config&quot; nesting level so changing &lt;br/&gt;
private static final String RESOURCE_NAME = &quot;config/deep/deeptest.properties&quot;;&lt;br/&gt;
into&lt;br/&gt;
private static final String RESOURCE_NAME = &quot;config/config/deep/deeptest.properties&quot;;&lt;br/&gt;
into TestFileConfiguration, makes everything working.&lt;/p&gt;</comment>
                            <comment id="12417354" author="oliver.heger@t-online.de" created="Fri, 23 Jun 2006 02:30:52 +0000"  >&lt;p&gt;You are right! The problem did not occur to me because I use the maven build. And after a maven build ran successfully the ant build is successful, too, because maven copies the files to the right location.&lt;/p&gt;

&lt;p&gt;Well, I changed the copying stuff in build.xml, and now both builds should work. Sorry!&lt;/p&gt;</comment>
                            <comment id="12429724" author="garu" created="Tue, 22 Aug 2006 14:31:48 +0000"  >&lt;p&gt;Hi Oliver,&lt;br/&gt;
i&apos;ve found a condition in which the fix won&apos;t work.&lt;br/&gt;
Given this snippet of code:&lt;br/&gt;
DefaultConfigurationBuilder cf =  new DefaultConfigurationBuilder(&quot;conf/config/deep/testFileFromClasspath.xml&quot;);&lt;br/&gt;
 CombinedConfiguration config = cf.getConfiguration(true);&lt;br/&gt;
 assertNotNull(config.getConfiguration(&quot;propConf&quot;));&lt;/p&gt;

&lt;p&gt;that loads this configuration file:&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
  &amp;lt;properties config-name=&quot;propConf&quot; fileName=&quot;testEqual.properties&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;with &quot;testEqual.properties&quot; located into &quot;/conf&quot; that is in classpath&lt;/p&gt;

&lt;p&gt;will end up trying to load &quot;conf/config/deep/testEqual.properties&quot; which is not found.&lt;/p&gt;

&lt;p&gt;I&apos;ve reworked a bit the code and produced a patch that should correct the problem.&lt;br/&gt;
You migth not agree on the code but at least it should give you the idea of the flaw in the previous implementation.&lt;/p&gt;</comment>
                            <comment id="12429726" author="garu" created="Tue, 22 Aug 2006 14:36:09 +0000"  >&lt;p&gt;Testcase for the error condition and corrective patch&lt;/p&gt;</comment>
                            <comment id="12429730" author="garu" created="Tue, 22 Aug 2006 14:47:40 +0000"  >&lt;p&gt;After fiddling for a while with this bug it looks that, even if i&apos;m the reporter, i miss the authority to reopen it, or simply i could&apos;nt manage to understand how to do it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12429740" author="joehni" created="Tue, 22 Aug 2006 15:15:11 +0000"  >&lt;p&gt;Reopened by request. Since the bug is &quot;only&quot; resolved, you should have been able to do so yourself. But maybe there&apos;s a flaw in the JIRA workflow configuration ...&lt;/p&gt;</comment>
                            <comment id="12429798" author="oliver.heger@t-online.de" created="Tue, 22 Aug 2006 20:33:42 +0000"  >&lt;p&gt;I had a look at your patch. Looks good, and all unit tests are running.&lt;/p&gt;

&lt;p&gt;One change is problematic however: You removed the methods get/setPath() from AbstractFileConfiguration. This is a binary incompatible change, i.e. it would break existing code. So we can&apos;t do this. Is there a special reason why you deleted these methods?&lt;/p&gt;

&lt;p&gt;I am also a bit concerned regarding semantic compatibility. You had to change the testLocations() test case, which means that the behavior of some of the methods has changed. This could also have an impact on existing code. Wouldn&apos;t it be possible to keep the behavior of these methods and only do some additional checks in ConfigurationUtils.locate() ?&lt;/p&gt;

&lt;p&gt;In any case: Many thanks for your effort!&lt;/p&gt;</comment>
                            <comment id="12429954" author="garu" created="Wed, 23 Aug 2006 10:23:57 +0000"  >&lt;p&gt;Hi Oliver,&lt;br/&gt;
you are rigth, removing that methods was an overkill.&lt;br/&gt;
There are simply too many way to set the same things in sligtly different manner and i was confused.&lt;/p&gt;

&lt;p&gt;I restored all the previous semantic with a difference that should not impact existing code other than avoiding an NPE in a particular case.&lt;br/&gt;
The getPath() method now check if getFile() returns null, which may be the case when the config was loaded from a jar in classpath, then, if the config was loaded from a jar in classpath it returns instead the String form of the URL from which it was loaded.&lt;br/&gt;
In this way you are always able to know the config location.&lt;/p&gt;

&lt;p&gt;I added indication in javadoc that if you are referencing files from classpath with relative paths only setFilename() must be used because setPath() tries to expand to an absolute path which may give invalid references for files in classpath.&lt;/p&gt;

&lt;p&gt;I also added some more testcases to check classpath references behaviour.&lt;br/&gt;
I left some logging into the added testcases to show you the new behaviour of getPath(), you can safely remove it if you want.&lt;/p&gt;

&lt;p&gt;Regards,  Gabriele&lt;/p&gt;

&lt;p&gt;PS. I&apos;m developing a JMXConfiguration, based on 1.3, for my own usage in our applications. I&apos;ve a working  prototype that allows to get/set and persist properties. If you are interested i can share the code once i&apos;ve got something stable.&lt;/p&gt;</comment>
                            <comment id="12429955" author="garu" created="Wed, 23 Aug 2006 10:26:10 +0000"  >&lt;p&gt;New version of the patch and expanded resources.jar needed for sone new testcases.&lt;/p&gt;</comment>
                            <comment id="12429958" author="garu" created="Wed, 23 Aug 2006 10:34:08 +0000"  >&lt;p&gt;Perhaps Jira hates me? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
How can i obsolete an attachment like with bugzilla?&lt;/p&gt;</comment>
                            <comment id="12430092" author="oliver.heger@t-online.de" created="Wed, 23 Aug 2006 20:18:16 +0000"  >&lt;p&gt;Patch applied. Many thanks!&lt;/p&gt;

&lt;p&gt;I made the following minor changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changed the visibility of ConfigurationUtils.locateFromClasspath() to package scope; there is no need to make this method part of the public API.&lt;/li&gt;
	&lt;li&gt;Excluded the tests that try to access the jar file. We had some trouble with this jar (see ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-71&quot; title=&quot;[configuration] Fake &amp;quot;resources&amp;quot; dependency kills Maven2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-71&quot;&gt;&lt;del&gt;CONFIGURATION-71&lt;/del&gt;&lt;/a&gt;), which I don&apos;t want to have again.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Regarding JMXConfiguration: That would be really cool. JMX is on our roadmap for future releases.&lt;/p&gt;</comment>
                            <comment id="12430757" author="oliver.heger@t-online.de" created="Sat, 26 Aug 2006 16:41:31 +0000"  >&lt;p&gt;Marking this issue as resolved. Please double check and reopen if you still encounter problems.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12339402" name="216-1.patch" size="13570" author="garu" created="Wed, 23 Aug 2006 10:26:10 +0000"/>
                            <attachment id="12339403" name="resources.jar" size="2864" author="garu" created="Wed, 23 Aug 2006 10:26:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 22 Jun 2006 03:37:33 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33914</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l6db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>