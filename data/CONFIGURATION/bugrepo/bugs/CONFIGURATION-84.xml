<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:08:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-84/CONFIGURATION-84.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-84] [configuration] ConfigurationUtils.copy() does not work for XMLConfigurations with repeated keys</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-84</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Copying an XMLConfiguration using the ConfigurationUtils.copy() method does &lt;br/&gt;
not work if there are repeated keys.  The end result is an XMLConfiguration &lt;br/&gt;
with a majority of its properties missing because only the first property &lt;br/&gt;
value for a repeated key is copied to the configuration.&lt;/p&gt;

&lt;p&gt;This can be repeated by taking the example database tables XML file on the &lt;br/&gt;
Jakarta Commons Configuration webpage, loading the configuration into an XML &lt;br/&gt;
configuration, creating a new XMLConfiguration using the empty constructor, &lt;br/&gt;
copying the first to the second using the ConfigurationUtils.copy() method, &lt;br/&gt;
and then perform the property queries as described on the webpage.  For &lt;br/&gt;
example, calling getProperty() for &apos;tables.table(2).name&apos; will fail on the new &lt;br/&gt;
configuration after the original configuration is copied.&lt;/p&gt;

&lt;p&gt;This copying is the basis of my entire implementation because I want to be &lt;br/&gt;
able to copy an XMLConfiguration without having to go to the operating system &lt;br/&gt;
and reload a copy from disc.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12342379">CONFIGURATION-84</key>
            <summary>[configuration] ConfigurationUtils.copy() does not work for XMLConfigurations with repeated keys</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jamock@mindspring.com">Jeffrey Mock</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jul 2005 03:28:25 +0000</created>
                <updated>Tue, 16 May 2006 12:11:39 +0000</updated>
                            <resolved>Tue, 16 May 2006 12:11:39 +0000</resolved>
                                    <version>1.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12409817" author="oliver.heger@t-online.de" created="Tue, 19 Jul 2005 03:57:24 +0000"  >&lt;p&gt;You are right, the ConfigurationUtils.copy() method does not work correctly with&lt;br/&gt;
hierarchical configurations. I assume that all properties are copied, but the&lt;br/&gt;
hierarchical structure is lost. That&apos;s why getter methods do not return any data&lt;br/&gt;
for keys with indices.&lt;/p&gt;

&lt;p&gt;Unfortunately this issue is not easy to fix. The current copy() implementation&lt;br/&gt;
is quite generic, a copy for hierarchical configurations must be implemented&lt;br/&gt;
differently because the hierarchical tree of properties must be taken into&lt;br/&gt;
account. What makes things even more complicated is the fact that the property&lt;br/&gt;
trees of the source and destination configuration must be correctly merged,&lt;br/&gt;
otherwise the accessor methods would not work as expected. This merge is non&lt;br/&gt;
trivial.&lt;/p&gt;

&lt;p&gt;What I could offer you is a clone() method in HierarchicalConfiguration. Cloning&lt;br/&gt;
is much easier because no merge of the resulting property trees has to be&lt;br/&gt;
performed (the target tree is empty). Would this be useful for you?&lt;/p&gt;

&lt;p&gt;However for XMLConfiguration the clone() method will have the limitation that&lt;br/&gt;
certain information about the original XML document (e.g. comments or processing&lt;br/&gt;
instructions) is lost. This is because an XMLConfiguration instance that was&lt;br/&gt;
loaded from an XML document associates its properties with the corresponding XML&lt;br/&gt;
elements; if they are changed, the document is updated, too. Now if an&lt;br/&gt;
XMLConfiguration object is cloned, the clone must not point to the same document&lt;br/&gt;
to avoid inconsistencies if both objects are changed.&lt;/p&gt;</comment>
                            <comment id="12409818" author="jamock@mindspring.com" created="Tue, 19 Jul 2005 08:41:35 +0000"  >&lt;p&gt;Actually... I had to do exactly what you described.  I had to traverse the &lt;br/&gt;
tree and copy the property values from one configuration to another.  A clone &lt;br/&gt;
method would be beneficial (I was hoping for that as well when I ran into this &lt;br/&gt;
problem) for others who run into this.&lt;/p&gt;

&lt;p&gt;Is there any other way in the Configuration API to create an XMLConfiguration &lt;br/&gt;
from another without reloading from an external source?  I didn&apos;t want to have &lt;br/&gt;
to keep going to the disc to get a new copy of my configuration if I didn&apos;t &lt;br/&gt;
have to.&lt;/p&gt;

&lt;p&gt;My big thing is the documentation needs to be updated to reflect that the &lt;br/&gt;
ConfigurationUtils is not applicable to HierarchicalConfigurations.  If I knew &lt;br/&gt;
this ahead of time, I would have pursued other avenues.&lt;/p&gt;</comment>
                            <comment id="12409819" author="oliver.heger@t-online.de" created="Fri, 22 Jul 2005 02:22:37 +0000"  >&lt;p&gt;I added a clone() method to HierarchicalConfiguration (and to XMLConfiguration&lt;br/&gt;
to deal with the stored XML document) and also updated the javadocs for&lt;br/&gt;
ConfigurationUtils.copy().&lt;/p&gt;

&lt;p&gt;Please let me know if this issue can be closed now.&lt;/p&gt;</comment>
                            <comment id="12409820" author="oliver.heger@t-online.de" created="Mon, 22 Aug 2005 02:16:21 +0000"  >&lt;p&gt;Got no feedback, so closing this now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35772</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 19 Jul 2005 03:57:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tfaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>