<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Sat Dec 03 15:32:43 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-168/CONFIGURATION-168.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-168] [configuration] Messed file on saving an XMLConfiguration</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-168</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;The XMLConfiguration is a configuration based on XML. But when the &lt;br/&gt;
configuration is used to save config properties back into the XML file from &lt;br/&gt;
code, its makes a total mess of the file and doesnt follow basic XML &lt;br/&gt;
conventions. &lt;/p&gt;

&lt;p&gt;If a particular key group already exists, rather than insert new keys there, &lt;br/&gt;
it always just appends new properties to the end of the file. After repeated &lt;br/&gt;
modification, the file becomes an unstructured, unreadable mess. What should &lt;br/&gt;
happen is illustrated below. Starting file:&lt;/p&gt;

&lt;p&gt;&amp;lt;configuration&amp;gt;&lt;br/&gt;
  &amp;lt;a&amp;gt;&lt;br/&gt;
     &amp;lt;key1&amp;gt;value1&amp;lt;/key1&amp;gt;&lt;br/&gt;
  &amp;lt;/a&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;Configuration.addProperty(&quot;a.key2&quot;, &quot;value2&quot;) should result in:&lt;/p&gt;

&lt;p&gt;&amp;lt;configuration&amp;gt;&lt;br/&gt;
  &amp;lt;a&amp;gt;&lt;br/&gt;
     &amp;lt;key1&amp;gt;value1&amp;lt;/key1&amp;gt;&lt;br/&gt;
     &amp;lt;key2&amp;gt;value2&amp;lt;/key2&amp;gt;&lt;br/&gt;
  &amp;lt;/a&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;Because of the way setProperty() works, (remove then add), this behaviour also &lt;br/&gt;
results in the same property being moved, it if is modified. So in the example &lt;br/&gt;
above, modifying &amp;lt;key1&amp;gt; would cause it to be moved to the end of file, leaving &lt;br/&gt;
an empty &amp;lt;a&amp;gt; group at the start. Its just unworkable! &lt;/p&gt;


&lt;p&gt;Also, a seperate but releated issue is that a &quot;pretty-print&quot; output format &lt;br/&gt;
would greatly improve developer and user ease-of-use. Currently, there is no &lt;br/&gt;
indenting, so files that are modified by the XMLConfiguration become very hard &lt;br/&gt;
to read/maintain.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12341753">CONFIGURATION-168</key>
            <summary>[configuration] Messed file on saving an XMLConfiguration</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ben_hutchison@yahoo.com">Ben Hutchison</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Sep 2004 08:27:35 +0000</created>
                <updated>Tue, 10 Apr 2007 14:44:13 +0000</updated>
                            <resolved>Tue, 10 Apr 2007 14:44:13 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>2</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12407647" author="elifarley@yahoo.com" created="Tue, 28 Sep 2004 17:42:59 +0000"  >&lt;p&gt;Here&apos;s an example of what happens when I save my XML configuration:&lt;/p&gt;

&lt;p&gt;this original configuration:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;config&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;slt host=&quot;localhost&quot; port=&quot;2000&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;workmanager maxQueueSize=&quot;10000&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;datasource host=&quot;127.0.0.1&quot; port=&quot;5432&quot; dbName=&quot;testdb&quot; user=&quot;ecc&quot; password=&quot;&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;		&amp;lt;!-- &lt;/p&gt;
{0} = host, {1} = port, {2} = sid --&amp;gt;&lt;br/&gt;
		&amp;lt;driver name=&quot;org.postgresql.Driver&quot; uri=&quot;jdbc:postgresql://{0}
&lt;p&gt;:&lt;/p&gt;
{1}/{2}&quot;/&amp;gt;&lt;br/&gt;
&lt;br/&gt;
	&amp;lt;/datasource&amp;gt;&lt;br/&gt;
&lt;br/&gt;
	&amp;lt;sql&amp;gt;&lt;br/&gt;
		&amp;lt;dataTable&amp;gt;tTempestade&amp;lt;/dataTable&amp;gt;&lt;br/&gt;
		&amp;lt;userQuery&amp;gt;select tag_consulta_atualiza as t from tusuario where cod_chave =&lt;br/&gt;
&apos;&apos;{0}&apos;&apos;&amp;lt;/userQuery&amp;gt;&lt;br/&gt;
	&amp;lt;/sql&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;lt;/config&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
becomes this:&lt;br/&gt;
&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;config&amp;gt;&lt;br/&gt;
&lt;br/&gt;
	&amp;lt;slt host=&quot;localhost&quot; port=&quot;2000&quot;/&amp;gt;&lt;br/&gt;
&lt;br/&gt;
	&amp;lt;workmanager maxQueueSize=&quot;10000&quot;/&amp;gt;&lt;br/&gt;
&lt;br/&gt;
	&amp;lt;datasource host=&quot;127.0.0.1&quot; port=&quot;5432&quot; dbName=&quot;testdb&quot; user=&quot;ecc&quot; password=&quot;&quot;&amp;gt;&lt;br/&gt;
&lt;br/&gt;
		&amp;lt;!-- {0} = host, {1}
&lt;p&gt; = port, &lt;/p&gt;
{2} = sid --&amp;gt;&lt;br/&gt;
		&amp;lt;driver name=&quot;org.postgresql.Driver&quot; uri=&quot;jdbc:postgresql://{0}:{1}/{2}
&lt;p&gt;&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;/datasource&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;sql&amp;gt;&lt;br/&gt;
		&amp;lt;dataTable&amp;gt;tTempestade&amp;lt;/dataTable&amp;gt;&lt;br/&gt;
		&amp;lt;userQuery&amp;gt;select tag_consulta_atualiza as t from tusuario where cod_chave =&lt;br/&gt;
&apos;&apos;&lt;/p&gt;
{0}
&lt;p&gt;&apos;&apos;&amp;lt;/userQuery&amp;gt;&lt;br/&gt;
	&amp;lt;/sql&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;slt host=&quot;localhost&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;slt port=&quot;2000&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;workmanager maxQueueSize=&quot;10000&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/config&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12407648" author="rwinston@eircom.net" created="Tue, 28 Sep 2004 17:54:35 +0000"  >&lt;p&gt;The following code:&lt;/p&gt;

&lt;p&gt;conf = new XMLConfiguration(new File(testProperties));&lt;br/&gt;
conf.addProperty(&quot;a.key2&quot;, &quot;value2&quot;);&lt;br/&gt;
conf.save(testSaveConf);&lt;/p&gt;

&lt;p&gt;....&lt;/p&gt;

&lt;p&gt;conf.setProperty(&quot;a.key1&quot;, &quot;abcdefgh&quot;);&lt;br/&gt;
conf.save(testSaveConf); &lt;/p&gt;

&lt;p&gt;with an input file of:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
  &amp;lt;a&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;key1&amp;gt;value1&amp;lt;/key1&amp;gt;&lt;br/&gt;
&amp;lt;/a&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;produces:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
  &amp;lt;a&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;key2&amp;gt;value2&amp;lt;/key2&amp;gt;&lt;br/&gt;
&amp;lt;key1&amp;gt;abcdefghabcdefgh&amp;lt;/key1&amp;gt;&lt;br/&gt;
&amp;lt;/a&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;I cant figure out why &amp;lt;key1&amp;gt; gets its value inserted twice? &lt;/p&gt;</comment>
                            <comment id="12407649" author="ebourg" created="Tue, 28 Sep 2004 18:49:56 +0000"  >&lt;p&gt;The value inserted twice was already reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-90&quot; title=&quot;[configuration] Set wrong property when call XMLConfiguration.setProperty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-90&quot;&gt;&lt;del&gt;COM-1501&lt;/del&gt;&lt;/a&gt;, but we weren&apos;t able&lt;br/&gt;
to reproduce it. I reopened the bug, there is definitely something wrong there.&lt;/p&gt;</comment>
                            <comment id="12407650" author="rwinston@eircom.net" created="Wed, 29 Sep 2004 23:47:21 +0000"  >&lt;p&gt;I have moved my bug discussion (and sample fix) to &lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-90&quot; title=&quot;[configuration] Set wrong property when call XMLConfiguration.setProperty&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-90&quot;&gt;&lt;del&gt;COM-1501&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12407651" author="max@berger.name" created="Mon, 15 Nov 2004 09:19:26 +0000"  >&lt;p&gt;I have a similar problem, and was able to produce test code:&lt;/p&gt;

&lt;p&gt;XMLConfiguration conf = new XMLConfiguration();&lt;br/&gt;
conf.addProperty(&quot;bla.test&quot;,&quot;SomeValue&quot;);&lt;br/&gt;
System.out.println(conf);&lt;/p&gt;

&lt;p&gt;Will output (jdk 1.4.2, cvs checkout from 11/14/04):&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
&amp;lt;test&amp;gt;SomeValue&amp;lt;/test&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;What the error here is:&lt;br/&gt;
Instead of creating a node &quot;bla&quot; and then adding the subnode &quot;test&quot; it seems to&lt;br/&gt;
totally ignore everything before the last dot. Similar things happen to larger&lt;br/&gt;
paths, such as bla.blup.test and so on.&lt;/p&gt;

&lt;p&gt;hope this helps&lt;/p&gt;

&lt;p&gt;Max&lt;/p&gt;</comment>
                            <comment id="12407652" author="christian.kemmer@viadee.de" created="Wed, 22 Dec 2004 21:55:27 +0000"  >

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;This bug has been marked as a duplicate of 32240 ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 28 Sep 2004 17:42:59 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0thbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170116</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>