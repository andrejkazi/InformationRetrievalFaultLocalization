<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:50:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-132/CONFIGURATION-132.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-132] [configuration] HierarchicalConfigurationXMLReader stores comments as text nodes</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-132</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;I am seeing behavior in the HierarchicalConfigurationXMLReader class (v 1.5 &lt;br/&gt;
2004/07/05 09:54:17) where XML Comments are inappropriately stored as text &lt;br/&gt;
nodes.   &lt;/p&gt;

&lt;p&gt;When using ConfigurationXMLDocument (ConfigurationXMLDocument.java,v 1.6 &lt;br/&gt;
2004/06/24 14:01:03) to write the configuration back out to a file, the &lt;br/&gt;
original XML comments are written out as concatenated text nodes. &lt;/p&gt;

&lt;p&gt;Here are the steps for recreation:&lt;/p&gt;

&lt;p&gt;1) Read in this configuration using the hierarchicalXml designator:&lt;/p&gt;

&lt;p&gt;&amp;lt;config&amp;gt;&lt;br/&gt;
    &amp;lt;!-- Settings for the Wizard, now externalized via Perl. --&amp;gt;&lt;br/&gt;
    &amp;lt;Wizard&amp;gt;&lt;br/&gt;
        &amp;lt;!-- Location of perl binary. --&amp;gt;&lt;br/&gt;
        &amp;lt;PerlPath&amp;gt;C:/cygwin/bin/perl&amp;lt;/PerlPath&amp;gt;&lt;/p&gt;

&lt;p&gt;        &amp;lt;!-- Perl script and arguments for the wizard. --&amp;gt;&lt;br/&gt;
        &amp;lt;WizardScript&amp;gt;C:/foo/wizard.pl&amp;lt;/WizardScript&amp;gt;&lt;br/&gt;
    &amp;lt;/Wizard&amp;gt;&lt;br/&gt;
&amp;lt;/config&amp;gt;&lt;/p&gt;

&lt;p&gt;2) Pass the HierarchicalXMLConfiguration instance to ConfigurationXMLDocument &lt;br/&gt;
to write() to a file:&lt;/p&gt;

&lt;p&gt;ConfigurationXMLDocument configDoc = new ConfigurationXMLDocument(config);&lt;br/&gt;
Writer out = new BufferedWriter(new FileWriter(outputFile));&lt;br/&gt;
configDoc.write(out);&lt;/p&gt;

&lt;p&gt;3) The resulting XML (written out by Dom4J) demonstrates that all comments were &lt;br/&gt;
read in and concatenated into text nodes:&lt;/p&gt;

&lt;p&gt;&amp;lt;config&amp;gt;Settings for the Wizard, now externalized via Perl.  &lt;br/&gt;
  &amp;lt;Wizard&amp;gt;Location of perl binary. Perl script and arguments for the wizard.&lt;br/&gt;
    &amp;lt;PerlPath&amp;gt;C:/cygwin/bin/perl&amp;lt;/PerlPath&amp;gt;&lt;br/&gt;
    &amp;lt;WizardScript&amp;gt;C:/foo/wizard.pl&amp;lt;/WizardScript&amp;gt;&lt;br/&gt;
  &amp;lt;/Wizard&amp;gt;&lt;br/&gt;
&amp;lt;/config&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: Windows XP&lt;br/&gt;
Platform: PC&lt;/p&gt;</environment>
        <key id="12341629">CONFIGURATION-132</key>
            <summary>[configuration] HierarchicalConfigurationXMLReader stores comments as text nodes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="woodman@iswsolutions.com">woodman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Aug 2004 21:58:40 +0000</created>
                <updated>Tue, 16 May 2006 12:22:32 +0000</updated>
                            <resolved>Tue, 16 May 2006 12:22:32 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12407201" author="dep4b" created="Thu, 12 Aug 2004 22:52:29 +0000"  >&lt;p&gt;Hi, can you supply this bug as a testcase?  That way we have something concrete&lt;br/&gt;
to verify the fix against.  Look at the other examples in /src/test..  in fact,&lt;br/&gt;
if you can add it to TestHierarchialXmlConfiguration that would be great.&lt;/p&gt;</comment>
                            <comment id="12407202" author="oliver.heger@t-online.de" created="Sat, 14 Aug 2004 01:50:17 +0000"  >&lt;p&gt;The problem seems to be in HierarchicalXMLConfiguration which also stores&lt;br/&gt;
comments as configuration keys. In the constructHierarchy() method there is the&lt;br/&gt;
statement&lt;/p&gt;

&lt;p&gt;    else if (w3cNode instanceof CharacterData)&lt;/p&gt;

&lt;p&gt;IMO it should be sufficient to change this into&lt;/p&gt;

&lt;p&gt;    else if (w3cNode instanceof Text)&lt;/p&gt;

&lt;p&gt;(because Comment is a subinterface of CharacterData, too).&lt;/p&gt;

&lt;p&gt;Oliver&lt;/p&gt;</comment>
                            <comment id="12407203" author="woodman@iswsolutions.com" created="Sat, 14 Aug 2004 02:30:45 +0000"  >&lt;p&gt;I tested Oliver&apos;s suggestion, and that did the trick.   &lt;/p&gt;

&lt;p&gt;&amp;lt;newbie_alert&amp;gt;&lt;br/&gt;
Eric, do you still want a test case?  Will one of you be making the fix?  &lt;br/&gt;
(Sorry, I&apos;m new to the Apache world, so I&apos;m not sure where the responsibility &lt;br/&gt;
lies for these things.)&lt;br/&gt;
&amp;lt;/newbie_alert&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12407204" author="dep4b" created="Sat, 14 Aug 2004 07:14:09 +0000"  >&lt;p&gt;I would love a unit test!   they are the only sure way of preventing any&lt;br/&gt;
regression in the code.&lt;/p&gt;</comment>
                            <comment id="12407205" author="dep4b" created="Sat, 14 Aug 2004 18:10:42 +0000"  >&lt;p&gt;I have applied the fix.  I am going to go ahead and close this bug as I want to&lt;br/&gt;
get as many bugs closed for the RC1 as possible.  However, don&apos;t let me disuade&lt;br/&gt;
you from adding a unit test!  You may want to at that time add your getXML or&lt;br/&gt;
toXML method to help with testing.&lt;/p&gt;

&lt;p&gt;Go ahead and either reopen this bug or submit a fresh bug.  &lt;/p&gt;

&lt;p&gt;Oh, and I view (in good XP fashion) as everythign being a shared responbility. &lt;br/&gt;
It isn&apos;t just my responbility or yours to supply a testcase, but instead a&lt;br/&gt;
shared responsibility!  My only responsibility as a committer is to do my best&lt;br/&gt;
to encourage people to contribute and ensure that contributions are in good&lt;br/&gt;
shape and enhance the codebase!  Glad to have your participation.&lt;/p&gt;

&lt;p&gt;Eric&lt;/p&gt;</comment>
                            <comment id="12407206" author="woodman@iswsolutions.com" created="Tue, 17 Aug 2004 00:12:41 +0000"  >&lt;p&gt;Created an attachment (id=12445)&lt;br/&gt;
Test case additions to verify XML node types correctly interpreted.&lt;/p&gt;</comment>
                            <comment id="12407207" author="woodman@iswsolutions.com" created="Tue, 17 Aug 2004 00:14:49 +0000"  >&lt;p&gt;Created an attachment (id=12446)&lt;br/&gt;
New XML file to go in jakarta-commons\configuration\conf for patch&lt;/p&gt;</comment>
                            <comment id="12407208" author="woodman@iswsolutions.com" created="Tue, 17 Aug 2004 00:16:33 +0000"  >&lt;p&gt;Re-opening for consideration of diff patch (attachment 12445) and the XML test &lt;br/&gt;
document it uses (12446).&lt;/p&gt;</comment>
                            <comment id="12407209" author="dep4b" created="Mon, 6 Sep 2004 20:17:59 +0000"  >&lt;p&gt;Mark,&lt;br/&gt;
I have applied the patches.  One other quibbling detail.  When you do a patch,&lt;br/&gt;
include new files as well.  I had to guess at the xml files name (from looking&lt;br/&gt;
at the testcase) and create the xml from scratch.  Most ide&apos;s I think have an&lt;br/&gt;
option for &quot;include new files&quot;.  Thanks for the pretty unit tests!  Bumps our&lt;br/&gt;
unit test coverage from 87 to 88 percent!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12333039" name="ASF.LICENSE.NOT.GRANTED--TestHXmlConfig_patch.txt" size="3691" author="woodman@iswsolutions.com" created="Tue, 17 Aug 2004 00:12:41 +0000"/>
                            <attachment id="12333040" name="ASF.LICENSE.NOT.GRANTED--testHierarchicalXMLConfiguration2.xml" size="753" author="woodman@iswsolutions.com" created="Tue, 17 Aug 2004 00:14:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 12 Aug 2004 22:52:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110704</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tfxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169891</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>