<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:03:10 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-639/CONFIGURATION-639.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-639] OSGi Import-Package declaration not complete regarding optional dependencies</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-639</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;common-configuration2&apos;s pom.xml correctly defines optional dependencies like vfs2 or spring with &amp;lt;optional&amp;gt;.&lt;br/&gt;
However, it does only declare a subset of those as optional OSGi-dependencies:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- Explicitly declare optional dependencies for the OSGi manifest. --&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;commons.osgi.import&amp;gt;&lt;/span&gt;
      org.apache.commons.beanutils.*;resolution:=optional,
      org.apache.commons.codec.*;resolution:=optional,
      org.apache.commons.jxpath.*;resolution:=optional,
      org.apache.xml.resolver.*;resolution:=optional,
      javax.servlet.*;resolution:=optional,
      org.apache.commons.jexl2.*;resolution:=optional,
      org.apache.commons.vfs2.*;resolution:=optional,
      *
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/commons.osgi.import&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See &lt;a href=&quot;https://github.com/apache/commons-configuration/blob/trunk/pom.xml&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-configuration/blob/trunk/pom.xml&lt;/a&gt; for both above.&lt;br/&gt;
Due to the missing &quot;resolution:=optional, commons-configuration2 cannot be deployed in an OSGi-environment not providing the optional bundles.&lt;/p&gt;

&lt;p&gt;Example error on deploy:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Unable to resolve Module[org.apache.commons.configuration:2.1.0]: missing requirement [Module[org.apache.commons.configuration:2.1.0]] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;; (&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;=org.springframework.beans.factory)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please have a look if you agree and add the missing instructions for the remaining optional dependencies.&lt;/p&gt;

&lt;p&gt;Manually fixed Import-package statement looks like this (disregarding line-breaks):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Import-Package: javax.naming,javax.servlet;resolution:=optional,javax.sql,javax.xml.parsers,javax.xml.transform,javax.xml.transform.dom,javax.xml.transform.stream,org.apache.commons.beanutils;resolution:=optional,org.apache.commons.codec.binary;resolution:=optional,org.apache.commons.jexl2;resolution:=optional,org.apache.commons.jxpath;resolution:=optional,org.apache.commons.jxpath.ri;resolution:=optional,org.apache.commons.jxpath.ri.compiler;resolution:=optional,org.apache.commons.jxpath.ri.model;resolution:=optional,org.apache.commons.lang3;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.3,4)&quot;&lt;/span&gt;,org.apache.commons.lang3.builder;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.3,4)&quot;&lt;/span&gt;,org.apache.commons.lang3.concurrent;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.3,4)&quot;&lt;/span&gt;,org.apache.commons.lang3.mutable;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.3,4)&quot;&lt;/span&gt;,org.apache.commons.lang3.text;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.3,4)&quot;&lt;/span&gt;,org.apache.commons.lang3.text.translate;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[3.3,4)&quot;&lt;/span&gt;,org.apache.commons.logging;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.2,2)&quot;&lt;/span&gt;,org.apache.commons.logging.impl;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.2,2)&quot;&lt;/span&gt;,org.apache.commons.vfs2;resolution:=optional,org.apache.commons.vfs2.provider;resolution:=optional,org.apache.xml.resolver;resolution:=optional,org.apache.xml.resolver.helpers;resolution:=optional,org.apache.xml.resolver.readers;resolution:=optional,org.apache.xml.resolver.tools;resolution:=optional,org.springframework.beans.factory;resolution:=optional,org.springframework.core.env;resolution:=optional,org.springframework.core.io;resolution:=optional,org.springframework.util;resolution:=optional,org.w3c.dom,org.xml.sax,org.xml.sax.helpers
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;OSGi-container&lt;/p&gt;</environment>
        <key id="13003133">CONFIGURATION-639</key>
            <summary>OSGi Import-Package declaration not complete regarding optional dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="riconeubauer">Rico Neubauer</reporter>
                        <labels>
                            <label>commons-configuration</label>
                            <label>osgi</label>
                    </labels>
                <created>Wed, 7 Sep 2016 07:07:21 +0000</created>
                <updated>Sun, 16 Oct 2016 15:14:36 +0000</updated>
                            <resolved>Sun, 16 Oct 2016 15:14:36 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="15470278" author="b.eckenfels" created="Wed, 7 Sep 2016 10:50:18 +0000"  >&lt;p&gt;The bundle plugin can do that automatically. With one of the later commons-parent I have implemented an additional property which can overwrite a exclude statement (I dont know why it is needed, but if you overwrite it the import statements have the proper resolution added automatically. (We could even remove the manual resolution overwrites).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;lt;!-- make sure bundle plugin has dependency informations for &apos;optional&apos; --&amp;gt;&lt;br/&gt;
&amp;lt;commons.osgi.excludeDependencies /&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;When doing this the optional shows up for spring then:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;org.springframework.beans.factory;resolution:=optional,&lt;br/&gt;
org.springframework.core.env;resolution:=optional,&lt;br/&gt;
org.springframework.core.io;resolution:=optional,&lt;br/&gt;
org.springframework.util;resolution:=optional&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;However for some packages it also adds version ranges:&lt;/p&gt;

&lt;p&gt;org.apache.commons.beanutils;resolution:=optional;version=&quot;[1.9,2)&quot;,&lt;br/&gt;
org.apache.commons.codec.binary;resolution:=optional;version=&quot;[1.10,2)&quot;&lt;br/&gt;
,,,&lt;/p&gt;

&lt;p&gt;Not sure if we want to keep this or turn versions off if not?&lt;/p&gt;
</comment>
                            <comment id="15470301" author="b.eckenfels" created="Wed, 7 Sep 2016 11:02:54 +0000"  >&lt;p&gt;New and old version of the Manifest after the proposed change.&lt;/p&gt;</comment>
                            <comment id="15471650" author="oliver.heger@t-online.de" created="Wed, 7 Sep 2016 20:05:59 +0000"  >&lt;p&gt;In an older version of the bundle plugin the optional declarations from the pom were not taken into account, and all dependencies were listed as mandatory in the import-package directive. This was the reason for the explicit import declaration in the pom. If the plugin now handles optional dependencies correctly, we could drop this block.&lt;/p&gt;

&lt;p&gt;The versions, however, could be a problem. The dependencies (at least to other commons components) are typically set to the most recent versions, even if an older version would still work. Forcing users to always deploy the most recent version of a dependency could be too restrictive.&lt;/p&gt;</comment>
                            <comment id="15474234" author="b.eckenfels" created="Thu, 8 Sep 2016 15:55:58 +0000"  >&lt;p&gt;Well, it was my first feeling too, but on the other hand from experience I can say this is not an issue. The dependencies in such projects are mostly not up-to-date, so if somebody uses it they have a wide range of versions which are accepted (anything more current up to the next major). If a project is quick to update the dependencies then it is also seldomly a problem since the new version of that gets only dragged in by projects updating anyway. So while it might restrict some situations it typially is not an issue. Especially given that fact that only because there is no version restriction does not mean the unrestricted artifact in a odd version actually works.&lt;/p&gt;

&lt;p&gt;However this might be a bigger change than a bugfix. So I guess the plugin should be configured to not provide version ranges (but optionals) for the next minor release.&lt;/p&gt;</comment>
                            <comment id="15474847" author="oliver.heger@t-online.de" created="Thu, 8 Sep 2016 20:01:35 +0000"  >&lt;p&gt;Agreed. Can you provide a patch for the plugin configuration? Or commit it immediately?&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="15556099" author="oliver.heger@t-online.de" created="Fri, 7 Oct 2016 20:02:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;Bernd Eckenfels&lt;/a&gt; Do you already have a working solution you can share?&lt;/p&gt;</comment>
                            <comment id="15575625" author="riconeubauer" created="Fri, 14 Oct 2016 15:14:51 +0000"  >&lt;p&gt;Pull-request:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-configuration/pull/4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/apache/commons-configuration/pull/4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15580116" author="oliver.heger@t-online.de" created="Sun, 16 Oct 2016 15:14:36 +0000"  >&lt;p&gt;Patch applied in revision 1765165. This seems to be the easies and less invasive solution. Thanks again for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12827354" name="s1.txt" size="4076" author="b.eckenfels" created="Wed, 7 Sep 2016 11:02:54 +0000"/>
                            <attachment id="12827355" name="s2.txt" size="4485" author="b.eckenfels" created="Wed, 7 Sep 2016 11:02:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 Sep 2016 10:50:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33bhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>