<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:06:37 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-404/CONFIGURATION-404.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-404] Revisit - Brackets in property key causes NumberFormatException</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-404</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Hi,&lt;br/&gt;
When using brackets in property key we get an exception every time.&lt;br/&gt;
Escaping brackets with \ doesn&apos;t help.&lt;/p&gt;

&lt;p&gt;Example&lt;br/&gt;
#property in property file&lt;br/&gt;
test(ef)=false&lt;/p&gt;

&lt;p&gt;causes &lt;br/&gt;
java.lang.NumberFormatException: For input string: &quot;ef&quot; at&lt;br/&gt;
java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)&lt;br/&gt;
        at java.lang.Integer.parseInt(Integer.java:447)&lt;br/&gt;
        at java.lang.Integer.parseInt(Integer.java:497)&lt;br/&gt;
        at org.apache.commons.configuration.tree.DefaultConfigurationKey&lt;br/&gt;
$KeyIterator.checkIndex(DefaultConfigurationKey.java:834)&lt;br/&gt;
        at org.apache.commons.configuration.tree.DefaultConfigurationKey&lt;br/&gt;
$KeyIterator.nextKey(DefaultConfigurationKey.java:511) at&lt;br/&gt;
org.apache.commons.configuration.tree.DefaultExpressionEngine.findNodesForKey(DefaultExpressionEngine.java:462) at&lt;br/&gt;
org.apache.commons.configuration.tree.DefaultExpressionEngine.query(DefaultExpressionEngine.java:286) at&lt;br/&gt;
org.apache.commons.configuration.HierarchicalConfiguration.fetchNodeList(HierarchicalConfiguration.java:925 at&lt;br/&gt;
org.apache.commons.configuration.HierarchicalConfiguration.setProperty(HierarchicalConfiguration.java:735) at&lt;br/&gt;
org.apache.commons.configuration.ConfigurationUtils.copy(ConfigurationUtils.java:143) at&lt;br/&gt;
org.apache.commons.configuration.ConfigurationUtils.convertToHierarchical(ConfigurationUtils.java:199)  at org.apache.commons.configuration.CombinedConfiguration&lt;br/&gt;
$ConfigData.getTransformedRoot(CombinedConfiguration.java:794)  at&lt;br/&gt;
org.apache.commons.configuration.CombinedConfiguration.constructCombinedNode(CombinedConfiguration.java:653) at&lt;br/&gt;
org.apache.commons.configuration.CombinedConfiguration.getRootNode(CombinedConfiguration.java:504) at&lt;br/&gt;
org.apache.commons.configuration.HierarchicalConfiguration.fetchNodeList(HierarchicalConfiguration.java:925) at&lt;br/&gt;
org.apache.commons.configuration.HierarchicalConfiguration.getProperty(HierarchicalConfiguration.java:327) at&lt;br/&gt;
org.apache.commons.configuration.CombinedConfiguration.getProperty(CombinedConfiguration.java:578) at&lt;br/&gt;
org.apache.commons.configuration.AbstractConfiguration.resolveContainerStore(AbstractConfiguration.java:1155) at&lt;br/&gt;
org.apache.commons.configuration.AbstractConfiguration.getString(AbstractConfiguration.java:1034)  at&lt;br/&gt;
org.apache.commons.configuration.AbstractConfiguration.getString(AbstractConfiguration.java:1017) &lt;/p&gt;

&lt;p&gt;Explanation i got in mailing list from Oliver Heger&lt;/p&gt;

&lt;p&gt;I guess you use DefaultConfigurationBuilder for loading a combined &lt;br/&gt;
configuration?&lt;/p&gt;

&lt;p&gt;The exception is due to the fact that brackets have a special meaning in &lt;br/&gt;
the query syntax for hierarchical configurations. &lt;br/&gt;
(DefaultConfigurationBuilder transforms all configuration sources into &lt;br/&gt;
hierarchical configurations, so also for properties, which are not &lt;br/&gt;
hierarchical by default, the same rules apply.)&lt;/p&gt;

&lt;p&gt;So far escaping brackets or other specific characters in property keys &lt;br/&gt;
is not supported. It seems to be rather unusual to use brackets in &lt;br/&gt;
property keys, so you may well be the first one who noticed this problem.&lt;/p&gt;

&lt;p&gt;Unfortunately I don&apos;t have a working solution for this problem right &lt;br/&gt;
now.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12445598">CONFIGURATION-404</key>
            <summary>Revisit - Brackets in property key causes NumberFormatException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oliver.heger@t-online.de">Oliver Heger</assignee>
                                    <reporter username="walkerr">Rob Walker</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 05:13:40 +0000</created>
                <updated>Thu, 8 Sep 2011 09:20:03 +0000</updated>
                            <resolved>Wed, 27 Jan 2010 07:07:44 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12800546" author="walkerr" created="Fri, 15 Jan 2010 05:18:03 +0000"  >&lt;p&gt;The bug reported above was raised under JIRA-336, and closed as having ways to workaround - which is correct.&lt;/p&gt;

&lt;p&gt;On Vista and Win7 this  issue now crops up a lot because of the usage of ProgramFiles(x86) as a standard directory name.&lt;/p&gt;

&lt;p&gt;The workaround proposal under the original issue requires every user to implement their own workaround, and it&apos;s non trivial because many of the member fields and methods of tree classes are private and so a simple subclass based solution can&apos;t be used.&lt;/p&gt;

&lt;p&gt;An alternative approach is to simple catch the exception  and handle it, reporting the item as &quot;not an index&quot;.. TBH I&apos;d say an unhandled of this nature is less than ideal in library code anyway, so my view is that this also strengthens the codebase.&lt;/p&gt;

&lt;p&gt;We have locally implemented this patch and it&apos;s working very well, so would like to see it in the codebase.&lt;/p&gt;
</comment>
                            <comment id="12800548" author="walkerr" created="Fri, 15 Jan 2010 05:21:06 +0000"  >&lt;p&gt;Patch with proposed fix&lt;/p&gt;</comment>
                            <comment id="12804109" author="oliver.heger@t-online.de" created="Sat, 23 Jan 2010 17:06:27 +0000"  >&lt;p&gt;Okay, I think it makes sense to add this patch to the codebase.&lt;/p&gt;

&lt;p&gt;However, I do not know the format in which you provided the patch. Can you please use the native subversion format? You can create a patch by simply calling &lt;tt&gt;svn diff &amp;gt; configuration-404.patch&lt;/tt&gt;. Also, it would be great if you could add a unit test.&lt;/p&gt;

&lt;p&gt;Many thanks.&lt;/p&gt;</comment>
                            <comment id="12804405" author="walkerr" created="Mon, 25 Jan 2010 06:25:09 +0000"  >&lt;p&gt;Hope the attached patch is better - did it in SVN this time. I think I must have used Winmerge for the previous one.&lt;/p&gt;</comment>
                            <comment id="12804406" author="walkerr" created="Mon, 25 Jan 2010 06:27:14 +0000"  >&lt;p&gt;Oliver - hope the new patch is usable. I&apos;m not so familiar with the unit test architecture, but it should be pretty simple  - just include property with brackets in and make sure it doesn&apos;t throw a NumberFormatException. The specific Windows Vista/7 ones that trip this now are system properties like C:\Program Files(x86)&lt;/p&gt;</comment>
                            <comment id="12805393" author="oliver.heger@t-online.de" created="Wed, 27 Jan 2010 07:07:44 +0000"  >&lt;p&gt;Fixed in subversion in revision 903552. Many thanks for the patch.&lt;/p&gt;</comment>
                            <comment id="12805488" author="walkerr" created="Wed, 27 Jan 2010 11:49:57 +0000"  >&lt;p&gt;Great, thanks Oliver. I can move us back the official SVN rev here and remove our local patch. Good news.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12405348">CONFIGURATION-336</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12430356" name="DefaultConfigurationKey.java-NFE.patch" size="1226" author="walkerr" created="Fri, 15 Jan 2010 05:21:06 +0000"/>
                            <attachment id="12431288" name="DefaultConfigurationKey.java.patch" size="1488" author="walkerr" created="Mon, 25 Jan 2010 06:25:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 Jan 2010 17:06:27 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33985</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l6nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121729</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>