<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:09:39 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-13/CONFIGURATION-13.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-13] [configuration] XMLConfiguration ignore a specific encoding in XML declaration</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-13</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;I found that usign ConfigurationFactory, XMLConfiguration can&apos;t recognize a&lt;br/&gt;
specific encoding in XML declaration because of calling method &lt;br/&gt;
&quot;load(Reader in)&quot; anytime, so I can use only one encoding depend on OS through&lt;br/&gt;
all xml files.&lt;/p&gt;

&lt;p&gt;After finding this problem, I modified implementation to create&lt;br/&gt;
org.w3c.dom.Document by calling &lt;br/&gt;
&quot;DocumentBuilder#parse(new InputSource(Inputstrem in))&quot; to avoid characters&lt;br/&gt;
garbled (gobbledygook), and then I confirmed to be recoginzed encoding.&lt;/p&gt;

&lt;p&gt;I suggest to correct methods which inner class FileConfigurationDelegate in &lt;br/&gt;
XMLConfiguration change to override &quot;load(Inputstrem in)&quot;, and &lt;br/&gt;
call &quot;XMLConfiguration.this.load(Inputstrem in);&quot;, and method &lt;br/&gt;
&quot;load(InputStream in)&quot; in XMLConfiguration change to call &lt;br/&gt;
&quot;DocumentBuilder#parse(new InputSource(Inputstrem in))&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12342141">CONFIGURATION-13</key>
            <summary>[configuration] XMLConfiguration ignore a specific encoding in XML declaration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kunihara@atomsystem.co.jp">kunihara tetsuya</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Mar 2005 17:02:24 +0000</created>
                <updated>Tue, 16 May 2006 12:15:03 +0000</updated>
                            <resolved>Tue, 16 May 2006 12:15:03 +0000</resolved>
                                    <version>1.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12408983" author="oliver.heger@t-online.de" created="Wed, 30 Mar 2005 01:56:01 +0000"  >&lt;p&gt;Is it possible for you to attach a short test configuration file which needs a&lt;br/&gt;
special encoding? This would help us to verify if a fix works.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12408984" author="kunihara@atomsystem.co.jp" created="Wed, 30 Mar 2005 12:26:16 +0000"  >&lt;p&gt;OK, here are the sample configuration files and test source codes for ver1.0.&lt;/p&gt;

&lt;p&gt;Configuration files are&lt;br/&gt;
./test/config.xml    : main config file&lt;br/&gt;
./test/testConf1.xml : ISO-8859-1&lt;br/&gt;
./test/testConf2.xml : UTF-8(but the content is included ISO-8859-1)&lt;br/&gt;
./test/testConf3.xml : UTF-16&lt;/p&gt;

&lt;p&gt;When I use &quot;TestMain.java&quot;, a error occurred on reading &quot;testConf3.xml&quot;&lt;br/&gt;
and its stack trace is &quot;./stacktrace.txt&quot;.&lt;/p&gt;

&lt;p&gt;&quot;TestMain_UseXmlEncoding.java&quot;, &quot;UseXmlEncodingConfigurationFactory.java&quot; and&lt;br/&gt;
&quot;UseXmlEncodingHierarchicalXMLConfiguration.java&quot; are our implementations to &lt;br/&gt;
avoid this problem. And config main file is &quot;config_UseXmlEncoding.xml&quot;.&lt;br/&gt;
Of course, The output of this program is correct.&lt;/p&gt;

&lt;p&gt;hoge : test1_hoge&lt;br/&gt;
moge : test2_moge&lt;br/&gt;
yoge : test3_yoge&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;In Japan, we have six or more encodings represents Japanese,&lt;/li&gt;
	&lt;li&gt;Windows-31J(on Windows), EUC-JP(on Linux), iso-2022-jp(on e-mail),&lt;/li&gt;
	&lt;li&gt;UTF-8(Java), UTF-16 and Shift-JIS(nearly equal Windows-31J)....&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="12408985" author="kunihara@atomsystem.co.jp" created="Wed, 30 Mar 2005 12:26:33 +0000"  >&lt;p&gt;Created an attachment (id=14590)&lt;br/&gt;
sample configuration files and test source codes&lt;/p&gt;</comment>
                            <comment id="12408986" author="kunihara@atomsystem.co.jp" created="Wed, 30 Mar 2005 12:35:19 +0000"  >&lt;p&gt;Sorry, I have a mistake.&lt;br/&gt;
line 18 on TestMain.java&lt;br/&gt;
  factory.setConfigurationURL(new File(&quot;config.xml&quot;).toURL());&lt;br/&gt;
please replace like this &lt;br/&gt;
  factory.setConfigurationURL(new File(&quot;test/config.xml&quot;).toURL());&lt;/p&gt;</comment>
                            <comment id="12408987" author="ebourg" created="Wed, 30 Mar 2005 18:28:39 +0000"  >&lt;p&gt;We will have the same issue with all configuration formats supporting an&lt;br/&gt;
encoding declaration inside the file, that&apos;s all XML based formats (XML&lt;br/&gt;
properties, XML property list), YAML and OGDL.&lt;/p&gt;</comment>
                            <comment id="12408988" author="ebourg" created="Wed, 30 Mar 2005 18:36:34 +0000"  >&lt;p&gt;Created an attachment (id=14592)&lt;br/&gt;
Fix for XMLConfiguration&lt;/p&gt;

&lt;p&gt;This is a simple patch that should solve this issue for XMLConfiguration, I&lt;br/&gt;
haven&apos;t tested it thoroughly yet.&lt;/p&gt;

&lt;p&gt;Also we will have to check that the value returned by getEncoding() is&lt;br/&gt;
consistent with the actual encoding of the file.&lt;/p&gt;</comment>
                            <comment id="12408989" author="kunihara@atomsystem.co.jp" created="Thu, 31 Mar 2005 11:52:31 +0000"  >&lt;p&gt;Thank you so much for your support.&lt;/p&gt;

&lt;p&gt;But, the patch seems not to modify FileConfigurationDelegate in &lt;br/&gt;
XMLConfiguration. Because AbstractFileConfiguration#load(URL url) calls &lt;br/&gt;
FileConfigurationDelegate#load(Inputstream), XMLConfiguration#load(Inputstrem) &lt;br/&gt;
will not be called when I use ConfigurationFactory#getConfiguration().&lt;br/&gt;
Here is the its sample. I&apos;m Sorry that it is not patch...&lt;/p&gt;


&lt;p&gt;private class FileConfigurationDelegate extends AbstractFileConfiguration {&lt;br/&gt;
  public void load(InputStream in) throws ConfigurationException   // add this&lt;br/&gt;
  &lt;/p&gt;
{                                                                // add this
      UseXmlEncodingHierarchicalXMLConfiguration.this.load(in);    // add this
  }
&lt;p&gt;                                                                // add this&lt;br/&gt;
  public void load(Reader in) throws ConfigurationException&lt;/p&gt;</comment>
                            <comment id="12408990" author="ebourg" created="Tue, 5 Apr 2005 20:52:37 +0000"  >&lt;p&gt;You are right, I submitted a fix in the current SVN tree, let me know how it&lt;br/&gt;
works for you.&lt;/p&gt;</comment>
                            <comment id="12408991" author="kunihara@atomsystem.co.jp" created="Wed, 13 Apr 2005 12:57:50 +0000"  >&lt;p&gt;Sorry it&apos;s taken me so long to reply. &lt;/p&gt;

&lt;p&gt;I got the binary of 2005/04/12 nightly build, &lt;br/&gt;
and made sure it works well.&lt;/p&gt;

&lt;p&gt;Thank you so much for your help.&lt;/p&gt;</comment>
                            <comment id="12408992" author="ebourg" created="Wed, 13 Apr 2005 17:53:32 +0000"  >&lt;p&gt;Thank you for the feedback. I leave this bug open until I commit a test case&lt;br/&gt;
covering this issue.&lt;/p&gt;</comment>
                            <comment id="12408993" author="ozgwei@yahoo.com" created="Thu, 15 Sep 2005 11:25:37 +0000"  >&lt;p&gt;I&apos;m quite interested in using commons configuration.&lt;/p&gt;

&lt;p&gt;Our situation is described as following:&lt;br/&gt;
1) We are running WebSphere on IBM zOS.&lt;br/&gt;
2) The default encoding of WebSphere is ISO-8859-1&lt;br/&gt;
3) The properties file is in IBM zOS file system and encoded in IBM-1047.&lt;/p&gt;

&lt;p&gt;How can I specify the encoding of a properties file in configuration factory&lt;br/&gt;
config.xml? Or does it recognise the encoding automatically? (Well it&apos;s not like&lt;br/&gt;
XML which can specify the encoding at the beginning of the XML document.)&lt;/p&gt;</comment>
                            <comment id="12408994" author="oliver.heger@t-online.de" created="Mon, 26 Sep 2005 03:00:32 +0000"  >&lt;p&gt;(In reply to comment #11)&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; How can I specify the encoding of a properties file in configuration factory&lt;br/&gt;
&amp;gt; config.xml? Or does it recognise the encoding automatically? (Well it&apos;s not like&lt;br/&gt;
&amp;gt; XML which can specify the encoding at the beginning of the XML document.)&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;You can simply set an encoding attribute as demonstrated in the following example:&lt;/p&gt;

&lt;p&gt;&amp;lt;configuration&amp;gt;&lt;br/&gt;
  &amp;lt;properties fileName=&quot;test.properties&quot; encoding=&quot;UTF-8&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;properties fileName=&quot;test.properties.xml&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;xml fileName=&quot;test.xml&quot; encoding=&quot;ISO-8859-1&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;(This works because the configuration definition files are read by&lt;br/&gt;
Commons-Digester, which maps attributes to bean properties. So in this case the&lt;br/&gt;
setEncoding() method of AbstractFileConfiguration will be called. This works for&lt;br/&gt;
other properties, too.)&lt;/p&gt;</comment>
                            <comment id="12408995" author="oliver.heger@t-online.de" created="Mon, 26 Sep 2005 03:05:30 +0000"  >&lt;p&gt;I added a test case based on the test files provided in the first attachment&lt;br/&gt;
(many thanks again). So this issue can now be closed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12333432" name="ASF.LICENSE.NOT.GRANTED--test.zip" size="6175" author="kunihara@atomsystem.co.jp" created="Wed, 30 Mar 2005 12:26:33 +0000"/>
                            <attachment id="12333433" name="ASF.LICENSE.NOT.GRANTED--xml-encoding.patch" size="943" author="ebourg" created="Wed, 30 Mar 2005 18:36:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34204</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Mar 2005 01:56:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33979</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 11 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tfcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>