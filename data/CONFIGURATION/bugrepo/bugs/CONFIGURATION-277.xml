<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:07:05 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-277/CONFIGURATION-277.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-277] AbstractConfiguration should handle UnsupportedOperationExceptions in Iterator.remove() gracefully</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-277</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;In AbstractConfiguration method clear() on line 533 (see code below) a possible UnsupportedOperationException is not caught resulting in the malfunctioning of the whole method. However, the documentation of the getKeys() method itself warns about relying on the remove() method of interface Iterator. The clear() method should not propagate that exception, it should catch it and try the clearProperty(String) approach if the remove() method is not supported.&lt;/p&gt;

&lt;p&gt;            Iterator it = getKeys();&lt;br/&gt;
            while (it.hasNext())&lt;br/&gt;
            {&lt;br/&gt;
                String key = (String) it.next();&lt;br/&gt;
                it.remove();                                          &amp;lt;------- EVIL!&lt;/p&gt;

&lt;p&gt;                if (containsKey(key))&lt;/p&gt;
                {
                    // workaround for Iterators that do not remove the property on calling remove()
                    clearProperty(key);
                }

&lt;p&gt;Best regards,&lt;br/&gt;
Michael&lt;/p&gt;</description>
                <environment></environment>
        <key id="12370526">CONFIGURATION-277</key>
            <summary>AbstractConfiguration should handle UnsupportedOperationExceptions in Iterator.remove() gracefully</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oliver.heger@t-online.de">Oliver Heger</assignee>
                                    <reporter username="javaprog">Michael Rudolf</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 May 2007 13:52:55 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:49 +0000</updated>
                            <resolved>Tue, 12 Jun 2007 20:06:47 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12500464" author="oliver.heger@t-online.de" created="Thu, 31 May 2007 19:46:34 +0000"  >&lt;p&gt;Okay, we can change this.&lt;/p&gt;

&lt;p&gt;Is there a concrete Configuration class you have trouble with or is the purpose of this issue just to avoid pitfalls when creating new Configuration implementations derived from AbstractConfiguration?&lt;/p&gt;</comment>
                            <comment id="12500624" author="ebourg" created="Fri, 1 Jun 2007 08:48:19 +0000"  >&lt;p&gt;I&apos;m not sure this can be changed, if clearProperty is called in the loop a ConcurrentModificationException may be thrown. The keys to be removed could be collected in the loop and then removed outside the loop on the keys iterator.&lt;/p&gt;</comment>
                            <comment id="12500651" author="javaprog" created="Fri, 1 Jun 2007 10:01:05 +0000"  >&lt;p&gt;I don&apos;t have problems with a concrete implementation included in Commons Configuration but I want to create a new implementation. For the getKeys() method I decided to use java.util.Arrays.asList(T...).iterator(), as I did not want to create a new Iterator implementation to wrap around an array of keys. However, I then realized that the list created by that method does not support the removal of items but throws an UnsupportedOperationException instead. Because the iterator calls that very remove() method it will propagate that runtime exception thus causing the clear() method to malfunction. The point is that this behavior is perfectly fine, it is documented in the collections framework. However, the clear method() does not provide for that.&lt;/p&gt;</comment>
                            <comment id="12500846" author="oliver.heger@t-online.de" created="Fri, 1 Jun 2007 20:46:37 +0000"  >&lt;p&gt;Well, clearProperty() is already invoked in the loop as a fall back if removing through the iterator does not work. So for an iterator that does not support the remove() method there are the following possibilities:&lt;br/&gt;
(1) If it operates on a disjunct set of keys, clearProperty() will work and everything is fine.&lt;br/&gt;
(2) If it is affected by clearProperty(), a ConcurrentModificationException will be thrown. In this case, we have basically transformed the UnsupportedOperationException into another one, so we have not made things worse.&lt;/p&gt;

&lt;p&gt;In case of (2) the implementor of the derived Configuration class is forced to write a custom clear() implementation. In case of (1) we have made the implementor&apos;s life a bit easier. So we would have a certain gain.&lt;/p&gt;</comment>
                            <comment id="12503984" author="oliver.heger@t-online.de" created="Tue, 12 Jun 2007 20:06:47 +0000"  >&lt;p&gt;A fix was applied that catches the potential UnsupportedOperationException. If such an exception is caught, clearProperty() will be called for the remaining properties.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 31 May 2007 19:46:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33954</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l6hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>