<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 18:19:53 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-323/CONFIGURATION-323.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-323] DefaultConfigurationBuilder, property-value misinterpreted as list, escaped notation of list-delimiter lost during internal processing</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-323</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Shortly we switched from ConfigurationFactory to DefaultConfigurationBuilder for parsing out configuration-files. Unfortunately the resulting Configuration-Objects show different behaviour. The following example illustrates the problem.&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;public class CommonsConfigTest extends TestCase
{
    public void testCommonsConfig() 
    {
        try
        {
            URL oConfigURL = new File(&quot;c:\\config.xml&quot;).toURL();
			
            //========= ConfigurationFactory ===========
            final ConfigurationFactory oConfigurationFactory = new ConfigurationFactory();
            oConfigurationFactory.setConfigurationURL( oConfigURL );
            printPropertyValue( oConfigurationFactory.getConfiguration() );

            //========= DefaultConfigurationBuilder 1st attempt ===========
            final DefaultConfigurationBuilder oBuilder = new DefaultConfigurationBuilder();
            oBuilder.setURL( oConfigURL );
            printPropertyValue( oBuilder.getConfiguration() );

            //========= DefaultConfigurationBuilder 2nd attempt ===========
            final DefaultConfigurationBuilder oDelimiterBuilder = new DefaultConfigurationBuilder();
            oDelimiterBuilder.setListDelimiter( &apos;;&apos; );
            oDelimiterBuilder.setDelimiterParsingDisabled( true );
            oDelimiterBuilder.setURL( oConfigURL );
            printPropertyValue( oDelimiterBuilder.getConfiguration() );
        }
        catch ( Exception configEx )
        {
            configEx.printStackTrace();
        }
    }
    void printPropertyValue(final Configuration a_oConfig) {
        System.out.println( a_oConfig.getString( &quot;demo.prop&quot; ) );
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;contents of config.xml&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&amp;gt;
&amp;lt;configuration&amp;gt;
    &amp;lt;properties optional=&quot;true&quot; fileName=&quot;/config.properties&quot;/&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;contents of config.properties&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;demo.prop=test\, text using \,\, escaped list delimiters
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the output looks like this&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;test, text using ,, escaped list delimiters
test
test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The value of demo.prop depends on the mechanism which was used to create the Configuration-objects. &lt;br/&gt;
Using ConfigurationFactory gives the expected result: the list delimiters are ignored as they are escaped by backslashes.&lt;br/&gt;
Both attempts using a DefaultConfigurationBuilder fail; even changing the List-delimiter and disabling delimiter-processing doesn&apos;t give the expected result.&lt;/p&gt;

&lt;p&gt;One reason for the problem is the invocation of ConfigurationUtils.copy() during internel processing. The method copies the value of the property from one configuration into another. During insertion of the property, the value of the property is split (StringUtils.split) a second time. Unfortunately the escape-backslashes have already been removed, as a result of the first invocation of StringUtils.split(), which happended during the initial parsing of the file.  That&apos;s why the second split-invocation treats the value as list.&lt;/p&gt;

&lt;p&gt;I see two problems&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the information about escape-characters is lost, copying a property from one configuration into another gives different results&lt;/li&gt;
	&lt;li&gt;setListDelimiter() and setDelimiterParsingDisabled() don&apos;t work as expected&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment>&lt;p&gt;WinXP&lt;/p&gt;</environment>
        <key id="12395523">CONFIGURATION-323</key>
            <summary>DefaultConfigurationBuilder, property-value misinterpreted as list, escaped notation of list-delimiter lost during internal processing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="juergens">juergen schad</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 May 2008 13:55:12 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:52 +0000</updated>
                            <resolved>Tue, 8 Jul 2008 20:06:51 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12595024" author="oliver.heger@t-online.de" created="Wed, 7 May 2008 20:02:57 +0000"  >&lt;p&gt;Thank you for this detailed bug report.&lt;/p&gt;

&lt;p&gt;Did you check this with version 1.5 of Commons Configuration? The 1.5 release addresses some problems with list delimiter handling. Especially &lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-283&quot; title=&quot;CombinedConfiguration doesn&amp;#39;t take escaped characters into account.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-283&quot;&gt;&lt;del&gt;CONFIGURATION-283&lt;/del&gt;&lt;/a&gt; seems to be of interest for you.&lt;/p&gt;

&lt;p&gt;Please let us know whether this solves your problem.&lt;/p&gt;</comment>
                            <comment id="12601409" author="oliver.heger@t-online.de" created="Sat, 31 May 2008 19:44:36 +0000"  >&lt;p&gt;Any news on this issue? I tend to close it as duplicate.&lt;/p&gt;</comment>
                            <comment id="12611777" author="oliver.heger@t-online.de" created="Tue, 8 Jul 2008 20:06:50 +0000"  >&lt;p&gt;Got no more feedback, so closing this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 7 May 2008 20:02:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uqo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177462</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>