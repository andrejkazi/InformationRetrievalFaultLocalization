<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:51:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-61/CONFIGURATION-61.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-61] [configuration] JNDIConfiguration and union configuration</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-61</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;JNDIConfiguration seems not to work with ConfigurationFactory when used in the&lt;br/&gt;
&amp;lt;additional&amp;gt; section. The union configuration feature of ConfigurationFactory is&lt;br/&gt;
implemented by calling getKeys() on a Configuration object, iterating through&lt;br/&gt;
the keys, and calling getProperty() for each.&lt;br/&gt;
JNDIConfiguration.getKeys() obviously always returns an empty iterator in my&lt;br/&gt;
tests though the Configuration object is not empty (getString() returns values&lt;br/&gt;
for some keys). I am not sure whether this is a bug in JNDIConfiguration or a&lt;br/&gt;
shortcomming of the JNDI implementation used for testing.&lt;br/&gt;
Another point is that JNDIConfiguration.getProperty() always throws a not&lt;br/&gt;
supported error. This would also blow ConfigurationFactory if getKeys() returned&lt;br/&gt;
a valid iterator. I don&apos;t understand why this error is thrown. In my opinion&lt;br/&gt;
this is a violation of the contract defined by the Configuration interface (the&lt;br/&gt;
same is true for some other methods).&lt;br/&gt;
Attached is an extension to the unit test of ConfigurationFactory that&lt;br/&gt;
demonstrates the problem.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12341230">CONFIGURATION-61</key>
            <summary>[configuration] JNDIConfiguration and union configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="oliver.heger@t-online.de">Oliver Heger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jan 2004 03:59:28 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:40 +0000</updated>
                            <resolved>Sat, 22 Aug 2009 19:36:40 +0000</resolved>
                                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12405886" author="oliver.heger@t-online.de" created="Fri, 30 Jan 2004 04:00:30 +0000"  >&lt;p&gt;Created an attachment (id=10154)&lt;br/&gt;
Another test method for ConfigurationFactory that shows the problem&lt;/p&gt;</comment>
                            <comment id="12405887" author="oliver.heger@t-online.de" created="Fri, 30 Jan 2004 04:42:33 +0000"  >&lt;p&gt;Created an attachment (id=10155)&lt;br/&gt;
Test configuration file, copy in conf directory&lt;/p&gt;</comment>
                            <comment id="12405888" author="dep4b" created="Sun, 15 Feb 2004 19:20:52 +0000"  >&lt;p&gt;Oliver,&lt;/p&gt;

&lt;p&gt;I fixed the immediate bug that makes this fail.  However, I have another &lt;br/&gt;
question.  When loading the configuration from the Configuration Factory, it &lt;br/&gt;
seems like the underlying configs are NOT preserved, but instead a new &lt;br/&gt;
CompositeConfig is made from their values:&lt;br/&gt;
 CompositeConfiguration cc = (CompositeConfiguration)config;&lt;br/&gt;
        // Currently fails, should be 4?  Only 2?&lt;br/&gt;
        //assertEquals(4,cc.getNumberOfConfigurations());&lt;/p&gt;

&lt;p&gt;This I think could be a problem because if I add a config that doesn&apos;t load &lt;br/&gt;
all the values at startup time, but instead at runtime, then it will miss &lt;br/&gt;
values.  I think that is why the JNDIConfiguration value never makes it in:&lt;br/&gt;
    // Fails, because we don&apos;t seem to reach the underlying &lt;br/&gt;
JNDIConfiguraiton        &lt;br/&gt;
        //assertNotNull(config.getProperty(&quot;test.boolean&quot;));&lt;/p&gt;

&lt;p&gt;Becasue there is no JNDIConfiguration object left..&lt;/p&gt;

&lt;p&gt;Maybe this is okay, but we need to define explicitly in the docs that &lt;br/&gt;
configuration values are looked up and stored at startup time, not at runtime..&lt;/p&gt;

&lt;p&gt;I have committed the files, so the unit tests (except the commented out ones) &lt;br/&gt;
pass.&lt;/p&gt;

&lt;p&gt;Eric&lt;/p&gt;</comment>
                            <comment id="12405889" author="oliver.heger@t-online.de" created="Mon, 16 Feb 2004 01:41:35 +0000"  >&lt;p&gt;Eric,&lt;/p&gt;

&lt;p&gt;you are right, the original configs are not saved. Instead on each config the&lt;br/&gt;
getKeys() method is called, and then all keys and their values are stored in a&lt;br/&gt;
new Configuration object.&lt;/p&gt;

&lt;p&gt;This is probably the cause why properties obtained from a JNDIConfiguration&lt;br/&gt;
cannot be retrieved. But again, why does the getKeys() method of&lt;br/&gt;
JNDIConfiguration does not return a valid Iterator? Though if all values are&lt;br/&gt;
loaded at runtime, the Configuration interface requires a getKeys() method. So&lt;br/&gt;
it should be safe that the implementation in ConfigurationFactory relies on this.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;Oliver&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12332719" name="ASF.LICENSE.NOT.GRANTED--testDigesterConfiguration3.xml" size="435" author="oliver.heger@t-online.de" created="Fri, 30 Jan 2004 04:42:33 +0000"/>
                            <attachment id="12332718" name="ASF.LICENSE.NOT.GRANTED--testconfigurationfactory.txt" size="1964" author="oliver.heger@t-online.de" created="Fri, 30 Jan 2004 04:00:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 15 Feb 2004 19:20:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uojr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177118</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>