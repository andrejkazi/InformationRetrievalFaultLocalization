<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:51:13 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-445/CONFIGURATION-445.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-445] XMLConfiguration save gives wrong xml when it contains combined elements (viewNode) with attributes</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-445</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;when creating a CombinedConfiguration with an overridecombiner I get into trouble when I need to generate a xml file from te resulting view. It seems that the viewNodes which are created do not handle the parent of the attributes correctly. &lt;br/&gt;
So when saving this configuration the attributes get lost and attached to the rootnode.&lt;/p&gt;

&lt;p&gt;I made a unit test and will attach the following files :&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;component1.xml&lt;/li&gt;
	&lt;li&gt;component1_spec.xml&lt;/li&gt;
	&lt;li&gt;AttributeTest.java&lt;/li&gt;
	&lt;li&gt;log output&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12503510">CONFIGURATION-445</key>
            <summary>XMLConfiguration save gives wrong xml when it contains combined elements (viewNode) with attributes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oliver.heger@t-online.de">Oliver Heger</assignee>
                                    <reporter username="jdmc562">jo desmet</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Apr 2011 12:53:05 +0000</created>
                <updated>Thu, 8 Sep 2011 09:20:08 +0000</updated>
                            <resolved>Sun, 10 Apr 2011 10:07:15 +0000</resolved>
                                                    <fixVersion>1.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="13016366" author="jdmc562" created="Wed, 6 Apr 2011 12:57:04 +0000"  >&lt;p&gt;seems no attachement is possible, so inlined :&lt;/p&gt;

&lt;p&gt;component1.xml :&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
	&amp;lt;key1 override=&quot;USER&quot;&amp;gt;value1&amp;lt;/key1&amp;gt;&lt;br/&gt;
	&amp;lt;key2 override=&quot;USER2&quot;&amp;gt;value2&amp;lt;/key2&amp;gt;&lt;br/&gt;
 &amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;component1_spec.xml:&lt;br/&gt;
&amp;lt;configuration&amp;gt;&lt;br/&gt;
	&amp;lt;key2 override=&quot;USER2&quot;&amp;gt;value2_spec&amp;lt;/key2&amp;gt;&lt;br/&gt;
 &amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;AttributeTest.java (relevant section)&lt;/p&gt;

&lt;p&gt;  @Test&lt;br/&gt;
    public void testAttributeSave() throws Exception &lt;/p&gt;
{
        final XMLConfiguration x1 = new XMLConfiguration(&quot;component1.xml&quot;);
        final XMLConfiguration x2 = new XMLConfiguration(&quot;component1_spec.xml&quot;);
        dump(x1);
        dump(x2);

        final CombinedConfiguration c = new CombinedConfiguration();
        c.setNodeCombiner(new OverrideCombiner());
        c.addConfiguration(x2);
        dump(c);
        c.addConfiguration(x1);
        dump(c);
    }

&lt;p&gt;    public static void dump(final XMLConfiguration c) throws ConfigurationException &lt;/p&gt;
{
        final StringWriter w = new StringWriter();
        c.save(w);
        LOGGER.info(w.toString());
    }

&lt;p&gt;    public static void dump(final CombinedConfiguration c) throws ConfigurationException &lt;/p&gt;
{
        final XMLConfiguration dump = new XMLConfiguration(c);
        dump(dump);
    }


&lt;p&gt;and resulting output  (Last section is where the output is : the attribute is moved to top level):&lt;br/&gt;
14:41:53.704 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  AttributeTest - &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt; &lt;br/&gt;
&amp;lt;configuration&amp;gt; &lt;br/&gt;
&amp;lt;key1 override=&quot;USER&quot;&amp;gt;value1&amp;lt;/key1&amp;gt; &lt;br/&gt;
&amp;lt;key2 override=&quot;USER2&quot;&amp;gt;value2&amp;lt;/key2&amp;gt; &lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;14:41:53.704 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  AttributeTest - &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt; &lt;br/&gt;
&amp;lt;configuration&amp;gt; &lt;br/&gt;
&amp;lt;key2 override=&quot;USER2&quot;&amp;gt;value2_spec&amp;lt;/key2&amp;gt; &lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;14:41:53.720 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  AttributeTest - &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt; &lt;br/&gt;
&amp;lt;configuration&amp;gt; &lt;br/&gt;
&amp;lt;key2 override=&quot;USER2&quot;&amp;gt;value2_spec&amp;lt;/key2&amp;gt; &lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;

&lt;p&gt;14:41:53.720 &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; INFO  AttributeTest - &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt; &lt;br/&gt;
&amp;lt;configuration override=&quot;USER2&quot;&amp;gt; &lt;br/&gt;
&amp;lt;key2&amp;gt;value2_spec&amp;lt;/key2&amp;gt; &lt;br/&gt;
&amp;lt;key1 override=&quot;USER&quot;&amp;gt;value1&amp;lt;/key1&amp;gt; &lt;br/&gt;
&amp;lt;/configuration&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13016710" author="jdmc562" created="Thu, 7 Apr 2011 06:08:13 +0000"  >&lt;p&gt;I tried to debug to get more info : it seems that the issue is linke to the following : &lt;br/&gt;
In the hierarchicalConfiguration$Node.visit the visitBeforeChildren is called on the visitor. This visitor sets the references of the nodes correctly. Except when the node concerned is a viewnode, it creates a new Node based on this. When coming back to the visit afterwards, logic continues based on the children which still contain the viewnode and thus the wrong or absent reference. I currently have not enough knowledge of the code to understand how this best should work.&lt;/p&gt;

&lt;p&gt;tnx&lt;/p&gt;

&lt;p&gt;Jo&lt;/p&gt;</comment>
                            <comment id="13018062" author="oliver.heger@t-online.de" created="Sun, 10 Apr 2011 10:07:15 +0000"  >&lt;p&gt;A fix was applied in subversion. Many thanks for this report and your detailed analysis!&lt;/p&gt;

&lt;p&gt;A note regarding the configuration2 branch: The problem probably does not exist here because there is no transformation of ViewNodes to other nodes (this is actually the result of a refactoring which could not be fully finished because of the requirement to stay binary compatible). However, it is currently not possible to copy a combined configuration into an XMLConfiguration easily. So this assumption cannot be verified.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12475585" name="AttributeTest.java" size="1381" author="jdmc562" created="Wed, 6 Apr 2011 12:58:45 +0000"/>
                            <attachment id="12475583" name="component1.xml" size="170" author="jdmc562" created="Wed, 6 Apr 2011 12:58:45 +0000"/>
                            <attachment id="12475584" name="component1_spec.xml" size="137" author="jdmc562" created="Wed, 6 Apr 2011 12:58:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 10 Apr 2011 10:07:15 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33873</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l7av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>