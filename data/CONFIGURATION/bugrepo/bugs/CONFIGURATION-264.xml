<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:40:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-264/CONFIGURATION-264.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-264] SubnodeConfiguration does not see reloads of its parent configuration</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-264</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;The problem can be reproduced as follows:&lt;/p&gt;

&lt;p&gt;1 config = new XMLConfiguration(&quot;c:&lt;br class=&quot;atl-forced-newline&quot; /&gt;conf.xml&quot;);&lt;br/&gt;
2 config.setReloadingStrategy(new FileChangedReloadingStrategy());&lt;br/&gt;
3 SubnodeConfiguration parentItemConfig = config.configurationAt(&quot;parent-item&quot;);&lt;br/&gt;
4 String ss2 = parentItemConfig.getString(&quot;sub-item&quot;);&lt;br/&gt;
5 //Now, &amp;lt;sub-item&amp;gt; node value changes to &quot;new_value&quot;&lt;br/&gt;
6 ss2 = parentItemConfig.getString(&quot;sub-item&quot;); // still returns old_value&lt;/p&gt;</description>
                <environment></environment>
        <key id="12367203">CONFIGURATION-264</key>
            <summary>SubnodeConfiguration does not see reloads of its parent configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oliver.heger@t-online.de">Oliver Heger</assignee>
                                    <reporter username="oliver.heger@t-online.de">Oliver Heger</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 Apr 2007 14:22:27 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:48 +0000</updated>
                            <resolved>Sat, 21 Apr 2007 14:35:13 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12489707" author="oliver.heger@t-online.de" created="Wed, 18 Apr 2007 12:07:39 +0000"  >&lt;p&gt;To make a SubnodeConfiguration compatible with reloads of its parent configuration two things need to be changed:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;An access of the subnode configuration needs to trigger the parent configuration, so that it can check if a reload is required.&lt;/li&gt;
	&lt;li&gt;When the parent configuration is reloaded, its set of nodes is completely replaced. So the subnode configuration has to be reconstructed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;To achieve this, it is necessary to store in the subnode configuration the expression that was used to construct it. Then, when the subnode configuration&apos;s root node is queried (which happens for every property access), the parent can be asked to re-evaluate the expression and return the new root node. This will also trigger a reload of the parent if necessary.&lt;/p&gt;

&lt;p&gt;This solution has the following drawbacks:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;It impacts the performance of SubnodeConfiguration because for each property access an additional query has to be performed on the parent.&lt;/li&gt;
	&lt;li&gt;If the expression engine is changed on the parent configuration, we are lost.&lt;/li&gt;
	&lt;li&gt;Some updates of the parent configuration may cause unexpected results. As an example consider that the parent configuration contains a list of properties and the subnode configuration points to a single element of this list. If now a list element before this element is removed, the subnode configuration will point to a different list element when it is reconstructed. This is because the expression the subnode configuration is based on cannot be updated according to changes on the parent&apos;s properties.&lt;/li&gt;
	&lt;li&gt;The parent configuration could be changed in a way that the subnode configuration becomes invalid (e.g. if the root node of the subnode configuration is removed).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Because of these drawbacks I would like to make this solution optional: I would add a new configurationAt() method to HierarchicalConfiguration that takes an additional boolean argument. If this flag is set to true, the subnode configuration will do the described checks and thus will be aware of reloads of its parent. Otherwise (which is the default) the subnode configuration will behave as it does now (and miss the reloads).&lt;/p&gt;</comment>
                            <comment id="12490620" author="oliver.heger@t-online.de" created="Sat, 21 Apr 2007 14:35:13 +0000"  >&lt;p&gt;A fix was applied that implements the changes outlined before. HierarchicalConfiguration&apos;s configurationAt() method now supports an additional boolean parameter. If this parameter is set to true, reloads of the parent configuration will be detected.&lt;/p&gt;</comment>
                            <comment id="12520108" author="ifridkina" created="Wed, 15 Aug 2007 21:50:14 +0000"  >&lt;p&gt;Can you add similar parameter to the configurationsAt() method.&lt;/p&gt;</comment>
                            <comment id="12521188" author="oliver.heger@t-online.de" created="Mon, 20 Aug 2007 18:27:56 +0000"  >&lt;p&gt;Unfortunately, with the configurationsAt() method it is not as easy.&lt;/p&gt;

&lt;p&gt;The problem is that for making a subnode configuration aware of updates, the exact key to the root node must be known. This is not the case for the configurationsAt() method because the passed in key refers to an arbitrary number of nodes. How the single nodes of this set can be uniquely identified, depends on the currently used expression engine. Currently the ExpressionEngine interface does not provide a method for retrieving the exact key of a passed in node. So there is no chance to obtain this information.&lt;/p&gt;

&lt;p&gt;In the next major release I will probably add such a method to the ExpressionEngine interface. Then this problem could be solved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 15 Aug 2007 21:50:14 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33851</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l6on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>