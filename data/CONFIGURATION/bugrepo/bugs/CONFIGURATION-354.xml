<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:47:23 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-354/CONFIGURATION-354.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-354] XML configuration handles non-default list delimiter bad way</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-354</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;When setting the list separator character the XML configuration engine does not handle the lists properly. Sample code:&lt;/p&gt;

&lt;p&gt;Junit test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testConfig() {
        CompositeConfiguration conf = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            conf = (CompositeConfiguration) &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConfigurationFactory(&lt;span class=&quot;code-quote&quot;&gt;&quot;config.xml&quot;&lt;/span&gt;).getConfiguration();
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ConfigurationException ex) {
            Logger.getLogger(TestConfig.class.getName()).log(Level.SEVERE, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, ex);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
        }
        PrintStream o = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out;
        conf.setListDelimiter(conf.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;list.delimiter&quot;&lt;/span&gt;).charAt(0));
        o.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;c=&quot;&lt;/span&gt; + conf.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;c&quot;&lt;/span&gt;));
        o.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;x=&quot;&lt;/span&gt;+conf.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;key.subkey(1)&quot;&lt;/span&gt;));
        o.print(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.version&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The config.xml contains&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;xml fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;application.xml&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and finally the application.xml is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;windows-1250&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;konfig&amp;gt;
    &amp;lt;list&amp;gt;&amp;lt;delimiter&amp;gt;\,&amp;lt;/delimiter&amp;gt;&amp;lt;/list&amp;gt;
    &amp;lt;key&amp;gt;
        &amp;lt;subkey&amp;gt;one,two,three&amp;lt;/subkey&amp;gt;
        &amp;lt;subkey &amp;gt;four&amp;lt;/subkey&amp;gt;
    &amp;lt;/key&amp;gt;
    &amp;lt;c&amp;gt;${key.subkey(1)}&amp;lt;/c&amp;gt;
&amp;lt;/konfig&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The resulting output is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;c=two
x=two
1.6.0_07
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is correct so far. This is the case when I comment out the &lt;tt&gt;setListDelimiter&lt;/tt&gt; code line. After this I change the application.xml to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;windows-1250&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;konfig&amp;gt;
    &amp;lt;list&amp;gt;&amp;lt;delimiter&amp;gt;;&amp;lt;/delimiter&amp;gt;&amp;lt;/list&amp;gt;
    &amp;lt;key&amp;gt;
        &amp;lt;subkey&amp;gt;one;two;three&amp;lt;/subkey&amp;gt;
        &amp;lt;subkey &amp;gt;four&amp;lt;/subkey&amp;gt;
    &amp;lt;/key&amp;gt;
    &amp;lt;c&amp;gt;${key.subkey(1)}&amp;lt;/c&amp;gt;
&amp;lt;/konfig&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;even though I expect the same result what I got was:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;c=four
x=four
1.6.0_07
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Do I miss some point or &lt;tt&gt;setListDelimiter&lt;/tt&gt; does not work for XML files?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP Home edition, Java 1.6.0_07&lt;/p&gt;</environment>
        <key id="12411112">CONFIGURATION-354</key>
            <summary>XML configuration handles non-default list delimiter bad way</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="verhas">Peter Verhas</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 Dec 2008 12:17:09 +0000</created>
                <updated>Sun, 21 Dec 2008 17:28:08 +0000</updated>
                            <resolved>Sun, 21 Dec 2008 17:28:08 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12658399" author="oliver.heger@t-online.de" created="Sun, 21 Dec 2008 16:59:18 +0000"  >&lt;p&gt;The handling of list delimiters is always a source of problems and confusion.&lt;/p&gt;

&lt;p&gt;However, in this case it really works as designed. The problem is that you call &lt;tt&gt;setListDelimiter()&lt;/tt&gt; &lt;b&gt;after&lt;/b&gt; loading the configuration. Citing the Javadocs of &lt;tt&gt;setListDelimiter()&lt;/tt&gt;:&lt;/p&gt;

&lt;p&gt;&lt;cite&gt;Change the list delimiter for this configuration. Note: this change will only be effective for new parsings. If you want it to take effect for all loaded properties use the no arg constructor and call this method before setting the source.&lt;/cite&gt;&lt;/p&gt;

&lt;p&gt;In your case this means you have to specify the list delimiter before the configuration is actually loaded by the configuration factory. This can be done in &lt;tt&gt;config.xml&lt;/tt&gt; by specifying an additional attribute for the &lt;tt&gt;&amp;lt;xml&amp;gt;&lt;/tt&gt; element:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &amp;lt;xml fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;application.xml&quot;&lt;/span&gt; listDelimiter=&lt;span class=&quot;code-quote&quot;&gt;&quot;;&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Note: I have not tried this out for &lt;tt&gt;ConfigurationFactory&lt;/tt&gt;, but it will work using &lt;tt&gt;DefaultConfigurationBuilder&lt;/tt&gt;. It is recommended to use the latter class; its API is almost identical to &lt;tt&gt;ConfigurationFactory&lt;/tt&gt;, but it provides many more features.)&lt;/p&gt;

&lt;p&gt;You first experiment works because with &quot;,&quot; you are using the default list delimiter. So the call to &lt;tt&gt;setListDelimiter()&lt;/tt&gt; does not change anything.&lt;/p&gt;</comment>
                            <comment id="12658401" author="verhas" created="Sun, 21 Dec 2008 17:28:08 +0000"  >&lt;p&gt;I tried to modify the &lt;tt&gt;config.xml&lt;/tt&gt; file as you pointed and it works fine. This also means that now I did try it out for &lt;tt&gt;ConfigurationFactory&lt;/tt&gt;. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I was not aware that &lt;tt&gt;config.txt&lt;/tt&gt; may also define the list delimiter.&lt;/p&gt;

&lt;p&gt;As for my case this is a very good practice. I am developing company policy regarding the use of commons config and I will discourage to use list inside XML configuration. This means that listDelimiter will be set to something like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;configuration&amp;gt;
  &amp;lt;xml fileName=&lt;span class=&quot;code-quote&quot;&gt;&quot;application.xml&quot;&lt;/span&gt; listDelimiter=&lt;span class=&quot;code-quote&quot;&gt;&quot;\u0000&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which will prevent to interpret any probable character as list delimiter.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Peter&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 21 Dec 2008 16:59:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33945</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uq0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177355</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>