<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Fri Dec 02 18:20:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-641/CONFIGURATION-641.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-641] XMLConfiguration.load may throw NPE</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-641</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;I expect that &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    URL url = Test.class.getResource( &quot;/Test.xml&quot;);	
    XMLConfiguration config = new XMLConfiguration();
    config.read( url.openStream());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Would read the XML file.  However it will throw a NPE at line 967&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; private void load(InputSource source) throws ConfigurationException
    {
        try
        {
            URL sourceURL = locator.getSourceURL(); // &amp;lt;- NPE here
            if (sourceURL != null)
            {
                source.setSystemId(sourceURL.toString());
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I believe that testing for locator == null first will solve the problem as the rest of the code in the method does not appear to use it.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Java 8 / Linux&lt;/p&gt;</environment>
        <key id="13021969">CONFIGURATION-641</key>
            <summary>XMLConfiguration.load may throw NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="claudenw">Claude Warren</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Nov 2016 23:40:42 +0000</created>
                <updated>Thu, 1 Dec 2016 21:00:33 +0000</updated>
                            <resolved>Thu, 1 Dec 2016 21:00:33 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15681474" author="oliver.heger@t-online.de" created="Sun, 20 Nov 2016 17:07:25 +0000"  >&lt;p&gt;Agreed that it is not a good style to throw a NPE here. However, the underlying problem here is that the read() method should not be called directly, but a &lt;tt&gt;FileHandler&lt;/tt&gt; object should be used to load or save a configuration as described at&lt;br/&gt;
&lt;a href=&quot;http://commons.apache.org/proper/commons-configuration/userguide/howto_filebased.html#File_Operations_on_Configurations&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://commons.apache.org/proper/commons-configuration/userguide/howto_filebased.html#File_Operations_on_Configurations&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The documentation of read() and write() methods should be improved to state this.&lt;/p&gt;</comment>
                            <comment id="15682952" author="claudenw" created="Mon, 21 Nov 2016 09:11:40 +0000"  >&lt;p&gt;(posted to user@commons.apache.org)  For background see:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-641?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CONFIGURATION-641?&lt;/a&gt;&lt;br/&gt;
page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;&lt;br/&gt;
focusedCommentId=15681474#comment-15681474&lt;/p&gt;

&lt;p&gt;Perhaps there is a bigger problem with the semantics of the classes.  I&lt;br/&gt;
come late to this project having used version 1.x and not participated or&lt;br/&gt;
followed any of the development discussion for 2.x versions.  So from a&lt;br/&gt;
pseudo-noob point of view perhaps the Configuration objects should not have&lt;br/&gt;
a read/write method that does not take a FileHandler object.&lt;/p&gt;

&lt;p&gt;I think this makes sense in that you can create a configuration and do a&lt;br/&gt;
lot with it without reading or writeing it.  The read/write issues arise&lt;br/&gt;
because of resolution issues in reading/writing (e.g. resolving include&lt;br/&gt;
statements).&lt;/p&gt;

&lt;p&gt;Perhaps in version 2.2 the read/write methods could be deprecated in favor&lt;br/&gt;
of _read() and _write() (renaming the methods in FileBased) and FileHandler&lt;br/&gt;
could be renamed to IOHandler.  So reading from a stream, file, ByteBuffer,&lt;br/&gt;
etc would be handled by the IOHandler.  It seem counter inturitive that a&lt;br/&gt;
FileHandler would be needed to read/write a configuration to a Stream.&lt;/p&gt;

&lt;p&gt;Just thoughts.  Any comments?&lt;/p&gt;

&lt;p&gt;Claude&lt;/p&gt;

&lt;p&gt;On Sun, Nov 20, 2016 at 5:07 PM, Oliver Heger (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;




&lt;p&gt;&amp;#8211; &lt;br/&gt;
I like: Like Like - The likeliest place on the web&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://like-like.xenei.com&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://like-like.xenei.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
LinkedIn: &lt;a href=&quot;http://www.linkedin.com/in/claudewarren&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://www.linkedin.com/in/claudewarren&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15687861" author="oliver.heger@t-online.de" created="Tue, 22 Nov 2016 20:53:27 +0000"  >&lt;p&gt;These are valid points. However, Commons policy does only allow breaking (i.e. binary incompatible) changes in major versions. So such changes could only go in a version 3.0, but not 2.2.&lt;/p&gt;

&lt;p&gt;The intended use case for Configuration 2.x is that configurations are created via builders. In this setup no problems occur.  Direct file operations on configuration objects should be done only in exceptional cases, e.g. when copying a configuration to another location. So I think, documenting the limitations of read() and write() would be acceptable.&lt;/p&gt;</comment>
                            <comment id="15713064" author="oliver.heger@t-online.de" created="Thu, 1 Dec 2016 21:00:33 +0000"  >&lt;p&gt;The documentation of the &lt;tt&gt;FileBased&lt;/tt&gt; interface has been improved to clearly state that these methods should not be called directly by client code.&lt;/p&gt;

&lt;p&gt;The exceptions caused by an invalid use of this mechanism now have better messages indicating the problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 20 Nov 2016 17:07:25 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            21 hours ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36jif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>