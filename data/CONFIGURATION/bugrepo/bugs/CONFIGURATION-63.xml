<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:52:37 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-63/CONFIGURATION-63.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-63] [configuration] ConfigurationUtils.locate throws NullPointerException if the context ClassLoader is null</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-63</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;When the locate method attempts to find resource location from the context classpath &lt;br/&gt;
(lines 375-384 in ConfigurationUtils.java) it fails (on line 378) if the context &lt;br/&gt;
ClassLoader cannot be retrieved for the current thread.&lt;br/&gt;
I suppose this bug is quite difficult to reproduce. I came accross it when I and a &lt;br/&gt;
colleague of mine were testing a Java API (kept in one jar) that is called from C++ &lt;br/&gt;
application. In the static initializer of a Java class I used the next line to load &lt;br/&gt;
settings:&lt;br/&gt;
config = new PropertiesConfiguration(ConfigurationUtils.locate(&quot;properties/routing.&lt;br/&gt;
properties&quot;));&lt;br/&gt;
It worked fine if the class was used from another Java class that was normally loaded &lt;br/&gt;
by JVM (for example my tests passed). But when my Java classes were executed by JVM &lt;br/&gt;
started from C++ application it resulted in the next exception:&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.configuration.ConfigurationUtils.&lt;br/&gt;
locate(ConfigurationUtils.java:378)&lt;br/&gt;
	at org.apache.commons.configuration.ConfigurationUtils.&lt;br/&gt;
locate(ConfigurationUtils.java:255)&lt;br/&gt;
...&lt;br/&gt;
It is obvious from the ConfigurationUtils code that loader variable got null value &lt;br/&gt;
(line 377) for some reason so the next step threw the exception.&lt;br/&gt;
I suppose this bug can be easily fixed (just to add an additional check if loader is &lt;br/&gt;
not null).&lt;br/&gt;
As a workaround I will try to call locate method with a given base parameter (but it &lt;br/&gt;
needs to determine location of my jar so it is a kind of overheads though it would &lt;br/&gt;
work I hope).&lt;/p&gt;

&lt;p&gt;Sorry for my English.&lt;/p&gt;

&lt;p&gt;Hope it is useful,&lt;br/&gt;
Denis&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: Windows XP&lt;br/&gt;
Platform: PC&lt;/p&gt;</environment>
        <key id="12343005">CONFIGURATION-63</key>
            <summary>[configuration] ConfigurationUtils.locate throws NullPointerException if the context ClassLoader is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nomus@yandex.ru">nomus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Mar 2006 19:47:07 +0000</created>
                <updated>Wed, 25 Apr 2007 22:47:00 +0000</updated>
                            <resolved>Wed, 25 Apr 2007 22:47:00 +0000</resolved>
                                    <version>1.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12411689" author="ebourg" created="Fri, 31 Mar 2006 19:52:57 +0000"  >&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-79&quot; title=&quot;[configuration] ConfigurationUtils.locate throws NullPointerException if the context ClassLoader is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-79&quot;&gt;&lt;del&gt;COM-2854&lt;/del&gt;&lt;/a&gt; has been marked as a duplicate of this bug. ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12411690" author="ebourg" created="Fri, 31 Mar 2006 20:04:00 +0000"  >&lt;p&gt;Could you could try to set the context classloader with something like this and&lt;br/&gt;
see if it solves your issue ?&lt;/p&gt;

&lt;p&gt;Thread.currentThread().setContextClassLoader(Configuration.class.getClassLoader());&lt;/p&gt;</comment>
                            <comment id="12411691" author="nomus@yandex.ru" created="Tue, 4 Apr 2006 22:43:21 +0000"  >&lt;p&gt;(In reply to comment #2)&lt;br/&gt;
&amp;gt; Could you could try to set the context classloader with something like this and&lt;br/&gt;
&amp;gt; see if it solves your issue ?&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Thread.currentThread().setContextClassLoader(Configuration.class.getClassLoader());&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;Sorry for a long silence (work and other affairs).&lt;/p&gt;

&lt;p&gt;As you had suggested I added line&lt;br/&gt;
Thread.currentThread().setContextClassLoader(RequestManager.class.getClassLoader());&lt;br/&gt;
just before&lt;br/&gt;
config = new PropertiesConfiguration(ConfigurationUtils.locate(&quot;properties/routing.&lt;br/&gt;
properties&quot;));&lt;br/&gt;
And now it works all right.&lt;/p&gt;

&lt;p&gt;Thank you very much.&lt;/p&gt;</comment>
                            <comment id="12411692" author="oliver.heger@t-online.de" created="Mon, 10 Apr 2006 23:59:05 +0000"  >&lt;p&gt;An additional check was added to avoid NPEs when the TCCL is null. So you don&apos;t&lt;br/&gt;
need to set it manually any more.&lt;/p&gt;</comment>
                            <comment id="12411693" author="oliver.heger@t-online.de" created="Sat, 15 Apr 2006 17:14:45 +0000"  >&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-14&quot; title=&quot;[configuration] ConfigurationUtils.locate throws NullPointerException if the context ClassLoader is null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-14&quot;&gt;&lt;del&gt;COM-2852&lt;/del&gt;&lt;/a&gt; has been marked as a duplicate of this bug. ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39169</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 31 Mar 2006 19:52:57 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tf87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169776</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>