<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 20:00:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-228/CONFIGURATION-228.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-228] XMLConfiguration.subset() with FileChangedReloadingStrategy does *not* &apos;see&apos; file changes</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-228</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;XMLConfiguration.subset() with FileChangedReloadingStrategy does &lt;b&gt;not&lt;/b&gt; &apos;see&apos; file changes&lt;/p&gt;

&lt;p&gt;Configuration.xml:&lt;br/&gt;
&amp;lt;conf&amp;gt;&lt;br/&gt;
    &amp;lt;parent-item&amp;gt;&lt;br/&gt;
        &amp;lt;sub-item&amp;gt;old_value&amp;lt;/sub-item&amp;gt;&lt;br/&gt;
    &amp;lt;/parent-item&amp;gt;&lt;br/&gt;
&amp;lt;/conf&amp;gt;&lt;/p&gt;

&lt;p&gt;1. XMLConfiguration is loaded:&lt;br/&gt;
            config = new XMLConfiguration(&quot;c:&lt;br class=&quot;atl-forced-newline&quot; /&gt;conf.xml&quot;);&lt;br/&gt;
            config.setReloadingStrategy(new FileChangedReloadingStrategy());&lt;/p&gt;

&lt;p&gt;2. Now, &amp;lt;sub-item&amp;gt; node value changes to &quot;new_value&quot;,&lt;br/&gt;
and the code:&lt;br/&gt;
            Configuration parentItemConfig = config.subset(&quot;parent-item&quot;); &lt;span class=&quot;error&quot;&gt;&amp;#91;AA&amp;#93;&lt;/span&gt;&lt;br/&gt;
            String ss2 = parentItemConfig.getString(&quot;sub-item&quot;);&lt;br/&gt;
returns &quot;old_value&quot; !!!&lt;/p&gt;

&lt;p&gt;while:  config.getString(&quot;parent-item.sub-item&quot;); returns new refreshed value.&lt;/p&gt;

&lt;p&gt;It is a bug, we have FileChangedReloadingStrategy, we create new subset in &lt;span class=&quot;error&quot;&gt;&amp;#91;AA&amp;#93;&lt;/span&gt; but receive old values.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;for now, workaround for config users is to call config.reload() when strategy.hasChanged()&amp;#93;&lt;/span&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12350493">CONFIGURATION-228</key>
            <summary>XMLConfiguration.subset() with FileChangedReloadingStrategy does *not* &apos;see&apos; file changes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oliver.heger@t-online.de">Oliver Heger</assignee>
                                    <reporter username="januszst">Janusz Studzizba</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Sep 2006 11:34:34 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:43 +0000</updated>
                            <resolved>Mon, 16 Oct 2006 20:26:45 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="12436935" author="oliver.heger@t-online.de" created="Fri, 22 Sep 2006 17:31:29 +0000"  >&lt;p&gt;I think the problem here is that the subset configuration returned by XMLConfiguration is not life, i.e. it is not really connected to the parent configuration. There was a bug report (&lt;a href=&quot;https://issues.apache.org/jira/browse/CONFIGURATION-212&quot; title=&quot;[configuration] The subset configuration returned by HierarchicalConfiguration is not &amp;quot;life&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CONFIGURATION-212&quot;&gt;&lt;del&gt;CONFIGURATION-212&lt;/del&gt;&lt;/a&gt;) describing this problem.&lt;/p&gt;

&lt;p&gt;In the current code base there is the new method configurationAt(String key) in HierarichicalConfiguration that returns a life configuration. You can try this method as an alternative.&lt;/p&gt;

&lt;p&gt;But maybe the subset() implementation should be changed to return a life subset, too.&lt;/p&gt;</comment>
                            <comment id="12437475" author="januszst" created="Mon, 25 Sep 2006 07:19:56 +0000"  >&lt;p&gt;Olivier,&lt;/p&gt;

&lt;p&gt;IMHO it is not a &quot;life&quot; subset link to parent configuration. issue.&lt;br/&gt;
See my code line designated with &lt;span class=&quot;error&quot;&gt;&amp;#91;AA&amp;#93;&lt;/span&gt;:&lt;br/&gt;
   Configuration parentItemConfig = config.subset(&quot;parent-item&quot;);   //&lt;span class=&quot;error&quot;&gt;&amp;#91;AA&amp;#93;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;I am creating &lt;b&gt;new&lt;/b&gt; subset from parent configuration, parent config is realoded, while newly created subset from such reloaded refreshed parent returns old values..&lt;/p&gt;

&lt;p&gt;I looked into source code, and IMHO realod() method should be called in somewhere in subset() implementation&lt;br/&gt;
as it is called in eg. AbstractFileConfiguration.getProperty()&lt;/p&gt;</comment>
                            <comment id="12437659" author="oliver.heger@t-online.de" created="Mon, 25 Sep 2006 19:52:26 +0000"  >&lt;p&gt;Sounds plausible. I will have a look.&lt;/p&gt;

&lt;p&gt;Is there any chance that you can provide a junit test? If not, that&apos;s no problem; I think the issue should not be too difficult to reproduce.&lt;/p&gt;</comment>
                            <comment id="12437755" author="januszst" created="Tue, 26 Sep 2006 06:46:31 +0000"  >&lt;p&gt;Unfortunately I don&apos;t have any jUnit test ready, but please follow the steps 1 and 2 from my initial description.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;and please note the sentence below 2. step &amp;quot;while: config.getString(&amp;quot;parent-item.sub-item&amp;quot;); returns new refreshed value. &amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12442691" author="oliver.heger@t-online.de" created="Mon, 16 Oct 2006 20:26:45 +0000"  >&lt;p&gt;I added some new test cases and committed a fix. Please double check.&lt;br/&gt;
Thanks for spotting this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 22 Sep 2006 17:31:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33903</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0upl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>