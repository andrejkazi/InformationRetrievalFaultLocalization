<!-- 
RSS generated by JIRA (6.3.4#6332-sha1:51bc225ef474afe3128b2f66878477f322397b16) at Thu Dec 01 19:59:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/CONFIGURATION-253/CONFIGURATION-253.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.3.4</version>
        <build-number>6332</build-number>
        <build-date>15-08-2014</build-date>
    </build-info>

<item>
            <title>[CONFIGURATION-253] FileConfiguration getFile(), getFileName(), getBasePath() are not always consistent</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-253</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Taken from the maillinglist:&lt;/p&gt;

&lt;p&gt;&amp;gt; I have a properties configuration which is loaded without a problem.&lt;br/&gt;
&amp;gt; Later in my application I will access the file which is aligned to &lt;br/&gt;
&amp;gt; this configuration.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; final IFileConfiguration _productConf = &lt;br/&gt;
&amp;gt; _conf.getProductConfigurations().get(_productId);&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; log.debug(&quot;product conf file &quot; + _productConf.getFile());&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; log.debug(&quot;product conf filename &quot; + _productConf.getFileName());&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; log.debug(&quot;product conf base path &quot; + _productConf.getBasePath());&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; The methods _productConf.getFile() and _productConf.getFileName() &lt;br/&gt;
&amp;gt; returning null but the getBasePath() returns a path which is correct &lt;br/&gt;
&amp;gt; (like &lt;a href=&quot;file:/C:/Projects/workspace/myProject/project.properties&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;file:/C:/Projects/workspace/myProject/project.properties&lt;/a&gt;). Seems &lt;br/&gt;
&amp;gt; for me like a bug because the PropertiesConfiguration is loaded &lt;br/&gt;
&amp;gt; correct and works.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; By side: I have also set a file reloading strategy for this &lt;br/&gt;
&amp;gt; configuration.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Any ideas what&apos;s happen in this case or where I can find the problem? &lt;br/&gt;
&amp;gt; It would be nicer to get the File() instead the BasePath which has to &lt;br/&gt;
&amp;gt; be converted into a URL before I can access the whole properties file.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Thanks in advance,&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; - Thomas Wabner&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; &lt;br/&gt;
Thomas,&lt;/p&gt;

&lt;p&gt;you are right, the conversions between a base path, a file name, and a File are not always consistent. How did you load the configuration (this determines, which internal fields are set)?&lt;/p&gt;

&lt;p&gt;I would recommend to work with URLs, i.e. the method getURL(). A file-based configuration&apos;s URL is always defined.&lt;/p&gt;

&lt;p&gt;If you like, you can open a Jira ticket for this problem.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;br/&gt;
Oliver&lt;/p&gt;

&lt;p&gt;The file is loaded in this way:&lt;/p&gt;

&lt;p&gt;_productConf = new ProductConfiguration();&lt;br/&gt;
_productConf.load(FileTools.getPathForList(_propductPathList).getPath());&lt;/p&gt;

&lt;p&gt;means the load method gets an String and not an File.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12362903">CONFIGURATION-253</key>
            <summary>FileConfiguration getFile(), getFileName(), getBasePath() are not always consistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oliver.heger@t-online.de">Oliver Heger</assignee>
                                    <reporter username="waffel">Thomas Wabner</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Feb 2007 09:23:51 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:47 +0000</updated>
                            <resolved>Sat, 26 May 2007 19:38:51 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="12473327" author="bayard" created="Thu, 15 Feb 2007 09:34:18 +0000"  >&lt;p&gt;Is this really an IO issue, or is it Configuration?&lt;/p&gt;</comment>
                            <comment id="12473328" author="waffel" created="Thu, 15 Feb 2007 09:47:00 +0000"  >&lt;p&gt;upps, sorry. It is of corse commons-configuration related. Sorry for that mistake. Is there is a way to move this bug or should I close and create it again in the right product?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Thomas Wabner&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12473513" author="oliver.heger@t-online.de" created="Thu, 15 Feb 2007 20:55:55 +0000"  >&lt;p&gt;We are just in the process of getting out the 1.4 release. I am reluctant to change the behavior of the getFile() and getFileName() methods now because this may cause a surprise for existing code. So this issue will be addressed in the following release.&lt;/p&gt;</comment>
                            <comment id="12491438" author="oliver.heger@t-online.de" created="Tue, 24 Apr 2007 20:34:39 +0000"  >&lt;p&gt;After having a deeper look into this issue I am no longer sure that this is a bug. You loaded the configuration with the load(String) method, and the Javadocs for this method state&lt;/p&gt;

&lt;p&gt;&quot;This does not change the source of the configuration (i.e. the internally maintained file name). Use one of the setter methods for this purpose.&quot;&lt;/p&gt;

&lt;p&gt;However I tend to agree that the current behavior is confusing. Why can you obtain a URL and a path name from a configuration loaded this way, but no File?&lt;/p&gt;

&lt;p&gt;I have written a test case and implemented a (simple) fix, which would cause getFile() to return a valid file name in this case. What do others think? Should we change the current behavior?&lt;/p&gt;</comment>
                            <comment id="12491569" author="waffel" created="Wed, 25 Apr 2007 09:13:26 +0000"  >&lt;p&gt;I think that for my case the javadoc is not very helpful. If I create a new Configuration, there cannot be a &quot;source&quot; - or in this case the source is null. &lt;/p&gt;

&lt;p&gt;If a load method doesn&apos;t change the source, what means in this case &quot;load&quot;?&lt;/p&gt;

&lt;p&gt;If I load any data into a configuration, I change the source of the configuration. The source in the configuration object should always point to the latest source object from outside.&lt;/p&gt;

&lt;p&gt;I think we have to clearify what we mean with &quot;load&quot;.&lt;/p&gt;

&lt;p&gt;Olivers quick fix means that the load method works as I aspected -&amp;gt; it changes the source in the configuration to the last source for the configuration.&lt;/p&gt;

&lt;p&gt;This should always only available for a file based configuration. In the case of the database configuration the bahavior should be differnet&lt;br/&gt;
(I don&apos;t have yet take a look into the database stuff).&lt;/p&gt;

&lt;p&gt;So I vote to change the current behavior.&lt;/p&gt;</comment>
                            <comment id="12491581" author="ebourg" created="Wed, 25 Apr 2007 09:50:02 +0000"  >&lt;p&gt;If the URL and the basepath are set on calling load(), then this is a bug since the source should not change.&lt;/p&gt;

&lt;p&gt;If we have to change the current behavior, I prefer that load() changes the source only if no source is already set.&lt;/p&gt;</comment>
                            <comment id="12491750" author="oliver.heger@t-online.de" created="Wed, 25 Apr 2007 20:05:13 +0000"  >&lt;p&gt;The behavior since (I think) the 1.2 release is that a load() call sets the sourceURL if none has been set so far. This is required for supporting features like auto save and reloading strategies for configurations created this way (there is no hint in the docs that a source must be set explicitly for using these features, so I assume this is alright). What my fix does is to always keep the getFile() method in sync with the sourceURL; so if a sourceURL exists, getFile() will now return a corresponding File object.&lt;/p&gt;

&lt;p&gt;Note that the URL is only modified on an initial load() call, i.e. if already a source was set, it won&apos;t be changed by a following load() call. This is intended. It allows for instance the easy creation of combined configurations: you can call load() as often as you like on a file-based configuration; the properties of the single sources will be accumulated. Then you can save the accumulated properties to the original source.&lt;/p&gt;</comment>
                            <comment id="12491759" author="oliver.heger@t-online.de" created="Wed, 25 Apr 2007 20:34:02 +0000"  >&lt;p&gt;I applied the fix as described in my last comment. Thomas, can you please check if this works for you?&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="12491778" author="ebourg" created="Wed, 25 Apr 2007 21:14:52 +0000"  >&lt;p&gt;That looks good, the structure of the chained else/if could even be simplified.&lt;/p&gt;</comment>
                            <comment id="12499349" author="oliver.heger@t-online.de" created="Sat, 26 May 2007 19:38:51 +0000"  >&lt;p&gt;I think this issue can now be marked as fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>Date of First Response</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 15 Feb 2007 09:34:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33973</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uoxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177180</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        </customfields>
    </item>
</channel>
</rss>