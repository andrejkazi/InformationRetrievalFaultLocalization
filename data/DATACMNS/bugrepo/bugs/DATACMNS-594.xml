<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 12:59:42 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATACMNS-594/DATACMNS-594.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATACMNS-594] Strange generics behaviour for multiply nested generic types</title>
                <link>https://jira.spring.io/browse/DATACMNS-594</link>
                <project id="10510" key="DATACMNS">Spring Data Commons</project>
                    <description>&lt;p&gt;This behaviour was incorrectly reported reopening &lt;a href=&quot;https://jira.spring.io/browse/DATACMNS-590&quot; title=&quot;Bug in generics detection for multiply nested generic types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DATACMNS-590&quot;&gt;&lt;del&gt;DATACMNS-590&lt;/del&gt;&lt;/a&gt; by me, sorry about that &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;After the resolution of &lt;a href=&quot;https://jira.spring.io/browse/DATACMNS-590&quot; title=&quot;Bug in generics detection for multiply nested generic types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DATACMNS-590&quot;&gt;&lt;del&gt;DATACMNS-590&lt;/del&gt;&lt;/a&gt;, we found another strange behaviour using Spring Data MongoDB, but only disabling the default type mapper resolution, which resolves the class type to map using an attribute. See github repo and run unit tests.&lt;/p&gt;

&lt;p&gt;I simplify a lot the domain model and use the generics in the minimal expression as possible to reproduce this, and I think now is much easier to understand.&lt;/p&gt;

&lt;p&gt;Take a close look at:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;CustomerNonTypedRepositoryTest.testFindOne&lt;/li&gt;
	&lt;li&gt;CustomerNonTypedRepositoryTest.testFindOneItem&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Retrieving a Customer and navigate to ItemType will lead to a ClassCastException due the lost of generic type. But if we retrieve an Item and navigate to ItemType is ok.&lt;/p&gt;

&lt;p&gt;I know this is a corner case, and as said in &lt;a href=&quot;https://jira.spring.io/browse/DATACMNS-590&quot; title=&quot;Bug in generics detection for multiply nested generic types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DATACMNS-590&quot;&gt;&lt;del&gt;DATACMNS-590&lt;/del&gt;&lt;/a&gt; this will probably lead into a &apos;work-as-designed&apos; resolution.&lt;/p&gt;

&lt;p&gt;We can&apos;t use the default type, because we are not using Spring to populate the database, but we think we can workaround this providing a custom type mapper.&lt;/p&gt;

&lt;p&gt;Thank you &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="60640">DATACMNS-594</key>
            <summary>Strange generics behaviour for multiply nested generic types</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="padilo">Pablo D&#237;az-L&#243;pez</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Nov 2014 03:39:52 +0000</created>
                <updated>Tue, 27 Jan 2015 10:29:35 +0000</updated>
                            <resolved>Wed, 19 Nov 2014 09:32:12 +0000</resolved>
                                    <version>1.9.1 (Evans SR1)</version>
                                    <fixVersion>1.10 M1 (Fowler)</fixVersion>
                    <fixVersion>1.8.5 (Dijkstra SR5)</fixVersion>
                    <fixVersion>1.9.2 (Evans SR2)</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="110358" author="padilo" created="Thu, 4 Dec 2014 08:57:25 +0000"  >&lt;p&gt;Tested on Fowler M1 and It works like a charm on more complicated scenarios with six levels of inner objects with some generics and inheritances involved.&lt;/p&gt;

&lt;p&gt;Thank you &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                    <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46714</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>olivergierke</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07yun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46518</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46416</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/padilo/spring-data-mongodb-mapping-test/tree/generics-mapping-behaviour]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10480" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="69">54 - Fowler M1</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>