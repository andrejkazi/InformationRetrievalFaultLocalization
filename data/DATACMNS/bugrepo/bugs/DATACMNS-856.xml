<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 13:12:31 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATACMNS-856/DATACMNS-856.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATACMNS-856] DomainClassConverter throws erroneous exception in matches</title>
                <link>https://jira.spring.io/browse/DATACMNS-856</link>
                <project id="10510" key="DATACMNS">Spring Data Commons</project>
                    <description>&lt;p&gt;&lt;tt&gt;DomainClassConverter#matches&lt;/tt&gt; throws a &lt;tt&gt;ConversionMatchAbbreviationException&lt;/tt&gt; instead of correctly returning false in at least the following scenario:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sourceType is not related to targetType&lt;/li&gt;
	&lt;li&gt;targetType has a Spring Data repository with a String ID&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The &lt;tt&gt;matches&lt;/tt&gt; method performs the following logic:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;sourceType is not assignable to targetType&lt;/li&gt;
	&lt;li&gt;targetType has a repository&lt;/li&gt;
	&lt;li&gt;the ID type is String&lt;/li&gt;
	&lt;li&gt;sourceType is not a String, and I can&apos;t convert sourceType to a String&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The correct response is therefore simply not to match (and in my case, to let SpEL attempt to bind to a different method overload). The converter instead throws an exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="68662">DATACMNS-856</key>
            <summary>DomainClassConverter throws erroneous exception in matches</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="w_c_smith">Christopher Smith</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 May 2016 19:38:06 +0000</created>
                <updated>Wed, 15 Jun 2016 17:33:15 +0000</updated>
                            <resolved>Tue, 31 May 2016 16:18:05 +0000</resolved>
                                    <version>1.12.1 (Hopper SR1)</version>
                                    <fixVersion>1.11.5 (Gosling SR5)</fixVersion>
                    <fixVersion>1.12.2 (Hopper SR2)</fixVersion>
                    <fixVersion>1.13 M1 (Ingalls)</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="129406" author="olivergierke" created="Tue, 17 May 2016 21:30:37 +0000"  >&lt;p&gt;How do you actually manage to get a &lt;tt&gt;ConversionMatchAbbreviationException&lt;/tt&gt; escape the &lt;tt&gt;DomainClassConverter&lt;/tt&gt;? The only place that throws the exception is &lt;tt&gt;ToEntityConverter.matches(&#8230;)&lt;/tt&gt;, which in turn only gets called from &lt;tt&gt;DomainClassConverter.matches(&#8230;)&lt;/tt&gt; which immediately handles the exception. So actually there&apos;s no way it could escape that method, could it?&lt;/p&gt;

&lt;p&gt;It would also be helpful to find more about what you&apos;re actually doing. You&apos;re already quite deep in the internals of &lt;tt&gt;DomainClassConverter&lt;/tt&gt; and I have a hard time following what kind of usage scenario is actually causing issues (you mention some SpEL being involved but I don&apos;t quite get the connection).&lt;/p&gt;</comment>
                            <comment id="129500" author="w_c_smith" created="Tue, 24 May 2016 01:22:28 +0000"  >&lt;p&gt;As best I understand the &lt;tt&gt;DomainClassConverter&lt;/tt&gt; is being registered (from &lt;tt&gt;SpringDataWebConfiguration&lt;/tt&gt;) in the same conversion service being used by SpEL. SpEL then is attempting to resolve a method with overloads that take &lt;tt&gt;A&lt;/tt&gt; or &lt;tt&gt;B&lt;/tt&gt; where &lt;tt&gt;A&lt;/tt&gt; is a class with a repository. SpEL tries to convert a &lt;tt&gt;B&lt;/tt&gt; into an &lt;tt&gt;A&lt;/tt&gt; using the conversion service, and when it calls the &lt;tt&gt;matches&lt;/tt&gt; method in &lt;tt&gt;DomainClassConverter&lt;/tt&gt;, the converter throws instead of returning false for &quot;conversion strategy doesn&apos;t match&quot;.&lt;/p&gt;</comment>
                            <comment id="129517" author="olivergierke" created="Tue, 24 May 2016 14:08:12 +0000"  >&lt;p&gt;Well, I am afraid I can&apos;t get into this in more detail without a sample project. &lt;tt&gt;DomainClassConverter.matches(&#8230;)&lt;/tt&gt; clearly &lt;a href=&quot;https://github.com/spring-projects/spring-data-commons/blob/1.12.1.RELEASE/src/main/java/org/springframework/data/repository/support/DomainClassConverter.java#L85-L92&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;catches the exception&lt;/a&gt; you claim escaping the method.&lt;/p&gt;

&lt;p&gt;Any chance you provide a sample that fails?&lt;/p&gt;</comment>
                            <comment id="129672" author="olivergierke" created="Tue, 31 May 2016 15:13:32 +0000"  >&lt;p&gt;Investigating the example attached to the linked ticket that sounds suspiciously similar it feels like Boot is somehow picking up the internal class for some reason and thus makes it subject to direct usage which it was never intended for. I think I found a way to implement the same conditional logic without throwing an exception.&lt;/p&gt;</comment>
                            <comment id="129674" author="olivergierke" created="Tue, 31 May 2016 16:18:05 +0000"  >&lt;p&gt;This should be fixed in master and the maintenances branches. Feel free to give the snapshots a try.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="63340">DATACMNS-685</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 17 May 2016 21:30:37 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>olivergierke</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i098cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10480" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="111">Hopper SR2</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>