<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 13:14:40 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATACMNS-155/DATACMNS-155.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATACMNS-155] OutOfMemoryError caught and converted to IllegalArgumentException</title>
                <link>https://jira.spring.io/browse/DATACMNS-155</link>
                <project id="10510" key="DATACMNS">Spring Data Commons</project>
                    <description>&lt;p&gt;spring-data-commons-core-1.1.0.RELEASE.jar&lt;/p&gt;


&lt;p&gt;PROBLEM:&lt;br/&gt;
Class AbstractConstructorEntityInstantiator line 39:&lt;br/&gt;
The code &lt;br/&gt;
  throw new IllegalArgumentException(e.getTargetException());&lt;br/&gt;
Translates the OutOfMemoryError into an IllegalArgumentException.&lt;br/&gt;
After that the IllegalArgumentException makes it all the way up the application layers. &lt;br/&gt;
As a result the Error will likely be caught and logged somewhere instead of letting it terminate the program.&lt;/p&gt;

&lt;p&gt;Maybe this concept has been wisely chosen, and has been discussed before. I could not find &lt;br/&gt;
anything about it, and consider it to be wrong.&lt;/p&gt;



&lt;p&gt;SUGGESTED SOLUTION:&lt;/p&gt;

&lt;p&gt;replace old:&lt;br/&gt;
    throw new IllegalArgumentException(e.getTargetException());&lt;/p&gt;

&lt;p&gt;with new:&lt;br/&gt;
    throw translateOrThrow( (InvocationTargetException)e );&lt;/p&gt;

&lt;p&gt;    private RuntimeException translateOrThrow(InvocationTargetException e) {&lt;br/&gt;
        Throwable targetEx = e.getTargetException();&lt;br/&gt;
        if (targetEx instanceof Error) &lt;/p&gt;
{ //or VirtualMachineError
            throw (Error)targetEx;
        }
&lt;p&gt; else if (targetEx instanceof RuntimeException) &lt;/p&gt;
{
            throw (RuntimeException)targetEx;
        }
&lt;p&gt; else &lt;/p&gt;
{
            //either keep, but i consider it wrong
            //return new IllegalArgumentException(targetEx);
            //or better:
            return new RuntimeException(targetEx);
            //or maybe:
            //return new CustomRuntimeException(targetEx);
        }
&lt;p&gt;    }&lt;/p&gt;



&lt;p&gt;OTHER PLACES:&lt;br/&gt;
There are many places in spring data jdbc that look like &lt;br/&gt;
  catch (Throwable ex) &lt;/p&gt;
{
    logger.debug(&quot;Could not do this or that&quot;, ex);
  }

&lt;p&gt;These completely swallow the out of memory situation in case it happens right there.&lt;br/&gt;
So if there&apos;s going to be a change then maybe it should be applied in multiple places.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="43032">DATACMNS-155</key>
            <summary>OutOfMemoryError caught and converted to IllegalArgumentException</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="gonfi">gonfi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Apr 2012 17:10:34 +0000</created>
                <updated>Mon, 25 Mar 2013 09:25:46 +0000</updated>
                            <resolved>Fri, 1 Jun 2012 03:25:53 +0000</resolved>
                                    <version>1.1 Final</version>
                                    <fixVersion>1.3 Final</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="77821" author="olivergierke" created="Fri, 20 Apr 2012 04:17:34 +0000"  >&lt;p&gt;Recent versions of the Spring Data modules do not use this code anymore. The entire package containing this code and will be removed for the upcoming release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 20 Apr 2012 04:17:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ixz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30154</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>