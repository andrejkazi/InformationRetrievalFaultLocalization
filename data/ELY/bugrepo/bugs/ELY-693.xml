<!-- 
RSS generated by JIRA (7.2.3#72005-sha1:73be91d2b96fc29303a7eb6820acf420e5d0ed65) at Tue Dec 06 17:59:05 EST 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.jboss.org/si/jira.issueviews:issue-xml/ELY-693/ELY-693.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>JBoss Issue Tracker</title>
    <link>https://issues.jboss.org</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-us</language>    <build-info>
        <version>7.2.3</version>
        <build-number>72005</build-number>
        <build-date>06-10-2016</build-date>
    </build-info>

<item>
            <title>[ELY-693] Elytron SPNEGO &quot;continuation required&quot; situation</title>
                <link>https://issues.jboss.org/browse/ELY-693</link>
                <project id="12315320" key="ELY">WildFly Elytron</project>
                    <description>&lt;p&gt;I have problem to achieve this scenario with elytron:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Client sends non kerberos OID mechanism as most preferred with non kerberos ticket&lt;/li&gt;
	&lt;li&gt;Server response with &quot;continuation required&quot;&lt;/li&gt;
	&lt;li&gt;Client sends kerberos ticket&lt;/li&gt;
	&lt;li&gt;Server response with 401 instead of 200&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Actually, it is scenario tested in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. It worked correctly in EAP 7.0 . Also works with elytron when client sends non-kerberos OID mechanism with kerberos ticket.&lt;/p&gt;

&lt;p&gt;Problem as I see is that SpnegoAuthenticationMechanism: &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Creates &lt;tt&gt;gssContext&lt;/tt&gt; with first provided ticket (non-kerberos) and sends &quot;continuation required&quot;&lt;/li&gt;
	&lt;li&gt;Client provide proper kerberos ticket, but that anyway leads to 401 bare challenge, because &lt;tt&gt;gssContext&lt;/tt&gt; was already created in first step and is not tried to make again.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Setting to critical as it behaves differently compared to EAP 7.0 and IMHO it doesn&apos;t comply to spec &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. Similar error was resolved in EAP 7.0 (&lt;a href=&quot;https://issues.jboss.org/browse/JBEAP-3709&quot; title=&quot;[EAP 7] Negotiation/UnderTow does not handle the &amp;quot;Continuation Required&amp;quot; situation correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JBEAP-3709&quot;&gt;&lt;del&gt;JBEAP-3709&lt;/del&gt;&lt;/a&gt;) as blocker because customer case existed for that.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/wildfly/wildfly/blob/15f9a4f2b5a10cc3acbaa2df57d5cc13db50ff43/testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/security/loginmodules/negotiation/SPNEGOLoginModuleTestCase.java#L344&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/wildfly/wildfly/blob/15f9a4f2b5a10cc3acbaa2df57d5cc13db50ff43/testsuite/integration/basic/src/test/java/org/jboss/as/test/integration/security/loginmodules/negotiation/SPNEGOLoginModuleTestCase.java#L344&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://tools.ietf.org/html/rfc4178&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://tools.ietf.org/html/rfc4178&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12657104">ELY-693</key>
            <summary>Elytron SPNEGO &quot;continuation required&quot; situation</summary>
                <type id="1" iconUrl="https://issues.jboss.org/secure/viewavatar?size=xsmall&amp;avatarId=13263&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.jboss.org/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.jboss.org/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Done</resolution>
                                        <assignee username="honza889">Jan Kalina</assignee>
                                    <reporter username="honza889">Jan Kalina</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 09:12:29 -0400</created>
                <updated>Wed, 2 Nov 2016 12:51:27 -0400</updated>
                            <resolved>Wed, 2 Nov 2016 05:37:59 -0400</resolved>
                                                    <fixVersion>1.1.0.Beta13</fixVersion>
                                    <component>Authentication Mechanisms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                    <issuelinks>
                            <issuelinktype id="12310120">
                    <name>Cloners</name>
                                            <outwardlinks description="cloned from">
                                        <issuelink>
            <issuekey id="12657098">JBEAP-6644</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310220" key="org.jboss.labs.jira.plugin.jboss-custom-field-types-plugin:multiurl">
                        <customfieldname>Git Pull Request</customfieldname>
                        <customfieldvalues>
                            https://github.com/wildfly-security/wildfly-elytron/pull/534
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310641" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Number of attachments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310640" key="com.atlassian.jira.toolkit:comments">
                        <customfieldname>Number of comments</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12311940" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1|i0a0fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310840" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>