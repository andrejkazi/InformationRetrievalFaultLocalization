<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 10:32:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-936/SEC-936.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-936] NPE in AbstractFallbackMethodDefinitionSource</title>
                <link>https://jira.spring.io/browse/SEC-936</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;A NullPointerException occurs in the following code while calling mi.getThis().getClass():&lt;/p&gt;

&lt;p&gt;    public ConfigAttributeDefinition getAttributes(Object object) throws IllegalArgumentException {&lt;br/&gt;
        Assert.notNull(object, &quot;Object cannot be null&quot;);&lt;/p&gt;

&lt;p&gt;        if (object instanceof MethodInvocation) &lt;/p&gt;
{
        	MethodInvocation mi = (MethodInvocation) object;
            return getAttributes(mi.getMethod(), mi.getThis().getClass());
        }

&lt;p&gt;I guess the mi.getThis() method returns null when there is no target object. This is the case, for example, when the last interceptor in the chain handles the method call instead of a &apos;real&apos; target object (like Spring&apos;s HttpInvokerClientInterceptor). &lt;/p&gt;

&lt;p&gt;I think the getAttributes() method accepts a null targetClass, so a simple mi.getThis()==null?null:mi.getThis().getClass() would fix this issue.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="23327">SEC-936</key>
            <summary>NPE in AbstractFallbackMethodDefinitionSource</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="rsenden">Ruud Senden</reporter>
                        <labels>
                    </labels>
                <created>Sun, 27 Jul 2008 21:01:44 +0000</created>
                <updated>Sat, 6 Feb 2016 06:38:14 +0000</updated>
                            <resolved>Fri, 15 Aug 2008 13:33:05 +0000</resolved>
                                    <version>2.0.3</version>
                                    <fixVersion>2.0.4</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="37944" author="rsenden" created="Mon, 28 Jul 2008 00:56:39 +0000"  >&lt;p&gt;Apart from the code listed above, the MapBasedDefinitionSource$RegisteredMethod inner class constructor explicitly checks that the registeredJavaType is not null. Also, the MapBasedDefinitionSource.findAttributesSpecifiedAgainst() method does a clazz.getSuperClass() which will throw a NullPointerException if clazz is null.&lt;/p&gt;

&lt;p&gt;Either the code in MapBasedDefinitionSource needs to be modified to work with a null class, or the calling code (AbstractFallbackMethodDefinitionSource.computeAttributes()) needs to make sure that a null class is never passed.&lt;/p&gt;</comment>
                            <comment id="38015" author="luke" created="Wed, 30 Jul 2008 01:06:39 +0000"  >&lt;p&gt;Please could you provide a description of the steps taken to reproduce the issue, or the configuration options that lead to it.&lt;/p&gt;</comment>
                            <comment id="38021" author="rsenden" created="Wed, 30 Jul 2008 02:15:26 +0000"  >&lt;p&gt;Here&apos;s an example testcase that triggers the issue. &lt;/p&gt;

&lt;p&gt;Note that the example itself is not a real-world scenario; I choose to use the Spring BeanFactory interface as the bean interface because it is readily available. Also, of course usually you will want to secure the server side.&lt;/p&gt;

&lt;p&gt;However, we have similar use cases where there is no target bean name defined for the ProxyFactoryBean.&lt;/p&gt;</comment>
                            <comment id="38953" author="luke" created="Fri, 15 Aug 2008 13:33:05 +0000"  >&lt;p&gt;I&apos;ve added a check for a null value returned by MethodInvocation.getThis(). Changed MapBasedMethodDefinitionSource to ignore calls to findAttributes() with a null target class (all its entries require a class) and the fallback option in AbstractFallbackMethodDefinitionSource is used if the targetClass is null (i.e. Method.getDeclaringClass() will be used as the target class instead and MapBasedMethodDefinitionSource should be able to find a match).&lt;/p&gt;</comment>
                            <comment id="126959" author="issuemaster" created="Sat, 6 Feb 2016 06:38:14 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1192&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1192&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="14480" name="Test.java" size="587" author="rsenden" created="Wed, 30 Jul 2008 02:15:26 +0000"/>
                            <attachment id="14481" name="test.xml" size="2953" author="rsenden" created="Wed, 30 Jul 2008 02:15:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 30 Jul 2008 01:06:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19956</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03zkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23306</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>