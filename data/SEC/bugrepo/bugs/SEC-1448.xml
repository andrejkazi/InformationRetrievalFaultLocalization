<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:14:29 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1448/SEC-1448.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1448] LocalVariableTableParameterNameDiscoverer doesn&apos;t find Generic method parameters</title>
                <link>https://jira.spring.io/browse/SEC-1448</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;I&apos;m using spring security to secure my service. Here is a sample secured method:&lt;/p&gt;

&lt;p&gt;public interface Foo&amp;lt;T extends MyModel&amp;gt; {&lt;br/&gt;
	@PreAuthorize(&quot;hasPermission(#item, &apos;create&apos;)&quot;)&lt;br/&gt;
	public T create(T item);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;In my junit test I get a NullPointerException when spring parses the EL:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.springframework.security.access.expression.method.MethodSecurityEvaluationContext.addArgumentsAsVariables(MethodSecurityEvaluationContext.java:66)&lt;br/&gt;
	at org.springframework.security.access.expression.method.MethodSecurityEvaluationContext.lookupVariable(MethodSecurityEvaluationContext.java:48)&lt;br/&gt;
	at org.springframework.expression.spel.ExpressionState.lookupVariable(ExpressionState.java:122)&lt;br/&gt;
	at org.springframework.expression.spel.ast.VariableReference.getValueInternal(VariableReference.java:52)&lt;br/&gt;
	at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:59)&lt;br/&gt;
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:93)&lt;br/&gt;
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:98)&lt;br/&gt;
	at org.springframework.security.access.expression.ExpressionUtils.evaluateAsBoolean(ExpressionUtils.java:11)&lt;br/&gt;
	at org.springframework.security.access.expression.method.ExpressionBasedPreInvocationAdvice.before(ExpressionBasedPreInvocationAdvice.java:42)&lt;br/&gt;
	at org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter.vote(PreInvocationAuthorizationAdviceVoter.java:55)&lt;br/&gt;
	at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:50)&lt;br/&gt;
	at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:204)&lt;br/&gt;
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:65)&lt;br/&gt;
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)&lt;br/&gt;
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)&lt;br/&gt;
	at $Proxy25.create(Unknown Source)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;snip here comes the junit invocation part&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Debugging the offending code, I noticed that:&lt;br/&gt;
org.springframework.core.LocalVariableTableParameterNameDiscoverer#getParameterNames(Method method) returns null.&lt;/p&gt;

&lt;p&gt;I guess it is because the method&apos;s parameter type is Generic. Can I fix it? Do you have any idea where in the class it&apos;s going &quot;wrong&quot; ?&lt;/p&gt;


&lt;p&gt;I&apos;d be happy to fix it and submitt a patch but I&apos;, not sure where I have to change the code.&lt;/p&gt;


&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Jan&lt;/p&gt;


</description>
                <environment>Spring 3.0.1 Maven release</environment>
        <key id="30676">SEC-1448</key>
            <summary>LocalVariableTableParameterNameDiscoverer doesn&apos;t find Generic method parameters</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="jtheuer">Jan Heuer</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Mar 2010 03:59:12 +0000</created>
                <updated>Sat, 6 Feb 2016 06:14:11 +0000</updated>
                            <resolved>Sat, 27 Mar 2010 05:26:48 +0000</resolved>
                                    <version>3.0.1</version>
                                    <fixVersion>3.0.3</fixVersion>
                    <fixVersion>3.1.0.M1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="52251" author="pmularien" created="Sat, 20 Mar 2010 23:38:35 +0000"  >&lt;p&gt;It appears that this is caused by LocalVariableTableParameterNameDiscoverer not being updated to include getGenericParameterTypes() in addition to getParameterTypes() when discovering the available method parameters.&lt;/p&gt;</comment>
                            <comment id="52279" author="juergen.hoeller" created="Mon, 22 Mar 2010 02:52:37 +0000"  >&lt;p&gt;I guess this is rather because of an interface being introspected... Method parameter names are only stored in the class file in case of an actual method body, i.e. not in the case of abstract methods or interface methods. Spring Security should be changed to not rely on the presence of method parameter names there.&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;</comment>
                            <comment id="52465" author="luke" created="Sat, 27 Mar 2010 05:26:48 +0000"  >&lt;p&gt;This is actually due to the use of ClassUtils.getMostSpecificMethod() which doesn&apos;t work well with generics. Switched to AopUtils instead.&lt;/p&gt;</comment>
                            <comment id="124365" author="issuemaster" created="Sat, 6 Feb 2016 06:14:11 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1688&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1688&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 20 Mar 2010 23:38:35 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19516</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03yaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>23097</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>