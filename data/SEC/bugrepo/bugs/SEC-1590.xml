<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 09:58:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1590/SEC-1590.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1590] WebAuthenticatonDetails.doPopulateAdditionalInformation should be removed</title>
                <link>https://jira.spring.io/browse/SEC-1590</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;I have a class that extends org.springframework.security.web.authentication.WebAuthenticationDetails class and implements org.springframework.security.core.authority.GrantedAuthoritiesContainer.&lt;/p&gt;

&lt;p&gt;It overrides the method doPopulateAdditionalInformation to retrieve the additional information from the request headers.&lt;br/&gt;
When running the application I receive an illegalArgumentException thrown from Assert.notNull, with the message &quot;Cannot pass a null GrantedAuthority collection&quot;.&lt;/p&gt;

&lt;p&gt;Investigating this showed that the WebAuthenticationDetails constructor calls doPopulateAdditionalInformation as its last step, this does initialize my members with correct values, but after the constructor returns, my derived class constructor gets called, re-initializing the fields again, re-setting my List&amp;lt;GrantedAuthority&amp;gt; back to null.&lt;/p&gt;
</description>
                <environment>SLES 10, Sun JDK 6-20, JBoss eap 4.3</environment>
        <key id="33760">SEC-1590</key>
            <summary>WebAuthenticatonDetails.doPopulateAdditionalInformation should be removed</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="legolas">Marcel Dullaart</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Oct 2010 06:30:37 +0000</created>
                <updated>Sat, 6 Feb 2016 06:15:39 +0000</updated>
                            <resolved>Tue, 2 Nov 2010 12:51:12 +0000</resolved>
                                    <version>3.0.3</version>
                                    <fixVersion>3.1.0.M2</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="59120" author="legolas" created="Tue, 12 Oct 2010 08:22:38 +0000"  >&lt;p&gt;Hereunder is the exact exception &lt;br/&gt;
java.lang.IllegalArgumentException: Cannot pass a null GrantedAuthority collection org.springframework.util.Assert.notNull(Assert.java:112) org.springframework.security.core.userdetails.User.sortAuthorities(User.java:141)&lt;/p&gt;</comment>
                            <comment id="60077" author="luke" created="Fri, 29 Oct 2010 05:23:24 +0000"  >&lt;p&gt;I&apos;m not sure why that method is there at all and I don&apos;t really see that it serves any useful purpose. My first instinct would be just to remove it.&lt;/p&gt;

&lt;p&gt;Can&apos;t you just do whatever work you need to in your object&apos;s constructor?&lt;/p&gt;
</comment>
                            <comment id="60079" author="legolas" created="Fri, 29 Oct 2010 06:31:30 +0000"  >&lt;p&gt;That&apos;s what I ended up doing, first I explicitly called the doPopulateAdditionalInformation method as last step of my constructor, re-initializing the fields to the correct values. That, obviously resulted in my fields being initialized twice, so I renamed the method and only that method now gets called.&lt;br/&gt;
So I guess you can remove that method, its empty anyway, any derived class can than just add the functionality needed.&lt;/p&gt;

&lt;p&gt;The current implementation suggests that the method can be overridden, while doing so turns out be faulty.&lt;/p&gt;</comment>
                            <comment id="124519" author="issuemaster" created="Sat, 6 Feb 2016 06:15:39 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1829&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1829&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 29 Oct 2010 05:23:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19396</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03u6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>