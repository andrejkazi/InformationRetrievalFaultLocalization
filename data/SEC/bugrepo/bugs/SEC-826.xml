<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 09:58:30 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-826/SEC-826.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-826] Support for JPA PersistenceContext annotation broken</title>
                <link>https://jira.spring.io/browse/SEC-826</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;When using the intercept-methods tag on a bean, the dao&apos;s used by the userSecurityService and the protected bean are not processed by the &lt;br/&gt;
PersistenceAnnotationBeanPostProcessor. This seems to be because the dao gets created before the PostProcessor and so in never seen by it. This like &lt;a href=&quot;#SEC-750&quot;&gt;SEC-750&lt;/a&gt; causes a null pointer when an attempt is made to authenticate the user.&lt;/p&gt;

&lt;p&gt;I believe that this is related to &lt;a href=&quot;#SEC-750&quot;&gt;SEC-750&lt;/a&gt; and &lt;a href=&quot;#SEC-773&quot;&gt;SEC-773&lt;/a&gt; however it still occurs in 2.0.0/2.5.4&lt;/p&gt;

&lt;p&gt;I have modified the test case form &lt;a href=&quot;#SEC-750&quot;&gt;SEC-750&lt;/a&gt; to demonstrate the problem. The unmodified test case runs fine on my system.&lt;/p&gt;

&lt;p&gt;My real world case is a little more complex in that I have a userSecurityService that uses one of my service components, that in turn uses a DAO that is used by another protected service.&lt;/p&gt;</description>
                <environment>Spring 2.5.4</environment>
        <key id="22077">SEC-826</key>
            <summary>Support for JPA PersistenceContext annotation broken</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="mhillary">Mark Hillary</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 May 2008 01:52:12 +0000</created>
                <updated>Sat, 6 Feb 2016 06:37:05 +0000</updated>
                            <resolved>Wed, 14 May 2008 03:49:27 +0000</resolved>
                                    <version>2.0.1</version>
                                    <fixVersion>2.0.2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="35552" author="mhillary" created="Sun, 11 May 2008 01:52:47 +0000"  >&lt;p&gt;modified example from &lt;a href=&quot;#SEC-750&quot;&gt;SEC-750&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="35553" author="mhillary" created="Sun, 11 May 2008 02:40:00 +0000"  >&lt;p&gt;Just to add to the above using &amp;lt;global-method-security jsr250-annotations=&quot;enabled&quot; /&amp;gt; does work.&lt;/p&gt;</comment>
                            <comment id="35554" author="luke" created="Sun, 11 May 2008 03:54:22 +0000"  >&lt;p&gt;Thanks for the report. However the attachment doesn&apos;t appear to work. A &quot;mvn test&quot; command first fails with a compilation error and after fixing that the application context fails to load with an &quot;Invalid property &apos;BODAO&apos; of bean class &lt;span class=&quot;error&quot;&gt;&amp;#91;sample.service.impl.UserServiceImpl&amp;#93;&lt;/span&gt;: No property &apos;BODAO&apos; found&quot; error. I will try to analyse the issue you&apos;ve reported but if you could supply a test case that displays the symptoms that would be very useful.&lt;/p&gt;</comment>
                            <comment id="35556" author="luke" created="Sun, 11 May 2008 04:10:01 +0000"  >&lt;p&gt;I think I&apos;ve fixed the context file (at least Im now getting a NPE), so don&apos;t worry about the test case.&lt;/p&gt;</comment>
                            <comment id="35557" author="luke" created="Sun, 11 May 2008 04:27:48 +0000"  >&lt;p&gt;OK. As far as I can see, this is the same issue as &lt;a href=&quot;https://jira.spring.io/browse/SEC-773&quot; title=&quot;global-method-security fails with JPA&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-773&quot;&gt;&lt;del&gt;SEC-773&lt;/del&gt;&lt;/a&gt;, which was fixed in 2.0.1. &lt;/p&gt;

&lt;p&gt;Your test case is set to run with 2.0.0-RC1 and you say the problem still occurs with 2.0.0, but you have reported the issue against 2.0.1. Have you tried 2.0.1? Once I&apos;d got the test case running, it failed with a NPE, but after switching the security jars to 2.0.1 it runs without any problem.&lt;/p&gt;

&lt;p&gt;Please could you make sure you are running against an up to date version and clarify the situation.&lt;/p&gt;</comment>
                            <comment id="35558" author="mhillary" created="Sun, 11 May 2008 04:51:04 +0000"  >&lt;p&gt;Sorry, that was my fault in packaging it. I just added the files I changed to the existing zip file, hence the configuration was wrong.&lt;/p&gt;

&lt;p&gt;For correction I am actually using the 2.0.1 release of spring security.&lt;/p&gt;</comment>
                            <comment id="35559" author="mhillary" created="Sun, 11 May 2008 04:54:42 +0000"  >&lt;p&gt;Just to add, the issue reported in &lt;a href=&quot;#SEC-773&quot;&gt;SEC-773&lt;/a&gt; does work for me. And I&apos;ve never tried 2.0.0 only 2.0.1.&lt;/p&gt;</comment>
                            <comment id="35560" author="mhillary" created="Sun, 11 May 2008 06:22:27 +0000"  >&lt;p&gt;I&apos;ve updated my configuration to use Maven to ensure I am pulling the right dependencies in. Sorry its taken me a while, I&apos;ve not used Maven before.&lt;/p&gt;

&lt;p&gt;Attached is my whole eclipse workspace for the test case in which I&apos;m still seeing the null pointer. Not sure if it matters but I&apos;m using JDK6 on windows XP.&lt;/p&gt;</comment>
                            <comment id="35662" author="luke" created="Wed, 14 May 2008 03:49:27 +0000"  >&lt;p&gt;I&apos;ve moved all injection of UserDetailsService objects from a BeanFactoryPostProcessor to a BeanPostProcessor which is more appropriate in any case and should prevent any early instantiation problems. It prevents the NPE in your test, but there appears to be another error in the test (I think due to calling persist() for an entity on which the Id has already been set). However the problem of persistence annotations being missed should now be fixed. Could you try an up-to-date sapshot please and see if you still have any problems?&lt;/p&gt;</comment>
                            <comment id="35723" author="mhillary" created="Thu, 15 May 2008 06:49:44 +0000"  >&lt;p&gt;Thanks Luke, that has fixed the problem for me. Cheers.&lt;/p&gt;</comment>
                            <comment id="35724" author="luke" created="Thu, 15 May 2008 06:57:28 +0000"  >&lt;p&gt;OK &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Thanks for your feedback. Closing the issue.&lt;/p&gt;</comment>
                            <comment id="126841" author="issuemaster" created="Sat, 6 Feb 2016 06:37:05 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1083&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1083&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="14050" name="JPASpringTest.zip" size="30865" author="mhillary" created="Sun, 11 May 2008 06:22:27 +0000"/>
                            <attachment id="14049" name="SpringSecurityJPAWithAnnotations.zip" size="17369" author="mhillary" created="Sun, 11 May 2008 01:52:47 +0000"/>
                            <attachment id="14054" name="mylyn-context.zip" size="4848" author="luke" created="Wed, 14 May 2008 03:45:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 11 May 2008 03:54:22 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04mrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27061</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>