<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:37:51 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1838/SEC-1838.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1838] FirewalledRequest.reset() is not called if there are no matching filters</title>
                <link>https://jira.spring.io/browse/SEC-1838</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;FilterChainProxy.doFilter() determines the list of filters that have to be applied to a request. If there are filters, this method delegates to VirtualFilterChain.doFilter(), which will reset the firewall request wrapper at the end of the chain.&lt;/p&gt;

&lt;p&gt;The problem occurs, if there are no filters: FilterChainProxy.doFilter() is creating an instance of FirewalledRequest nevertheless, which it passes on to the original chain. But it does not call the &quot;reset&quot; method this FirewalledRequest object.&lt;/p&gt;

&lt;p&gt;This situation occurs, if you map &quot;/&lt;b&gt;&quot; in web.xml to the Spring Security Filter Chain, but the Spring Security Filter Chain only handles &quot;/some/&lt;/b&gt;&quot; and &quot;/thing/*&quot;. With this mapping, there are URLs like &quot;/status&quot; which are passed to the security chain proxy, but which are not covered by a filter list. The effect is bug is, that the servlet which is mapped to &quot;/status&quot; will get an invalid pathInfo and servletPath.&lt;/p&gt;

&lt;p&gt;The resolution should be quite simple: If FilterChainProxy.doFilter() has an empty filter list for a given URL, it must not pass the firewalled request to the original chain but the original request. The line &quot;chain.doFilter(fwRequest, response);&quot; should be changed into &quot;chain.doFilter(servletRequest, response);&quot;.&lt;/p&gt;

&lt;p&gt;I don&apos;t know if Spring Security 3 is affected too, because we are using 2.0.x.&lt;/p&gt;</description>
                <environment></environment>
        <key id="40113">SEC-1838</key>
            <summary>FirewalledRequest.reset() is not called if there are no matching filters</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="mrenner">Martin Renner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2011 06:23:28 +0000</created>
                <updated>Sat, 6 Feb 2016 06:18:18 +0000</updated>
                            <resolved>Thu, 13 Oct 2011 07:39:01 +0000</resolved>
                                    <version>2.0.7</version>
                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="71241" author="mrenner" created="Wed, 12 Oct 2011 06:29:39 +0000"  >&lt;p&gt;BTW: If in the example given above &quot;/status&quot; is mapped to a servlet which calls&lt;/p&gt;

&lt;p&gt;request.getRequestDispatcher(&quot;/WEB-INF/jsp/status.jsp&quot;).forward(request, response);&lt;/p&gt;

&lt;p&gt;you will get a very strange error message from (at least) Jetty and Tomcat: &quot;/WEB-INF/jsp/status.jsp was not found&quot;. Although this file does exist! The reason is, that there is still the firewalled request wrapper which is holding the old values for the invocation of the servlet. However, &quot;RequestDispatcher.forward()&quot; is modifying these values to reflect the new path to the JSP page. As the firewalled request is still holding the old values and its &quot;reset&quot; method was never called, it passed these old values to the JSPServlet of Jasper. So this JSPServlet is working with invalid pathInfo and servletPath.&lt;/p&gt;</comment>
                            <comment id="71251" author="luke" created="Wed, 12 Oct 2011 08:26:48 +0000"  >&lt;p&gt;This is almost identical to a previous issue. Please review that issue, confirm that you are indeed using the latest release and if so, clarify what is different about your use case which prevents the previous fix from working.&lt;/p&gt;

&lt;p&gt;Not also that 2.0.x is no longer actively under development, so new releases are only likely to occur if serious vulnerabilities are reported.&lt;/p&gt;</comment>
                            <comment id="71274" author="mrenner" created="Thu, 13 Oct 2011 00:14:38 +0000"  >&lt;p&gt;Hi Luke,&lt;/p&gt;

&lt;p&gt;you are right: This is a duplicate of &lt;a href=&quot;https://jira.spring.io/browse/SEC-1608&quot; title=&quot;FirewalledRequest.reset() is not called for a resource with no filters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1608&quot;&gt;&lt;del&gt;SEC-1608&lt;/del&gt;&lt;/a&gt;. I have to check why our build system didn&apos;t pull 2.0.7.&lt;/p&gt;</comment>
                            <comment id="124788" author="issuemaster" created="Sat, 6 Feb 2016 06:18:18 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/2069&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/2069&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="34627">SEC-1608</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 12 Oct 2011 08:26:48 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>27673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03e8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>