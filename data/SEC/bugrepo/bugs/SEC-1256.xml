<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 10:57:00 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1256/SEC-1256.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1256] Cannot use bean configuration to configure a FilterSecurityMetadataSource with SpEL expressions due to hard-coded &quot;false&quot; value in code</title>
                <link>https://jira.spring.io/browse/SEC-1256</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;I ran into this as I was trying to configure a Spring Sec stack without the security namespace in place. In 3.0.0M2 there is a hard-coded &quot;false&quot; for useExpressions in the FilterInvocationSecurityMetadataSourceBeanDefinitionParser, at the following line (on or about line 47):&lt;/p&gt;

&lt;p&gt;        LinkedHashMap&amp;lt;RequestKey, List&amp;lt;ConfigAttribute&amp;gt;&amp;gt; requestMap =&lt;br/&gt;
        HttpSecurityBeanDefinitionParser.parseInterceptUrlsForFilterInvocationRequestMap(interceptUrls,&lt;br/&gt;
                convertPathsToLowerCase, false, parserContext);&lt;/p&gt;

&lt;p&gt;I believe this code should be augmented to look for the &quot;use-expressions&quot; attribute on the &amp;lt;sec:filter-security-metadata-source&amp;gt; element. The resultant code would look something like the following (note, I haven&apos;t been able to get a compilable version of Spring Sec from source, otherwise I&apos;d supply a patch &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ):&lt;/p&gt;

&lt;p&gt;        boolean useExpressions = false;&lt;br/&gt;
        if(StringUtils.hasLength(element.getAttribute(HttpSecurityBeanDefinitionParser.ATT_USE_EXPRESSIONS))) &lt;/p&gt;
{
        	useExpressions = Boolean.parseBoolean(element.getAttribute(HttpSecurityBeanDefinitionParser.ATT_USE_EXPRESSIONS));
        }
&lt;p&gt;        LinkedHashMap&amp;lt;RequestKey, List&amp;lt;ConfigAttribute&amp;gt;&amp;gt; requestMap =&lt;br/&gt;
        HttpSecurityBeanDefinitionParser.parseInterceptUrlsForFilterInvocationRequestMap(interceptUrls,&lt;br/&gt;
                convertPathsToLowerCase, useExpressions, parserContext);&lt;/p&gt;

&lt;p&gt;Note also that in order to use this code patch you&apos;ll have to expand the visibility of the constant reference ATT_USE_EXPRESSIONS.&lt;/p&gt;

&lt;p&gt;Since I can&apos;t verify that SpEL access declarations work with this fix (although they should), I can&apos;t guarantee this is all-inclusive, but hopefully it&apos;ll be close!&lt;/p&gt;

&lt;p&gt;Sample bean definition (although you probably don&apos;t need it):&lt;/p&gt;

&lt;p&gt;	&amp;lt;bean id=&quot;filterSecurityInterceptor&quot; class=&quot;org.springframework.security.web.access.intercept.FilterSecurityInterceptor&quot;&amp;gt;&lt;br/&gt;
	  &amp;lt;property name=&quot;authenticationManager&quot; ref=&quot;customAuthenticationManager&quot;/&amp;gt;&lt;br/&gt;
	  &amp;lt;property name=&quot;accessDecisionManager&quot; ref=&quot;affirmativeBased&quot;/&amp;gt;&lt;br/&gt;
	  &amp;lt;property name=&quot;securityMetadataSource&quot;&amp;gt;&lt;br/&gt;
	    &amp;lt;security:filter-security-metadata-source use-expressions=&quot;true&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;security:intercept-url pattern=&quot;/login.do&quot; access=&quot;permitAll&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;security:intercept-url pattern=&quot;/home.do&quot; access=&quot;permitAll&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;security:intercept-url pattern=&quot;/account/*.do&quot; access=&quot;hasRole(&apos;ROLE_USER&apos;) and fullyAuthenticated&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;security:intercept-url pattern=&quot;/*&quot; access=&quot;hasRole(&apos;ROLE_USER&apos;)&quot;/&amp;gt;&lt;br/&gt;
	    &amp;lt;/security:filter-security-metadata-source&amp;gt;&lt;br/&gt;
	  &amp;lt;/property&amp;gt;&lt;br/&gt;
	&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;You needn&apos;t worry about analyzing the expressions for correctness - I&apos;ve verified they work already using the standard &amp;lt;http use-expressions=&quot;true&quot;&amp;gt; format. Thanks for reviewing the bug!&lt;/p&gt;</description>
                <environment></environment>
        <key id="28181">SEC-1256</key>
            <summary>Cannot use bean configuration to configure a FilterSecurityMetadataSource with SpEL expressions due to hard-coded &quot;false&quot; value in code</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="pmularien">Peter Mularien</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Oct 2009 13:58:16 +0000</created>
                <updated>Sat, 6 Feb 2016 06:12:14 +0000</updated>
                            <resolved>Tue, 6 Oct 2009 03:41:48 +0000</resolved>
                                    <version>3.0.0 M2</version>
                                    <fixVersion>3.0.0 RC1</fixVersion>
                                    <component>Namespace</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="47236" author="luke" created="Tue, 6 Oct 2009 00:27:24 +0000"  >&lt;p&gt;Thanks for the report, Peter.&lt;/p&gt;

&lt;p&gt;The build should always be working fine (check &lt;a href=&quot;http://build.springsource.org/browse/SEC-TRUNK&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://build.springsource.org/browse/SEC-TRUNK&lt;/a&gt;). If you have a problem compiling then please report it separately, giving details of the error.&lt;/p&gt;</comment>
                            <comment id="47242" author="luke" created="Tue, 6 Oct 2009 03:41:48 +0000"  >&lt;p&gt;Should be fixed. Also requires that the correct FilterSecurityMetadataSource bean class be selected, depending on whether expressions are enabled or not.&lt;/p&gt;</comment>
                            <comment id="124159" author="issuemaster" created="Sat, 6 Feb 2016 06:12:14 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1492&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1492&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 6 Oct 2009 00:27:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03tlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22336</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>