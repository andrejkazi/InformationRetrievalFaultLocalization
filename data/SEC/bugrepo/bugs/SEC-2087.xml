<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 10:29:12 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-2087/SEC-2087.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-2087] GlobalMethodSecurityBeanDefinitionParser.AuthenticationManagerDelegator attempts to get a bean using the concrete implementation</title>
                <link>https://jira.spring.io/browse/SEC-2087</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;In the authenticate method of the AuthenticationManagerDelegator inner class, it is attempted to get a bean of class org.springframework.security.authentication.ProviderManager.&lt;br/&gt;
In the Eclipse Virgo container when the AuthenticationManager is referenced as a service, the ProviderManager will be wrapped inside a Proxy class and the following Exception will be thrown:&lt;/p&gt;

&lt;p&gt;Failed to call secure method org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named &apos;authenticationManager&apos; must be of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.springframework.security.authentication.ProviderManager&amp;#93;&lt;/span&gt;, but was actually of type &lt;span class=&quot;error&quot;&gt;&amp;#91;$Proxy94&amp;#93;&lt;/span&gt;&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:360)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)&lt;br/&gt;
at org.springframework.security.config.method.GlobalMethodSecurityBeanDefinitionParser$AuthenticationManagerDelegator.authenticate(GlobalMethodSecurityBeanDefinitionParser.java:386)&lt;/p&gt;

&lt;p&gt;The bean should be looked up by the org.springframework.security.authentication.AuthenticationManager interface.&lt;br/&gt;
The following change works properly for the described scenario.&lt;br/&gt;
Original code (at line 386):&lt;br/&gt;
try {&lt;br/&gt;
   delegate = beanFactory.getBean(authMgrBean, ProviderManager.class);&lt;br/&gt;
} catch (NoSuchBeanDefinitionException e) {&lt;/p&gt;

&lt;p&gt;Changed to:&lt;br/&gt;
try {&lt;br/&gt;
   delegate = beanFactory.getBean(authMgrBean, AuthenticationManager.class);&lt;br/&gt;
} catch (NoSuchBeanDefinitionException e) {&lt;/p&gt;</description>
                <environment>Spring-security in Eclipse Virgo container</environment>
        <key id="46387">SEC-2087</key>
            <summary>GlobalMethodSecurityBeanDefinitionParser.AuthenticationManagerDelegator attempts to get a bean using the concrete implementation</summary>
                <type id="7" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Defect</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rwinch">Rob Winch</assignee>
                                    <reporter username="rigas.grigoropoulos">Rigas Grigoropoulos</reporter>
                        <labels>
                            <label>aop</label>
                            <label>osgi</label>
                            <label>spring-security</label>
                    </labels>
                <created>Wed, 28 Nov 2012 14:57:49 +0000</created>
                <updated>Sat, 6 Feb 2016 06:20:49 +0000</updated>
                            <resolved>Thu, 25 Apr 2013 07:00:00 +0000</resolved>
                                    <version>3.1.3</version>
                                    <fixVersion>3.1.4</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>Namespace</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="89639" author="rwinch" created="Thu, 25 Apr 2013 07:00:01 +0000"  >&lt;p&gt;Thanks for taking the time to report this issue. This is fixed in both master and the 3.1.x branch&lt;/p&gt;</comment>
                            <comment id="125059" author="issuemaster" created="Sat, 6 Feb 2016 06:20:49 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/2321&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/2321&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 25 Apr 2013 07:00:01 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33187</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05zsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35006</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32889</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://stackoverflow.com/questions/13612498/spring-security-and-osgi/13614447]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>