<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:03:11 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-788/SEC-788.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-788] x509 authentication does not work properly</title>
                <link>https://jira.spring.io/browse/SEC-788</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;x509 authentication does not work properly&lt;/p&gt;

&lt;p&gt;I have an application with x509 authentication configured.&lt;/p&gt;

&lt;p&gt;First:&lt;/p&gt;

&lt;p&gt;In RC1 release my application startup properly. In final 2.0.0 release this exception occur:&lt;/p&gt;

&lt;p&gt;org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: No AuthenticationEntryPoint could be established.&lt;/p&gt;

&lt;p&gt;If I write the entry point bean like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;x509EntryPoint&quot; class=&quot;org.springframework.security.ui.x509.X509ProcessingFilterEntryPoint&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;everything work properly.&lt;br/&gt;
I think 2.0.0 should work automatic like RC1 &quot;OR&quot; x509 documentation section in the reference manual should document it.&lt;/p&gt;

&lt;p&gt;Second:&lt;/p&gt;

&lt;p&gt;When I do the first login with x509 certificate in my application, a 403 http status code occurs.&lt;br/&gt;
This happens only if a http-&amp;gt;https redirection is needed. &lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
First page is &quot;IS_AUTHENTICATED_ANONYMOUSLY&quot; and HTTP. Then user goes to a secure page over HTTPS.&lt;br/&gt;
The browser dialog appers to select the certificate. Then a 403 occur.&lt;/p&gt;

&lt;p&gt;If the first page is HTTPS everything work properly.&lt;/p&gt;

&lt;p&gt;I will attach the applicationContext and the error log.&lt;/p&gt;

&lt;p&gt;Sorry for my bad english.&lt;/p&gt;</description>
                <environment></environment>
        <key id="21818">SEC-788</key>
            <summary>x509 authentication does not work properly</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="michelz">Michel Zanini</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Apr 2008 03:16:44 +0000</created>
                <updated>Sat, 6 Feb 2016 06:36:37 +0000</updated>
                            <resolved>Tue, 22 Apr 2008 02:28:53 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="34964" author="michelz" created="Mon, 21 Apr 2008 03:18:57 +0000"  >&lt;p&gt;The application context and error log&lt;/p&gt;</comment>
                            <comment id="34967" author="michelz" created="Mon, 21 Apr 2008 04:07:47 +0000"  >&lt;p&gt;After 403 happens if I press f5 in my browser the user now login.&lt;/p&gt;

&lt;p&gt;I guess the problem is with anonymous authentication. &lt;/p&gt;

&lt;p&gt;When the user goes to secure page then this happen:&lt;br/&gt;
&quot;Access is denied (user is anonymous); redirecting to authentication entry point&quot;&lt;/p&gt;

&lt;p&gt;So, the X509ProcessingFilterEntryPoint is called and he throws 403 http status code error.&lt;/p&gt;

&lt;p&gt;If I comment the anonymous authentication 403 error does not happen.&lt;/p&gt;</comment>
                            <comment id="34996" author="luke" created="Tue, 22 Apr 2008 02:27:02 +0000"  >&lt;p&gt;Thanks very much for finding this (and for your analysis)! The first problem occurs when X.509 is used without any other mechanisms (which would normally provide an entry point). After RC1 the code was changed so that the entry point was fully established during parsing of the http element, rather than during post processing. The possibility of the x509 entry point being needed was overlooked. I&apos;ve added a check for this.&lt;/p&gt;

&lt;p&gt;I think the second error is a duplicate of the issue raised as &lt;a href=&quot;https://jira.spring.io/browse/SEC-776&quot; title=&quot;Http Session created for Anonymous request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-776&quot;&gt;&lt;del&gt;SEC-776&lt;/del&gt;&lt;/a&gt;. The initial request results in an Anonymous token being stored in the session, and the X.509 filter (or AbstractPreAuthenticatedProcessingFilter in fact) assumes that it doesn&apos;t need to perform any authentication. I&apos;ve done some testing which would indicate that this is the case, but would be grateful if you could also confirm that this fixes your problem.&lt;/p&gt;</comment>
                            <comment id="35051" author="michelz" created="Wed, 23 Apr 2008 10:48:18 +0000"  >&lt;p&gt;Thanks Luke!&lt;br/&gt;
With latest version from SVN everything works fine!&lt;/p&gt;</comment>
                            <comment id="35053" author="luke" created="Wed, 23 Apr 2008 11:17:02 +0000"  >&lt;p&gt;Excellent. Thanks.&lt;/p&gt;</comment>
                            <comment id="126798" author="issuemaster" created="Sat, 6 Feb 2016 06:36:37 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1049&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1049&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Related</name>
                                            <outwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="21716">SEC-776</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13985" name="appContext-and-log.zip" size="6254" author="michelz" created="Mon, 21 Apr 2008 03:18:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 22 Apr 2008 02:27:02 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20088</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02upb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>