<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 09:44:03 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1878/SEC-1878.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1878] DefaultFilterChainValidator throws UnsupportedOperationException</title>
                <link>https://jira.spring.io/browse/SEC-1878</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;If the expression used in the access attribute of the intercept-url element references a request element not supported by the new &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; org.springframework.security.web.FilterInvocation$DummyRequest class AND a custom-filter is defined, then the filterChainProxy bean will fail to be created &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. This is a regression from 3.0.6.RELEASE. &lt;/p&gt;

&lt;p&gt;For example: &lt;br/&gt;
   &amp;lt;security:custom-filter ref=&quot;myAuthFilter&quot; position=&quot;FIRST&quot; /&amp;gt;&lt;br/&gt;
   &amp;lt;security:intercept-url pattern=&quot;/**&quot;  access=&quot;request.parameterMap&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;test&amp;#39;&amp;#93;&lt;/span&gt; == null ? permitAll : permitAll&quot; /&amp;gt; &lt;br/&gt;
will fail with the stack trace below&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;There is an easy (hacky) workaround...just check the for request.contextPath = &apos;/cp&apos; (assuming you don&apos;t really have a /cp path!)...this works because contextPath is supported by the DummyRequest.  &lt;br/&gt;
 &amp;lt;security:intercept-url pattern=&quot;/**&quot;  access=&quot;request.contextPath == &apos;/cp&apos; ? denyAll : request.parameterMap&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;test&amp;#39;&amp;#93;&lt;/span&gt; == null ? permitAll : permitAll&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;I have attached simple maven project that will exercise this bug. To reproduce, download, unzip the intercpet-url-access-bug.zip attachment, and run mvn jetty:run. &lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://fisheye.springsource.org/browse/spring-security/web/src/main/java/org/springframework/security/web/FilterInvocation.java?r2=93438defffe5c339026469afa09dad60b2928a4f&amp;amp;r1=052537c8b04182595e92abd1e1949b0ff7e731b4&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://fisheye.springsource.org/browse/spring-security/web/src/main/java/org/springframework/security/web/FilterInvocation.java?r2=93438defffe5c339026469afa09dad60b2928a4f&amp;amp;r1=052537c8b04182595e92abd1e1949b0ff7e731b4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;br/&gt;
SEVERE: Context initialization failed&lt;br/&gt;
org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;org.springframework.security.filterChainProxy&apos;: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: Failed to evaluate expression &apos;request.parameterMap&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;test&amp;#39;&amp;#93;&lt;/span&gt; == null ? permitAll : permitAll&apos;&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)&lt;br/&gt;
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)&lt;br/&gt;
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)&lt;br/&gt;
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)&lt;br/&gt;
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)&lt;br/&gt;
	at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)&lt;br/&gt;
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)&lt;br/&gt;
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)&lt;br/&gt;
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)&lt;br/&gt;
	at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)&lt;br/&gt;
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)&lt;br/&gt;
	at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)&lt;br/&gt;
	at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)&lt;br/&gt;
	at org.apache.catalina.core.StandardService.start(StandardService.java:525)&lt;br/&gt;
	at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)&lt;br/&gt;
	at org.apache.catalina.startup.Catalina.start(Catalina.java:595)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:592)&lt;br/&gt;
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)&lt;br/&gt;
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: Failed to evaluate expression &apos;request.parameterMap&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;test&amp;#39;&amp;#93;&lt;/span&gt; == null ? permitAll : permitAll&apos;&lt;br/&gt;
	at org.springframework.security.access.expression.ExpressionUtils.evaluateAsBoolean(ExpressionUtils.java:13)&lt;br/&gt;
	at org.springframework.security.web.access.expression.WebExpressionVoter.vote(WebExpressionVoter.java:34)&lt;br/&gt;
	at org.springframework.security.web.access.expression.WebExpressionVoter.vote(WebExpressionVoter.java:18)&lt;br/&gt;
	at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:62)&lt;br/&gt;
	at org.springframework.security.config.http.DefaultFilterChainValidator.checkLoginPageIsntProtected(DefaultFilterChainValidator.java:170)&lt;br/&gt;
	at org.springframework.security.config.http.DefaultFilterChainValidator.validate(DefaultFilterChainValidator.java:35)&lt;br/&gt;
	at org.springframework.security.web.FilterChainProxy.afterPropertiesSet(FilterChainProxy.java:148)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)&lt;br/&gt;
	... 27 more&lt;br/&gt;
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1021E:(pos 8): A problem occurred whilst attempting to access the property &apos;parameterMap&apos;: &apos;Unable to access property &apos;parameterMap&apos; through getter&apos;&lt;br/&gt;
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:201)&lt;br/&gt;
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:72)&lt;br/&gt;
	at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57)&lt;br/&gt;
	at org.springframework.expression.spel.ast.OpEQ.getValueInternal(OpEQ.java:37)&lt;br/&gt;
	at org.springframework.expression.spel.ast.OpEQ.getValueInternal(OpEQ.java:1)&lt;br/&gt;
	at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:135)&lt;br/&gt;
	at org.springframework.expression.spel.ast.Ternary.getValueInternal(Ternary.java:47)&lt;br/&gt;
	at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)&lt;br/&gt;
	at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)&lt;br/&gt;
	at org.springframework.security.access.expression.ExpressionUtils.evaluateAsBoolean(ExpressionUtils.java:11)&lt;br/&gt;
	... 35 more&lt;br/&gt;
Caused by: org.springframework.expression.AccessException: Unable to access property &apos;parameterMap&apos; through getter&lt;br/&gt;
	at org.springframework.expression.spel.support.ReflectivePropertyAccessor$OptimalPropertyAccessor.read(ReflectivePropertyAccessor.java:499)&lt;br/&gt;
	at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:196)&lt;br/&gt;
	... 44 more&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:592)&lt;br/&gt;
	at org.springframework.expression.spel.support.ReflectivePropertyAccessor$OptimalPropertyAccessor.read(ReflectivePropertyAccessor.java:495)&lt;br/&gt;
	... 45 more&lt;br/&gt;
Caused by: java.lang.UnsupportedOperationException&lt;br/&gt;
	at org.springframework.security.web.DummyRequest.getParameterMap(FilterInvocation.java:334)&lt;br/&gt;
	... 50 more&lt;/p&gt;
</description>
                <environment></environment>
        <key id="41450">SEC-1878</key>
            <summary>DefaultFilterChainValidator throws UnsupportedOperationException</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rwinch">Rob Winch</assignee>
                                    <reporter username="jakelandis">Jake Landis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Dec 2011 13:16:46 +0000</created>
                <updated>Sat, 6 Feb 2016 06:18:43 +0000</updated>
                            <resolved>Thu, 29 Dec 2011 13:22:04 +0000</resolved>
                                                    <fixVersion>3.1.1</fixVersion>
                                    <component>Namespace</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="74311" author="rwinch" created="Thu, 29 Dec 2011 13:22:04 +0000"  >&lt;p&gt;Thanks for the bug submission. This issue is now fixed in master.&lt;/p&gt;</comment>
                            <comment id="124830" author="issuemaster" created="Sat, 6 Feb 2016 06:18:43 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/2106&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/2106&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="41627">SEC-1886</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="19238" name="intercpet-url-access-bug.zip" size="6653" author="jakelandis" created="Wed, 21 Dec 2011 13:16:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 29 Dec 2011 13:22:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0307z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>17578</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>16992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>