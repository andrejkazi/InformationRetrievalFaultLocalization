<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:06:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1807/SEC-1807.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1807] logout success failed on tomcat due to NPE</title>
                <link>https://jira.spring.io/browse/SEC-1807</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;Due to issue &lt;a href=&quot;https://jira.spring.io/browse/SEC-1762&quot; title=&quot;assertion of input parameter does nothing for method org.springframework.security.web.authentication.AbstractAuthenticationTargetUrlRequestHandler.setTargetUrlParameter(String)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1762&quot;&gt;&lt;del&gt;SEC-1762&lt;/del&gt;&lt;/a&gt;, the targetUrlParameter is default set to null in SimpleUrlLogoutSuccessHandler constructor. When login out on tomcat 6, it throws NPE because it uses java.util.Hashtable which does not allow retrieving value with a null key.&lt;br/&gt;
There is no problem on jetty-7 because it uses org.eclipse.jetty.util.MultiMap which allows null.&lt;/p&gt;

&lt;p&gt;Work around : revert to spring-security-3.0.5&lt;/p&gt;

&lt;p&gt;The problem is also that is cannot found anywhere the responsible commit. The 3.0.6 exists in maven repo but nowhere released in JIRA or GIT. Very strange !&lt;/p&gt;

&lt;p&gt;&amp;lt;code&amp;gt;&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	java.util.Hashtable.get(Hashtable.java:334)&lt;br/&gt;
	org.apache.tomcat.util.http.Parameters.getParameterValues(Parameters.java:195)&lt;br/&gt;
	org.apache.tomcat.util.http.Parameters.getParameter(Parameters.java:240)&lt;br/&gt;
	org.apache.catalina.connector.Request.getParameter(Request.java:1065)&lt;br/&gt;
	org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:355)&lt;br/&gt;
	javax.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:158)&lt;br/&gt;
	org.springframework.security.web.authentication.AbstractAuthenticationTargetUrlRequestHandler.determineTargetUrl(AbstractAuthenticationTargetUrlRequestHandler.java:86)&lt;br/&gt;
	org.springframework.security.web.authentication.AbstractAuthenticationTargetUrlRequestHandler.handle(AbstractAuthenticationTargetUrlRequestHandler.java:67)&lt;br/&gt;
	org.springframework.security.web.authentication.logout.SimpleUrlLogoutSuccessHandler.onLogoutSuccess(SimpleUrlLogoutSuccessHandler.java:28)&lt;br/&gt;
	org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:100)&lt;br/&gt;
	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)&lt;br/&gt;
	org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)&lt;br/&gt;
	org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)&lt;br/&gt;
	org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)&lt;br/&gt;
	org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)&lt;br/&gt;
	org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)&lt;br/&gt;
	org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)&lt;br/&gt;
	org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
	org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)&lt;br/&gt;
	org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
&amp;lt;/code&amp;gt;&lt;/p&gt;</description>
                <environment>tomcat 6</environment>
        <key id="39529">SEC-1807</key>
            <summary>logout success failed on tomcat due to NPE</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="ludovic.praud">Ludovic Praud</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Aug 2011 04:34:34 +0000</created>
                <updated>Sat, 6 Feb 2016 06:17:57 +0000</updated>
                            <resolved>Fri, 9 Sep 2011 10:32:21 +0000</resolved>
                                    <version>3.0.6</version>
                                                    <component>Web</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                <comments>
                            <comment id="69980" author="ludovic.praud" created="Wed, 31 Aug 2011 04:35:51 +0000"  >&lt;p&gt;Sorry but the &lt;a href=&quot;https://jira.spring.io/browse/SEC-1762&quot; title=&quot;assertion of input parameter does nothing for method org.springframework.security.web.authentication.AbstractAuthenticationTargetUrlRequestHandler.setTargetUrlParameter(String)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1762&quot;&gt;&lt;del&gt;SEC-1762&lt;/del&gt;&lt;/a&gt; issue has nothing to do with this.&lt;/p&gt;</comment>
                            <comment id="70026" author="rogerpf" created="Thu, 1 Sep 2011 10:24:36 +0000"  >&lt;p&gt;I have hit this too, as will anyone churning out a baisc &apos;ROO security&apos; app and then switching to framework  3.0.6&lt;/p&gt;

&lt;p&gt;Of course it also breaks on  - VMware vFabric tc Server - which incoporates tomcat.&lt;/p&gt;</comment>
                            <comment id="70045" author="sgybas" created="Fri, 2 Sep 2011 07:39:54 +0000"  >&lt;p&gt;It also breaks on WebSphere 7:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
        at java.util.Hashtable.get(Hashtable.java:518)&lt;br/&gt;
        at com.ibm.ws.webcontainer.srt.SRTServletRequest.getParameter(SRTServletRequest.java:1520)&lt;br/&gt;
        at javax.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:169)&lt;br/&gt;
        at org.springframework.security.web.authentication.AbstractAuthenticationTargetUrlRequestHandler.determineTargetUrl(AbstractAuthenticationTargetUrlRequestHandler.java:86)&lt;br/&gt;
        at org.springframework.security.web.authentication.AbstractAuthenticationTargetUrlRequestHandler.handle(AbstractAuthenticationTargetUrlRequestHandler.java:67)&lt;br/&gt;
        at org.springframework.security.web.authentication.logout.SimpleUrlLogoutSuccessHandler.onLogoutSuccess(SimpleUrlLogoutSuccessHandler.java:28)&lt;br/&gt;
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:100)&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;We also went back to 3.0.5.&lt;/p&gt;</comment>
                            <comment id="70093" author="ojs" created="Sun, 4 Sep 2011 07:59:16 +0000"  >&lt;p&gt;Same here with Tomcat 7.0.21&lt;/p&gt;</comment>
                            <comment id="73248" author="eugenparaschiv" created="Wed, 30 Nov 2011 03:27:44 +0000"  >&lt;p&gt;Same on JBoss, which uses Tomcat. Also, I can confirm that moving from 3.0.6 to 3.0.7 does indeed resolve the issue. &lt;/p&gt;</comment>
                            <comment id="124755" author="issuemaster" created="Sat, 6 Feb 2016 06:17:57 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/2039&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/2039&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="39300">SEC-1803</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 1 Sep 2011 10:24:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02kqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15069</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14363</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>