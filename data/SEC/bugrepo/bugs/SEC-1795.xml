<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 10:21:21 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1795/SEC-1795.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1795] Changing ACL parent causes a NPE</title>
                <link>https://jira.spring.io/browse/SEC-1795</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;Changing the the parent ACL of an AclImpl when it has a parent already causes a NullpointException in AclImpl.equals(.)&lt;/p&gt;


&lt;p&gt;The unit test (paste into AclImplTests.java) proves it.&lt;/p&gt;

&lt;p&gt;@Test&lt;br/&gt;
  public void testChangeParent() throws Exception&lt;/p&gt;
  {
    AclImpl parentAcl = new AclImpl(objectIdentity, 1L, mockAuthzStrategy, mockAuditLogger);
    AclImpl childAcl = new AclImpl(objectIdentity, 2L, mockAuthzStrategy, mockAuditLogger);
    AclImpl changeParentAcl = new AclImpl(objectIdentity, 3L, mockAuthzStrategy, mockAuditLogger);

    // This works
    childAcl.setParent(parentAcl);
    childAcl.setParent(null);                        // setting to null first avoids NPE
    childAcl.setParent(changeParentAcl);

    // This causes an NPE
    childAcl.setParent(parentAcl);
  }</description>
                <environment></environment>
        <key id="39144">SEC-1795</key>
            <summary>Changing ACL parent causes a NPE</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="svanders38@gmail.com">Simon van der Sluis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 21:39:37 +0000</created>
                <updated>Sat, 6 Feb 2016 06:17:49 +0000</updated>
                            <resolved>Fri, 19 Aug 2011 11:47:46 +0000</resolved>
                                    <version>3.0.5</version>
                                    <fixVersion>3.0.6</fixVersion>
                    <fixVersion>3.1.0.RC3</fixVersion>
                                    <component>ACLs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="69207" author="svanders38@gmail.com" created="Wed, 10 Aug 2011 21:43:23 +0000"  >&lt;p&gt;A fix in AclImpl.equals(.) as shown below fixes it.&lt;/p&gt;

&lt;p&gt;public boolean equals(Object obj) {&lt;br/&gt;
        if (obj instanceof AclImpl) {&lt;br/&gt;
            AclImpl rhs = (AclImpl) obj;&lt;br/&gt;
            if (this.aces.equals(rhs.aces)) {&lt;br/&gt;
                if ((this.parentAcl == null &amp;amp;&amp;amp; rhs.parentAcl == null) || (&lt;b&gt;this.parentAcl !=null &amp;amp;&amp;amp;&lt;/b&gt; this.parentAcl.equals(rhs.parentAcl))) {&lt;br/&gt;
                    if ((this.objectIdentity == null &amp;amp;&amp;amp; rhs.objectIdentity == null) || (this.objectIdentity.equals(rhs.objectIdentity))) {&lt;br/&gt;
                        if ((this.id == null &amp;amp;&amp;amp; rhs.id == null) || (this.id.equals(rhs.id))) {&lt;br/&gt;
                            if ((this.owner == null &amp;amp;&amp;amp; rhs.owner == null) || this.owner.equals(rhs.owner)) {&lt;br/&gt;
                                if (this.entriesInheriting == rhs.entriesInheriting) {&lt;br/&gt;
                                    if ((this.loadedSids == null &amp;amp;&amp;amp; rhs.loadedSids == null)) &lt;/p&gt;
{
                                        return true;
                                    }
&lt;p&gt;                                    if (this.loadedSids.size() == rhs.loadedSids.size()) {&lt;br/&gt;
                                        for (int i = 0; i &amp;lt; this.loadedSids.size(); i++) {&lt;br/&gt;
                                            if (!this.loadedSids.get&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.equals(rhs.loadedSids.get&lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)) &lt;/p&gt;
{
                                                return false;
                                            }
&lt;p&gt;                                        }&lt;br/&gt;
                                        return true;&lt;br/&gt;
                                    }&lt;br/&gt;
                                }&lt;br/&gt;
                            }&lt;br/&gt;
                        }&lt;br/&gt;
                    }&lt;br/&gt;
                }&lt;br/&gt;
            }&lt;br/&gt;
        }&lt;br/&gt;
        return false;&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="69208" author="svanders38@gmail.com" created="Wed, 10 Aug 2011 21:45:04 +0000"  >&lt;p&gt;I had hoped that wiki markup would work in the above comment, instead the *&apos;s show where the code was modified.&lt;/p&gt;</comment>
                            <comment id="69209" author="svanders38@gmail.com" created="Wed, 10 Aug 2011 21:46:32 +0000"  >&lt;p&gt;It&apos;s a pretty ugly piece of code for an equals method, would it be better to use an equals builder from apache-commons-lang?&lt;/p&gt;
</comment>
                            <comment id="69210" author="svanders38@gmail.com" created="Wed, 10 Aug 2011 21:48:23 +0000"  >&lt;p&gt;And since equals(.) is implemented, hashCode() probably should be too.&lt;/p&gt;</comment>
                            <comment id="69211" author="svanders38@gmail.com" created="Wed, 10 Aug 2011 21:49:19 +0000"  >&lt;p&gt;If it&apos;s not clear from the junit, setting the parent to null before changing it to a new value is a simple workaround for this bug.&lt;/p&gt;</comment>
                            <comment id="69524" author="luke" created="Fri, 19 Aug 2011 11:47:46 +0000"  >&lt;p&gt;Thanks. I&apos;ve fixed that plus some other possible NPE occurrences in the same method.&lt;/p&gt;</comment>
                            <comment id="124743" author="issuemaster" created="Sat, 6 Feb 2016 06:17:49 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/2028&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/2028&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 19 Aug 2011 11:47:46 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01c33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7835</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>