<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:50:47 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SPR-7393/SPR-7393.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SPR-7393] HibernateException is thrown during borrow connection after any query execution in RowMapper</title>
                <link>https://jira.spring.io/browse/SPR-7393</link>
                <project id="10000" key="SPR">Spring Framework</project>
                    <description>&lt;p&gt;We have some DAO which call an other DAO in RowMapper to get linked entities. Sometimes we have to do that to link different loosely coupled entities in depends of included application modules, data base state etc. After migration from Spring 2.5.6 to Spring 3.X we&apos;ve got the following issue:&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;org.hibernate.HibernateException: connnection proxy not usable after transaction completion&lt;br/&gt;
	at org.hibernate.jdbc.BorrowedConnectionProxy.invoke(BorrowedConnectionProxy.java:66)&lt;br/&gt;
	at $Proxy6.prepareStatement(Unknown Source)&lt;br/&gt;
	at org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.createPreparedStatement(PreparedStatementCreatorFactory.java:245)&lt;br/&gt;
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:580)&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It happens on prepared statement creation for query need to be executed after execution any SQL statement in DAO called from RowMapper. I&apos;ve created Unit test to show this incident.&lt;/p&gt;</description>
            <key id="32359">SPR-7393</key>
            <summary>HibernateException is thrown during borrow connection after any query execution in RowMapper</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="juergen.hoeller">Juergen Hoeller</assignee>
                                    <reporter username="borislav.andruschuk">Andruschuk Borislav</reporter>
                        <labels>
                    </labels>
                <created>Sun, 25 Jul 2010 04:40:28 +0000</created>
                <updated>Tue, 17 Jul 2012 13:26:30 +0000</updated>
                            <resolved>Sun, 25 Jul 2010 23:33:23 +0000</resolved>
                                    <version>3.0 GA</version>
                    <version>3.0.1</version>
                    <version>3.0.2</version>
                    <version>3.0.3</version>
                                    <fixVersion>3.0.4</fixVersion>
                                    <component>Core</component>
                    <component>Transaction</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="56024" author="juergen.hoeller" created="Sun, 25 Jul 2010 23:33:24 +0000"  >&lt;p&gt;Good catch! After addressing &lt;a href=&quot;https://jira.spring.io/browse/SPR-6895&quot; title=&quot;HibernateJpaDialect does not allow ConnectionManager to eagerly release Connection for long-running Session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SPR-6895&quot;&gt;&lt;del&gt;SPR-6895&lt;/del&gt;&lt;/a&gt; for Spring 3.0.2, HibernateJpaDialect was closing borrowed connections too aggressively, which led to failure for nested JDBC executions. I&apos;ve fixed this for Spring 3.0.4 now.&lt;/p&gt;

&lt;p&gt;This fix will be available in tonight&apos;s 3.0.4 snapshot. Feel free to give it an early try...&lt;/p&gt;

&lt;p&gt;Juergen&lt;/p&gt;

&lt;p&gt;P.S.: Thanks for the unit test - that helped a lot!&lt;/p&gt;</comment>
                            <comment id="56564" author="snicoll" created="Mon, 9 Aug 2010 06:39:48 +0000"  >&lt;p&gt;Juergen,&lt;/p&gt;

&lt;p&gt;I tried today&apos;s nightly build and it fixed indeed this exception I got by upgrading from 2.5.6 to 3.0.3. (works with 3.0.0). I had this issue a lot combined with database access with Spring Batch. Right now, I still have 6 tests failing which I am currently investigating.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="56565" author="snicoll" created="Mon, 9 Aug 2010 07:05:56 +0000"  >&lt;p&gt;Juergen,&lt;/p&gt;

&lt;p&gt;Works for us! The 6 tests failing are unrelated to this.&lt;/p&gt;</comment>
                            <comment id="81810" author="rwinch" created="Tue, 17 Jul 2012 13:24:46 +0000"  >&lt;p&gt;I&apos;m not sure what the policy is on updating the components since this is closed, but I noticed this was logged against core and transaction, but the changes in the &lt;a href=&quot;https://jira.springsource.org/browse/SPR-7393?page=com.atlassian.jirafisheyeplugin:fisheye-issuepanel&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;source tab&lt;/a&gt; were in jdbc. This made tracking down the root cause of &lt;a href=&quot;https://jira.spring.io/browse/SEC-1778&quot; title=&quot;MutableAclService#updateAcl() fails in JPA environment&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1778&quot;&gt;&lt;del&gt;SEC-1778&lt;/del&gt;&lt;/a&gt; slightly more difficult. While it only made it slightly more complicated to find the issue, it would be nice to get this updated. Can someone associate this JIRA to the proper component (Data:JDBC)?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="38703">SEC-1778</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="16931" name="RowMapperTest.java" size="3263" author="borislav.andruschuk" created="Sun, 25 Jul 2010 04:40:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                <customfield id="customfield_10180" key="com.atlassian.jira.toolkit:dayslastcommented">
                        <customfieldname>Days since last comment</customfieldname>
                        <customfieldvalues>
                                        4 years, 23 weeks, 2 days ago
    
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 25 Jul 2010 23:33:24 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10181" key="com.atlassian.jira.toolkit:lastusercommented">
                        <customfieldname>Last commented by a User</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>false</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>rwinch</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03q07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>