<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:38:49 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1500/SEC-1500.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1500] Target-URL changes while switching between secure and insecure channel, when it was encoded according to RFC 3986</title>
                <link>https://jira.spring.io/browse/SEC-1500</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;This issue is simmilar to the issue &lt;a href=&quot;https://jira.spring.io/browse/SEC-1255&quot; title=&quot;Target-URL after successfull login differes from original URL, when it was encoded according to RFC 3986&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1255&quot;&gt;&lt;del&gt;SEC-1255&lt;/del&gt;&lt;/a&gt; &quot;Target-URL after successfull login differes from original URL, when it was encoded according to RFC 3986&quot;&lt;br/&gt;
&lt;a href=&quot;http://jira.springframework.org/browse/SEC-1255&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://jira.springframework.org/browse/SEC-1255&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When switching the channel, AbstractRetryEntryPoint rebuilds the URL from its decoded parts.&lt;br/&gt;
So, when switching on a URL, that containes a special character (like &apos;?&apos;), which is encoded according to RFC 3986, it changes the URL.&lt;br/&gt;
For example, the URL &quot;/foo%3Fbar.html&quot;, where &quot;%3F&quot; encodes the &quot;?&quot;, becomes &quot;/foo?bar.html&quot;, which is not encoded correctly, thus resulting in a 404-Error.&lt;/p&gt;

&lt;p&gt;Encoding the rebuild URL would not work, becaus all special characters (like contained slashes for example) would be encoded than, which is, as far as I know, not correct. &lt;/p&gt;

&lt;p&gt;I fixed the issue in my local git repository by calling the UrlUtils, which were fixed in issue &lt;a href=&quot;https://jira.spring.io/browse/SEC-1255&quot; title=&quot;Target-URL after successfull login differes from original URL, when it was encoded according to RFC 3986&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1255&quot;&gt;&lt;del&gt;SEC-1255&lt;/del&gt;&lt;/a&gt;, for building the redirect URL.&lt;br/&gt;
I will apply my patch to this bug-report.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="31813">SEC-1500</key>
            <summary>Target-URL changes while switching between secure and insecure channel, when it was encoded according to RFC 3986</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="kai.moritz">Kai Moritz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jun 2010 03:41:39 +0000</created>
                <updated>Sat, 6 Feb 2016 06:14:44 +0000</updated>
                            <resolved>Thu, 17 Jun 2010 12:21:31 +0000</resolved>
                                    <version>3.0.2</version>
                                    <fixVersion>3.0.3</fixVersion>
                    <fixVersion>3.1.0.M1</fixVersion>
                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="54883" author="kai.moritz" created="Thu, 17 Jun 2010 03:48:09 +0000"  >&lt;p&gt;This is my patch for the AbstractRetryEntryPoint.&lt;br/&gt;
Because UrlUtils appends a &quot;://&quot; to the scheme-parameter, I also had to patch RetryWithHttpEntryPoint and RetryWithHttpsEntryPoint.&lt;/p&gt;</comment>
                            <comment id="54899" author="luke" created="Thu, 17 Jun 2010 12:21:31 +0000"  >&lt;p&gt;Thanks for the patch. There are some minor problems with it (such as potential NPEs due to autoboxing) and it results in absolute URLs for all redirects (which should not be a problem but breaks tests). To keep things as simple as possible I&apos;ve just modified the existing code to use the requestURI itself. The details may be revisited as part of &lt;a href=&quot;https://jira.spring.io/browse/SEC-1413&quot; title=&quot;AbstractRetryEntryPoint should use RedirectStrategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1413&quot;&gt;&lt;del&gt;SEC-1413&lt;/del&gt;&lt;/a&gt;, which would supersede these changes. &lt;/p&gt;</comment>
                            <comment id="124423" author="issuemaster" created="Sat, 6 Feb 2016 06:14:44 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1743&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1743&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Related</name>
                                            <outwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="30145">SEC-1413</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="16717" name="0001-SEC-1500-AbstractRetryEntryPoint-now-uses-UrlUtils-f.patch" size="4791" author="kai.moritz" created="Thu, 17 Jun 2010 03:48:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 17 Jun 2010 12:21:31 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19470</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03trz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22366</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>