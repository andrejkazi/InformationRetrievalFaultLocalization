<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:13:34 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-2751/SEC-2751.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-2751] AbstractPreAuthenticatedProcessingFilter assumes principal is a string</title>
                <link>https://jira.spring.io/browse/SEC-2751</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;I am using pre-authentication alongside form login. I ran into a problem similar to this user:&lt;br/&gt;
&lt;a href=&quot;https://jira.spring.io/browse/SEC-1983?focusedCommentId=93727&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-93727&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://jira.spring.io/browse/SEC-1983?focusedCommentId=93727&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-93727&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In working around this problem, I noticed this code inside &lt;br/&gt;
AbstractPreAuthenticatedProcessingFilter.requiresAuthentication():&lt;/p&gt;

&lt;p&gt;if (currentUser.getName().equals(principal)) &lt;/p&gt;
{
            return false;
 }

&lt;p&gt;In my case, principal is an instance of UserDetails. So comparing an instance of String to an instance of UserDetails always returned false.&lt;/p&gt;

&lt;p&gt;I had to change the above code to this:&lt;br/&gt;
if (currentUser.getPrincipal().equals(principal)) {&lt;br/&gt;
            return false;&lt;br/&gt;
}&lt;/p&gt;
</description>
                <environment></environment>
        <key id="60332">SEC-2751</key>
            <summary>AbstractPreAuthenticatedProcessingFilter assumes principal is a string</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="rwinch">Rob Winch</assignee>
                                    <reporter username="pbrannen">Patrick Brannen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2014 11:50:15 +0000</created>
                <updated>Sat, 6 Feb 2016 06:42:39 +0000</updated>
                            <resolved>Thu, 23 Oct 2014 12:00:08 +0000</resolved>
                                    <version>3.2.5</version>
                                                    <component>Web</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="108975" author="rwinch" created="Thu, 23 Oct 2014 12:00:08 +0000"  >&lt;p&gt;Thanks for the report. This issue has been logged and is being tracked as &lt;a href=&quot;https://jira.spring.io/browse/SEC-2078&quot; title=&quot;Pre-authentication fails when using check for principal change and using non String principals&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-2078&quot;&gt;&lt;del&gt;SEC-2078&lt;/del&gt;&lt;/a&gt; Please read the discussion and comment there.&lt;/p&gt;</comment>
                            <comment id="125783" author="issuemaster" created="Sat, 6 Feb 2016 06:26:43 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/2977&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/2977&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="46051">SEC-2078</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 23 Oct 2014 12:00:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46406</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07xaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46265</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>