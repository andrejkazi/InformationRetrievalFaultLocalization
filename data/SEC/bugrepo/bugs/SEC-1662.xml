<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 11:15:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1662/SEC-1662.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1662] NPE when when defining two &lt;http&gt; elements during registerFilterChainProxy</title>
                <link>https://jira.spring.io/browse/SEC-1662</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;I am defining two &amp;lt;http&amp;gt; elements which apparently is permitted in Spring Security 3.1.0M2 per documentation&lt;/p&gt;

&lt;p&gt;    &amp;lt;http auto-config=&quot;false&quot; entry-point-ref=&quot;http403ForbiddenEntryPoint&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;intercept-url pattern=&quot;/api/**&quot; access=&quot;ROLE_USER&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;custom-filter ref=&quot;apikeyAuthFilter&quot; position=&quot;FORM_LOGIN_FILTER&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/http&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;http auto-config=&quot;false&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;form-login/&amp;gt;&lt;br/&gt;
        &amp;lt;intercept-url pattern=&quot;/**&quot; access=&quot;ROLE_USER&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;logout invalidate-session=&quot;true&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/http&amp;gt;&lt;/p&gt;

&lt;p&gt;During startup I get an NPE, partial stack trace below.&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.springframework.security.config.http.HttpSecurityBeanDefinitionParser.registerFilterChainProxy(HttpSecurityBeanDefinitionParser.java:260)&lt;br/&gt;
	at org.springframework.security.config.http.HttpSecurityBeanDefinitionParser.parse(HttpSecurityBeanDefinitionParser.java:89)&lt;br/&gt;
	at org.springframework.security.config.SecurityNamespaceHandler.parse(SecurityNamespaceHandler.java:88)&lt;br/&gt;
	at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1335)&lt;br/&gt;
	at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1325)&lt;br/&gt;
	at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)&lt;br/&gt;
	at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)&lt;br/&gt;
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)&lt;br/&gt;
	at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)&lt;br/&gt;
	... 37 more&lt;/p&gt;

&lt;p&gt;Relevant code area&lt;/p&gt;

&lt;p&gt;            for (BeanDefinition matcherBean : filterChainMap.keySet()) {&lt;br/&gt;
                if (existingFilterChainMap.containsKey(matcherBean)) {&lt;br/&gt;
                    Map&amp;lt;Integer,ValueHolder&amp;gt; args = matcherBean.getConstructorArgumentValues().getIndexedArgumentValues();&lt;br/&gt;
                    pc.getReaderContext().error(&quot;The filter chain map already contains this request matcher [&quot;&lt;br/&gt;
---&amp;gt;                            + args.get(0).getValue() + &quot;, &quot; +args.get(1).getValue() + &quot;]&quot;, source);&lt;/p&gt;

&lt;p&gt;args is size 0 in my case&lt;/p&gt;


&lt;p&gt;Serge&lt;/p&gt;</description>
                <environment>Windows 7 64bit, Sun Java 1.6.0_21 64bit, Tomcat 6.0.20</environment>
        <key id="36035">SEC-1662</key>
            <summary>NPE when when defining two &lt;http&gt; elements during registerFilterChainProxy</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="ssozonoff">Serge Sozonoff</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Jan 2011 02:59:57 +0000</created>
                <updated>Sat, 6 Feb 2016 06:16:26 +0000</updated>
                            <resolved>Wed, 26 Jan 2011 09:46:39 +0000</resolved>
                                    <version>3.1.0.M2</version>
                                    <fixVersion>3.1.0.RC1</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="62776" author="luke" created="Wed, 26 Jan 2011 09:46:39 +0000"  >&lt;p&gt;Thanks for the report. The error occurs because at least one of the elements needs to define a pattern (otherwise both defined filter chains are supposed to be applied to &quot;/*&lt;b&gt;&quot;). The code you&apos;ve pointed to was erroneously assuming that the RequestMatcher instances have two arguments (as the path matching ones do), but for &quot;/&lt;/b&gt;*&quot; an optimized AnyRequestMatcher instance is used. Hence you get the invalid access to the argument list.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a check on the number of arguments when formatting the error message.&lt;/p&gt;</comment>
                            <comment id="124599" author="issuemaster" created="Sat, 6 Feb 2016 06:16:26 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1900&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1900&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 26 Jan 2011 09:46:39 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>19342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i03ue7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22466</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>18922</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>