<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 09:56:22 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-43/SEC-43.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-43] JdbcExtendedDaoImpl doesn&apos;t work with Postgres</title>
                <link>https://jira.spring.io/browse/SEC-43</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;Using JdbcExtendedDaoImpl together with PostgreSQL and the following acl tables fails when inserting new identities or permissions:&lt;/p&gt;

&lt;p&gt;create table acl_object_identity (&lt;br/&gt;
     id serial primary key,&lt;br/&gt;
     object_identity varchar(250) not null unique,&lt;br/&gt;
     parent_object integer references acl_object_identity,&lt;br/&gt;
     acl_class varchar(250) not null&lt;br/&gt;
);&lt;/p&gt;

&lt;p&gt;create table acl_permission (&lt;br/&gt;
     id serial primary key,&lt;br/&gt;
     acl_object_identity integer not null references acl_object_identity(id),&lt;br/&gt;
     recipient varchar(100) not null,&lt;br/&gt;
     mask integer not null,&lt;br/&gt;
     constraint unique_recipient unique(acl_object_identity, recipient)&lt;br/&gt;
);&lt;/p&gt;

&lt;p&gt;This is due to the fact that JdbcExtendedDaoImpl explicitly sets the id to null. Postgres will naturally give an error as this is a primary key and thus cannot be null. Either set it to the value you want or leave it out of the statement.&lt;/p&gt;

&lt;p&gt;It doesn&apos;t seem to be possible to override this by injecting new sql statements for AclObjectIdentityInsertStatement and AclPermissionInsertStatement. AclObjectIdentityInsert and AclPermissionInsert classes declares four parameters, the first of which is hardcoded to null.&lt;/p&gt;</description>
                <environment>Acegi 0.8.2, Postgresql 8.0</environment>
        <key id="12065">SEC-43</key>
            <summary>JdbcExtendedDaoImpl doesn&apos;t work with Postgres</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="balex">Ben Alex</assignee>
                                    <reporter username="smh">Stein Martin Hustad</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jul 2005 07:50:53 +0000</created>
                <updated>Sat, 6 Feb 2016 06:32:35 +0000</updated>
                            <resolved>Thu, 20 Oct 2005 18:32:44 +0000</resolved>
                                    <version>0.8.2</version>
                    <version>0.8.3</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="14112" author="smh" created="Tue, 26 Jul 2005 07:58:49 +0000"  >&lt;p&gt;Attached patch that updates the aclObjectIdentityInsertStatement and aclPermissionInsertStatement so that they do not reference the primary key columns, and removed the primary key parameter declarations from the AclObjectIdentityInsertStatement and AclPermissionInsertStatement. This way, if some database should require a null to be inserted to trigger the generation of the id, one can obtain exactly the same behaviour as before by injecting the following two sql statements for the JdbcExtendedDaoImpl bean:&lt;/p&gt;

&lt;p&gt;aclObjectIdentityInsertStatement:&lt;br/&gt;
&quot;INSERT INTO acl_object_identity (id, object_identity, parent_object, acl_class) VALUES (null, ?, ?, ?)&quot;;&lt;br/&gt;
aclPermissionInsertStatement:&lt;br/&gt;
&quot;INSERT INTO acl_permission (id, acl_object_identity, recipient, mask) VALUES (null, ?, ?, ?)&quot;;&lt;/p&gt;</comment>
                            <comment id="15064" author="balex" created="Thu, 20 Oct 2005 18:32:44 +0000"  >&lt;p&gt;Patch applied, unit tests all pass.&lt;/p&gt;</comment>
                            <comment id="126405" author="issuemaster" created="Sat, 6 Feb 2016 06:32:35 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/307&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/307&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="10984" name="patch.txt" size="3551" author="smh" created="Tue, 26 Jul 2005 07:58:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 20 Oct 2005 18:32:44 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04m7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>26973</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>21622</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>