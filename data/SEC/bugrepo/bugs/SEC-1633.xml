<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 10:30:55 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-1633/SEC-1633.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-1633] jsp:forward goes into a loop</title>
                <link>https://jira.spring.io/browse/SEC-1633</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;I wanted to upgrade to Spring Security 2.0.6 from Spring Security 2.0.5. That is upgrade one minor version up. I use struts 1.3.10. When I replaced the 4 jar files with the ones from 2.0.6, I started getting strange error messages from Struts saying that no action path could be found. &lt;/p&gt;

&lt;p&gt;The following are the 4 jars that I replace with the 2.0.6 versions.&lt;br/&gt;
spring-security-acl-2.0.5.RELEASE.jar&lt;br/&gt;
spring-security-core-2.0.5.RELEASE.jar&lt;br/&gt;
spring-security-core-tiger-2.0.5.RELEASE.jar&lt;br/&gt;
spring-security-taglibs-2.0.5.RELEASE.jar&lt;/p&gt;


&lt;p&gt;After trying various things unsuccessfully, I decided to create a bare bones functional project and try my upgrade there.&lt;/p&gt;

&lt;p&gt;What I discovered is that 2.0.6 appears to have problems dealing with jsp forward. In 2.0.5 things work fine but 2.0.6 things go into a loop while running inside of Eclipse/Tomcat 5.5.&lt;/p&gt;

&lt;p&gt;I create a fresh Eclipse Dynamic Web project. I add an index.jsp which has one line to perform a jsp:forward to another .jsp page. I tested with no Spring and it works as expected. I then introduce Spring Security 2.0.5 and Spring 2.5.5 into the mix and things still work as expected. (Index.jsp has intercept-url has filters=none).&lt;/p&gt;

&lt;p&gt;I then replace the above mentioned 4 files with the 2.0.6 versions. Then when I try to navigate to the index.jsp via browser (Fire Fox 3.6.12), the tomcat server goes into a loop spewing out a very large stack trace.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching the eclipse project as well as the tomcat log file.&lt;/p&gt;

&lt;p&gt;The main reason I wanted to upgrade to 2.0.6 is because for some reason, I am not able to get &quot;access-denied-page&quot; attribute to work on the http element.&lt;/p&gt;</description>
                <environment>Spring 2.5.5, Windows 7, Java 1.5_11, Spring Security 2.0.6</environment>
        <key id="35228">SEC-1633</key>
            <summary>jsp:forward goes into a loop</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="luke">Luke Taylor</assignee>
                                    <reporter username="human42">Pronab Saha</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Dec 2010 23:15:40 +0000</created>
                <updated>Sat, 6 Feb 2016 06:16:06 +0000</updated>
                            <resolved>Wed, 8 Dec 2010 06:01:26 +0000</resolved>
                                    <version>2.0.6</version>
                                    <fixVersion>3.1.0.M2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="61121" author="luke" created="Sun, 5 Dec 2010 09:33:20 +0000"  >&lt;p&gt;This is a duplicate of the issue reported as &lt;a href=&quot;https://jira.spring.io/browse/SEC-1606&quot; title=&quot;FirewalledRequest.reset() not called when Filters in the FilterChainProxy do not complete the FilterChain&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SEC-1606&quot;&gt;&lt;del&gt;SEC-1606&lt;/del&gt;&lt;/a&gt;. You can follow the workaround which is described in that issue.&lt;/p&gt;</comment>
                            <comment id="61128" author="human42" created="Sun, 5 Dec 2010 21:36:09 +0000"  >&lt;p&gt;I&apos;ve consulted SEC 1606, SEC 1614, and SEC 1608 and tried the following three approaches. One works and the other two did not work for me.&lt;/p&gt;

&lt;p&gt;a) modify the index.jsp from having filters=&quot;none&quot; to access=&quot;ROLE_ANONYMOUS, ROLE_USER&quot;. This works. The jsp:forward no longer goes into a loop.&lt;/p&gt;

&lt;p&gt;b) Keep filters=&quot;none&quot; for index.jsp. Use the http-firewall element and the firewall class as commented by Rob Winch on 8/Nov/10 2:50 PM on SEC 1606. This does not appear to work for me. I get similar behaviour as before.&lt;/p&gt;

&lt;p&gt;c) I tried to get approach number #2 from SEC 1608 to work. However, I am don&apos;t think I am setting it up correctly. I created a filter and tried to configure it in the application contect file as below. It also went in a loop when using filters=&quot;none&quot; for the /index.jsp&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;workaroundFilter&quot; class=&quot;com.paylynxs.filter.WorkaroundFilter&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;security:custom-filter  position=&quot;LAST&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;The relevant portion of the WorkaroundFilter looks like below&lt;/p&gt;

&lt;p&gt;public class WorkaroundFilter implements Filter {&lt;/p&gt;

&lt;p&gt;  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {&lt;br/&gt;
		while (request instanceof ServletRequestWrapper) {&lt;br/&gt;
			if (request instanceof FirewalledRequest) &lt;/p&gt;
{
				((FirewalledRequest) request).reset();
				break;
			}
&lt;p&gt;			request = ((ServletRequestWrapper) request).getRequest();&lt;br/&gt;
		}&lt;br/&gt;
  }&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;</comment>
                            <comment id="61233" author="luke" created="Wed, 8 Dec 2010 06:01:02 +0000"  >&lt;p&gt;You have to add the filter in web.xml. Adding it to the security filters has no effect since you are bypassing them by using filters=&quot;none&quot;.&lt;/p&gt;</comment>
                            <comment id="124567" author="issuemaster" created="Sat, 6 Feb 2016 06:16:06 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/1873&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/1873&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="34620">SEC-1606</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="17431" name="SpringSecurity206Bug.zip" size="3923871" author="human42" created="Sat, 4 Dec 2010 23:15:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sun, 5 Dec 2010 09:33:20 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10627</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i027xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12994</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12758</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>