<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Fri Dec 23 09:46:09 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/SEC-315/SEC-315.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[SEC-315] SavedRequest header names are case insensitive</title>
                <link>https://jira.spring.io/browse/SEC-315</link>
                <project id="10040" key="SEC">Spring Security</project>
                    <description>&lt;p&gt;HTTP header names are case insensitive. We does not take it into account in org.acegisecurity.ui.savedrequest.SavedRequest &lt;/p&gt;

&lt;p&gt;We should reduce the header names to canonical form in the beginning of addHeader and getHeaderValues methods.&lt;/p&gt;</description>
                <environment></environment>
        <key id="14465">SEC-315</key>
            <summary>SavedRequest header names are case insensitive</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="raykrueger">Ray Krueger</assignee>
                                    <reporter username="agrebnev">Andrey Grebnev</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Jul 2006 04:09:46 +0000</created>
                <updated>Sat, 6 Feb 2016 06:30:55 +0000</updated>
                            <resolved>Thu, 14 Sep 2006 07:46:34 +0000</resolved>
                                    <version>1.0.1</version>
                                    <fixVersion>1.0.2</fixVersion>
                                    <component>CAS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                <comments>
                            <comment id="19455" author="balex" created="Thu, 7 Sep 2006 14:38:17 +0000"  >&lt;p&gt;I recognise that HTTP parameters are case insensitive, however SavedRequest is intended solely to reproduce a HTTP request after Acegi Security has intercepted it and applied an authentication process. Thus, I cannot see the value in any behaviour other than re-presenting the original request - exactly as it was received. I invite clarification of why this behaviour is not desired. It would seem to me the responsibility of the destination servlet to deal with case sensitivity or otherwise, and not any intermediate representing of the HttpServletRequest.&lt;/p&gt;</comment>
                            <comment id="19458" author="agrebnev" created="Thu, 7 Sep 2006 15:01:14 +0000"  >&lt;p&gt;Ben,&lt;/p&gt;

&lt;p&gt;Of course the servlet container works with header names correctly. Please look at the following method of org.apache.tomcat.util.http.MimeHeaders of tomcat5.5 sources&lt;/p&gt;

&lt;p&gt;    public MessageBytes getValue(String name) {&lt;br/&gt;
        for (int i = 0; i &amp;lt; count; i++) {&lt;br/&gt;
        if (headers&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.getName().equalsIgnoreCase(name)) &lt;/p&gt;
{
                return headers[i].getValue();
            }
&lt;p&gt;        }&lt;br/&gt;
        return null;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;You can see that they use equalsIgnoreCase method in order to work with heander names in case insensitive form. &lt;br/&gt;
And look at our method:&lt;/p&gt;

&lt;p&gt;    public Iterator getHeaderValues(String name) &lt;/p&gt;
{
        name = name.toLowerCase();
        ArrayList values = (ArrayList) headers.get(name);
        if (values == null)
            return ((new ArrayList()).iterator());
        else
            return (values.iterator());
    }

&lt;p&gt;We use HashMap headers in order to store headers so in our case our header names are case sensetive (because of using .equals() method).&lt;br/&gt;
Let&apos;s consider the following sample:&lt;br/&gt;
1. In case of Tomcat&lt;br/&gt;
if we put the &quot;myName&quot; -&amp;gt; &quot;myValue&quot; pair we will be able to retrieve it by name &quot;myname&quot;&lt;/p&gt;

&lt;p&gt;2. In our case&lt;br/&gt;
if we put the &quot;myName&quot; -&amp;gt; &quot;myValue&quot; pair we will NOT be able to retrive it by name &quot;myname&quot;&lt;/p&gt;</comment>
                            <comment id="19462" author="balex" created="Thu, 7 Sep 2006 15:20:43 +0000"  >&lt;p&gt;Fair enough. Could you please provide a patch that you would like applied to SavedRequest off current SVN trunk, and I will apply it. Thanks.&lt;/p&gt;</comment>
                            <comment id="19465" author="agrebnev" created="Thu, 7 Sep 2006 17:49:09 +0000"  >&lt;p&gt;OK. In the file &lt;br/&gt;
&lt;a href=&quot;http://svn.sourceforge.net/viewvc/acegisecurity/trunk/acegisecurity/core/src/main/java/org/acegisecurity/ui/savedrequest/SavedRequest.java?revision=1580&amp;amp;view=markup&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://svn.sourceforge.net/viewvc/acegisecurity/trunk/acegisecurity/core/src/main/java/org/acegisecurity/ui/savedrequest/SavedRequest.java?revision=1580&amp;amp;view=markup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Substitute the addHeader method for&lt;/p&gt;

&lt;p&gt;    private void addHeader(String name, String value) {&lt;br/&gt;
        String canonicalName = new String(name.toLowerCase());&lt;br/&gt;
        ArrayList values = (ArrayList) headers.get(canonicalName);&lt;/p&gt;

&lt;p&gt;        if (values == null) &lt;/p&gt;
{
            values = new ArrayList();
            headers.put(canonicalName, values);
        }

&lt;p&gt;        values.add(value);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;and the method getHeaderValues substitute for&lt;/p&gt;

&lt;p&gt;    public Iterator getHeaderValues(String name) {&lt;br/&gt;
        String canonicalName = new String(name.toLowerCase());&lt;br/&gt;
        ArrayList values = (ArrayList) headers.get(canonicalName);&lt;/p&gt;

&lt;p&gt;        if (values == null) &lt;/p&gt;
{
            return ((new ArrayList()).iterator());
        }
&lt;p&gt; else &lt;/p&gt;
{
            return (values.iterator());
        }
&lt;p&gt;    }&lt;/p&gt;</comment>
                            <comment id="19625" author="raykrueger" created="Thu, 14 Sep 2006 07:46:34 +0000"  >&lt;p&gt;In the 1.0.1 one release, headers are being stored in a TreeMap with CASE_INSENSITIVE_ORDER specified.&lt;br/&gt;
Meaning that headers were being saved case-insensitve already.&lt;/p&gt;

&lt;p&gt;I noticed that we were using an hsqldb.HashMap for parameters some how though. Parameters are now stored in a Case-insensitive TreeMap as well.&lt;/p&gt;</comment>
                            <comment id="126215" author="issuemaster" created="Sat, 6 Feb 2016 06:30:55 +0000"  >&lt;p&gt;This issue has been migrated to &lt;a href=&quot;https://github.com/spring-projects/spring-security/issues/577&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://github.com/spring-projects/spring-security/issues/577&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="14382">SEC-308</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 7 Sep 2006 14:38:17 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>20520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01zpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>