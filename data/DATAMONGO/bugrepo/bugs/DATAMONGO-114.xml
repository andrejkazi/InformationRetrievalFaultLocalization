<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:02:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-114/DATAMONGO-114.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-114] UpdateFirst/Multi operations on MongoTemplate not properly using converter to store objects.</title>
                <link>https://jira.spring.io/browse/DATAMONGO-114</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;The code posted in the forum looks correct, looks like we are not handling embedded objects correctly for the update case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="40426">DATAMONGO-114</key>
            <summary>UpdateFirst/Multi operations on MongoTemplate not properly using converter to store objects.</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://jira.spring.io/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="jbrisbin">Jon Brisbin</assignee>
                                    <reporter username="mark.pollack">Mark Pollack</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 May 2011 06:42:11 +0000</created>
                <updated>Thu, 6 Dec 2012 15:12:47 +0000</updated>
                            <resolved>Thu, 26 May 2011 08:59:36 +0000</resolved>
                                                    <fixVersion>1.0 M3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="71635" author="jbrisbin" created="Mon, 2 May 2011 11:34:18 +0000"  >&lt;p&gt;Pushed a fix for this that uses the currently-configured converter to process the Update spec to properly convert POJOs that were used in the Update.&lt;/p&gt;</comment>
                            <comment id="71694" author="jbrisbin" created="Thu, 26 May 2011 08:59:36 +0000"  >&lt;p&gt;The fix mentioned previously seems to be working correctly, so closing this issue.&lt;/p&gt;</comment>
                            <comment id="77191" author="ssharma" created="Tue, 27 Mar 2012 02:45:27 +0000"  >&lt;p&gt;I am using spring-data-mongodb-1.1.0.jar and can still reproduce the issue.&lt;/p&gt;

&lt;p&gt;An embdeded object of an entity cannot be updated using updateFirst. Code errors &lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: json can&apos;t serialize type : class com.activitystream.domain.ASLikeActionDetail&lt;br/&gt;
        at com.mongodb.util.JSON.serialize(JSON.java:261)&lt;br/&gt;
        at com.mongodb.util.JSON.serialize(JSON.java:161)&lt;br/&gt;
        at com.mongodb.util.JSON.serialize(JSON.java:141)&lt;br/&gt;
        at com.mongodb.util.JSON.serialize(JSON.java:58)&lt;br/&gt;
        at com.mongodb.BasicDBObject.toString(BasicDBObject.java:84)&lt;br/&gt;
        at java.lang.String.valueOf(String.java:2826)&lt;br/&gt;
        at java.lang.StringBuilder.append(StringBuilder.java:115)&lt;br/&gt;
        at com.datastore.nosql.mongodb.repository.CustomMongoRepository.updateFirst(CustomMongoRepository.java:208)&lt;br/&gt;
        at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:323)&lt;br/&gt;
        at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:308)&lt;/p&gt;

&lt;p&gt;-Sid&lt;/p&gt;</comment>
                            <comment id="77193" author="ssharma" created="Tue, 27 Mar 2012 03:09:57 +0000"  >&lt;p&gt;Please ignore. It turned out that there was no default constructor in the embedded object.&lt;/p&gt;

&lt;p&gt;Thx,&lt;br/&gt;
Sid&lt;/p&gt;</comment>
                            <comment id="77195" author="ssharma" created="Tue, 27 Mar 2012 03:40:08 +0000"  >&lt;p&gt;Just wanted to check if this fix is available in Spring Data spring-data-mongodb-1.1.0?&lt;/p&gt;</comment>
                            <comment id="85862" author="john.smothers@gmail.com" created="Thu, 6 Dec 2012 15:12:47 +0000"  >&lt;p&gt;I&apos;m still having this issue in version 1.1.  My pojo looks is a Data class that contains a list of Tags (key/value pairs):&lt;/p&gt;

&lt;p&gt;public class Data implements Serializable {&lt;br/&gt;
    private String id = null;&lt;br/&gt;
    private String value = null;&lt;br/&gt;
    private List&amp;lt;Tag&amp;gt; tags = null;&lt;/p&gt;

&lt;p&gt;    // default constructor&lt;br/&gt;
    // constructor with arguments&lt;br/&gt;
    // getter methods&lt;br/&gt;
    // setter methods&lt;br/&gt;
    // equals method&lt;br/&gt;
    // hashCode method&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;public class Tag implements Serializable {&lt;br/&gt;
    private String key = null;&lt;br/&gt;
    private String value = null;&lt;/p&gt;

&lt;p&gt;    // default constructor&lt;br/&gt;
    // constructor with arguments&lt;br/&gt;
    // getter methods&lt;br/&gt;
    // setter methods&lt;br/&gt;
    // equals method&lt;br/&gt;
    // hashCode method&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;I get the following exception:&lt;br/&gt;
java.lang.IllegalArgumentException: can&apos;t serialize class com.smo.metric.data.shared.model.Tag&lt;/p&gt;

&lt;p&gt;when trying to find Data records that contain a particular Tag with the following code:&lt;/p&gt;

&lt;p&gt;Tag tag = new Tag();&lt;br/&gt;
tag.setKey(&quot;aKey&quot;);&lt;br/&gt;
tag.setValue(&quot;aValue&quot;);&lt;br/&gt;
mongoTemplate.find(new Query().addCriteria(Criteria.where(&quot;tags&quot;).is(tag));&lt;/p&gt;

&lt;p&gt;This works using the Mongo command line using the command:&lt;br/&gt;
db.data.find({ tags : &lt;/p&gt;
{ key:&apos;aKey&apos;, value:&apos;aValue&apos; }
&lt;p&gt; })&lt;/p&gt;

&lt;p&gt;Any help would be much appreciated.&lt;/p&gt;


</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 May 2011 11:34:18 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0504n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24209</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://forum.springsource.org/showthread.php?p=360236]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>