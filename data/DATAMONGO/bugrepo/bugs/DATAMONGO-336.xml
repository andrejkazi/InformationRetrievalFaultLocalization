<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:50:56 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-336/DATAMONGO-336.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-336] MongoDB GeoNear returning  null pointer exception when giving data more precision than test data</title>
                <link>https://jira.spring.io/browse/DATAMONGO-336</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;When i give data as per test (geoSpatialTest.java) its returning  results. But when I input more precision data from google map data its giving null pointer exception. &lt;br/&gt;
(1.4377786502730732,103.78692984580994)&lt;br/&gt;
But when i try in mongodb intractive consol its returning values . &lt;br/&gt;
Could you please investigate . &lt;/p&gt;</description>
                <environment>MongoDB With Spring 3 </environment>
        <key id="41155">DATAMONGO-336</key>
            <summary>MongoDB GeoNear returning  null pointer exception when giving data more precision than test data</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="sony_notes">sony</reporter>
                        <labels>
                            <label>error-reporting</label>
                    </labels>
                <created>Sat, 3 Dec 2011 19:39:17 +0000</created>
                <updated>Mon, 25 Mar 2013 09:31:00 +0000</updated>
                            <resolved>Thu, 22 Dec 2011 23:39:46 +0000</resolved>
                                    <version>1.0 M5</version>
                                    <fixVersion>1.0 GA</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="74080" author="olivergierke" created="Tue, 20 Dec 2011 07:06:52 +0000"  >&lt;p&gt;Would you mind coming up with a test case?&lt;/p&gt;</comment>
                            <comment id="74128" author="sony_notes" created="Wed, 21 Dec 2011 06:51:05 +0000"  >&lt;p&gt;I am attaching both my result and pojo . here . but iam getting the following errors Testcase: geoNear(ed.ws.mongospring.ContractTest):	Caused an ERROR&lt;br/&gt;
null&lt;br/&gt;
java.lang.NullPointerExce&lt;/p&gt;</comment>
                            <comment id="74129" author="sony_notes" created="Wed, 21 Dec 2011 06:51:41 +0000"  >&lt;p&gt;I provided my test cases as attachments&lt;/p&gt;</comment>
                            <comment id="74139" author="olivergierke" created="Wed, 21 Dec 2011 09:52:06 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://jira.spring.io/browse/DATAMONGO-336&quot; title=&quot;MongoDB GeoNear returning  null pointer exception when giving data more precision than test data&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DATAMONGO-336&quot;&gt;&lt;del&gt;DATAMONGO-336&lt;/del&gt;&lt;/a&gt; - Fixed potential NullPointerException in MongoTemplate.&lt;/p&gt;

&lt;p&gt;The execution of MongoTemplate.geoNear(&#8230;) potentially caused NullPointerExceptions in case the actual query does not return any results. The wrapping return object returns null for the result list and general statistics which we didn&apos;t shield against.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="74186" author="sony_notes" created="Thu, 22 Dec 2011 06:53:35 +0000"  >&lt;p&gt;I believe that you mean that mongodb will not return any data . &lt;br/&gt;
But feel its wrong . For your information location latitude and longitude i taken from google map. &lt;/p&gt;

&lt;p&gt;When i run dbcommand geoNear its returning data . &lt;br/&gt;
but when i run the following code in test case its returning null pointer &lt;br/&gt;
NearQuery geoNear = NearQuery.near(1.438543,103.786612, Metrics.KILOMETERS).num(10).maxDistance(150);&lt;br/&gt;
GeoResults&amp;lt;LocationMap&amp;gt; geoNearResult = mongoTemplate.geoNear(geoNear, LocationMap.class);&lt;/p&gt;

&lt;p&gt;db.runCommand({geoNear : &quot;map&quot;, near : &lt;span class=&quot;error&quot;&gt;&amp;#91;1.438543,103.786612&amp;#93;&lt;/span&gt;, num : 10,maxDistance:1, query:{_class:&quot;edu.samples.mvc.basic.LocationMap&quot;}});&lt;br/&gt;
result would like as follows &lt;/p&gt;

&lt;p&gt;{&lt;br/&gt;
	&quot;ns&quot; : &quot;demo.map&quot;,&lt;br/&gt;
	&quot;near&quot; : &quot;1101000001000011010100000111001111111000000101001110&quot;,&lt;br/&gt;
	&quot;results&quot; : [&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4edcd42f81c634eb0eda592b&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;woodlands&quot;,
				&quot;businessName&quot; : &quot;test3&quot;,
				&quot;type&quot; : &quot;civic&quot;,
				&quot;location&quot; : [
					1.438543,
					103.786612
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1ee9781c654db7de6e375&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Choa chu kang&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.438543,
					103.786612
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1ef2181c6e4bd8a37d3cf&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Choa chu kang&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.438543,
					103.786612
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1ef5c81c6af20d19976a6&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Choa chu kang&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.438543,
					103.786612
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1f22b81c6066f280840b0&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Choa chu kang&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.438543,
					103.786612
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0.0009505577310200951,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1ee9781c654db7de6e376&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Wood lands&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.439229,
					103.785954
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0.0009505577310200951,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1ef2181c6e4bd8a37d3d0&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Wood lands&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.439229,
					103.785954
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0.0009505577310200951,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1ef5c81c6af20d19976a7&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Wood lands&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.439229,
					103.785954
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0.0009505577310200951,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1f22b81c6066f280840b1&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Wood lands&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.439229,
					103.785954
				]
			}
&lt;p&gt;		},&lt;br/&gt;
		{&lt;br/&gt;
			&quot;dis&quot; : 0.0388972273819031,&lt;br/&gt;
			&quot;obj&quot; : &lt;/p&gt;
{
				&quot;_id&quot; : ObjectId(&quot;4ef1ee9781c654db7de6e377&quot;),
				&quot;_class&quot; : &quot;edu.samples.mvc.basic.LocationMap&quot;,
				&quot;name&quot; : &quot;Sembwang&quot;,
				&quot;businessName&quot; : &quot;Restaurant&quot;,
				&quot;type&quot; : &quot;Rest&quot;,
				&quot;location&quot; : [
					1.41366,
					103.816509
				]
			}
&lt;p&gt;		}&lt;br/&gt;
	],&lt;br/&gt;
	&quot;stats&quot; : &lt;/p&gt;
{
		&quot;time&quot; : 0,
		&quot;btreelocs&quot; : 0,
		&quot;nscanned&quot; : 19,
		&quot;objectsLoaded&quot; : 18,
		&quot;avgDistance&quot; : 0.004269945830598348,
		&quot;maxDistance&quot; : 0.03890957949613707
	}
&lt;p&gt;,&lt;br/&gt;
	&quot;ok&quot; : 1&lt;br/&gt;
}&lt;/p&gt;</comment>
                            <comment id="74188" author="sony_notes" created="Thu, 22 Dec 2011 06:56:43 +0000"  >&lt;p&gt;DBcommand geoNear returning data but  when i try NearQuery.near in mongodb template with same data it returning null pointer exceptions . &lt;/p&gt;</comment>
                            <comment id="74189" author="olivergierke" created="Thu, 22 Dec 2011 07:18:54 +0000"  >&lt;p&gt;Have you tried running your code against the latest snapshot? If the exception still occurs, please add the stacktrace.&lt;/p&gt;</comment>
                            <comment id="74190" author="sony_notes" created="Thu, 22 Dec 2011 07:33:13 +0000"  >&lt;p&gt;Iam still using M5  with following dependency . &lt;br/&gt;
&amp;lt;dependency&amp;gt;&lt;br/&gt;
            &amp;lt;groupId&amp;gt;org.springframework.data&amp;lt;/groupId&amp;gt;&lt;br/&gt;
            &amp;lt;artifactId&amp;gt;spring-data-mongodb&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
            &amp;lt;version&amp;gt;1.0.0.M5&amp;lt;/version&amp;gt;&lt;br/&gt;
        &amp;lt;/dependency&amp;gt;&lt;br/&gt;
and following are the the stracktrac &lt;br/&gt;
Test set: ed.ws.mongospring.ContractTest&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 7.45 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
geoNear(ed.ws.mongospring.ContractTest)  Time elapsed: 7.046 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.geoNear(MongoTemplate.java:495)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.geoNear(MongoTemplate.java:482)&lt;br/&gt;
	at ed.ws.mongospring.ContractTest.geoNear(ContractTest.java:40)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)&lt;br/&gt;
	at $Proxy0.invoke(Unknown Source)&lt;br/&gt;
	at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)&lt;br/&gt;
	at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)&lt;/p&gt;</comment>
                            <comment id="74191" author="olivergierke" created="Thu, 22 Dec 2011 07:41:29 +0000"  >&lt;p&gt;Well I cannot fix the bug in an already released version &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. Please go ahead, grab the snapshot that contains the modification I made for this ticket and report if your test case works or still fails.&lt;/p&gt;</comment>
                            <comment id="74192" author="sony_notes" created="Thu, 22 Dec 2011 07:46:12 +0000"  >&lt;p&gt;Iam sorry to ask silly question how i get snapshot . Do you have Maven repository for snapshot?. And what could be dependency (especially version) &lt;/p&gt;</comment>
                            <comment id="74222" author="olivergierke" created="Thu, 22 Dec 2011 23:39:37 +0000"  >&lt;p&gt;There&apos;s a repository at &lt;a href=&quot;http://repo.springsource.org/milestone&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo.springsource.org/milestone&lt;/a&gt;. We just released 1.0 GA so I&apos;ll close this as fixed. In case you still see the issue with 1.0 GA feel free to open another ticket.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="19235" name="ContractTest.java" size="1810" author="sony_notes" created="Wed, 21 Dec 2011 06:47:59 +0000"/>
                            <attachment id="19236" name="LocationMap.java" size="2465" author="sony_notes" created="Wed, 21 Dec 2011 06:51:05 +0000"/>
                            <attachment id="19237" name="mylyn-context.zip" size="1100" author="olivergierke" created="Wed, 21 Dec 2011 09:52:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Tue, 20 Dec 2011 07:06:52 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28484</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02p6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://forum.springsource.org/showthread.php?119440-MongoDB-geonear-null-pointer-exception]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>