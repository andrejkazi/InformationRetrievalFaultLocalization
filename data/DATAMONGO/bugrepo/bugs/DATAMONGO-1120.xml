<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:24:46 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-1120/DATAMONGO-1120.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-1120] Pageable queries timeout or return incorrect counts</title>
                <link>https://jira.spring.io/browse/DATAMONGO-1120</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;Counts for total elements and pages on some repositories return 0 and some throw a 500 when the socket times out.  This is ONLY occurring on calls that return a Page object and accept a Pageable input.  After debugging a bit, the inputs all seem to be populated from the controller fine.  The query definitions are&lt;/p&gt;

&lt;p&gt;findByActiveIsTrue = wrong counts for totalElements and totalPages. both are 0&lt;br/&gt;
findByUserId = this collection is large at around 3 million records, but is indexed.&lt;/p&gt;

&lt;p&gt;This is only happening in 1.6.1 and works correctly in 1.6.0&lt;/p&gt;</description>
                <environment></environment>
        <key id="61216">DATAMONGO-1120</key>
            <summary>Pageable queries timeout or return incorrect counts</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="rkaltreider">Ryan Kaltreider</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Dec 2014 13:39:20 +0000</created>
                <updated>Thu, 5 Mar 2015 11:31:17 +0000</updated>
                            <resolved>Thu, 18 Dec 2014 07:02:23 +0000</resolved>
                                    <version>1.6.1 (Evans SR1)</version>
                    <version>1.7 M1 (Fowler)</version>
                                    <fixVersion>1.6.2 (Evans SR2)</fixVersion>
                    <fixVersion>1.7 RC1 (Fowler)</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                <comments>
                            <comment id="110689" author="rkaltreider" created="Mon, 15 Dec 2014 15:07:42 +0000"  >&lt;p&gt;ok i am on to something.  i turned up logging to TRACE and I deffinately see an issue.&lt;/p&gt;

&lt;p&gt;in 1.6.0 here is the query that is generated by MongoTemplate which is using the correct field name in the database as indicated by the config&lt;/p&gt;

&lt;p&gt;@Field(&quot;act&quot;)&lt;br/&gt;
private boolean active;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; org.springframework.data.mongodb.core.MongoTemplate:1624 - find using query: &lt;/p&gt;
{ &quot;act&quot; : true}
&lt;p&gt; fields: null for class: class c.f.a.question.model.Question in collection: question&lt;/p&gt;

&lt;p&gt;in 1.6.1 here is the log&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;DEBUG&amp;#93;&lt;/span&gt; org.springframework.data.mongodb.core.MongoTemplate:1624 - find using query: &lt;/p&gt;
{ &quot;active&quot; : true}
&lt;p&gt; fields: null for class: class c.f.a.question.model.Question in collection: question&lt;/p&gt;

&lt;p&gt;Not sure where to go from here, but it seems like its using the property of my class and its not respecting the annotation.&lt;/p&gt;</comment>
                            <comment id="110781" author="olivergierke" created="Thu, 18 Dec 2014 07:02:36 +0000"  >&lt;p&gt;This was basically a side effect of &lt;a href=&quot;https://jira.spring.io/browse/DATAMONGO-1080&quot; title=&quot;AbstractMongoQuery must not eagerly post-process results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DATAMONGO-1080&quot;&gt;&lt;del&gt;DATAMONGO-1080&lt;/del&gt;&lt;/a&gt; which causes the count query not being mapped correctly as its execution did not get the domain type handed so that it wasn&apos;t able to apply the field mapping. This is fixed both in master and the Evans bug fix branch, feel free to give the snapshots a try.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="61327">DATAMONGO-1126</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="60432">DATAMONGO-1080</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 18 Dec 2014 07:02:36 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>olivergierke</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08253:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47051</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10480" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="71">55 - Evans SR2</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>