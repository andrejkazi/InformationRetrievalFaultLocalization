<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:11:26 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-465/DATAMONGO-465.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-465] Mongo inserts document with &quot;_id&quot; as an integer but saves with &quot;_id&quot; as a string. </title>
                <link>https://jira.spring.io/browse/DATAMONGO-465</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I am using 1.0.1.RELEASE of Spring Data MongoDB. I have encouraged an unexpected behavior. &lt;/p&gt;

&lt;p&gt;I have defined an institutions collection based on a class called &lt;tt&gt;AccreditedPostsecondaryInstitution&lt;/tt&gt;. &lt;span class=&quot;error&quot;&gt;&amp;#91;aside: the source can be found here. https://github.com/kern3020/harbinger &amp;#93;&lt;/span&gt;.  &lt;tt&gt;@Id&lt;/tt&gt; is defined as a &lt;tt&gt;String&lt;/tt&gt;. &lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@Document&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;(collection=&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;institutions&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;public&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; AccreditedPostsecondaryInstitution &lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;extends&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; Places {&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;	&lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@SuppressWarnings&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;unused&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;	&lt;/span&gt;&lt;span style=&quot;color: gray; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;@Id&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;	&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;private&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt; String instituteId;&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;When it is inserted into mongo, it is represented as an integer. &lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; db.institutions.findOne({&quot;us_state&quot; : &quot;HI&quot; })&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;{&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &quot;_id&quot; : 111911,&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  &quot;_class&quot; : &quot;org.john.app.domain.AccreditedPostsecondaryInstitution&quot;,&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;  ...&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;}&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Now I want to update the location file. Initially, there are no classes with a &lt;tt&gt;location&lt;/tt&gt; field. &lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&amp;gt; db.institutions.findOne({&quot;us_state&quot; : &quot;HI&quot;, &quot;location&quot;: {&quot;$exists&quot; : true} })&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;null&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Using the Spring Data Mongo API, I update it.&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;Criteria c = where(&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;us_state&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;).is(&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;HI&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;).and(&lt;/span&gt;&lt;span style=&quot;color: blue; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;&quot;location&quot;&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;).exists(&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;false&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;results = mongoTemplate.find(query(c).limit(&lt;/span&gt;&lt;span style=&quot;color: #009900; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;), AccreditedPostsecondaryInstitution.&lt;/span&gt;&lt;span style=&quot;color: #006699; font-weight: bold; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: #008200; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;// ...update the institute....&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;mongoTemplate.save(institute,COLLECTION_NAME);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;Instead of updating, it creates a new document using the &lt;tt&gt;_id&lt;/tt&gt; as a &lt;tt&gt;String&lt;/tt&gt;.&lt;/p&gt;

&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&amp;nbsp;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;
&lt;p&gt;&amp;gt; db.institutions.findOne({&quot;us_state&quot; : &quot;HI&quot;, &quot;location&quot;: &lt;/p&gt;
{&quot;$exists&quot; : true}
&lt;p&gt; })&lt;br/&gt;
{&lt;br/&gt;
  &quot;_id&quot; : &quot;111911&quot;,&lt;br/&gt;
  &quot;_class&quot; : &quot;org.john.app.domain.AccreditedPostsecondaryInstitution&quot;,&lt;br/&gt;
  ...&lt;br/&gt;
}&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;I could make an argument for &lt;tt&gt;_id&lt;/tt&gt; an &lt;tt&gt;Integer&lt;/tt&gt; or &lt;tt&gt;String&lt;/tt&gt; but not both.&lt;/p&gt;

&lt;p&gt;-jk&lt;/p&gt;</description>
                <environment>Spring data mongo  - 1.0.1.RELEASE</environment>
        <key id="43974">DATAMONGO-465</key>
            <summary>Mongo inserts document with &quot;_id&quot; as an integer but saves with &quot;_id&quot; as a string. </summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="kern3020">John Kern</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jun 2012 14:57:48 +0000</created>
                <updated>Mon, 25 Mar 2013 09:30:58 +0000</updated>
                            <resolved>Tue, 26 Jun 2012 09:03:16 +0000</resolved>
                                    <version>1.0.2</version>
                    <version>1.1 M1</version>
                                    <fixVersion>1.1 M2</fixVersion>
                                    <component>Mapping</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="80899" author="kern3020" created="Thu, 21 Jun 2012 15:24:54 +0000"  >&lt;p&gt;BTW, I can workaround this problem by defined the variable associated with @Id as an Integer. &lt;/p&gt;

&lt;p&gt;-jk&lt;/p&gt;</comment>
                            <comment id="80900" author="olivergierke" created="Thu, 21 Jun 2012 15:40:00 +0000"  >&lt;p&gt;The weird part here is that the id shouldn&apos;t become a numeric value in the document in the first place. Is there a chance the very first document is a left-over from some former mapping or an insert through the console maybe? I&apos;ve tried to reproduce the mapping error locally here but failed. Is there a chance you provide a brief test case of a tiny class containing a &lt;tt&gt;String&lt;/tt&gt; being converted into a numeric value on first insert?&lt;/p&gt;</comment>
                            <comment id="80901" author="olivergierke" created="Thu, 21 Jun 2012 15:44:58 +0000"  >&lt;p&gt;Looking at your code it seems I found the root of the problem. You have an &lt;tt&gt;Integer&lt;/tt&gt; property named &lt;tt&gt;id&lt;/tt&gt; in the class as well. This one gets picked up by the mapping infrastructure by convention as well (see the &lt;a href=&quot;http://static.springsource.org/spring-data/data-mongodb/docs/1.0.2.RELEASE/reference/html/#mongo-template.id-handling&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;reference documentation&lt;/a&gt;). What&apos;s the reason you need both properties? Can {{id)) be renamed to something different?&lt;/p&gt;

&lt;p&gt;While I&apos;d argue the id handling is generally work, we should probably bring these cases to the table more prominently by rejecting the domain object in case we find an explicitly annotated property &lt;b&gt;and&lt;/b&gt; a default one.&lt;/p&gt;</comment>
                            <comment id="80902" author="kern3020" created="Thu, 21 Jun 2012 16:06:36 +0000"  >&lt;p&gt;Hello Oliver, &lt;/p&gt;

&lt;p&gt;Thanks for your prompt response. &lt;/p&gt;

&lt;p&gt;Major point: I&apos;ll update my code. Thanks for pointing that out. There is no reason for both properties.&lt;/p&gt;


&lt;p&gt;1) With respect to the doc/specification, shouldn&apos;t the order of precedence determine which one wins? &lt;br/&gt;
2) Also, if the code is ambiguous, can spring data provide a warning? &lt;/p&gt;

&lt;p&gt;Thanks for your time and consideration. &lt;/p&gt;

&lt;p&gt;Sincerely,&lt;br/&gt;
-john&lt;/p&gt;</comment>
                            <comment id="81099" author="olivergierke" created="Mon, 25 Jun 2012 01:44:48 +0000"  >&lt;p&gt;I&apos;ve created and fixed the according tickets in Spring Data Commons (&lt;a href=&quot;https://jira.spring.io/browse/DATACMNS-186&quot; title=&quot;BasicPersistentEntity should reject multiple id properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DATACMNS-186&quot;&gt;&lt;del&gt;DATACMNS-186&lt;/del&gt;&lt;/a&gt;) and upgraded the dependency of Spring Data Mongo to the fixed version. So you should now see a &lt;tt&gt;MappingException&lt;/tt&gt; in case you declare multiple fields that generally qualify as &lt;tt&gt;id&lt;/tt&gt; property asking you to fix the mapping. Feel free to give the &lt;tt&gt;1.0.3.BUILD-SNAPSHOT&lt;/tt&gt; a try.&lt;/p&gt;</comment>
                            <comment id="81109" author="kern3020" created="Mon, 25 Jun 2012 07:23:41 +0000"  >&lt;p&gt;Hello Oliver, &lt;/p&gt;

&lt;p&gt;I updated my pom.xml to pick up the new build. &lt;/p&gt;

&lt;p&gt;diff --git a/reaper/pom.xml b/reaper/pom.xml&lt;br/&gt;
index 416af46..5274f10 100644&lt;br/&gt;
&amp;#8212; a/reaper/pom.xml&lt;br/&gt;
+++ b/reaper/pom.xml&lt;br/&gt;
@@ -11,7 +11,7 @@&lt;br/&gt;
         &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;&lt;br/&gt;
         &amp;lt;org.springframework-version&amp;gt;3.1.1.RELEASE&amp;lt;/org.springframework-version&amp;gt;&lt;br/&gt;
         &amp;lt;org.slf4j-version&amp;gt;1.5.10&amp;lt;/org.slf4j-version&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;spring.data.mongo.version&amp;gt;1.0.1.RELEASE&amp;lt;/spring.data.mongo.version&amp;gt;&lt;br/&gt;
+        &amp;lt;spring.data.mongo.version&amp;gt;1.0.3.BUILD-SNAPSHOT&amp;lt;/spring.data.mongo.version&amp;gt;&lt;br/&gt;
   &amp;lt;/properties&amp;gt;&lt;br/&gt;
   &amp;lt;dependencies&amp;gt;&lt;br/&gt;
          &amp;lt;dependency&amp;gt;&lt;br/&gt;
@@ -92,6 +92,14 @@&lt;br/&gt;
                    &amp;lt;name&amp;gt;Spring Maven Release Repository&amp;lt;/name&amp;gt;&lt;br/&gt;
                    &amp;lt;url&amp;gt;&lt;a href=&quot;http://repo.springsource.org/libs-release&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo.springsource.org/libs-release&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
                &amp;lt;/repository&amp;gt;&lt;br/&gt;
+               &amp;lt;repository&amp;gt;&lt;br/&gt;
+                       &amp;lt;id&amp;gt;spring-maven-snapshot&amp;lt;/id&amp;gt;&lt;br/&gt;
+                       &amp;lt;snapshots&amp;gt;&lt;br/&gt;
+                       &amp;lt;enabled&amp;gt;true&amp;lt;/enabled&amp;gt;&lt;br/&gt;
+                       &amp;lt;/snapshots&amp;gt;&lt;br/&gt;
+                       &amp;lt;name&amp;gt;Springframework Maven SNAPSHOT Repository&amp;lt;/name&amp;gt;&lt;br/&gt;
+                       &amp;lt;url&amp;gt;&lt;a href=&quot;http://maven.springframework.org/snapshot&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://maven.springframework.org/snapshot&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
+               &amp;lt;/repository&amp;gt;&lt;br/&gt;
         &amp;lt;repository&amp;gt;&lt;br/&gt;
             &amp;lt;id&amp;gt;maven2-repository.dev.java.net&amp;lt;/id&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Then I reintroduced the bug.&lt;/p&gt;

&lt;p&gt;diff --git a/reaper/src/main/java/org/john/app/domain/AccreditedPostsecondaryInstitution.java b/reaper/src/main/java/org/john/app/domain/AccreditedPostsecondaryInstitution.java&lt;br/&gt;
index 06c4b1c..b5a3739 100644&lt;br/&gt;
&amp;#8212; a/reaper/src/main/java/org/john/app/domain/AccreditedPostsecondaryInstitution.java&lt;br/&gt;
+++ b/reaper/src/main/java/org/john/app/domain/AccreditedPostsecondaryInstitution.java&lt;br/&gt;
@@ -38,7 +38,10 @@ import org.springframework.data.mongodb.core.mapping.Document;&lt;/p&gt;

&lt;p&gt; @Document(collection=&quot;institutions&quot;)&lt;br/&gt;
 public class AccreditedPostsecondaryInstitution extends Places {&lt;br/&gt;
+       @SuppressWarnings(&quot;unused&quot;)&lt;br/&gt;
        @Id&lt;br/&gt;
+       private String instituteId;&lt;br/&gt;
+       &lt;br/&gt;
        private Integer id;&lt;/p&gt;

&lt;p&gt;Unfortunately, I do not encounter a MongoException.  &lt;/p&gt;

&lt;p&gt;I think I should be able to write a short reproducible testcase. Let me give this a try. &lt;/p&gt;

&lt;p&gt;Sincerely,&lt;br/&gt;
John&lt;/p&gt;</comment>
                            <comment id="81113" author="kern3020" created="Mon, 25 Jun 2012 08:22:27 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I see the fix when I use Jeroen Reijn&apos;s toturial example. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://blog.jeroenreijn.com/2011/07/getting-started-with-mongodb-and-spring.html&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://blog.jeroenreijn.com/2011/07/getting-started-with-mongodb-and-spring.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If one modifies his code to add an implicit, duplicate ID, spring data complains as it should: &lt;/p&gt;

&lt;p&gt;Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Cannot autogenerate id of type java.lang.Integer for entity of type com.jeroenreijn.mongodb.example.domain.Person! &lt;/p&gt;

&lt;p&gt;Is it possible for the usage message to tell the use why it isn&apos;t possible? It would be faster to fix if the app developer knew it was a duplicate definition. &lt;/p&gt;

&lt;p&gt;-jk&lt;/p&gt;</comment>
                            <comment id="81135" author="olivergierke" created="Tue, 26 Jun 2012 02:58:48 +0000"  >&lt;p&gt;I think you&apos;re mixing things up here. The exception message the blog post shows is related to the auto-generation of id&apos;s which we only provide for id&apos;s of type &lt;tt&gt;ObjectId&lt;/tt&gt;, &lt;tt&gt;String&lt;/tt&gt; and &lt;tt&gt;BigInteger&lt;/tt&gt; as ids generated by MongoDB are &lt;tt&gt;ObjectId}}s and all other numeric types are to small to reliably convert them into {{ObjectId&lt;/tt&gt; and back.&lt;/p&gt;

&lt;p&gt;To see the newly introduced rejection do thre things:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;make sure you use the SpringSource snapshot repo - &lt;a href=&quot;http://repo.springsource.org/libs-snapshot&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo.springsource.org/libs-snapshot&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;use Spring Data MongoDB version 1.0.3.BUILD-SNAPSHOT&lt;/li&gt;
	&lt;li&gt;use Spring Data Commons version 1.3.2.BUILD-SNAPSHOT or 1.4.0.BUILD-SNAPSHOT&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="81151" author="kern3020" created="Tue, 26 Jun 2012 08:16:18 +0000"  >&lt;p&gt;Hello Oliver, &lt;/p&gt;

&lt;p&gt;I did attempt to see the new behavior.  I updated my pom.xml accordingly (see delta below). This error was generated... &lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NoSuchMethodError: org.springframework.data.authentication.UserCredentials: method &amp;lt;init&amp;gt;()V not found&lt;br/&gt;
	at org.springframework.data.mongodb.core.SimpleMongoDbFactory.&amp;lt;init&amp;gt;(SimpleMongoDbFactory.java:53)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.&amp;lt;init&amp;gt;(MongoTemplate.java:164)&lt;/p&gt;

&lt;p&gt;...and makes me think I&apos;m still missing something with respect to the dependencies.  &lt;/p&gt;


&lt;p&gt;jkern@ubuntu:~/workspace/spring-mongo-demo$ git diff pom.xml &lt;br/&gt;
diff --git a/pom.xml b/pom.xml&lt;br/&gt;
index 0d0763d..c52a31b 100644&lt;br/&gt;
&amp;#8212; a/pom.xml&lt;br/&gt;
+++ b/pom.xml&lt;br/&gt;
@@ -13,7 +13,7 @@&lt;br/&gt;
     &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;&lt;br/&gt;
     &amp;lt;slf4j.version&amp;gt;1.6.1&amp;lt;/slf4j.version&amp;gt;&lt;br/&gt;
     &amp;lt;spring.framework.version&amp;gt;3.0.5.RELEASE&amp;lt;/spring.framework.version&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;spring.data.mongo.version&amp;gt;1.0.1.RELEASE&amp;lt;/spring.data.mongo.version&amp;gt;&lt;br/&gt;
+    &amp;lt;spring.data.mongo.version&amp;gt;1.0.3.BUILD-SNAPSHOT&amp;lt;/spring.data.mongo.version&amp;gt;&lt;br/&gt;
     &amp;lt;junit.version&amp;gt;4.8.1&amp;lt;/junit.version&amp;gt;&lt;br/&gt;
   &amp;lt;/properties&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -25,6 +25,13 @@&lt;br/&gt;
       &amp;lt;artifactId&amp;gt;spring-data-mongodb&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
       &amp;lt;version&amp;gt;$&lt;/p&gt;
{spring.data.mongo.version}
&lt;p&gt;&amp;lt;/version&amp;gt;&lt;br/&gt;
     &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
+       &amp;lt;dependency&amp;gt;&lt;br/&gt;
+      &amp;lt;groupId&amp;gt;org.springframework.data&amp;lt;/groupId&amp;gt;&lt;br/&gt;
+      &amp;lt;artifactId&amp;gt;spring-data-commons-core&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
+      &amp;lt;version&amp;gt;1.4.0.BUILD-SNAPSHOT&amp;lt;/version&amp;gt;&lt;br/&gt;
+    &amp;lt;/dependency&amp;gt;&lt;br/&gt;
+&lt;br/&gt;
     &amp;lt;dependency&amp;gt;&lt;br/&gt;
       &amp;lt;groupId&amp;gt;cglib&amp;lt;/groupId&amp;gt;&lt;br/&gt;
       &amp;lt;artifactId&amp;gt;cglib&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
@@ -94,8 +101,8 @@&lt;br/&gt;
     &amp;lt;repository&amp;gt;&lt;br/&gt;
       &amp;lt;id&amp;gt;spring-release&amp;lt;/id&amp;gt;&lt;br/&gt;
       &amp;lt;name&amp;gt;Spring Maven Release Repository&amp;lt;/name&amp;gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;url&amp;gt;&lt;a href=&quot;http://repo.springsource.org/libs-release&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo.springsource.org/libs-release&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
+      &amp;lt;url&amp;gt;&lt;a href=&quot;http://repo.springsource.org/libs-snapshot&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://repo.springsource.org/libs-snapshot&lt;/a&gt;&amp;lt;/url&amp;gt;&lt;br/&gt;
     &amp;lt;/repository&amp;gt;&lt;br/&gt;
   &amp;lt;/repositories&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-&amp;lt;/project&amp;gt;&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
+&amp;lt;/project&amp;gt;&lt;/p&gt;</comment>
                            <comment id="81154" author="olivergierke" created="Tue, 26 Jun 2012 08:31:58 +0000"  >&lt;p&gt;Sorry, my bad. As we fixed this in the Spring Data Commons 1.3.x branches &lt;b&gt;only&lt;/b&gt; the Spring Data Mongo 1.1.x branches benefit from the fix. So you have to use Spring Data MongoDB 1.1.0.BUILD-SNAPSHOT to see the new behaviour. The actual adapting commit for this is &lt;a href=&quot;https://github.com/SpringSource/spring-data-mongodb/commit/e2e5fd8b311658aa83593aefffc59d122c316326&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this one&lt;/a&gt; (see the added test in &lt;tt&gt;MongoMappingContextUnitTests&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="81158" author="kern3020" created="Tue, 26 Jun 2012 08:52:05 +0000"  >
&lt;p&gt;Caused by: org.springframework.data.mapping.model.MappingException: Attempt to add id property java.lang.Integer com.jeroenreijn.mongodb.example.domain.Person.id but already have property private java.lang.String com.jeroenreijn.mongodb.example.domain.Person.personId registered as id. Check your mapping configuration!&lt;/p&gt;


&lt;p&gt;That&apos;s what I&apos;m talking about! Now the app developer not only knows there is a duplicate definition and which types are colliding. &lt;/p&gt;

&lt;p&gt;Good job, Oliver! &lt;/p&gt;

&lt;p&gt;-jk&lt;/p&gt;</comment>
                            <comment id="81159" author="olivergierke" created="Tue, 26 Jun 2012 09:03:16 +0000"  >&lt;p&gt;Great, I&apos;ll mark this as fixed against the upcoming 1.1.0.M2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 21 Jun 2012 15:40:00 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>31275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05o07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>33095</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/kern3020/harbinger]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>