<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:35:17 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-79/DATAMONGO-79.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-79] @Indexed(name = &quot;foo&quot;, unique = true, dropDups = true) where foo is not a valid field causes an exception, but index is still created and all but one data is dropped</title>
                <link>https://jira.spring.io/browse/DATAMONGO-79</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;Using:&lt;/p&gt;

&lt;p&gt;@Indexed(name = &quot;foo&quot;, collection=&quot;test&quot;, unique = true, dropDups = true)&lt;br/&gt;
private String bar;&lt;/p&gt;

&lt;p&gt;causes an exception to be thrown, along the lines of:&lt;/p&gt;

&lt;p&gt;com.mongodb.MongoException$DuplicateKey: E11000 duplicate key error index: mongoDb.test.$foo_1  dup key: { : null }&lt;/p&gt;

&lt;p&gt;but checking via shell of mongodb, the index is still created and all but one entry in the collection is dropped.&lt;/p&gt;</description>
                <environment>osx</environment>
        <key id="40406">DATAMONGO-79</key>
            <summary>@Indexed(name = &quot;foo&quot;, unique = true, dropDups = true) where foo is not a valid field causes an exception, but index is still created and all but one data is dropped</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Complete</resolution>
                                        <assignee username="jbrisbin">Jon Brisbin</assignee>
                                    <reporter username="aco">Adrian Co</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Apr 2011 08:20:21 +0000</created>
                <updated>Mon, 25 Mar 2013 09:31:13 +0000</updated>
                            <resolved>Wed, 6 Apr 2011 12:20:43 +0000</resolved>
                                    <version>1.0 M1</version>
                    <version>1.0 M2</version>
                                    <fixVersion>1.0 M2</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="71552" author="aco" created="Tue, 5 Apr 2011 08:24:48 +0000"  >&lt;p&gt;Additionally, I&apos;m using the snapshot from 1.0.0.BUILD-20110405.112748-214.&lt;/p&gt;

&lt;p&gt;Thanks and let me know if you need further details.&lt;/p&gt;</comment>
                            <comment id="71577" author="jbrisbin" created="Wed, 6 Apr 2011 12:03:08 +0000"  >&lt;p&gt;This happens in MongoDB, not Spring Data. I just re-created this error directly from the command line:&lt;/p&gt;

&lt;p&gt;db.test.ensureIndex(&lt;/p&gt;
{&quot;foo&quot;:1}
&lt;p&gt;,&lt;/p&gt;
{&quot;unique&quot;:true,&quot;dropDups&quot;:true}
&lt;p&gt;);&lt;br/&gt;
db.test.insert(&lt;/p&gt;
{&quot;test&quot;:&quot;value&quot;}
&lt;p&gt;);&lt;br/&gt;
db.test.insert(&lt;/p&gt;
{&quot;test&quot;:&quot;value&quot;}
&lt;p&gt;);&lt;/p&gt;

&lt;p&gt;E11000 duplicate key error index: database.test.$foo_1  dup key: { : null }&lt;/p&gt;

&lt;p&gt;I&apos;m not sure there&apos;s anything in Spring Data we can do, other than to not allow the &quot;name&quot; to be specified on the @Indexed annotation.&lt;/p&gt;</comment>
                            <comment id="71578" author="jbrisbin" created="Wed, 6 Apr 2011 12:13:09 +0000"  >&lt;p&gt;Checked in the MongoDB IRC and if you specify &quot;sparse=true&quot; on your index, this doesn&apos;t happen.&lt;/p&gt;

&lt;p&gt;I just tested this with:&lt;/p&gt;

&lt;p&gt;@Indexed(name = &quot;foo&quot;, unique = true, dropDups = true, sparse = true)&lt;br/&gt;
private Integer ssn;&lt;/p&gt;

&lt;p&gt;There is no error. There&apos;s also duplicate records because the index name doesn&apos;t match the property name, but that&apos;s to be expected. &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="71579" author="jbrisbin" created="Wed, 6 Apr 2011 12:17:59 +0000"  >&lt;p&gt;I also added some checking in the code to issue a warning if the name specified in the annotation doesn&apos;t match the property name and sparse is not set to true.&lt;/p&gt;</comment>
                            <comment id="71581" author="jbrisbin" created="Wed, 6 Apr 2011 12:20:43 +0000"  >&lt;p&gt;Added code to check for the situation where a unique index name doesn&apos;t match the property it&apos;s annotated on and sparse is not set to true. This error doesn&apos;t occur if either the names match or sparse is set to true on unique indexes.&lt;/p&gt;</comment>
                            <comment id="71587" author="aco" created="Thu, 7 Apr 2011 00:37:10 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Thanks for clarifying this.&lt;/p&gt;

&lt;p&gt;On a similar note, I&apos;m not sure what others think, but would it be better to set dropDups=false as the default value? I find it a bit unnerving that the default value might make me lose a lot of data. &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Wed, 6 Apr 2011 12:03:08 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29836</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i050h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29283</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://forum.springsource.org/showthread.php?p=355389]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>