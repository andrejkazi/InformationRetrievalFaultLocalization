<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:48:02 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-227/DATAMONGO-227.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-227] I inserted document by MongoTemplate.insert using spring-data.  But sometimes not inserted that document.</title>
                <link>https://jira.spring.io/browse/DATAMONGO-227</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>

&lt;p&gt;I inserted document by MongoTemplate.insert using spring-data.&lt;/p&gt;

&lt;p&gt;But sometimes not inserted that document.&lt;/p&gt;



&lt;p&gt;==================&lt;/p&gt;


&lt;p&gt;1. MongoDB connection Class&lt;/p&gt;

&lt;p&gt;public class MongoDao {&lt;br/&gt;
@Value(&quot;$&lt;/p&gt;
{mongo.host}
&lt;p&gt;&quot;)&lt;br/&gt;
private String host;&lt;br/&gt;
@Value(&quot;$&lt;/p&gt;
{mongo.port}
&lt;p&gt;&quot;)&lt;br/&gt;
private int port;&lt;br/&gt;
@Value(&quot;$&lt;/p&gt;
{mongo.dbname}
&lt;p&gt;&quot;)&lt;br/&gt;
private String dbname;&lt;br/&gt;
@Value(&quot;$&lt;/p&gt;
{mongo.username}
&lt;p&gt;&quot;)&lt;br/&gt;
private String username;&lt;br/&gt;
@Value(&quot;$&lt;/p&gt;
{mongo.password}
&lt;p&gt;&quot;)&lt;br/&gt;
private String password;&lt;/p&gt;

&lt;p&gt;private MongoTemplate mongoTemplate;&lt;/p&gt;

&lt;p&gt;@Autowired&lt;br/&gt;
public void prepareMongoTemplate() throws Exception&lt;/p&gt;
{ MongoDbFactory mongoDbFactory = new SimpleMongoDbFactory(new Mongo(host, port), dbname); this.mongoTemplate = new MongoTemplate(mongoDbFactory); }

&lt;p&gt;public MongoTemplate getMongoTemplate()&lt;/p&gt;
{ return this.mongoTemplate; }

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;2. Dao Class&lt;/p&gt;

&lt;p&gt;@Repository(&quot;ActivityBonusDao&quot;)&lt;br/&gt;
public class ActivityBonusDaoImpl extends MongoDao implements ActivityBonusDao &lt;/p&gt;
{
private static final String COLLECTION_NAME = &quot;activity.bonuses&quot;;

public void insert(ActivityBonus doc) throws Exception
{ doc.checkInsert(); doc.set_class(&quot;&quot;); getMongoTemplate().insert(doc, COLLECTION_NAME); }

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;3. Data Class&lt;/p&gt;

&lt;p&gt;public class ActivityBonus implements Serializable {&lt;br/&gt;
private static final long serialVersionUID = -955210593540000657L;&lt;br/&gt;
private String id;&lt;br/&gt;
private int userId;&lt;br/&gt;
private int friendId;&lt;br/&gt;
private int visitingbonusId;&lt;br/&gt;
private String date;&lt;br/&gt;
private String _class;&lt;/p&gt;

&lt;p&gt;public String getId() &lt;/p&gt;
{ return id; }
&lt;p&gt;public void setId(String id) &lt;/p&gt;
{ this.id = id; }
&lt;p&gt;public int getUserId() &lt;/p&gt;
{ return userId; }
&lt;p&gt;public void setUserId(int userId) &lt;/p&gt;
{ this.userId = userId; }
&lt;p&gt;public int getFriendId() &lt;/p&gt;
{ return friendId; }
&lt;p&gt;public void setFriendId(int friendId) &lt;/p&gt;
{ this.friendId = friendId; }
&lt;p&gt;public int getVisitingbonusId() &lt;/p&gt;
{ return visitingbonusId; }
&lt;p&gt;public void setVisitingbonusId(int visitingbonusId) &lt;/p&gt;
{ this.visitingbonusId = visitingbonusId; }
&lt;p&gt;public String getDate() &lt;/p&gt;
{ return date; }
&lt;p&gt;public void setDate(String date) &lt;/p&gt;
{ this.date = date; }
&lt;p&gt;public String get_class() &lt;/p&gt;
{ return _class; }
&lt;p&gt;public void set_class(String _class) &lt;/p&gt;
{ this._class = _class; }

&lt;p&gt;public void checkInsert() throws Exception&lt;br/&gt;
{&lt;br/&gt;
if(this.userId &amp;lt; 1 || this.friendId &amp;lt; 1 || this.visitingbonusId &amp;lt; 1) &lt;/p&gt;
{throw new WrongIdException();}
&lt;p&gt;if(null == this.date || this.date.equals(&quot;&quot;)) &lt;/p&gt;
{throw new WrongDateException();}
&lt;p&gt;}&lt;br/&gt;
}&lt;/p&gt;</description>
                <environment>Spring 3.0.5.RELEASE , J2&lt;a href=&quot;https://jira.spring.io/browse/SE-1&quot; title=&quot;Proposal for &amp;quot;SQLJ for Spring&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SE-1&quot;&gt;&lt;strike&gt;SE-1&lt;/strike&gt;&lt;/a&gt;.5, apache-maven-3.0.3, apache-tomcat-6.0.32, Windows7 32bit&lt;br/&gt;
MongoDB 1.8.1 &lt;br/&gt;
</environment>
        <key id="40497">DATAMONGO-227</key>
            <summary>I inserted document by MongoTemplate.insert using spring-data.  But sometimes not inserted that document.</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="3" iconUrl="https://jira.spring.io/images/icons/priorities/major.png">Major</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="neomi2428">jace park</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2011 22:23:15 +0000</created>
                <updated>Mon, 25 Mar 2013 10:22:36 +0000</updated>
                            <resolved>Fri, 26 Aug 2011 09:00:00 +0000</resolved>
                                    <version>1.0 M3</version>
                                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="71811" author="neomi2428" created="Wed, 27 Jul 2011 22:29:54 +0000"  >&lt;p&gt;Item class&lt;/p&gt;</comment>
                            <comment id="71812" author="neomi2428" created="Wed, 27 Jul 2011 22:30:10 +0000"  >&lt;p&gt;Dao Class&lt;/p&gt;</comment>
                            <comment id="71528" author="neomi2428" created="Wed, 27 Jul 2011 22:30:58 +0000"  >&lt;p&gt;Dao Super Class for connecting MongoDB&lt;/p&gt;</comment>
                            <comment id="71813" author="olivergierke" created="Thu, 28 Jul 2011 02:26:04 +0000"  >&lt;p&gt;What does &apos;sometimes&apos; mean exactly? What exception do you get? Make sure you have the &lt;tt&gt;WriteConcern&lt;/tt&gt; on the &lt;tt&gt;MongoTemplate&lt;/tt&gt; explicitly as the default used by Mongo does not throw exceptions in every case (unique indexes violated etc.).&lt;/p&gt;</comment>
                            <comment id="71822" author="neomi2428" created="Thu, 28 Jul 2011 20:44:06 +0000"  >&lt;p&gt;If I insert 100 documents, 1 document was not inserted.&lt;br/&gt;
I didn&apos;t see Throw.&lt;br/&gt;
But I don&apos;t get document that I insert. That is null.&lt;/p&gt;</comment>
                            <comment id="71821" author="olivergierke" created="Thu, 28 Jul 2011 22:27:55 +0000"  >&lt;p&gt;Please configure a more strict &lt;tt&gt;WriteConcern&lt;/tt&gt; on the &lt;tt&gt;MongoTemplate&lt;/tt&gt; bean and retry?&lt;/p&gt;</comment>
                            <comment id="71824" author="neomi2428" created="Thu, 28 Jul 2011 22:40:00 +0000"  >&lt;p&gt;I dont know how to set WriteConcern? is it about applicationContext.xml?&lt;/p&gt;</comment>
                            <comment id="71826" author="neomi2428" created="Thu, 28 Jul 2011 22:42:44 +0000"  >&lt;p&gt;ah~ I found WriteConcern. I will follow your guide line for concern.&lt;/p&gt;</comment>
                            <comment id="71825" author="neomi2428" created="Thu, 28 Jul 2011 22:43:05 +0000"  >&lt;p&gt;ah~ I found WriteConcern. I will follow your guide line for WriteConcern. please tell me&lt;/p&gt;</comment>
                            <comment id="71827" author="olivergierke" created="Thu, 28 Jul 2011 23:06:01 +0000"  >&lt;p&gt;I already mentioned to set the &lt;tt&gt;WriteConcern&lt;/tt&gt; &lt;b&gt;on the &lt;tt&gt;MongoTemplate&lt;/tt&gt;&lt;/b&gt;. There&apos;s a setter that can be used.&lt;/p&gt;</comment>
                            <comment id="71891" author="olivergierke" created="Fri, 26 Aug 2011 09:00:00 +0000"  >&lt;p&gt;Closed due to inactivity.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="40447">DATAMONGO-220</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="18958" name="ActivityBonus.java" size="1533" author="neomi2428" created="Wed, 27 Jul 2011 22:29:54 +0000"/>
                            <attachment id="18961" name="ActivityBonusDaoImpl.java" size="1056" author="neomi2428" created="Wed, 27 Jul 2011 22:30:10 +0000"/>
                            <attachment id="18962" name="MongoDao.java" size="1132" author="neomi2428" created="Wed, 27 Jul 2011 22:30:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Thu, 28 Jul 2011 02:26:04 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>28126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i010pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>