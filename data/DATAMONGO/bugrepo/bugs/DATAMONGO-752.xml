<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:10:58 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-752/DATAMONGO-752.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-752] QueryMapper prevents searching for values that start with a $ [dollarsign]</title>
                <link>https://jira.spring.io/browse/DATAMONGO-752</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;When querying for values that start with a dollar sign the QueryMapper.Keyword#isKeyword recognizes this as a keyword, resulting in a ClassCastException (QueryMapper.java:311)&lt;/p&gt;

&lt;p&gt;The following snippet demonstrates this behaviour:&lt;/p&gt;
&lt;p/&gt;
&lt;div id=&quot;syntaxplugin&quot; class=&quot;syntaxplugin&quot; style=&quot;border: 1px dashed #bbb; border-radius: 5px !important; overflow: auto; max-height: 30em;&quot;&gt;
&lt;table cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; width=&quot;100%&quot; style=&quot;font-size: 1em; line-height: 1.4em !important; font-weight: normal; font-style: normal; color: black;&quot;&gt;
		&lt;tbody &gt;
				&lt;tr id=&quot;syntaxplugin_code_and_gutter&quot;&gt;
						&lt;td  style=&quot; line-height: 1.4em !important; padding: 0em; vertical-align: top;&quot;&gt;
					&lt;pre style=&quot;font-size: 1em; margin: 0 10px;  margin-top: 10px;   margin-bottom: 10px;  width: auto; padding: 0;&quot;&gt;&lt;span style=&quot;color: black; font-family: &apos;Consolas&apos;, &apos;Bitstream Vera Sans Mono&apos;, &apos;Courier New&apos;, Courier, monospace !important;&quot;&gt;mongoTemplate.find(query(where(&quot;myvalue&quot;).is(&quot;$334&quot;)), My.class);&lt;/span&gt;&lt;/pre&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
			&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;p/&gt;

&lt;p&gt;The mongo keywords (&apos;$gt&apos; etc.) would usually be provided with the associated methods (.gt() etc.). A is() query should either not try to recognize keywords or at least be more specific (not only check for a leading &apos;$&apos;).&lt;/p&gt;

&lt;p&gt;How could a query for a value that starts with a dollar sign be written otherwise, using the Spring MongoTemplate?&lt;/p&gt;</description>
                <environment></environment>
        <key id="50831">DATAMONGO-752</key>
            <summary>QueryMapper prevents searching for values that start with a $ [dollarsign]</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olivergierke">Oliver Gierke</assignee>
                                    <reporter username="zefixlluja">Jochen Munz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Sep 2013 03:48:06 +0000</created>
                <updated>Fri, 25 Oct 2013 08:50:30 +0000</updated>
                            <resolved>Sun, 13 Oct 2013 04:53:00 +0000</resolved>
                                    <version>1.2.3</version>
                    <version>1.3.1</version>
                                    <fixVersion>1.3.2 (Babbage SR1)</fixVersion>
                    <fixVersion>1.4 M1 (Codd)</fixVersion>
                                    <component>Mapping</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                <comments>
                            <comment id="94400" author="virpi" created="Fri, 11 Oct 2013 01:05:29 +0000"  >&lt;p&gt;Also updates like this &lt;/p&gt;

&lt;p&gt;mongoTemplate.findAndModify(&lt;br/&gt;
    new Query(Criteria.where(&quot;username&quot;).is(username)),&lt;br/&gt;
    new Update().set(&quot;password&quot;, passwordHash).set(&quot;passwordLastChanged&quot;, modified),&lt;br/&gt;
    UserAccount.class);&lt;/p&gt;

&lt;p&gt;fail when the passwordHash string begins with $. &lt;/p&gt;

&lt;p&gt;Above code works fine with version 1.0.4. &lt;br/&gt;
This bug prevents us from updating to 1.3.1 although we&apos;d like to use the aggregation framework.&lt;/p&gt;

&lt;p&gt;Details:&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: java.lang.String cannot be cast to com.mongodb.DBObject&lt;br/&gt;
	at org.springframework.data.mongodb.core.convert.QueryMapper.getMappedObject(QueryMapper.java:111)&lt;br/&gt;
	at org.springframework.data.mongodb.core.convert.QueryMapper.convertSimpleOrDBObject(QueryMapper.java:223)&lt;br/&gt;
	at org.springframework.data.mongodb.core.convert.QueryMapper.getMappedKeyword(QueryMapper.java:144)&lt;br/&gt;
	at org.springframework.data.mongodb.core.convert.QueryMapper.getMappedObject(QueryMapper.java:83)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.doFindAndModify(MongoTemplate.java:1541)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.findAndModify(MongoTemplate.java:610)&lt;br/&gt;
	at org.springframework.data.mongodb.core.MongoTemplate.findAndModify(MongoTemplate.java:605)&lt;br/&gt;
	...&lt;/p&gt;</comment>
                            <comment id="94463" author="olivergierke" created="Sun, 13 Oct 2013 04:53:00 +0000"  >&lt;p&gt;I chose to tighten the detection of keywords based on whether we&apos;re looking at a plain &lt;tt&gt;String&lt;/tt&gt; or a nested &lt;tt&gt;DBObject&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;I had a draft, checking for documented keywords directly but decided to not to go with it for now to prevent us from having to change the code if MongoDB introduces a new keyword. We might revisit that later. Feel free to give the snapshots a spin.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Fri, 11 Oct 2013 01:05:29 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37325</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i007ef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1215</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_10480" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="23">The Road to Codd M1</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>