<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:54:44 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-420/DATAMONGO-420.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-420] Extra quotes being added to @Query values and fields</title>
                <link>https://jira.spring.io/browse/DATAMONGO-420</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;Quotes are being added to values passed into @Query annotations.&lt;/p&gt;

&lt;p&gt;@Query( value = &quot;&lt;/p&gt;
{ ?0 }
&lt;p&gt;&quot;, fields = &quot;&lt;/p&gt;
{ ?1 }
&lt;p&gt;&quot; )&lt;br/&gt;
someMethod( String values, String fields );&lt;/p&gt;

&lt;p&gt;Whatever I pass into &quot;values&quot; or &quot;fields&quot; gets wrapped in quotes when inserted into the query sent to MongoDB.&lt;/p&gt;

&lt;p&gt;String values = &quot;value : &apos;things&apos;&quot;;&lt;br/&gt;
  -&amp;gt; rendered as - &lt;/p&gt;
{ &quot;value : &apos;things&apos;&quot; }
&lt;p&gt;  -&amp;gt; This is not a valid query - the double quotes around it break it.&lt;/p&gt;

&lt;p&gt;String values = &quot;field : 0&quot;;&lt;br/&gt;
  -&amp;gt; rendered as - &lt;/p&gt;
{ &quot;field : 0&quot; }
&lt;p&gt;  -&amp;gt; This is not a valid projection - the double quotes around it break it.&lt;/p&gt;

&lt;p&gt;String values = &quot;field\&quot; : \&quot;0&quot;;&lt;br/&gt;
  -&amp;gt; rendered as - &lt;/p&gt;
{ &quot;field&quot; : &quot;0&quot; }
&lt;p&gt;  -&amp;gt; This is not a valid projection - the double quotes around zero turn it into a string so it renders as &quot;true&quot; instead of 0/undefined.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</description>
                <environment>jdk6, mongo-java-driver-2.7.2, windows/linux</environment>
        <key id="42676">DATAMONGO-420</key>
            <summary>Extra quotes being added to @Query values and fields</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="4" iconUrl="https://jira.spring.io/images/icons/priorities/minor.png">Minor</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomasd">Thomas Darimont</assignee>
                                    <reporter username="sbzoom">Charles Harvey</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Mar 2012 10:09:35 +0000</created>
                <updated>Tue, 21 Oct 2014 04:52:14 +0000</updated>
                            <resolved>Thu, 17 Jul 2014 12:51:47 +0000</resolved>
                                    <version>1.0.1</version>
                                    <fixVersion>1.5.2 (Dijkstra SR2)</fixVersion>
                    <fixVersion>1.6 RC1 (Evans)</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <timeoriginalestimate seconds="0">0d</timeoriginalestimate>
                            <timeestimate seconds="0">0d</timeestimate>
                                        <comments>
                            <comment id="77315" author="olivergierke" created="Mon, 2 Apr 2012 06:46:05 +0000"  >&lt;p&gt;The placeholders are not designed to contain key/value pairs but rather bind parameters such as in every other query language. Beyond that I&apos;d argue that it violates the responsibility of a repository as it exposes the data structure of the query language to the clients. If you&apos;d like to define arbitrarily flexible queries on the client side have a look at our &lt;a href=&quot;http://static.springsource.org/spring-data/data-mongodb/docs/1.0.1.RELEASE/reference/html/#d0e3919&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Querydsl support&lt;/a&gt; and the way you can define predicates and execute them against the repositories.&lt;/p&gt;</comment>
                            <comment id="83728" author="sbzoom" created="Thu, 20 Sep 2012 12:34:45 +0000"  >&lt;p&gt;So I really looked into this and it isn&apos;t just when I am trying to add whole values. It happens all the time. Double quotes are added to my terms and they should not be.&lt;/p&gt;

&lt;p&gt;Here is another example:&lt;/p&gt;

&lt;p&gt;@Query(&quot;{ &apos;title&apos; : &lt;/p&gt;
{ $regex : /^?0/, $options : &apos;i&apos; }
&lt;p&gt; }&quot;)&lt;br/&gt;
Page&amp;lt;Thing&amp;gt; findByTitleBeginsWith(String title, Pageable pageable);&lt;/p&gt;

&lt;p&gt;-&amp;gt; Rendered as:&lt;br/&gt;
    { &apos;title&apos; : &lt;/p&gt;
{ $regex : /^&quot;Stuff&quot;/, $options : &apos;i&apos; }
&lt;p&gt; }&lt;/p&gt;

&lt;p&gt;See the extra double quotes? Happens every time. If I try to do anything fancy with a query (regex), the query always fails because of these quotes. Please have a look. I have to create a lot more CustomImpl methods than I thought I would have to.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="83729" author="sbzoom" created="Thu, 20 Sep 2012 12:35:48 +0000"  >&lt;p&gt;Added a comment. Double quotes get added to every query parameter. This breaks the query every time anything it is doing anything more than passing the parameter directly (regex).&lt;/p&gt;</comment>
                            <comment id="83730" author="sbzoom" created="Thu, 20 Sep 2012 13:01:12 +0000"  >&lt;p&gt;Maybe this does not have to get re-opened. If I add all my fancy regex in the String it can work.&lt;/p&gt;

&lt;p&gt;String query = &quot;/^Stuff/&quot;;  (instead of &quot;Stuff&quot;)&lt;/p&gt;

&lt;p&gt;It would be nice to not have to do that though. So I guess it isn&apos;t a bug but a desired feature.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="85595" author="olivergierke" created="Thu, 29 Nov 2012 04:47:57 +0000"  >&lt;p&gt;Yes, this is in line to what I&apos;ve stated initially. Placeholders are defined to bind &lt;b&gt;entire keys or values&lt;/b&gt; and handled appropriately. If the parameter to bind is a &lt;tt&gt;String&lt;/tt&gt; it gets escaped by double quotes. All other types get passed as necessary: &lt;tt&gt;Date&lt;/tt&gt;, &lt;tt&gt;Pattern&lt;/tt&gt; and all other complex objects get marshalled before being passed into the object.&lt;/p&gt;</comment>
                            <comment id="104059" author="thomasd" created="Mon, 2 Jun 2014 08:17:13 +0000"  >&lt;p&gt;I added support for controlling the quote handling for query and field values in &lt;tt&gt;@Query&lt;/tt&gt; via a &lt;tt&gt;customQuoting&lt;/tt&gt; property. This enables a user to explicitly specify an already quoted query part himself.&lt;/p&gt;

&lt;p&gt;Please revise.&lt;/p&gt;</comment>
                            <comment id="105572" author="thomasd" created="Thu, 10 Jul 2014 06:09:18 +0000"  >&lt;p&gt;Please revise.&lt;/p&gt;</comment>
                            <comment id="105840" author="thomasd" created="Wed, 16 Jul 2014 08:49:05 +0000"  >&lt;p&gt;Please revise.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="60199">DATAMONGO-1072</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mon, 2 Apr 2012 06:46:05 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>cstrobl</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10684" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Pull Request URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/spring-projects/spring-data-mongodb/pull/185]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i001w7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>308</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10120" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>Reference URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://forum.springsource.org/showthread.php?124629-MongoDB-Extra-quotes-being-added-to-Query-values-and-fields]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10480" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="34">43 - Babbage SR3</customfieldvalue>
    <customfieldvalue id="37">44 - Codd GA</customfieldvalue>
    <customfieldvalue id="40">45 - Dijkstra M1</customfieldvalue>
    <customfieldvalue id="42">46 - Codd SR2</customfieldvalue>
    <customfieldvalue id="44">47 - Dijkstra RC1</customfieldvalue>
    <customfieldvalue id="48">48 - Dijkstra GA</customfieldvalue>
    <customfieldvalue id="52">49 - Dijkstra SR1</customfieldvalue>
    <customfieldvalue id="53">50 - Evans M1</customfieldvalue>
    <customfieldvalue id="55">51 - Dijkstra SR2</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>