<!-- 
RSS generated by JIRA (6.4.11#64026-sha1:78f6ec473a3f058bd5d6c30e9319c7ab376bdb9c) at Thu Dec 22 15:53:25 UTC 2016

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://jira.spring.io/si/jira.issueviews:issue-xml/DATAMONGO-102/DATAMONGO-102.xml?field=key&amp;field=summary
-->
<rss version="0.92" >
<channel>
    <title>Spring JIRA</title>
    <link>https://jira.spring.io</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>6.4.11</version>
        <build-number>64026</build-number>
        <build-date>25-08-2015</build-date>
    </build-info>

<item>
            <title>[DATAMONGO-102] Update does not let you $set across multiple fields</title>
                <link>https://jira.spring.io/browse/DATAMONGO-102</link>
                <project id="10701" key="DATAMONGO">Spring Data MongoDB</project>
                    <description>&lt;p&gt;There is no way to $set multiple fields in one update.&lt;/p&gt;

&lt;p&gt;I had a look at the implementation of update, and a call like this&lt;/p&gt;

&lt;p&gt;Update update = new Update();&lt;br/&gt;
update.set(&quot;field1&quot;, &quot;value1&quot;);&lt;br/&gt;
update.set(&quot;field2&quot;, &quot;value2&quot;);&lt;/p&gt;

&lt;p&gt;concludes with field1 being excluded from the update.&lt;/p&gt;

&lt;p&gt;It is possible to update the document in one call using the driver, so it should be possible to update in one call using the MongoTemplate:&lt;/p&gt;

&lt;p&gt;DBObject update = new BasicDBObjectBuilder().add(&quot;field1&quot;, &quot;value1&quot;).add(&quot;field2&quot;, &quot;value2&quot;).get();&lt;br/&gt;
DBObject set = new BasicDBObjectBuilder().add(&quot;$set&quot;, update).get();&lt;br/&gt;
DBObject query = new BasicDBObjectBuilder().add(&quot;_id&quot;, 1234L).get();&lt;br/&gt;
DBCollection collection = getCollection();&lt;br/&gt;
collection.update(query, set, false, false, WriteConcern.SAFE);&lt;/p&gt;

&lt;p&gt;Oliver, can you let me know if it is acceptable to open defects like this without clearing it with you first?&lt;/p&gt;

&lt;p&gt;Cheers&lt;/p&gt;

&lt;p&gt;Stu&lt;/p&gt;</description>
                <environment></environment>
        <key id="40410">DATAMONGO-102</key>
            <summary>Update does not let you $set across multiple fields</summary>
                <type id="1" iconUrl="https://jira.spring.io/images/icons/issuetypes/bug.png">Bug</type>
                                            <priority id="2" iconUrl="https://jira.spring.io/images/icons/priorities/critical.png">Critical</priority>
                        <status id="6" iconUrl="https://jira.spring.io/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomas.risberg">Thomas Risberg</assignee>
                                    <reporter username="stuartrexking">Stuart King</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Apr 2011 18:32:43 +0000</created>
                <updated>Mon, 25 Mar 2013 09:31:09 +0000</updated>
                            <resolved>Sat, 30 Apr 2011 14:45:13 +0000</resolved>
                                    <version>1.0 M2</version>
                                    <fixVersion>1.0 M3</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                <comments>
                            <comment id="71612" author="olivergierke" created="Sat, 23 Apr 2011 02:39:34 +0000"  >&lt;p&gt;Of course it is &lt;img class=&quot;emoticon&quot; src=&quot;https://jira.spring.io/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="71624" author="mark.pollack" created="Tue, 26 Apr 2011 07:33:06 +0000"  >&lt;p&gt;consider the use of org.springframework.util.LinkedMulitValueMap to store multiple values for $set, $unset keys.  then in getUpdateObject iterate over those keys to build up the appropriate structure that nests the various criteria under a &apos;root&apos; $set node.&lt;/p&gt;

&lt;p&gt;Similar issue with $or queries which is in the linked issue.&lt;/p&gt;</comment>
                            <comment id="71634" author="thomas.risberg" created="Sat, 30 Apr 2011 14:45:13 +0000"  >&lt;p&gt;added support to specify multiple fields&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10151">
                    <name>Relate</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="40257">DATAMONGO-232</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="40412">DATAMONGO-96</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_10170" key="com.atlassian.jira.ext.charting:firstresponsedate">
                        <customfieldname>First Response Date</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Sat, 23 Apr 2011 02:39:34 +0000</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10280" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10182" key="com.atlassian.jira.toolkit:lastupdaterorcommenter">
                        <customfieldname>Last updater</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>tmarshall</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_10880" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i04zdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10380" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29107</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_10381" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Ranking</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>24047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_10171" key="com.atlassian.jira.ext.charting:timeinstatus">
                        <customfieldname>Time in Status</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                </customfields>
    </item>
</channel>
</rss>